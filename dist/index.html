<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zu(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Rt={},Es=[],sn=()=>{},tb=()=>!1,rl=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),$u=n=>n.startsWith("onUpdate:"),fe=Object.assign,qu=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},eb=Object.prototype.hasOwnProperty,At=(n,t)=>eb.call(n,t),ut=Array.isArray,ws=n=>sl(n)==="[object Map]",Xm=n=>sl(n)==="[object Set]",dt=n=>typeof n=="function",Wt=n=>typeof n=="string",ir=n=>typeof n=="symbol",Ut=n=>n!==null&&typeof n=="object",Jm=n=>(Ut(n)||dt(n))&&dt(n.then)&&dt(n.catch),Zm=Object.prototype.toString,sl=n=>Zm.call(n),nb=n=>sl(n).slice(8,-1),tg=n=>sl(n)==="[object Object]",Ku=n=>Wt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Si=zu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),il=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},rb=/-(\w)/g,je=il(n=>n.replace(rb,(t,e)=>e?e.toUpperCase():"")),sb=/\B([A-Z])/g,Qr=il(n=>n.replace(sb,"-$1").toLowerCase()),ol=il(n=>n.charAt(0).toUpperCase()+n.slice(1)),ic=il(n=>n?`on${ol(n)}`:""),Kn=(n,t)=>!Object.is(n,t),oa=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},eg=(n,t,e,r=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:r,value:e})},Oc=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let sd;const al=()=>sd||(sd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ts(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++){const r=n[e],s=Wt(r)?lb(r):Ts(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Wt(n)||Ut(n))return n}const ib=/;(?![^(]*\))/g,ob=/:([^]+)/,ab=/\/\*[^]*?\*\//g;function lb(n){const t={};return n.replace(ab,"").split(ib).forEach(e=>{if(e){const r=e.split(ob);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function mn(n){let t="";if(Wt(n))t=n;else if(ut(n))for(let e=0;e<n.length;e++){const r=mn(n[e]);r&&(t+=r+" ")}else if(Ut(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const cb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ub=zu(cb);function ng(n){return!!n||n===""}const rg=n=>!!(n&&n.__v_isRef===!0),kt=n=>Wt(n)?n:n==null?"":ut(n)||Ut(n)&&(n.toString===Zm||!dt(n.toString))?rg(n)?kt(n.value):JSON.stringify(n,sg,2):String(n),sg=(n,t)=>rg(t)?sg(n,t.value):ws(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,s],i)=>(e[oc(r,i)+" =>"]=s,e),{})}:Xm(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>oc(e))}:ir(t)?oc(t):Ut(t)&&!ut(t)&&!tg(t)?String(t):t,oc=(n,t="")=>{var e;return ir(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _e;class ig{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_e,!t&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=_e;try{return _e=this,t()}finally{_e=e}}}on(){_e=this}off(){_e=this.parent}stop(t){if(this._active){this._active=!1;let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function og(n){return new ig(n)}function ag(){return _e}function hb(n,t=!1){_e&&_e.cleanups.push(n)}let Vt;const ac=new WeakSet;class lg{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_e&&_e.active&&_e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ac.has(this)&&(ac.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ug(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,id(this),hg(this);const t=Vt,e=Ge;Vt=this,Ge=!0;try{return this.fn()}finally{fg(this),Vt=t,Ge=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Wu(t);this.deps=this.depsTail=void 0,id(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ac.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nc(this)&&this.run()}get dirty(){return Nc(this)}}let cg=0,Pi,Ci;function ug(n,t=!1){if(n.flags|=8,t){n.next=Ci,Ci=n;return}n.next=Pi,Pi=n}function Gu(){cg++}function Hu(){if(--cg>0)return;if(Ci){let t=Ci;for(Ci=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Pi;){let t=Pi;for(Pi=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){n||(n=r)}t=e}}if(n)throw n}function hg(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function fg(n){let t,e=n.depsTail,r=e;for(;r;){const s=r.prevDep;r.version===-1?(r===e&&(e=s),Wu(r),fb(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=t,n.depsTail=e}function Nc(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(dg(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function dg(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Wi))return;n.globalVersion=Wi;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Nc(n)){n.flags&=-3;return}const e=Vt,r=Ge;Vt=n,Ge=!0;try{hg(n);const s=n.fn(n._value);(t.version===0||Kn(s,n._value))&&(n._value=s,t.version++)}catch(s){throw t.version++,s}finally{Vt=e,Ge=r,fg(n),n.flags&=-3}}function Wu(n,t=!1){const{dep:e,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),e.subs===n&&(e.subs=r,!r&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)Wu(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function fb(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Ge=!0;const pg=[];function or(){pg.push(Ge),Ge=!1}function ar(){const n=pg.pop();Ge=n===void 0?!0:n}function id(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=Vt;Vt=void 0;try{t()}finally{Vt=e}}}let Wi=0;class db{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Qu{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Vt||!Ge||Vt===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Vt)e=this.activeLink=new db(Vt,this),Vt.deps?(e.prevDep=Vt.depsTail,Vt.depsTail.nextDep=e,Vt.depsTail=e):Vt.deps=Vt.depsTail=e,mg(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const r=e.nextDep;r.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=r),e.prevDep=Vt.depsTail,e.nextDep=void 0,Vt.depsTail.nextDep=e,Vt.depsTail=e,Vt.deps===e&&(Vt.deps=r)}return e}trigger(t){this.version++,Wi++,this.notify(t)}notify(t){Gu();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Hu()}}}function mg(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)mg(r)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Ia=new WeakMap,Vr=Symbol(""),Mc=Symbol(""),Qi=Symbol("");function ce(n,t,e){if(Ge&&Vt){let r=Ia.get(n);r||Ia.set(n,r=new Map);let s=r.get(e);s||(r.set(e,s=new Qu),s.map=r,s.key=e),s.track()}}function _n(n,t,e,r,s,i){const o=Ia.get(n);if(!o){Wi++;return}const l=c=>{c&&c.trigger()};if(Gu(),t==="clear")o.forEach(l);else{const c=ut(n),u=c&&Ku(e);if(c&&e==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===Qi||!ir(m)&&m>=f)&&l(p)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),u&&l(o.get(Qi)),t){case"add":c?u&&l(o.get("length")):(l(o.get(Vr)),ws(n)&&l(o.get(Mc)));break;case"delete":c||(l(o.get(Vr)),ws(n)&&l(o.get(Mc)));break;case"set":ws(n)&&l(o.get(Vr));break}}Hu()}function pb(n,t){const e=Ia.get(n);return e&&e.get(t)}function rs(n){const t=Tt(n);return t===n?t:(ce(t,"iterate",Qi),He(n)?t:t.map(ye))}function Yu(n){return ce(n=Tt(n),"iterate",Qi),n}const mb={__proto__:null,[Symbol.iterator](){return lc(this,Symbol.iterator,ye)},concat(...n){return rs(this).concat(...n.map(t=>ut(t)?rs(t):t))},entries(){return lc(this,"entries",n=>(n[1]=ye(n[1]),n))},every(n,t){return dn(this,"every",n,t,void 0,arguments)},filter(n,t){return dn(this,"filter",n,t,e=>e.map(ye),arguments)},find(n,t){return dn(this,"find",n,t,ye,arguments)},findIndex(n,t){return dn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return dn(this,"findLast",n,t,ye,arguments)},findLastIndex(n,t){return dn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return dn(this,"forEach",n,t,void 0,arguments)},includes(...n){return cc(this,"includes",n)},indexOf(...n){return cc(this,"indexOf",n)},join(n){return rs(this).join(n)},lastIndexOf(...n){return cc(this,"lastIndexOf",n)},map(n,t){return dn(this,"map",n,t,void 0,arguments)},pop(){return fi(this,"pop")},push(...n){return fi(this,"push",n)},reduce(n,...t){return od(this,"reduce",n,t)},reduceRight(n,...t){return od(this,"reduceRight",n,t)},shift(){return fi(this,"shift")},some(n,t){return dn(this,"some",n,t,void 0,arguments)},splice(...n){return fi(this,"splice",n)},toReversed(){return rs(this).toReversed()},toSorted(n){return rs(this).toSorted(n)},toSpliced(...n){return rs(this).toSpliced(...n)},unshift(...n){return fi(this,"unshift",n)},values(){return lc(this,"values",ye)}};function lc(n,t,e){const r=Yu(n),s=r[t]();return r!==n&&!He(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=e(i.value)),i}),s}const gb=Array.prototype;function dn(n,t,e,r,s,i){const o=Yu(n),l=o!==n&&!He(n),c=o[t];if(c!==gb[t]){const p=c.apply(n,i);return l?ye(p):p}let u=e;o!==n&&(l?u=function(p,m){return e.call(this,ye(p),m,n)}:e.length>2&&(u=function(p,m){return e.call(this,p,m,n)}));const f=c.call(o,u,r);return l&&s?s(f):f}function od(n,t,e,r){const s=Yu(n);let i=e;return s!==n&&(He(n)?e.length>3&&(i=function(o,l,c){return e.call(this,o,l,c,n)}):i=function(o,l,c){return e.call(this,o,ye(l),c,n)}),s[t](i,...r)}function cc(n,t,e){const r=Tt(n);ce(r,"iterate",Qi);const s=r[t](...e);return(s===-1||s===!1)&&Zu(e[0])?(e[0]=Tt(e[0]),r[t](...e)):s}function fi(n,t,e=[]){or(),Gu();const r=Tt(n)[t].apply(n,e);return Hu(),ar(),r}const _b=zu("__proto__,__v_isRef,__isVue"),gg=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ir));function yb(n){ir(n)||(n=String(n));const t=Tt(this);return ce(t,"has",n),t.hasOwnProperty(n)}class _g{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if(e==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(s?i?Pb:Eg:i?bg:vg).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=ut(t);if(!s){let c;if(o&&(c=mb[e]))return c;if(e==="hasOwnProperty")return yb}const l=Reflect.get(t,e,$t(t)?t:r);return(ir(e)?gg.has(e):_b(e))||(s||ce(t,"get",e),i)?l:$t(l)?o&&Ku(e)?l:l.value:Ut(l)?s?wg(l):ll(l):l}}class yg extends _g{constructor(t=!1){super(!1,t)}set(t,e,r,s){let i=t[e];if(!this._isShallow){const c=Fr(i);if(!He(r)&&!Fr(r)&&(i=Tt(i),r=Tt(r)),!ut(t)&&$t(i)&&!$t(r))return c?!1:(i.value=r,!0)}const o=ut(t)&&Ku(e)?Number(e)<t.length:At(t,e),l=Reflect.set(t,e,r,$t(t)?t:s);return t===Tt(s)&&(o?Kn(r,i)&&_n(t,"set",e,r):_n(t,"add",e,r)),l}deleteProperty(t,e){const r=At(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&r&&_n(t,"delete",e,void 0),s}has(t,e){const r=Reflect.has(t,e);return(!ir(e)||!gg.has(e))&&ce(t,"has",e),r}ownKeys(t){return ce(t,"iterate",ut(t)?"length":Vr),Reflect.ownKeys(t)}}class vb extends _g{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const bb=new yg,Eb=new vb,wb=new yg(!0);const Fc=n=>n,Wo=n=>Reflect.getPrototypeOf(n);function Tb(n,t,e){return function(...r){const s=this.__v_raw,i=Tt(s),o=ws(i),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=s[n](...r),f=e?Fc:t?Lc:ye;return!t&&ce(i,"iterate",c?Mc:Vr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Qo(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Ib(n,t){const e={get(s){const i=this.__v_raw,o=Tt(i),l=Tt(s);n||(Kn(s,l)&&ce(o,"get",s),ce(o,"get",l));const{has:c}=Wo(o),u=t?Fc:n?Lc:ye;if(c.call(o,s))return u(i.get(s));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&ce(Tt(s),"iterate",Vr),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Tt(i),l=Tt(s);return n||(Kn(s,l)&&ce(o,"has",s),ce(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Tt(l),u=t?Fc:n?Lc:ye;return!n&&ce(c,"iterate",Vr),l.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return fe(e,n?{add:Qo("add"),set:Qo("set"),delete:Qo("delete"),clear:Qo("clear")}:{add(s){!t&&!He(s)&&!Fr(s)&&(s=Tt(s));const i=Tt(this);return Wo(i).has.call(i,s)||(i.add(s),_n(i,"add",s,s)),this},set(s,i){!t&&!He(i)&&!Fr(i)&&(i=Tt(i));const o=Tt(this),{has:l,get:c}=Wo(o);let u=l.call(o,s);u||(s=Tt(s),u=l.call(o,s));const f=c.call(o,s);return o.set(s,i),u?Kn(i,f)&&_n(o,"set",s,i):_n(o,"add",s,i),this},delete(s){const i=Tt(this),{has:o,get:l}=Wo(i);let c=o.call(i,s);c||(s=Tt(s),c=o.call(i,s)),l&&l.call(i,s);const u=i.delete(s);return c&&_n(i,"delete",s,void 0),u},clear(){const s=Tt(this),i=s.size!==0,o=s.clear();return i&&_n(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Tb(s,n,t)}),e}function Xu(n,t){const e=Ib(n,t);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(At(e,s)&&s in r?e:r,s,i)}const Ab={get:Xu(!1,!1)},xb={get:Xu(!1,!0)},Sb={get:Xu(!0,!1)};const vg=new WeakMap,bg=new WeakMap,Eg=new WeakMap,Pb=new WeakMap;function Cb(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rb(n){return n.__v_skip||!Object.isExtensible(n)?0:Cb(nb(n))}function ll(n){return Fr(n)?n:Ju(n,!1,bb,Ab,vg)}function Vb(n){return Ju(n,!1,wb,xb,bg)}function wg(n){return Ju(n,!0,Eb,Sb,Eg)}function Ju(n,t,e,r,s){if(!Ut(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const o=Rb(n);if(o===0)return n;const l=new Proxy(n,o===2?r:e);return s.set(n,l),l}function Dr(n){return Fr(n)?Dr(n.__v_raw):!!(n&&n.__v_isReactive)}function Fr(n){return!!(n&&n.__v_isReadonly)}function He(n){return!!(n&&n.__v_isShallow)}function Zu(n){return n?!!n.__v_raw:!1}function Tt(n){const t=n&&n.__v_raw;return t?Tt(t):n}function th(n){return!At(n,"__v_skip")&&Object.isExtensible(n)&&eg(n,"__v_skip",!0),n}const ye=n=>Ut(n)?ll(n):n,Lc=n=>Ut(n)?wg(n):n;function $t(n){return n?n.__v_isRef===!0:!1}function Aa(n){return Db(n,!1)}function Db(n,t){return $t(n)?n:new kb(n,t)}class kb{constructor(t,e){this.dep=new Qu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Tt(t),this._value=e?t:ye(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,r=this.__v_isShallow||He(t)||Fr(t);t=r?t:Tt(t),Kn(t,e)&&(this._rawValue=t,this._value=r?t:ye(t),this.dep.trigger())}}function ft(n){return $t(n)?n.value:n}const Ob={get:(n,t,e)=>t==="__v_raw"?n:ft(Reflect.get(n,t,e)),set:(n,t,e,r)=>{const s=n[t];return $t(s)&&!$t(e)?(s.value=e,!0):Reflect.set(n,t,e,r)}};function Tg(n){return Dr(n)?n:new Proxy(n,Ob)}function Nb(n){const t=ut(n)?new Array(n.length):{};for(const e in n)t[e]=Fb(n,e);return t}class Mb{constructor(t,e,r){this._object=t,this._key=e,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return pb(Tt(this._object),this._key)}}function Fb(n,t,e){const r=n[t];return $t(r)?r:new Mb(n,t,e)}class Lb{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Qu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Vt!==this)return ug(this,!0),!0}get value(){const t=this.dep.track();return dg(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Bb(n,t,e=!1){let r,s;return dt(n)?r=n:(r=n.get,s=n.set),new Lb(r,s,e)}const Yo={},xa=new WeakMap;let Er;function Ub(n,t=!1,e=Er){if(e){let r=xa.get(e);r||xa.set(e,r=[]),r.push(n)}}function jb(n,t,e=Rt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=e,u=U=>s?U:He(U)||s===!1||s===0?yn(U,1):yn(U);let f,p,m,E,R=!1,V=!1;if($t(n)?(p=()=>n.value,R=He(n)):Dr(n)?(p=()=>u(n),R=!0):ut(n)?(V=!0,R=n.some(U=>Dr(U)||He(U)),p=()=>n.map(U=>{if($t(U))return U.value;if(Dr(U))return u(U);if(dt(U))return c?c(U,2):U()})):dt(n)?t?p=c?()=>c(n,2):n:p=()=>{if(m){or();try{m()}finally{ar()}}const U=Er;Er=f;try{return c?c(n,3,[E]):n(E)}finally{Er=U}}:p=sn,t&&s){const U=p,Z=s===!0?1/0:s;p=()=>yn(U(),Z)}const v=ag(),N=()=>{f.stop(),v&&v.active&&qu(v.effects,f)};if(i&&t){const U=t;t=(...Z)=>{U(...Z),N()}}let D=V?new Array(n.length).fill(Yo):Yo;const L=U=>{if(!(!(f.flags&1)||!f.dirty&&!U))if(t){const Z=f.run();if(s||R||(V?Z.some((at,T)=>Kn(at,D[T])):Kn(Z,D))){m&&m();const at=Er;Er=f;try{const T=[Z,D===Yo?void 0:V&&D[0]===Yo?[]:D,E];c?c(t,3,T):t(...T),D=Z}finally{Er=at}}}else f.run()};return l&&l(L),f=new lg(p),f.scheduler=o?()=>o(L,!1):L,E=U=>Ub(U,!1,f),m=f.onStop=()=>{const U=xa.get(f);if(U){if(c)c(U,4);else for(const Z of U)Z();xa.delete(f)}},t?r?L(!0):D=f.run():o?o(L.bind(null,!0),!0):f.run(),N.pause=f.pause.bind(f),N.resume=f.resume.bind(f),N.stop=N,N}function yn(n,t=1/0,e){if(t<=0||!Ut(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,$t(n))yn(n.value,t,e);else if(ut(n))for(let r=0;r<n.length;r++)yn(n[r],t,e);else if(Xm(n)||ws(n))n.forEach(r=>{yn(r,t,e)});else if(tg(n)){for(const r in n)yn(n[r],t,e);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&yn(n[r],t,e)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vo(n,t,e,r){try{return r?n(...r):n()}catch(s){cl(s,t,e)}}function on(n,t,e,r){if(dt(n)){const s=vo(n,t,e,r);return s&&Jm(s)&&s.catch(i=>{cl(i,t,e)}),s}if(ut(n)){const s=[];for(let i=0;i<n.length;i++)s.push(on(n[i],t,e,r));return s}}function cl(n,t,e,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Rt;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](n,c,u)===!1)return}l=l.parent}if(i){or(),vo(i,null,10,[n,c,u]),ar();return}}zb(n,e,s,r,o)}function zb(n,t,e,r=!0,s=!1){if(s)throw n;console.error(n)}const ve=[];let Xe=-1;const Is=[];let jn=null,ds=0;const Ig=Promise.resolve();let Sa=null;function Ag(n){const t=Sa||Ig;return n?t.then(this?n.bind(this):n):t}function $b(n){let t=Xe+1,e=ve.length;for(;t<e;){const r=t+e>>>1,s=ve[r],i=Yi(s);i<n||i===n&&s.flags&2?t=r+1:e=r}return t}function eh(n){if(!(n.flags&1)){const t=Yi(n),e=ve[ve.length-1];!e||!(n.flags&2)&&t>=Yi(e)?ve.push(n):ve.splice($b(t),0,n),n.flags|=1,xg()}}function xg(){Sa||(Sa=Ig.then(Pg))}function qb(n){ut(n)?Is.push(...n):jn&&n.id===-1?jn.splice(ds+1,0,n):n.flags&1||(Is.push(n),n.flags|=1),xg()}function ad(n,t,e=Xe+1){for(;e<ve.length;e++){const r=ve[e];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;ve.splice(e,1),e--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Sg(n){if(Is.length){const t=[...new Set(Is)].sort((e,r)=>Yi(e)-Yi(r));if(Is.length=0,jn){jn.push(...t);return}for(jn=t,ds=0;ds<jn.length;ds++){const e=jn[ds];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}jn=null,ds=0}}const Yi=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Pg(n){try{for(Xe=0;Xe<ve.length;Xe++){const t=ve[Xe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),vo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xe<ve.length;Xe++){const t=ve[Xe];t&&(t.flags&=-2)}Xe=-1,ve.length=0,Sg(),Sa=null,(ve.length||Is.length)&&Pg()}}let Ae=null,Cg=null;function Pa(n){const t=Ae;return Ae=n,Cg=n&&n.type.__scopeId||null,t}function Kb(n,t=Ae,e){if(!t||n._n)return n;const r=(...s)=>{r._d&&_d(-1);const i=Pa(t);let o;try{o=n(...s)}finally{Pa(i),r._d&&_d(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ss(n,t){if(Ae===null)return n;const e=dl(Ae),r=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,l,c=Rt]=t[s];i&&(dt(i)&&(i={mounted:i,updated:i}),i.deep&&yn(o),r.push({dir:i,instance:e,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function _r(n,t,e,r){const s=n.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(or(),on(c,e,8,[n.el,l,n,t]),ar())}}const Gb=Symbol("_vte"),Hb=n=>n.__isTeleport;function nh(n,t){n.shapeFlag&6&&n.component?(n.transition=t,nh(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Wb(n,t){return dt(n)?fe({name:n.name},t,{setup:n}):n}function Rg(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Ca(n,t,e,r,s=!1){if(ut(n)){n.forEach((R,V)=>Ca(R,t&&(ut(t)?t[V]:t),e,r,s));return}if(Ri(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ca(n,t,e,r.component.subTree);return}const i=r.shapeFlag&4?dl(r.component):r.el,o=s?null:i,{i:l,r:c}=n,u=t&&t.r,f=l.refs===Rt?l.refs={}:l.refs,p=l.setupState,m=Tt(p),E=p===Rt?()=>!1:R=>At(m,R);if(u!=null&&u!==c&&(Wt(u)?(f[u]=null,E(u)&&(p[u]=null)):$t(u)&&(u.value=null)),dt(c))vo(c,l,12,[o,f]);else{const R=Wt(c),V=$t(c);if(R||V){const v=()=>{if(n.f){const N=R?E(c)?p[c]:f[c]:c.value;s?ut(N)&&qu(N,i):ut(N)?N.includes(i)||N.push(i):R?(f[c]=[i],E(c)&&(p[c]=f[c])):(c.value=[i],n.k&&(f[n.k]=c.value))}else R?(f[c]=o,E(c)&&(p[c]=o)):V&&(c.value=o,n.k&&(f[n.k]=o))};o?(v.id=-1,Ce(v,e)):v()}}}al().requestIdleCallback;al().cancelIdleCallback;const Ri=n=>!!n.type.__asyncLoader,Vg=n=>n.type.__isKeepAlive;function Qb(n,t){Dg(n,"a",t)}function Yb(n,t){Dg(n,"da",t)}function Dg(n,t,e=ne){const r=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(ul(t,r,e),e){let s=e.parent;for(;s&&s.parent;)Vg(s.parent.vnode)&&Xb(r,t,e,s),s=s.parent}}function Xb(n,t,e,r){const s=ul(t,n,r,!0);Og(()=>{qu(r[t],s)},e)}function ul(n,t,e=ne,r=!1){if(e){const s=e[n]||(e[n]=[]),i=t.__weh||(t.__weh=(...o)=>{or();const l=bo(e),c=on(t,e,n,o);return l(),ar(),c});return r?s.unshift(i):s.push(i),i}}const Sn=n=>(t,e=ne)=>{(!Ji||n==="sp")&&ul(n,(...r)=>t(...r),e)},Jb=Sn("bm"),kg=Sn("m"),Zb=Sn("bu"),t1=Sn("u"),e1=Sn("bum"),Og=Sn("um"),n1=Sn("sp"),r1=Sn("rtg"),s1=Sn("rtc");function i1(n,t=ne){ul("ec",n,t)}const o1="components";function a1(n,t){return c1(o1,n,!0,t)||n}const l1=Symbol.for("v-ndc");function c1(n,t,e=!0,r=!1){const s=Ae||ne;if(s){const i=s.type;{const l=Z1(i,!1);if(l&&(l===t||l===je(t)||l===ol(je(t))))return i}const o=ld(s[n]||i[n],t)||ld(s.appContext[n],t);return!o&&r?i:o}}function ld(n,t){return n&&(n[t]||n[je(t)]||n[ol(je(t))])}const Bc=n=>n?e_(n)?dl(n):Bc(n.parent):null,Vi=fe(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Bc(n.parent),$root:n=>Bc(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Mg(n),$forceUpdate:n=>n.f||(n.f=()=>{eh(n.update)}),$nextTick:n=>n.n||(n.n=Ag.bind(n.proxy)),$watch:n=>D1.bind(n)}),uc=(n,t)=>n!==Rt&&!n.__isScriptSetup&&At(n,t),u1={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=n;let u;if(t[0]!=="$"){const E=o[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return s[t];case 4:return e[t];case 3:return i[t]}else{if(uc(r,t))return o[t]=1,r[t];if(s!==Rt&&At(s,t))return o[t]=2,s[t];if((u=n.propsOptions[0])&&At(u,t))return o[t]=3,i[t];if(e!==Rt&&At(e,t))return o[t]=4,e[t];Uc&&(o[t]=0)}}const f=Vi[t];let p,m;if(f)return t==="$attrs"&&ce(n.attrs,"get",""),f(n);if((p=l.__cssModules)&&(p=p[t]))return p;if(e!==Rt&&At(e,t))return o[t]=4,e[t];if(m=c.config.globalProperties,At(m,t))return m[t]},set({_:n},t,e){const{data:r,setupState:s,ctx:i}=n;return uc(s,t)?(s[t]=e,!0):r!==Rt&&At(r,t)?(r[t]=e,!0):At(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(i[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!e[o]||n!==Rt&&At(n,o)||uc(t,o)||(l=i[0])&&At(l,o)||At(r,o)||At(Vi,o)||At(s.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:At(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function cd(n){return ut(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Uc=!0;function h1(n){const t=Mg(n),e=n.proxy,r=n.ctx;Uc=!1,t.beforeCreate&&ud(t.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:E,updated:R,activated:V,deactivated:v,beforeDestroy:N,beforeUnmount:D,destroyed:L,unmounted:U,render:Z,renderTracked:at,renderTriggered:T,errorCaptured:_,serverPrefetch:y,expose:I,inheritAttrs:x,components:S,directives:b,filters:pe}=t;if(u&&f1(u,r,null),o)for(const pt in o){const Et=o[pt];dt(Et)&&(r[pt]=Et.bind(e))}if(s){const pt=s.call(e,e);Ut(pt)&&(n.data=ll(pt))}if(Uc=!0,i)for(const pt in i){const Et=i[pt],$e=dt(Et)?Et.bind(e,e):dt(Et.get)?Et.get.bind(e,e):sn,ur=!dt(Et)&&dt(Et.set)?Et.set.bind(e):sn,cn=Ve({get:$e,set:ur});Object.defineProperty(r,pt,{enumerable:!0,configurable:!0,get:()=>cn.value,set:Gt=>cn.value=Gt})}if(l)for(const pt in l)Ng(l[pt],r,e,pt);if(c){const pt=dt(c)?c.call(e):c;Reflect.ownKeys(pt).forEach(Et=>{y1(Et,pt[Et])})}f&&ud(f,n,"c");function Lt(pt,Et){ut(Et)?Et.forEach($e=>pt($e.bind(e))):Et&&pt(Et.bind(e))}if(Lt(Jb,p),Lt(kg,m),Lt(Zb,E),Lt(t1,R),Lt(Qb,V),Lt(Yb,v),Lt(i1,_),Lt(s1,at),Lt(r1,T),Lt(e1,D),Lt(Og,U),Lt(n1,y),ut(I))if(I.length){const pt=n.exposed||(n.exposed={});I.forEach(Et=>{Object.defineProperty(pt,Et,{get:()=>e[Et],set:$e=>e[Et]=$e})})}else n.exposed||(n.exposed={});Z&&n.render===sn&&(n.render=Z),x!=null&&(n.inheritAttrs=x),S&&(n.components=S),b&&(n.directives=b),y&&Rg(n)}function f1(n,t,e=sn){ut(n)&&(n=jc(n));for(const r in n){const s=n[r];let i;Ut(s)?"default"in s?i=Di(s.from||r,s.default,!0):i=Di(s.from||r):i=Di(s),$t(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function ud(n,t,e){on(ut(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,e)}function Ng(n,t,e,r){let s=r.includes(".")?Yg(e,r):()=>e[r];if(Wt(n)){const i=t[n];dt(i)&&ki(s,i)}else if(dt(n))ki(s,n.bind(e));else if(Ut(n))if(ut(n))n.forEach(i=>Ng(i,t,e,r));else{const i=dt(n.handler)?n.handler.bind(e):t[n.handler];dt(i)&&ki(s,i,n)}}function Mg(n){const t=n.type,{mixins:e,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!e&&!r?c=t:(c={},s.length&&s.forEach(u=>Ra(c,u,o,!0)),Ra(c,t,o)),Ut(t)&&i.set(t,c),c}function Ra(n,t,e,r=!1){const{mixins:s,extends:i}=t;i&&Ra(n,i,e,!0),s&&s.forEach(o=>Ra(n,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const l=d1[o]||e&&e[o];n[o]=l?l(n[o],t[o]):t[o]}return n}const d1={data:hd,props:fd,emits:fd,methods:bi,computed:bi,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:bi,directives:bi,watch:m1,provide:hd,inject:p1};function hd(n,t){return t?n?function(){return fe(dt(n)?n.call(this,this):n,dt(t)?t.call(this,this):t)}:t:n}function p1(n,t){return bi(jc(n),jc(t))}function jc(n){if(ut(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function ge(n,t){return n?[...new Set([].concat(n,t))]:t}function bi(n,t){return n?fe(Object.create(null),n,t):t}function fd(n,t){return n?ut(n)&&ut(t)?[...new Set([...n,...t])]:fe(Object.create(null),cd(n),cd(t??{})):t}function m1(n,t){if(!n)return t;if(!t)return n;const e=fe(Object.create(null),n);for(const r in t)e[r]=ge(n[r],t[r]);return e}function Fg(){return{app:null,config:{isNativeTag:tb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let g1=0;function _1(n,t){return function(r,s=null){dt(r)||(r=fe({},r)),s!=null&&!Ut(s)&&(s=null);const i=Fg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:g1++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:nE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&dt(f.install)?(o.add(f),f.install(u,...p)):dt(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!c){const E=u._ceVNode||Ee(r,s);return E.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(E,f,m),c=!0,u._container=f,f.__vue_app__=u,dl(E.component)}},onUnmount(f){l.push(f)},unmount(){c&&(on(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=kr;kr=u;try{return f()}finally{kr=p}}};return u}}let kr=null;function y1(n,t){if(ne){let e=ne.provides;const r=ne.parent&&ne.parent.provides;r===e&&(e=ne.provides=Object.create(r)),e[n]=t}}function Di(n,t,e=!1){const r=ne||Ae;if(r||kr){const s=kr?kr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&dt(t)?t.call(r&&r.proxy):t}}function v1(){return!!(ne||Ae||kr)}const Lg={},Bg=()=>Object.create(Lg),Ug=n=>Object.getPrototypeOf(n)===Lg;function b1(n,t,e,r=!1){const s={},i=Bg();n.propsDefaults=Object.create(null),jg(n,t,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=r?s:Vb(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function E1(n,t,e,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,l=Tt(s),[c]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=n.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(hl(n.emitsOptions,m))continue;const E=t[m];if(c)if(At(i,m))E!==i[m]&&(i[m]=E,u=!0);else{const R=je(m);s[R]=zc(c,l,R,E,n,!1)}else E!==i[m]&&(i[m]=E,u=!0)}}}else{jg(n,t,s,i)&&(u=!0);let f;for(const p in l)(!t||!At(t,p)&&((f=Qr(p))===p||!At(t,f)))&&(c?e&&(e[p]!==void 0||e[f]!==void 0)&&(s[p]=zc(c,l,p,void 0,n,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!At(t,p))&&(delete i[p],u=!0)}u&&_n(n.attrs,"set","")}function jg(n,t,e,r){const[s,i]=n.propsOptions;let o=!1,l;if(t)for(let c in t){if(Si(c))continue;const u=t[c];let f;s&&At(s,f=je(c))?!i||!i.includes(f)?e[f]=u:(l||(l={}))[f]=u:hl(n.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Tt(e),u=l||Rt;for(let f=0;f<i.length;f++){const p=i[f];e[p]=zc(s,c,p,u[p],n,!At(u,p))}}return o}function zc(n,t,e,r,s,i){const o=n[e];if(o!=null){const l=At(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&dt(c)){const{propsDefaults:u}=s;if(e in u)r=u[e];else{const f=bo(s);r=u[e]=c.call(null,t),f()}}else r=c;s.ce&&s.ce._setProp(e,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===Qr(e))&&(r=!0))}return r}const w1=new WeakMap;function zg(n,t,e=!1){const r=e?w1:t.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},l=[];let c=!1;if(!dt(n)){const f=p=>{c=!0;const[m,E]=zg(p,t,!0);fe(o,m),E&&l.push(...E)};!e&&t.mixins.length&&t.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!i&&!c)return Ut(n)&&r.set(n,Es),Es;if(ut(i))for(let f=0;f<i.length;f++){const p=je(i[f]);dd(p)&&(o[p]=Rt)}else if(i)for(const f in i){const p=je(f);if(dd(p)){const m=i[f],E=o[p]=ut(m)||dt(m)?{type:m}:fe({},m),R=E.type;let V=!1,v=!0;if(ut(R))for(let N=0;N<R.length;++N){const D=R[N],L=dt(D)&&D.name;if(L==="Boolean"){V=!0;break}else L==="String"&&(v=!1)}else V=dt(R)&&R.name==="Boolean";E[0]=V,E[1]=v,(V||At(E,"default"))&&l.push(p)}}const u=[o,l];return Ut(n)&&r.set(n,u),u}function dd(n){return n[0]!=="$"&&!Si(n)}const $g=n=>n[0]==="_"||n==="$stable",rh=n=>ut(n)?n.map(Ze):[Ze(n)],T1=(n,t,e)=>{if(t._n)return t;const r=Kb((...s)=>rh(t(...s)),e);return r._c=!1,r},qg=(n,t,e)=>{const r=n._ctx;for(const s in n){if($g(s))continue;const i=n[s];if(dt(i))t[s]=T1(s,i,r);else if(i!=null){const o=rh(i);t[s]=()=>o}}},Kg=(n,t)=>{const e=rh(t);n.slots.default=()=>e},Gg=(n,t,e)=>{for(const r in t)(e||r!=="_")&&(n[r]=t[r])},I1=(n,t,e)=>{const r=n.slots=Bg();if(n.vnode.shapeFlag&32){const s=t._;s?(Gg(r,t,e),e&&eg(r,"_",s,!0)):qg(t,r)}else t&&Kg(n,t)},A1=(n,t,e)=>{const{vnode:r,slots:s}=n;let i=!0,o=Rt;if(r.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:Gg(s,t,e):(i=!t.$stable,qg(t,s)),o=t}else t&&(Kg(n,t),o={default:1});if(i)for(const l in s)!$g(l)&&o[l]==null&&delete s[l]},Ce=B1;function x1(n){return S1(n)}function S1(n,t){const e=al();e.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:E=sn,insertStaticContent:R}=n,V=(w,A,M,j=null,B=null,z=null,X=void 0,H=null,G=!!A.dynamicChildren)=>{if(w===A)return;w&&!di(w,A)&&(j=un(w),Gt(w,B,z,!0),w=null),A.patchFlag===-2&&(G=!1,A.dynamicChildren=null);const{type:$,ref:it,shapeFlag:J}=A;switch($){case fl:v(w,A,M,j);break;case Lr:N(w,A,M,j);break;case aa:w==null&&D(A,M,j,X);break;case gn:S(w,A,M,j,B,z,X,H,G);break;default:J&1?Z(w,A,M,j,B,z,X,H,G):J&6?b(w,A,M,j,B,z,X,H,G):(J&64||J&128)&&$.process(w,A,M,j,B,z,X,H,G,Qe)}it!=null&&B&&Ca(it,w&&w.ref,z,A||w,!A)},v=(w,A,M,j)=>{if(w==null)r(A.el=l(A.children),M,j);else{const B=A.el=w.el;A.children!==w.children&&u(B,A.children)}},N=(w,A,M,j)=>{w==null?r(A.el=c(A.children||""),M,j):A.el=w.el},D=(w,A,M,j)=>{[w.el,w.anchor]=R(w.children,A,M,j,w.el,w.anchor)},L=({el:w,anchor:A},M,j)=>{let B;for(;w&&w!==A;)B=m(w),r(w,M,j),w=B;r(A,M,j)},U=({el:w,anchor:A})=>{let M;for(;w&&w!==A;)M=m(w),s(w),w=M;s(A)},Z=(w,A,M,j,B,z,X,H,G)=>{A.type==="svg"?X="svg":A.type==="math"&&(X="mathml"),w==null?at(A,M,j,B,z,X,H,G):y(w,A,B,z,X,H,G)},at=(w,A,M,j,B,z,X,H)=>{let G,$;const{props:it,shapeFlag:J,transition:rt,dirs:lt}=w;if(G=w.el=o(w.type,z,it&&it.is,it),J&8?f(G,w.children):J&16&&_(w.children,G,null,j,B,hc(w,z),X,H),lt&&_r(w,null,j,"created"),T(G,w,w.scopeId,X,j),it){for(const mt in it)mt!=="value"&&!Si(mt)&&i(G,mt,null,it[mt],z,j);"value"in it&&i(G,"value",null,it.value,z),($=it.onVnodeBeforeMount)&&Ye($,j,w)}lt&&_r(w,null,j,"beforeMount");const ot=P1(B,rt);ot&&rt.beforeEnter(G),r(G,A,M),(($=it&&it.onVnodeMounted)||ot||lt)&&Ce(()=>{$&&Ye($,j,w),ot&&rt.enter(G),lt&&_r(w,null,j,"mounted")},B)},T=(w,A,M,j,B)=>{if(M&&E(w,M),j)for(let z=0;z<j.length;z++)E(w,j[z]);if(B){let z=B.subTree;if(A===z||Jg(z.type)&&(z.ssContent===A||z.ssFallback===A)){const X=B.vnode;T(w,X,X.scopeId,X.slotScopeIds,B.parent)}}},_=(w,A,M,j,B,z,X,H,G=0)=>{for(let $=G;$<w.length;$++){const it=w[$]=H?zn(w[$]):Ze(w[$]);V(null,it,A,M,j,B,z,X,H)}},y=(w,A,M,j,B,z,X)=>{const H=A.el=w.el;let{patchFlag:G,dynamicChildren:$,dirs:it}=A;G|=w.patchFlag&16;const J=w.props||Rt,rt=A.props||Rt;let lt;if(M&&yr(M,!1),(lt=rt.onVnodeBeforeUpdate)&&Ye(lt,M,A,w),it&&_r(A,w,M,"beforeUpdate"),M&&yr(M,!0),(J.innerHTML&&rt.innerHTML==null||J.textContent&&rt.textContent==null)&&f(H,""),$?I(w.dynamicChildren,$,H,M,j,hc(A,B),z):X||Et(w,A,H,null,M,j,hc(A,B),z,!1),G>0){if(G&16)x(H,J,rt,M,B);else if(G&2&&J.class!==rt.class&&i(H,"class",null,rt.class,B),G&4&&i(H,"style",J.style,rt.style,B),G&8){const ot=A.dynamicProps;for(let mt=0;mt<ot.length;mt++){const yt=ot[mt],re=J[yt],Xt=rt[yt];(Xt!==re||yt==="value")&&i(H,yt,re,Xt,B,M)}}G&1&&w.children!==A.children&&f(H,A.children)}else!X&&$==null&&x(H,J,rt,M,B);((lt=rt.onVnodeUpdated)||it)&&Ce(()=>{lt&&Ye(lt,M,A,w),it&&_r(A,w,M,"updated")},j)},I=(w,A,M,j,B,z,X)=>{for(let H=0;H<A.length;H++){const G=w[H],$=A[H],it=G.el&&(G.type===gn||!di(G,$)||G.shapeFlag&70)?p(G.el):M;V(G,$,it,null,j,B,z,X,!0)}},x=(w,A,M,j,B)=>{if(A!==M){if(A!==Rt)for(const z in A)!Si(z)&&!(z in M)&&i(w,z,A[z],null,B,j);for(const z in M){if(Si(z))continue;const X=M[z],H=A[z];X!==H&&z!=="value"&&i(w,z,H,X,B,j)}"value"in M&&i(w,"value",A.value,M.value,B)}},S=(w,A,M,j,B,z,X,H,G)=>{const $=A.el=w?w.el:l(""),it=A.anchor=w?w.anchor:l("");let{patchFlag:J,dynamicChildren:rt,slotScopeIds:lt}=A;lt&&(H=H?H.concat(lt):lt),w==null?(r($,M,j),r(it,M,j),_(A.children||[],M,it,B,z,X,H,G)):J>0&&J&64&&rt&&w.dynamicChildren?(I(w.dynamicChildren,rt,M,B,z,X,H),(A.key!=null||B&&A===B.subTree)&&Hg(w,A,!0)):Et(w,A,M,it,B,z,X,H,G)},b=(w,A,M,j,B,z,X,H,G)=>{A.slotScopeIds=H,w==null?A.shapeFlag&512?B.ctx.activate(A,M,j,X,G):pe(A,M,j,B,z,X,G):We(w,A,G)},pe=(w,A,M,j,B,z,X)=>{const H=w.component=W1(w,j,B);if(Vg(w)&&(H.ctx.renderer=Qe),Q1(H,!1,X),H.asyncDep){if(B&&B.registerDep(H,Lt,X),!w.el){const G=H.subTree=Ee(Lr);N(null,G,A,M)}}else Lt(H,w,A,M,B,z,X)},We=(w,A,M)=>{const j=A.component=w.component;if(F1(w,A,M))if(j.asyncDep&&!j.asyncResolved){pt(j,A,M);return}else j.next=A,j.update();else A.el=w.el,j.vnode=A},Lt=(w,A,M,j,B,z,X)=>{const H=()=>{if(w.isMounted){let{next:J,bu:rt,u:lt,parent:ot,vnode:mt}=w;{const se=Wg(w);if(se){J&&(J.el=mt.el,pt(w,J,X)),se.asyncDep.then(()=>{w.isUnmounted||H()});return}}let yt=J,re;yr(w,!1),J?(J.el=mt.el,pt(w,J,X)):J=mt,rt&&oa(rt),(re=J.props&&J.props.onVnodeBeforeUpdate)&&Ye(re,ot,J,mt),yr(w,!0);const Xt=md(w),Me=w.subTree;w.subTree=Xt,V(Me,Xt,p(Me.el),un(Me),w,B,z),J.el=Xt.el,yt===null&&L1(w,Xt.el),lt&&Ce(lt,B),(re=J.props&&J.props.onVnodeUpdated)&&Ce(()=>Ye(re,ot,J,mt),B)}else{let J;const{el:rt,props:lt}=A,{bm:ot,m:mt,parent:yt,root:re,type:Xt}=w,Me=Ri(A);yr(w,!1),ot&&oa(ot),!Me&&(J=lt&&lt.onVnodeBeforeMount)&&Ye(J,yt,A),yr(w,!0);{re.ce&&re.ce._injectChildStyle(Xt);const se=w.subTree=md(w);V(null,se,M,j,w,B,z),A.el=se.el}if(mt&&Ce(mt,B),!Me&&(J=lt&&lt.onVnodeMounted)){const se=A;Ce(()=>Ye(J,yt,se),B)}(A.shapeFlag&256||yt&&Ri(yt.vnode)&&yt.vnode.shapeFlag&256)&&w.a&&Ce(w.a,B),w.isMounted=!0,A=M=j=null}};w.scope.on();const G=w.effect=new lg(H);w.scope.off();const $=w.update=G.run.bind(G),it=w.job=G.runIfDirty.bind(G);it.i=w,it.id=w.uid,G.scheduler=()=>eh(it),yr(w,!0),$()},pt=(w,A,M)=>{A.component=w;const j=w.vnode.props;w.vnode=A,w.next=null,E1(w,A.props,j,M),A1(w,A.children,M),or(),ad(w),ar()},Et=(w,A,M,j,B,z,X,H,G=!1)=>{const $=w&&w.children,it=w?w.shapeFlag:0,J=A.children,{patchFlag:rt,shapeFlag:lt}=A;if(rt>0){if(rt&128){ur($,J,M,j,B,z,X,H,G);return}else if(rt&256){$e($,J,M,j,B,z,X,H,G);return}}lt&8?(it&16&&fr($,B,z),J!==$&&f(M,J)):it&16?lt&16?ur($,J,M,j,B,z,X,H,G):fr($,B,z,!0):(it&8&&f(M,""),lt&16&&_(J,M,j,B,z,X,H,G))},$e=(w,A,M,j,B,z,X,H,G)=>{w=w||Es,A=A||Es;const $=w.length,it=A.length,J=Math.min($,it);let rt;for(rt=0;rt<J;rt++){const lt=A[rt]=G?zn(A[rt]):Ze(A[rt]);V(w[rt],lt,M,null,B,z,X,H,G)}$>it?fr(w,B,z,!0,!1,J):_(A,M,j,B,z,X,H,G,J)},ur=(w,A,M,j,B,z,X,H,G)=>{let $=0;const it=A.length;let J=w.length-1,rt=it-1;for(;$<=J&&$<=rt;){const lt=w[$],ot=A[$]=G?zn(A[$]):Ze(A[$]);if(di(lt,ot))V(lt,ot,M,null,B,z,X,H,G);else break;$++}for(;$<=J&&$<=rt;){const lt=w[J],ot=A[rt]=G?zn(A[rt]):Ze(A[rt]);if(di(lt,ot))V(lt,ot,M,null,B,z,X,H,G);else break;J--,rt--}if($>J){if($<=rt){const lt=rt+1,ot=lt<it?A[lt].el:j;for(;$<=rt;)V(null,A[$]=G?zn(A[$]):Ze(A[$]),M,ot,B,z,X,H,G),$++}}else if($>rt)for(;$<=J;)Gt(w[$],B,z,!0),$++;else{const lt=$,ot=$,mt=new Map;for($=ot;$<=rt;$++){const Jt=A[$]=G?zn(A[$]):Ze(A[$]);Jt.key!=null&&mt.set(Jt.key,$)}let yt,re=0;const Xt=rt-ot+1;let Me=!1,se=0;const Vn=new Array(Xt);for($=0;$<Xt;$++)Vn[$]=0;for($=lt;$<=J;$++){const Jt=w[$];if(re>=Xt){Gt(Jt,B,z,!0);continue}let Fe;if(Jt.key!=null)Fe=mt.get(Jt.key);else for(yt=ot;yt<=rt;yt++)if(Vn[yt-ot]===0&&di(Jt,A[yt])){Fe=yt;break}Fe===void 0?Gt(Jt,B,z,!0):(Vn[Fe-ot]=$+1,Fe>=se?se=Fe:Me=!0,V(Jt,A[Fe],M,null,B,z,X,H,G),re++)}const Zs=Me?C1(Vn):Es;for(yt=Zs.length-1,$=Xt-1;$>=0;$--){const Jt=ot+$,Fe=A[Jt],Do=Jt+1<it?A[Jt+1].el:j;Vn[$]===0?V(null,Fe,M,Do,B,z,X,H,G):Me&&(yt<0||$!==Zs[yt]?cn(Fe,M,Do,2):yt--)}}},cn=(w,A,M,j,B=null)=>{const{el:z,type:X,transition:H,children:G,shapeFlag:$}=w;if($&6){cn(w.component.subTree,A,M,j);return}if($&128){w.suspense.move(A,M,j);return}if($&64){X.move(w,A,M,Qe);return}if(X===gn){r(z,A,M);for(let J=0;J<G.length;J++)cn(G[J],A,M,j);r(w.anchor,A,M);return}if(X===aa){L(w,A,M);return}if(j!==2&&$&1&&H)if(j===0)H.beforeEnter(z),r(z,A,M),Ce(()=>H.enter(z),B);else{const{leave:J,delayLeave:rt,afterLeave:lt}=H,ot=()=>r(z,A,M),mt=()=>{J(z,()=>{ot(),lt&&lt()})};rt?rt(z,ot,mt):mt()}else r(z,A,M)},Gt=(w,A,M,j=!1,B=!1)=>{const{type:z,props:X,ref:H,children:G,dynamicChildren:$,shapeFlag:it,patchFlag:J,dirs:rt,cacheIndex:lt}=w;if(J===-2&&(B=!1),H!=null&&Ca(H,null,M,w,!0),lt!=null&&(A.renderCache[lt]=void 0),it&256){A.ctx.deactivate(w);return}const ot=it&1&&rt,mt=!Ri(w);let yt;if(mt&&(yt=X&&X.onVnodeBeforeUnmount)&&Ye(yt,A,w),it&6)hr(w.component,M,j);else{if(it&128){w.suspense.unmount(M,j);return}ot&&_r(w,null,A,"beforeUnmount"),it&64?w.type.remove(w,A,M,Qe,j):$&&!$.hasOnce&&(z!==gn||J>0&&J&64)?fr($,A,M,!1,!0):(z===gn&&J&384||!B&&it&16)&&fr(G,A,M),j&&Ht(w)}(mt&&(yt=X&&X.onVnodeUnmounted)||ot)&&Ce(()=>{yt&&Ye(yt,A,w),ot&&_r(w,null,A,"unmounted")},M)},Ht=w=>{const{type:A,el:M,anchor:j,transition:B}=w;if(A===gn){$l(M,j);return}if(A===aa){U(w);return}const z=()=>{s(M),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(w.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:H}=B,G=()=>X(M,z);H?H(w.el,z,G):G()}else z()},$l=(w,A)=>{let M;for(;w!==A;)M=m(w),s(w),w=M;s(A)},hr=(w,A,M)=>{const{bum:j,scope:B,job:z,subTree:X,um:H,m:G,a:$}=w;pd(G),pd($),j&&oa(j),B.stop(),z&&(z.flags|=8,Gt(X,w,A,M)),H&&Ce(H,A),Ce(()=>{w.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},fr=(w,A,M,j=!1,B=!1,z=0)=>{for(let X=z;X<w.length;X++)Gt(w[X],A,M,j,B)},un=w=>{if(w.shapeFlag&6)return un(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const A=m(w.anchor||w.el),M=A&&A[Gb];return M?m(M):A};let Xs=!1;const Vo=(w,A,M)=>{w==null?A._vnode&&Gt(A._vnode,null,null,!0):V(A._vnode||null,w,A,null,null,null,M),A._vnode=w,Xs||(Xs=!0,ad(),Sg(),Xs=!1)},Qe={p:V,um:Gt,m:cn,r:Ht,mt:pe,mc:_,pc:Et,pbc:I,n:un,o:n};return{render:Vo,hydrate:void 0,createApp:_1(Vo)}}function hc({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function yr({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function P1(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Hg(n,t,e=!1){const r=n.children,s=t.children;if(ut(r)&&ut(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=zn(s[i]),l.el=o.el),!e&&l.patchFlag!==-2&&Hg(o,l)),l.type===fl&&(l.el=o.el)}}function C1(n){const t=n.slice(),e=[0];let r,s,i,o,l;const c=n.length;for(r=0;r<c;r++){const u=n[r];if(u!==0){if(s=e[e.length-1],n[s]<u){t[r]=s,e.push(r);continue}for(i=0,o=e.length-1;i<o;)l=i+o>>1,n[e[l]]<u?i=l+1:o=l;u<n[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function Wg(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Wg(t)}function pd(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const R1=Symbol.for("v-scx"),V1=()=>Di(R1);function ki(n,t,e){return Qg(n,t,e)}function Qg(n,t,e=Rt){const{immediate:r,deep:s,flush:i,once:o}=e,l=fe({},e),c=t&&r||!t&&i!=="post";let u;if(Ji){if(i==="sync"){const E=V1();u=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=sn,E.resume=sn,E.pause=sn,E}}const f=ne;l.call=(E,R,V)=>on(E,f,R,V);let p=!1;i==="post"?l.scheduler=E=>{Ce(E,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(E,R)=>{R?E():eh(E)}),l.augmentJob=E=>{t&&(E.flags|=4),p&&(E.flags|=2,f&&(E.id=f.uid,E.i=f))};const m=jb(n,t,l);return Ji&&(u?u.push(m):c&&m()),m}function D1(n,t,e){const r=this.proxy,s=Wt(n)?n.includes(".")?Yg(r,n):()=>r[n]:n.bind(r,r);let i;dt(t)?i=t:(i=t.handler,e=t);const o=bo(this),l=Qg(s,i.bind(r),e);return o(),l}function Yg(n,t){const e=t.split(".");return()=>{let r=n;for(let s=0;s<e.length&&r;s++)r=r[e[s]];return r}}const k1=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${je(t)}Modifiers`]||n[`${Qr(t)}Modifiers`];function O1(n,t,...e){if(n.isUnmounted)return;const r=n.vnode.props||Rt;let s=e;const i=t.startsWith("update:"),o=i&&k1(r,t.slice(7));o&&(o.trim&&(s=e.map(f=>Wt(f)?f.trim():f)),o.number&&(s=e.map(Oc)));let l,c=r[l=ic(t)]||r[l=ic(je(t))];!c&&i&&(c=r[l=ic(Qr(t))]),c&&on(c,n,6,s);const u=r[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,on(u,n,6,s)}}function Xg(n,t,e=!1){const r=t.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},l=!1;if(!dt(n)){const c=u=>{const f=Xg(u,t,!0);f&&(l=!0,fe(o,f))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!l?(Ut(n)&&r.set(n,null),null):(ut(i)?i.forEach(c=>o[c]=null):fe(o,i),Ut(n)&&r.set(n,o),o)}function hl(n,t){return!n||!rl(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(n,t[0].toLowerCase()+t.slice(1))||At(n,Qr(t))||At(n,t))}function md(n){const{type:t,vnode:e,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:f,props:p,data:m,setupState:E,ctx:R,inheritAttrs:V}=n,v=Pa(n);let N,D;try{if(e.shapeFlag&4){const U=s||r,Z=U;N=Ze(u.call(Z,U,f,p,E,m,R)),D=l}else{const U=t;N=Ze(U.length>1?U(p,{attrs:l,slots:o,emit:c}):U(p,null)),D=t.props?l:N1(l)}}catch(U){Oi.length=0,cl(U,n,1),N=Ee(Lr)}let L=N;if(D&&V!==!1){const U=Object.keys(D),{shapeFlag:Z}=L;U.length&&Z&7&&(i&&U.some($u)&&(D=M1(D,i)),L=Ps(L,D,!1,!0))}return e.dirs&&(L=Ps(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(e.dirs):e.dirs),e.transition&&nh(L,e.transition),N=L,Pa(v),N}const N1=n=>{let t;for(const e in n)(e==="class"||e==="style"||rl(e))&&((t||(t={}))[e]=n[e]);return t},M1=(n,t)=>{const e={};for(const r in n)(!$u(r)||!(r.slice(9)in t))&&(e[r]=n[r]);return e};function F1(n,t,e){const{props:r,children:s,component:i}=n,{props:o,children:l,patchFlag:c}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return r?gd(r,o,u):!!o;if(c&8){const f=t.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!hl(u,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?gd(r,o,u):!0:!!o;return!1}function gd(n,t,e){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==n[i]&&!hl(e,i))return!0}return!1}function L1({vnode:n,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=t.vnode).el=e,t=t.parent;else break}}const Jg=n=>n.__isSuspense;function B1(n,t){t&&t.pendingBranch?ut(n)?t.effects.push(...n):t.effects.push(n):qb(n)}const gn=Symbol.for("v-fgt"),fl=Symbol.for("v-txt"),Lr=Symbol.for("v-cmt"),aa=Symbol.for("v-stc"),Oi=[];let De=null;function Bn(n=!1){Oi.push(De=n?null:[])}function U1(){Oi.pop(),De=Oi[Oi.length-1]||null}let Xi=1;function _d(n,t=!1){Xi+=n,n<0&&De&&t&&(De.hasOnce=!0)}function Zg(n){return n.dynamicChildren=Xi>0?De||Es:null,U1(),Xi>0&&De&&De.push(n),n}function vr(n,t,e,r,s,i){return Zg(k(n,t,e,r,s,i,!0))}function j1(n,t,e,r,s){return Zg(Ee(n,t,e,r,s,!0))}function Va(n){return n?n.__v_isVNode===!0:!1}function di(n,t){return n.type===t.type&&n.key===t.key}const t_=({key:n})=>n??null,la=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Wt(n)||$t(n)||dt(n)?{i:Ae,r:n,k:t,f:!!e}:n:null);function k(n,t=null,e=null,r=0,s=null,i=n===gn?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&t_(t),ref:t&&la(t),scopeId:Cg,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ae};return l?(sh(c,e),i&128&&n.normalize(c)):e&&(c.shapeFlag|=Wt(e)?8:16),Xi>0&&!o&&De&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&De.push(c),c}const Ee=z1;function z1(n,t=null,e=null,r=0,s=null,i=!1){if((!n||n===l1)&&(n=Lr),Va(n)){const l=Ps(n,t,!0);return e&&sh(l,e),Xi>0&&!i&&De&&(l.shapeFlag&6?De[De.indexOf(n)]=l:De.push(l)),l.patchFlag=-2,l}if(tE(n)&&(n=n.__vccOpts),t){t=$1(t);let{class:l,style:c}=t;l&&!Wt(l)&&(t.class=mn(l)),Ut(c)&&(Zu(c)&&!ut(c)&&(c=fe({},c)),t.style=Ts(c))}const o=Wt(n)?1:Jg(n)?128:Hb(n)?64:Ut(n)?4:dt(n)?2:0;return k(n,t,e,r,s,o,i,!0)}function $1(n){return n?Zu(n)||Ug(n)?fe({},n):n:null}function Ps(n,t,e=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=n,u=t?K1(s||{},t):s,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&t_(u),ref:t&&t.ref?e&&i?ut(i)?i.concat(la(t)):[i,la(t)]:la(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==gn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Ps(n.ssContent),ssFallback:n.ssFallback&&Ps(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&nh(f,c.clone(f)),f}function q1(n=" ",t=0){return Ee(fl,null,n,t)}function pi(n,t){const e=Ee(aa,null,n);return e.staticCount=t,e}function yd(n="",t=!1){return t?(Bn(),j1(Lr,null,n)):Ee(Lr,null,n)}function Ze(n){return n==null||typeof n=="boolean"?Ee(Lr):ut(n)?Ee(gn,null,n.slice()):Va(n)?zn(n):Ee(fl,null,String(n))}function zn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Ps(n)}function sh(n,t){let e=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(ut(t))e=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),sh(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!Ug(t)?t._ctx=Ae:s===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:Ae},e=32):(t=String(t),r&64?(e=16,t=[q1(t)]):e=8);n.children=t,n.shapeFlag|=e}function K1(...n){const t={};for(let e=0;e<n.length;e++){const r=n[e];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=mn([t.class,r.class]));else if(s==="style")t.style=Ts([t.style,r.style]);else if(rl(s)){const i=t[s],o=r[s];o&&i!==o&&!(ut(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Ye(n,t,e,r=null){on(n,t,7,[e,r])}const G1=Fg();let H1=0;function W1(n,t,e){const r=n.type,s=(t?t.appContext:n.appContext)||G1,i={uid:H1++,vnode:n,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ig(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zg(r,s),emitsOptions:Xg(r,s),emit:null,emitted:null,propsDefaults:Rt,inheritAttrs:r.inheritAttrs,ctx:Rt,data:Rt,props:Rt,attrs:Rt,slots:Rt,refs:Rt,setupState:Rt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=O1.bind(null,i),n.ce&&n.ce(i),i}let ne=null,Da,$c;{const n=al(),t=(e,r)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Da=t("__VUE_INSTANCE_SETTERS__",e=>ne=e),$c=t("__VUE_SSR_SETTERS__",e=>Ji=e)}const bo=n=>{const t=ne;return Da(n),n.scope.on(),()=>{n.scope.off(),Da(t)}},vd=()=>{ne&&ne.scope.off(),Da(null)};function e_(n){return n.vnode.shapeFlag&4}let Ji=!1;function Q1(n,t=!1,e=!1){t&&$c(t);const{props:r,children:s}=n.vnode,i=e_(n);b1(n,r,i,t),I1(n,s,e);const o=i?Y1(n,t):void 0;return t&&$c(!1),o}function Y1(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,u1);const{setup:r}=e;if(r){or();const s=n.setupContext=r.length>1?J1(n):null,i=bo(n),o=vo(r,n,0,[n.props,s]),l=Jm(o);if(ar(),i(),(l||n.sp)&&!Ri(n)&&Rg(n),l){if(o.then(vd,vd),t)return o.then(c=>{bd(n,c)}).catch(c=>{cl(c,n,0)});n.asyncDep=o}else bd(n,o)}else n_(n)}function bd(n,t,e){dt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Ut(t)&&(n.setupState=Tg(t)),n_(n)}function n_(n,t,e){const r=n.type;n.render||(n.render=r.render||sn);{const s=bo(n);or();try{h1(n)}finally{ar(),s()}}}const X1={get(n,t){return ce(n,"get",""),n[t]}};function J1(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,X1),slots:n.slots,emit:n.emit,expose:t}}function dl(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Tg(th(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Vi)return Vi[e](n)},has(t,e){return e in t||e in Vi}})):n.proxy}function Z1(n,t=!0){return dt(n)?n.displayName||n.name:n.name||t&&n.__name}function tE(n){return dt(n)&&"__vccOpts"in n}const Ve=(n,t)=>Bb(n,t,Ji);function eE(n,t,e){const r=arguments.length;return r===2?Ut(t)&&!ut(t)?Va(t)?Ee(n,null,[t]):Ee(n,t):Ee(n,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&Va(e)&&(e=[e]),Ee(n,t,e))}const nE="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qc;const Ed=typeof window<"u"&&window.trustedTypes;if(Ed)try{qc=Ed.createPolicy("vue",{createHTML:n=>n})}catch{}const r_=qc?n=>qc.createHTML(n):n=>n,rE="http://www.w3.org/2000/svg",sE="http://www.w3.org/1998/Math/MathML",pn=typeof document<"u"?document:null,wd=pn&&pn.createElement("template"),iE={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,r)=>{const s=t==="svg"?pn.createElementNS(rE,n):t==="mathml"?pn.createElementNS(sE,n):e?pn.createElement(n,{is:e}):pn.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>pn.createTextNode(n),createComment:n=>pn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>pn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,r,s,i){const o=e?e.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===i||!(s=s.nextSibling)););else{wd.innerHTML=r_(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=wd.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},oE=Symbol("_vtc");function aE(n,t,e){const r=n[oE];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Td=Symbol("_vod"),lE=Symbol("_vsh"),cE=Symbol(""),uE=/(^|;)\s*display\s*:/;function hE(n,t,e){const r=n.style,s=Wt(e);let i=!1;if(e&&!s){if(t)if(Wt(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&ca(r,l,"")}else for(const o in t)e[o]==null&&ca(r,o,"");for(const o in e)o==="display"&&(i=!0),ca(r,o,e[o])}else if(s){if(t!==e){const o=r[cE];o&&(e+=";"+o),r.cssText=e,i=uE.test(e)}}else t&&n.removeAttribute("style");Td in n&&(n[Td]=i?r.display:"",n[lE]&&(r.display="none"))}const Id=/\s*!important$/;function ca(n,t,e){if(ut(e))e.forEach(r=>ca(n,t,r));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const r=fE(n,t);Id.test(e)?n.setProperty(Qr(r),e.replace(Id,""),"important"):n[r]=e}}const Ad=["Webkit","Moz","ms"],fc={};function fE(n,t){const e=fc[t];if(e)return e;let r=je(t);if(r!=="filter"&&r in n)return fc[t]=r;r=ol(r);for(let s=0;s<Ad.length;s++){const i=Ad[s]+r;if(i in n)return fc[t]=i}return t}const xd="http://www.w3.org/1999/xlink";function Sd(n,t,e,r,s,i=ub(t)){r&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(xd,t.slice(6,t.length)):n.setAttributeNS(xd,t,e):e==null||i&&!ng(e)?n.removeAttribute(t):n.setAttribute(t,i?"":ir(e)?String(e):e)}function Pd(n,t,e,r,s){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?r_(e):e);return}const i=n.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const l=typeof n[t];l==="boolean"?e=ng(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(s||t)}function ps(n,t,e,r){n.addEventListener(t,e,r)}function dE(n,t,e,r){n.removeEventListener(t,e,r)}const Cd=Symbol("_vei");function pE(n,t,e,r,s=null){const i=n[Cd]||(n[Cd]={}),o=i[t];if(r&&o)o.value=r;else{const[l,c]=mE(t);if(r){const u=i[t]=yE(r,s);ps(n,l,u,c)}else o&&(dE(n,l,o,c),i[t]=void 0)}}const Rd=/(?:Once|Passive|Capture)$/;function mE(n){let t;if(Rd.test(n)){t={};let r;for(;r=n.match(Rd);)n=n.slice(0,n.length-r[0].length),t[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Qr(n.slice(2)),t]}let dc=0;const gE=Promise.resolve(),_E=()=>dc||(gE.then(()=>dc=0),dc=Date.now());function yE(n,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;on(vE(r,e.value),t,5,[r])};return e.value=n,e.attached=_E(),e}function vE(n,t){if(ut(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Vd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,bE=(n,t,e,r,s,i)=>{const o=s==="svg";t==="class"?aE(n,r,o):t==="style"?hE(n,e,r):rl(t)?$u(t)||pE(n,t,e,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):EE(n,t,r,o))?(Pd(n,t,r),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Sd(n,t,r,o,i,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!Wt(r))?Pd(n,je(t),r,i,t):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),Sd(n,t,r,o))};function EE(n,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in n&&Vd(t)&&dt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Vd(t)&&Wt(e)?!1:t in n}const Dd=n=>{const t=n.props["onUpdate:modelValue"]||!1;return ut(t)?e=>oa(t,e):t};function wE(n){n.target.composing=!0}function kd(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pc=Symbol("_assign"),is={created(n,{modifiers:{lazy:t,trim:e,number:r}},s){n[pc]=Dd(s);const i=r||s.props&&s.props.type==="number";ps(n,t?"change":"input",o=>{if(o.target.composing)return;let l=n.value;e&&(l=l.trim()),i&&(l=Oc(l)),n[pc](l)}),e&&ps(n,"change",()=>{n.value=n.value.trim()}),t||(ps(n,"compositionstart",wE),ps(n,"compositionend",kd),ps(n,"change",kd))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:r,trim:s,number:i}},o){if(n[pc]=Dd(o),n.composing)return;const l=(i||n.type==="number")&&!/^0\d/.test(n.value)?Oc(n.value):n.value,c=t??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&t===e||s&&n.value.trim()===c)||(n.value=c))}},TE=["ctrl","shift","alt","meta"],IE={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>TE.some(e=>n[`${e}Key`]&&!t.includes(e))},AE=(n,t)=>{const e=n._withMods||(n._withMods={}),r=t.join(".");return e[r]||(e[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const l=IE[t[o]];if(l&&l(s,t))return}return n(s,...i)})},xE=fe({patchProp:bE},iE);let Od;function SE(){return Od||(Od=x1(xE))}const PE=(...n)=>{const t=SE().createApp(...n),{mount:e}=t;return t.mount=r=>{const s=RE(r);if(!s)return;const i=t._component;!dt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=e(s,!1,CE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function CE(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function RE(n){return Wt(n)?document.querySelector(n):n}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let s_;const pl=n=>s_=n,i_=Symbol();function Kc(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ni;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ni||(Ni={}));function VE(){const n=og(!0),t=n.run(()=>Aa({}));let e=[],r=[];const s=th({install(i){pl(s),s._a=i,i.provide(i_,s),i.config.globalProperties.$pinia=s,r.forEach(o=>e.push(o)),r=[]},use(i){return this._a?e.push(i):r.push(i),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return s}const o_=()=>{};function Nd(n,t,e,r=o_){n.push(t);const s=()=>{const i=n.indexOf(t);i>-1&&(n.splice(i,1),r())};return!e&&ag()&&hb(s),s}function os(n,...t){n.slice().forEach(e=>{e(...t)})}const DE=n=>n(),Md=Symbol(),mc=Symbol();function Gc(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,r)=>n.set(r,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const r=t[e],s=n[e];Kc(s)&&Kc(r)&&n.hasOwnProperty(e)&&!$t(r)&&!Dr(r)?n[e]=Gc(s,r):n[e]=r}return n}const kE=Symbol();function OE(n){return!Kc(n)||!Object.prototype.hasOwnProperty.call(n,kE)}const{assign:Un}=Object;function NE(n){return!!($t(n)&&n.effect)}function ME(n,t,e,r){const{state:s,actions:i,getters:o}=t,l=e.state.value[n];let c;function u(){l||(e.state.value[n]=s?s():{});const f=Nb(e.state.value[n]);return Un(f,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=th(Ve(()=>{pl(e);const E=e._s.get(n);return o[m].call(E,E)})),p),{}))}return c=a_(n,u,t,e,r,!0),c}function a_(n,t,e={},r,s,i){let o;const l=Un({actions:{}},e),c={deep:!0};let u,f,p=[],m=[],E;const R=r.state.value[n];!i&&!R&&(r.state.value[n]={}),Aa({});let V;function v(_){let y;u=f=!1,typeof _=="function"?(_(r.state.value[n]),y={type:Ni.patchFunction,storeId:n,events:E}):(Gc(r.state.value[n],_),y={type:Ni.patchObject,payload:_,storeId:n,events:E});const I=V=Symbol();Ag().then(()=>{V===I&&(u=!0)}),f=!0,os(p,y,r.state.value[n])}const N=i?function(){const{state:y}=e,I=y?y():{};this.$patch(x=>{Un(x,I)})}:o_;function D(){o.stop(),p=[],m=[],r._s.delete(n)}const L=(_,y="")=>{if(Md in _)return _[mc]=y,_;const I=function(){pl(r);const x=Array.from(arguments),S=[],b=[];function pe(pt){S.push(pt)}function We(pt){b.push(pt)}os(m,{args:x,name:I[mc],store:Z,after:pe,onError:We});let Lt;try{Lt=_.apply(this&&this.$id===n?this:Z,x)}catch(pt){throw os(b,pt),pt}return Lt instanceof Promise?Lt.then(pt=>(os(S,pt),pt)).catch(pt=>(os(b,pt),Promise.reject(pt))):(os(S,Lt),Lt)};return I[Md]=!0,I[mc]=y,I},U={_p:r,$id:n,$onAction:Nd.bind(null,m),$patch:v,$reset:N,$subscribe(_,y={}){const I=Nd(p,_,y.detached,()=>x()),x=o.run(()=>ki(()=>r.state.value[n],S=>{(y.flush==="sync"?f:u)&&_({storeId:n,type:Ni.direct,events:E},S)},Un({},c,y)));return I},$dispose:D},Z=ll(U);r._s.set(n,Z);const T=(r._a&&r._a.runWithContext||DE)(()=>r._e.run(()=>(o=og()).run(()=>t({action:L}))));for(const _ in T){const y=T[_];if($t(y)&&!NE(y)||Dr(y))i||(R&&OE(y)&&($t(y)?y.value=R[_]:Gc(y,R[_])),r.state.value[n][_]=y);else if(typeof y=="function"){const I=L(y,_);T[_]=I,l.actions[_]=y}}return Un(Z,T),Un(Tt(Z),T),Object.defineProperty(Z,"$state",{get:()=>r.state.value[n],set:_=>{v(y=>{Un(y,_)})}}),r._p.forEach(_=>{Un(Z,o.run(()=>_({store:Z,app:r._a,pinia:r,options:l})))}),R&&i&&e.hydrate&&e.hydrate(Z.$state,R),u=!0,f=!0,Z}/*! #__NO_SIDE_EFFECTS__ */function FE(n,t,e){let r;const s=typeof t=="function";r=s?e:t;function i(o,l){const c=v1();return o=o||(c?Di(i_,null):null),o&&pl(o),o=s_,o._s.has(n)||(s?a_(n,t,r,o):ME(n,r,o)),o._s.get(n)}return i.$id=n,i}class LE{constructor(){this._q={},this._counter=0}get isFileMakerEnvironment(){return typeof window<"u"&&typeof window.FileMaker<"u"}async performScript(t,e=""){var s,i,o;if(typeof window<"u"){let l=0;const c=20;for(;typeof window.FileMaker>"u"&&l<c;)l+=1,await this._sleep(100);if(typeof window.FileMaker<"u"){const u=this._counter++,f={id:u,scriptParameter:e,scriptName:t};try{return window.FileMaker.PerformScript("_fmBridgit.webhook",JSON.stringify(f)),this._registerPromise(u)}catch(p){throw console.error("Error performing FileMaker script:",p),p}}else console.error(`[FileMaker Bridge] FileMaker not available after 2 seconds. Falling back to mock for script: ${t}`)}console.log(`[FileMaker Mock] Script: ${t}`);let r=e;try{typeof e=="string"&&e.startsWith("{")&&(r=JSON.parse(e))}catch{}switch(t){case"API - Web Sync Inbound dispatcher {payload}":return console.log(`[FileMaker Mock] Processing ${((s=r==null?void 0:r.updates)==null?void 0:s.length)||0} updates, ${(r==null?void 0:r.remaining)||0} remaining`),{success:!0,message:`Processed ${((i=r==null?void 0:r.updates)==null?void 0:i.length)||0} updates successfully (mocked)`,data:{recordsProcessed:((o=r==null?void 0:r.updates)==null?void 0:o.length)||0}};case"API - Upload Complete Callback":return{success:!0,message:"Upload completed (mocked)"};case"_fmBridgit.webhook":return{success:!0,message:"Webhook received (mocked)"};case"_fmBridgit.returnResult":return{success:!0,data:e};default:return console.log(`[FileMaker Mock] Unknown script: ${t}`),{success:!0,message:`Script ${t} executed (mocked)`}}}callback(t){console.log("[FileMaker Bridge] Callback received:",t);try{const e=JSON.parse(t);console.log("[FileMaker Bridge] Parsed callback data:",e),console.log("[FileMaker Bridge] Looking for promise with ID:",e.id),console.log("[FileMaker Bridge] Active promises:",Object.keys(this._q)),this._applyPromise(e.id,e.success,e.error)}catch(e){console.error("[FileMaker Bridge] Error in callback:",e),console.error("[FileMaker Bridge] Raw param was:",t)}}returnResult(t){return this.performScript("_fmBridgit.returnResult",JSON.stringify(t))}_registerPromise(t){return new Promise((e,r)=>{this._q[t]={resolve:e,reject:r}})}_applyPromise(t,e,r){console.log("[FileMaker Bridge] Applying promise for ID:",t);const s=this._q[t];s?(console.log("[FileMaker Bridge] Found promise, resolving with:",e||r),e?s.resolve(e):r?s.reject(r):s.resolve(!0),delete this._q[t],console.log("[FileMaker Bridge] Promise resolved and removed from queue")):(console.warn("[FileMaker Bridge] No promise found for ID:",t),console.warn("[FileMaker Bridge] Available IDs:",Object.keys(this._q)))}_sleep(t){return new Promise(e=>setTimeout(e,t))}testCallback(t,e=!0,r=null){console.log("[FileMaker Bridge] Testing callback for ID:",t);const s={id:t,success:e?r||{message:"Test callback successful"}:null,error:e?null:r||"Test error"};this.callback(JSON.stringify(s))}}const Le=new LE;typeof window<"u"&&(window.fmBridgit=Le);const BE=()=>{};var Fd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},UE=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const s=n[e++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[e++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[e++],o=n[e++],l=n[e++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[e++],o=n[e++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,l=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,E=u&63;c||(E=64,o||(m=64)),r.push(e[f],e[p],e[m],e[E])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(l_(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):UE(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=e[n.charAt(s++)],l=s<n.length?e[n.charAt(s)]:0;++s;const u=s<n.length?e[n.charAt(s)]:64;++s;const p=s<n.length?e[n.charAt(s)]:64;if(++s,i==null||l==null||u==null||p==null)throw new jE;const m=i<<2|l>>4;if(r.push(m),u!==64){const E=l<<4&240|u>>2;if(r.push(E),p!==64){const R=u<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zE=function(n){const t=l_(n);return c_.encodeByteArray(t,!0)},ka=function(n){return zE(n).replace(/\./g,"")},$E=function(n){try{return c_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=()=>u_().__FIREBASE_DEFAULTS__,KE=()=>{if(typeof process>"u"||typeof Fd>"u")return;const n=Fd.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&$E(n[1]);return t&&JSON.parse(t)},ih=()=>{try{return BE()||qE()||KE()||GE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HE=n=>{var t,e;return(e=(t=ih())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},WE=n=>{const t=HE(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},h_=()=>{var n;return(n=ih())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){return n.endsWith(".cloudworkstations.dev")}async function YE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ka(JSON.stringify(e)),ka(JSON.stringify(o)),""].join(".")}const Mi={};function JE(){const n={prod:[],emulator:[]};for(const t of Object.keys(Mi))Mi[t]?n.emulator.push(t):n.prod.push(t);return n}function ZE(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Ld=!1;function f_(n,t){if(typeof window>"u"||typeof document>"u"||!oh(window.location.host)||Mi[n]===t||Mi[n]||Ld)return;Mi[n]=t;function e(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=JE().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,E){m.setAttribute("width","24"),m.setAttribute("id",E),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ld=!0,o()},m}function f(m,E){m.setAttribute("id",E),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=ZE(r),E=e("text"),R=document.getElementById(E)||document.createElement("span"),V=e("learnmore"),v=document.getElementById(V)||document.createElement("a"),N=e("preprendIcon"),D=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const L=m.element;l(L),f(v,V);const U=u();c(D,N),L.append(D,R,v,U),document.body.appendChild(L)}i?(R.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d_(){var n;const t=(n=ih())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p_(){return!d_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m_(){return!d_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function g_(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class Ks extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=ew,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,__.prototype.create)}}class __{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?nw(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ks(s,l,r)}}function nw(n,t){return n.replace(rw,(e,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const rw=/\{\$([^}]+)}/g;function Na(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const s of e){if(!r.includes(s))return!1;const i=n[s],o=t[s];if(Bd(i)&&Bd(o)){if(!Na(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!e.includes(s))return!1;return!0}function Bd(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n){return n&&n._delegate?n._delegate:n}class Zi{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new QE;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ow(t))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=wr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=wr){return this.instances.has(t)}getOptions(t=wr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(t,e){var r;const s=this.normalizeInstanceIdentifier(e),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const s of r)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iw(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=wr){return this.component?this.component.multipleInstances?t:wr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(n){return n===wr?void 0:n}function ow(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new sw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(bt||(bt={}));const lw={debug:bt.DEBUG,verbose:bt.VERBOSE,info:bt.INFO,warn:bt.WARN,error:bt.ERROR,silent:bt.SILENT},cw=bt.INFO,uw={[bt.DEBUG]:"log",[bt.VERBOSE]:"log",[bt.INFO]:"info",[bt.WARN]:"warn",[bt.ERROR]:"error"},hw=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=uw[t];if(s)console[s](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class y_{constructor(t){this.name=t,this._logLevel=cw,this._logHandler=hw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in bt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?lw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,bt.DEBUG,...t),this._logHandler(this,bt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,bt.VERBOSE,...t),this._logHandler(this,bt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,bt.INFO,...t),this._logHandler(this,bt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,bt.WARN,...t),this._logHandler(this,bt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,bt.ERROR,...t),this._logHandler(this,bt.ERROR,...t)}}const fw=(n,t)=>t.some(e=>n instanceof e);let Ud,jd;function dw(){return Ud||(Ud=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pw(){return jd||(jd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v_=new WeakMap,Hc=new WeakMap,b_=new WeakMap,gc=new WeakMap,ah=new WeakMap;function mw(n){const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{e(Gn(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&v_.set(e,n)}).catch(()=>{}),ah.set(t,n),t}function gw(n){if(Hc.has(n))return;const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{e(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Hc.set(n,t)}let Wc={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Hc.get(n);if(t==="objectStoreNames")return n.objectStoreNames||b_.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Gn(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function _w(n){Wc=n(Wc)}function yw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(_c(this),t,...e);return b_.set(r,t.sort?t.sort():[t]),Gn(r)}:pw().includes(n)?function(...t){return n.apply(_c(this),t),Gn(v_.get(this))}:function(...t){return Gn(n.apply(_c(this),t))}}function vw(n){return typeof n=="function"?yw(n):(n instanceof IDBTransaction&&gw(n),fw(n,dw())?new Proxy(n,Wc):n)}function Gn(n){if(n instanceof IDBRequest)return mw(n);if(gc.has(n))return gc.get(n);const t=vw(n);return t!==n&&(gc.set(n,t),ah.set(t,n)),t}const _c=n=>ah.get(n);function bw(n,t,{blocked:e,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,t),l=Gn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gn(o.result),c.oldVersion,c.newVersion,Gn(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ew=["get","getKey","getAll","getAllKeys","count"],ww=["put","add","delete","clear"],yc=new Map;function zd(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(yc.get(t))return yc.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,s=ww.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ew.includes(e)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[e](...l),s&&c.done]))[0]};return yc.set(t,i),i}_w(n=>({...n,get:(t,e,r)=>zd(t,e)||n.get(t,e,r),has:(t,e)=>!!zd(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Iw(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function Iw(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qc="@firebase/app",$d="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new y_("@firebase/app"),Aw="@firebase/app-compat",xw="@firebase/analytics-compat",Sw="@firebase/analytics",Pw="@firebase/app-check-compat",Cw="@firebase/app-check",Rw="@firebase/auth",Vw="@firebase/auth-compat",Dw="@firebase/database",kw="@firebase/data-connect",Ow="@firebase/database-compat",Nw="@firebase/functions",Mw="@firebase/functions-compat",Fw="@firebase/installations",Lw="@firebase/installations-compat",Bw="@firebase/messaging",Uw="@firebase/messaging-compat",jw="@firebase/performance",zw="@firebase/performance-compat",$w="@firebase/remote-config",qw="@firebase/remote-config-compat",Kw="@firebase/storage",Gw="@firebase/storage-compat",Hw="@firebase/firestore",Ww="@firebase/ai",Qw="@firebase/firestore-compat",Yw="firebase",Xw="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="[DEFAULT]",Jw={[Qc]:"fire-core",[Aw]:"fire-core-compat",[Sw]:"fire-analytics",[xw]:"fire-analytics-compat",[Cw]:"fire-app-check",[Pw]:"fire-app-check-compat",[Rw]:"fire-auth",[Vw]:"fire-auth-compat",[Dw]:"fire-rtdb",[kw]:"fire-data-connect",[Ow]:"fire-rtdb-compat",[Nw]:"fire-fn",[Mw]:"fire-fn-compat",[Fw]:"fire-iid",[Lw]:"fire-iid-compat",[Bw]:"fire-fcm",[Uw]:"fire-fcm-compat",[jw]:"fire-perf",[zw]:"fire-perf-compat",[$w]:"fire-rc",[qw]:"fire-rc-compat",[Kw]:"fire-gcs",[Gw]:"fire-gcs-compat",[Hw]:"fire-fst",[Qw]:"fire-fst-compat",[Ww]:"fire-vertex","fire-js":"fire-js",[Yw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new Map,Zw=new Map,Xc=new Map;function qd(n,t){try{n.container.addComponent(t)}catch(e){wn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Fa(n){const t=n.name;if(Xc.has(t))return wn.debug(`There were multiple attempts to register component ${t}.`),!1;Xc.set(t,n);for(const e of Ma.values())qd(e,n);for(const e of Zw.values())qd(e,n);return!0}function tT(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function eT(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new __("app","Firebase",nT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=Xw;function E_(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Yc,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw Hn.create("bad-app-name",{appName:String(s)});if(e||(e=h_()),!e)throw Hn.create("no-options");const i=Ma.get(s);if(i){if(Na(e,i.options)&&Na(r,i.config))return i;throw Hn.create("duplicate-app",{appName:s})}const o=new aw(s);for(const c of Xc.values())o.addComponent(c);const l=new rT(e,r,o);return Ma.set(s,l),l}function iT(n=Yc){const t=Ma.get(n);if(!t&&n===Yc&&h_())return E_();if(!t)throw Hn.create("no-app",{appName:n});return t}function As(n,t,e){var r;let s=(r=Jw[n])!==null&&r!==void 0?r:n;e&&(s+=`-${e}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),wn.warn(l.join(" "));return}Fa(new Zi(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebase-heartbeat-database",aT=1,to="firebase-heartbeat-store";let vc=null;function w_(){return vc||(vc=bw(oT,aT,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(to)}catch(e){console.warn(e)}}}}).catch(n=>{throw Hn.create("idb-open",{originalErrorMessage:n.message})})),vc}async function lT(n){try{const e=(await w_()).transaction(to),r=await e.objectStore(to).get(T_(n));return await e.done,r}catch(t){if(t instanceof Ks)wn.warn(t.message);else{const e=Hn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});wn.warn(e.message)}}}async function Kd(n,t){try{const r=(await w_()).transaction(to,"readwrite");await r.objectStore(to).put(t,T_(n)),await r.done}catch(e){if(e instanceof Ks)wn.warn(e.message);else{const r=Hn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});wn.warn(r.message)}}}function T_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=1024,uT=30;class hT{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new dT(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gd();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>uT){const o=pT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gd(),{heartbeatsToSend:r,unsentEntries:s}=fT(this._heartbeatsCache.heartbeats),i=ka(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return wn.warn(e),""}}}function Gd(){return new Date().toISOString().substring(0,10)}function fT(n,t=cT){const e=[];let r=n.slice();for(const s of n){const i=e.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Hd(e)>t){i.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),Hd(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class dT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g_()?tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await lT(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kd(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kd(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Hd(n){return ka(JSON.stringify({version:2,heartbeats:n})).length}function pT(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(n){Fa(new Zi("platform-logger",t=>new Tw(t),"PRIVATE")),Fa(new Zi("heartbeat",t=>new hT(t),"PRIVATE")),As(Qc,$d,n),As(Qc,$d,"esm2017"),As("fire-js","")}mT("");var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wn,I_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function y(){}y.prototype=_.prototype,T.D=_.prototype,T.prototype=new y,T.prototype.constructor=T,T.C=function(I,x,S){for(var b=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)b[pe-2]=arguments[pe];return _.prototype[x].apply(I,b)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,y){y||(y=0);var I=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)I[x]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(x=0;16>x;++x)I[x]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=T.g[0],y=T.g[1],x=T.g[2];var S=T.g[3],b=_+(S^y&(x^S))+I[0]+3614090360&4294967295;_=y+(b<<7&4294967295|b>>>25),b=S+(x^_&(y^x))+I[1]+3905402710&4294967295,S=_+(b<<12&4294967295|b>>>20),b=x+(y^S&(_^y))+I[2]+606105819&4294967295,x=S+(b<<17&4294967295|b>>>15),b=y+(_^x&(S^_))+I[3]+3250441966&4294967295,y=x+(b<<22&4294967295|b>>>10),b=_+(S^y&(x^S))+I[4]+4118548399&4294967295,_=y+(b<<7&4294967295|b>>>25),b=S+(x^_&(y^x))+I[5]+1200080426&4294967295,S=_+(b<<12&4294967295|b>>>20),b=x+(y^S&(_^y))+I[6]+2821735955&4294967295,x=S+(b<<17&4294967295|b>>>15),b=y+(_^x&(S^_))+I[7]+4249261313&4294967295,y=x+(b<<22&4294967295|b>>>10),b=_+(S^y&(x^S))+I[8]+1770035416&4294967295,_=y+(b<<7&4294967295|b>>>25),b=S+(x^_&(y^x))+I[9]+2336552879&4294967295,S=_+(b<<12&4294967295|b>>>20),b=x+(y^S&(_^y))+I[10]+4294925233&4294967295,x=S+(b<<17&4294967295|b>>>15),b=y+(_^x&(S^_))+I[11]+2304563134&4294967295,y=x+(b<<22&4294967295|b>>>10),b=_+(S^y&(x^S))+I[12]+1804603682&4294967295,_=y+(b<<7&4294967295|b>>>25),b=S+(x^_&(y^x))+I[13]+4254626195&4294967295,S=_+(b<<12&4294967295|b>>>20),b=x+(y^S&(_^y))+I[14]+2792965006&4294967295,x=S+(b<<17&4294967295|b>>>15),b=y+(_^x&(S^_))+I[15]+1236535329&4294967295,y=x+(b<<22&4294967295|b>>>10),b=_+(x^S&(y^x))+I[1]+4129170786&4294967295,_=y+(b<<5&4294967295|b>>>27),b=S+(y^x&(_^y))+I[6]+3225465664&4294967295,S=_+(b<<9&4294967295|b>>>23),b=x+(_^y&(S^_))+I[11]+643717713&4294967295,x=S+(b<<14&4294967295|b>>>18),b=y+(S^_&(x^S))+I[0]+3921069994&4294967295,y=x+(b<<20&4294967295|b>>>12),b=_+(x^S&(y^x))+I[5]+3593408605&4294967295,_=y+(b<<5&4294967295|b>>>27),b=S+(y^x&(_^y))+I[10]+38016083&4294967295,S=_+(b<<9&4294967295|b>>>23),b=x+(_^y&(S^_))+I[15]+3634488961&4294967295,x=S+(b<<14&4294967295|b>>>18),b=y+(S^_&(x^S))+I[4]+3889429448&4294967295,y=x+(b<<20&4294967295|b>>>12),b=_+(x^S&(y^x))+I[9]+568446438&4294967295,_=y+(b<<5&4294967295|b>>>27),b=S+(y^x&(_^y))+I[14]+3275163606&4294967295,S=_+(b<<9&4294967295|b>>>23),b=x+(_^y&(S^_))+I[3]+4107603335&4294967295,x=S+(b<<14&4294967295|b>>>18),b=y+(S^_&(x^S))+I[8]+1163531501&4294967295,y=x+(b<<20&4294967295|b>>>12),b=_+(x^S&(y^x))+I[13]+2850285829&4294967295,_=y+(b<<5&4294967295|b>>>27),b=S+(y^x&(_^y))+I[2]+4243563512&4294967295,S=_+(b<<9&4294967295|b>>>23),b=x+(_^y&(S^_))+I[7]+1735328473&4294967295,x=S+(b<<14&4294967295|b>>>18),b=y+(S^_&(x^S))+I[12]+2368359562&4294967295,y=x+(b<<20&4294967295|b>>>12),b=_+(y^x^S)+I[5]+4294588738&4294967295,_=y+(b<<4&4294967295|b>>>28),b=S+(_^y^x)+I[8]+2272392833&4294967295,S=_+(b<<11&4294967295|b>>>21),b=x+(S^_^y)+I[11]+1839030562&4294967295,x=S+(b<<16&4294967295|b>>>16),b=y+(x^S^_)+I[14]+4259657740&4294967295,y=x+(b<<23&4294967295|b>>>9),b=_+(y^x^S)+I[1]+2763975236&4294967295,_=y+(b<<4&4294967295|b>>>28),b=S+(_^y^x)+I[4]+1272893353&4294967295,S=_+(b<<11&4294967295|b>>>21),b=x+(S^_^y)+I[7]+4139469664&4294967295,x=S+(b<<16&4294967295|b>>>16),b=y+(x^S^_)+I[10]+3200236656&4294967295,y=x+(b<<23&4294967295|b>>>9),b=_+(y^x^S)+I[13]+681279174&4294967295,_=y+(b<<4&4294967295|b>>>28),b=S+(_^y^x)+I[0]+3936430074&4294967295,S=_+(b<<11&4294967295|b>>>21),b=x+(S^_^y)+I[3]+3572445317&4294967295,x=S+(b<<16&4294967295|b>>>16),b=y+(x^S^_)+I[6]+76029189&4294967295,y=x+(b<<23&4294967295|b>>>9),b=_+(y^x^S)+I[9]+3654602809&4294967295,_=y+(b<<4&4294967295|b>>>28),b=S+(_^y^x)+I[12]+3873151461&4294967295,S=_+(b<<11&4294967295|b>>>21),b=x+(S^_^y)+I[15]+530742520&4294967295,x=S+(b<<16&4294967295|b>>>16),b=y+(x^S^_)+I[2]+3299628645&4294967295,y=x+(b<<23&4294967295|b>>>9),b=_+(x^(y|~S))+I[0]+4096336452&4294967295,_=y+(b<<6&4294967295|b>>>26),b=S+(y^(_|~x))+I[7]+1126891415&4294967295,S=_+(b<<10&4294967295|b>>>22),b=x+(_^(S|~y))+I[14]+2878612391&4294967295,x=S+(b<<15&4294967295|b>>>17),b=y+(S^(x|~_))+I[5]+4237533241&4294967295,y=x+(b<<21&4294967295|b>>>11),b=_+(x^(y|~S))+I[12]+1700485571&4294967295,_=y+(b<<6&4294967295|b>>>26),b=S+(y^(_|~x))+I[3]+2399980690&4294967295,S=_+(b<<10&4294967295|b>>>22),b=x+(_^(S|~y))+I[10]+4293915773&4294967295,x=S+(b<<15&4294967295|b>>>17),b=y+(S^(x|~_))+I[1]+2240044497&4294967295,y=x+(b<<21&4294967295|b>>>11),b=_+(x^(y|~S))+I[8]+1873313359&4294967295,_=y+(b<<6&4294967295|b>>>26),b=S+(y^(_|~x))+I[15]+4264355552&4294967295,S=_+(b<<10&4294967295|b>>>22),b=x+(_^(S|~y))+I[6]+2734768916&4294967295,x=S+(b<<15&4294967295|b>>>17),b=y+(S^(x|~_))+I[13]+1309151649&4294967295,y=x+(b<<21&4294967295|b>>>11),b=_+(x^(y|~S))+I[4]+4149444226&4294967295,_=y+(b<<6&4294967295|b>>>26),b=S+(y^(_|~x))+I[11]+3174756917&4294967295,S=_+(b<<10&4294967295|b>>>22),b=x+(_^(S|~y))+I[2]+718787259&4294967295,x=S+(b<<15&4294967295|b>>>17),b=y+(S^(x|~_))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var y=_-this.blockSize,I=this.B,x=this.h,S=0;S<_;){if(x==0)for(;S<=y;)s(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<_;)if(I[x++]=T.charCodeAt(S++),x==this.blockSize){s(this,I),x=0;break}}else for(;S<_;)if(I[x++]=T[S++],x==this.blockSize){s(this,I),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var y=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=y&255,y/=256;for(this.u(T),T=Array(16),_=y=0;4>_;++_)for(var I=0;32>I;I+=8)T[y++]=this.g[_]>>>I&255;return T};function i(T,_){var y=l;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=_(T)}function o(T,_){this.h=_;for(var y=[],I=!0,x=T.length-1;0<=x;x--){var S=T[x]|0;I&&S==_||(y[x]=S,I=!1)}this.g=y}var l={};function c(T){return-128<=T&&128>T?i(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return v(u(-T));for(var _=[],y=1,I=0;T>=y;I++)_[I]=T/y|0,y*=4294967296;return new o(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return v(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(_,8)),I=p,x=0;x<T.length;x+=8){var S=Math.min(8,T.length-x),b=parseInt(T.substring(x,x+S),_);8>S?(S=u(Math.pow(_,S)),I=I.j(S).add(u(b))):(I=I.j(y),I=I.add(u(b)))}return I}var p=c(0),m=c(1),E=c(16777216);n=o.prototype,n.m=function(){if(V(this))return-v(this).m();for(var T=0,_=1,y=0;y<this.g.length;y++){var I=this.i(y);T+=(0<=I?I:4294967296+I)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R(this))return"0";if(V(this))return"-"+v(this).toString(T);for(var _=u(Math.pow(T,6)),y=this,I="";;){var x=U(y,_).g;y=N(y,x.j(_));var S=((0<y.g.length?y.g[0]:y.h)>>>0).toString(T);if(y=x,R(y))return S+I;for(;6>S.length;)S="0"+S;I=S+I}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function R(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function V(T){return T.h==-1}n.l=function(T){return T=N(this,T),V(T)?-1:R(T)?0:1};function v(T){for(var _=T.g.length,y=[],I=0;I<_;I++)y[I]=~T.g[I];return new o(y,~T.h).add(m)}n.abs=function(){return V(this)?v(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],I=0,x=0;x<=_;x++){var S=I+(this.i(x)&65535)+(T.i(x)&65535),b=(S>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);I=b>>>16,S&=65535,b&=65535,y[x]=b<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function N(T,_){return T.add(v(_))}n.j=function(T){if(R(this)||R(T))return p;if(V(this))return V(T)?v(this).j(v(T)):v(v(this).j(T));if(V(T))return v(this.j(v(T)));if(0>this.l(E)&&0>T.l(E))return u(this.m()*T.m());for(var _=this.g.length+T.g.length,y=[],I=0;I<2*_;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<T.g.length;x++){var S=this.i(I)>>>16,b=this.i(I)&65535,pe=T.i(x)>>>16,We=T.i(x)&65535;y[2*I+2*x]+=b*We,D(y,2*I+2*x),y[2*I+2*x+1]+=S*We,D(y,2*I+2*x+1),y[2*I+2*x+1]+=b*pe,D(y,2*I+2*x+1),y[2*I+2*x+2]+=S*pe,D(y,2*I+2*x+2)}for(I=0;I<_;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=_;I<2*_;I++)y[I]=0;return new o(y,0)};function D(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function L(T,_){this.g=T,this.h=_}function U(T,_){if(R(_))throw Error("division by zero");if(R(T))return new L(p,p);if(V(T))return _=U(v(T),_),new L(v(_.g),v(_.h));if(V(_))return _=U(T,v(_)),new L(v(_.g),_.h);if(30<T.g.length){if(V(T)||V(_))throw Error("slowDivide_ only works with positive integers.");for(var y=m,I=_;0>=I.l(T);)y=Z(y),I=Z(I);var x=at(y,1),S=at(I,1);for(I=at(I,2),y=at(y,2);!R(I);){var b=S.add(I);0>=b.l(T)&&(x=x.add(y),S=b),I=at(I,1),y=at(y,1)}return _=N(T,x.j(_)),new L(x,_)}for(x=p;0<=T.l(_);){for(y=Math.max(1,Math.floor(T.m()/_.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),S=u(y),b=S.j(_);V(b)||0<b.l(T);)y-=I,S=u(y),b=S.j(_);R(S)&&(S=m),x=x.add(S),T=N(T,b)}return new L(x,T)}n.A=function(T){return U(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)&T.i(I);return new o(y,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)|T.i(I);return new o(y,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],I=0;I<_;I++)y[I]=this.i(I)^T.i(I);return new o(y,this.h^T.h)};function Z(T){for(var _=T.g.length+1,y=[],I=0;I<_;I++)y[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(y,T.h)}function at(T,_){var y=_>>5;_%=32;for(var I=T.g.length-y,x=[],S=0;S<I;S++)x[S]=0<_?T.i(S+y)>>>_|T.i(S+y+1)<<32-_:T.i(S+y);return new o(x,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,I_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Wn=o}).apply(typeof Wd<"u"?Wd:typeof self<"u"?self:typeof window<"u"?window:{});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A_,Ei,x_,ua,Jc,S_,P_,C_;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,d){return a==Array.prototype||a==Object.prototype||(a[h]=d.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xo=="object"&&Xo];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=e(this);function s(a,h){if(h)t:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in d))break t;d=d[C]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&t(d,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var d=0,g=!1,C={next:function(){if(!g&&d<a.length){var O=d++;return{value:h(O,a[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,d){return a.call.apply(a.bind,arguments)}function p(a,h,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function m(a,h,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function E(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function R(a,h){function d(){}d.prototype=h.prototype,a.aa=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,C,O){for(var W=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)W[Ct-2]=arguments[Ct];return h.prototype[C].apply(g,W)}}function V(a){const h=a.length;if(0<h){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function v(a,h){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(c(g)){const C=a.length||0,O=g.length||0;a.length=C+O;for(let W=0;W<O;W++)a[C+W]=g[W]}else a.push(g)}}class N{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function D(a){return/^[\s\xa0]*$/.test(a)}function L(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function U(a){return U[" "](a),a}U[" "]=function(){};var Z=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function at(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function T(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function _(a){const h={};for(const d in a)h[d]=a[d];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)a[d]=g[d];for(let O=0;O<y.length;O++)d=y[O],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function x(a){var h=1;a=a.split(":");const d=[];for(;0<h&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function S(a){l.setTimeout(()=>{throw a},0)}function b(){var a=$e;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class pe{constructor(){this.h=this.g=null}add(h,d){const g=We.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var We=new N(()=>new Lt,a=>a.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,Et=!1,$e=new pe,ur=()=>{const a=l.Promise.resolve(void 0);pt=()=>{a.then(cn)}};var cn=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(d){S(d)}var h=We;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Et=!1};function Gt(){this.s=this.s,this.C=this.C}Gt.prototype.s=!1,Gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ht(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var $l=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return a}();function hr(a,h){if(Ht.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(Z){t:{try{U(h.nodeName);var C=!0;break t}catch{}C=!1}C||(h=null)}}else d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fr[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&hr.aa.h.call(this)}}R(hr,Ht);var fr={2:"touch",3:"pen",4:"mouse"};hr.prototype.h=function(){hr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var un="closure_listenable_"+(1e6*Math.random()|0),Xs=0;function Vo(a,h,d,g,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++Xs,this.da=this.fa=!1}function Qe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Js(a){this.src=a,this.g={},this.h=0}Js.prototype.add=function(a,h,d,g,C){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=A(a,h,g,C);return-1<W?(h=a[W],d||(h.fa=!1)):(h=new Vo(h,this.src,O,!!g,C),h.fa=d,a.push(h)),h};function w(a,h){var d=h.type;if(d in a.g){var g=a.g[d],C=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=C)&&Array.prototype.splice.call(g,C,1),O&&(Qe(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function A(a,h,d,g){for(var C=0;C<a.length;++C){var O=a[C];if(!O.da&&O.listener==h&&O.capture==!!d&&O.ha==g)return C}return-1}var M="closure_lm_"+(1e6*Math.random()|0),j={};function B(a,h,d,g,C){if(Array.isArray(h)){for(var O=0;O<h.length;O++)B(a,h[O],d,g,C);return null}return d=lt(d),a&&a[un]?a.K(h,d,u(g)?!!g.capture:!1,C):z(a,h,d,!1,g,C)}function z(a,h,d,g,C,O){if(!h)throw Error("Invalid event type");var W=u(C)?!!C.capture:!!C,Ct=J(a);if(Ct||(a[M]=Ct=new Js(a)),d=Ct.add(h,d,g,W,O),d.proxy)return d;if(g=X(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)$l||(C=W),C===void 0&&(C=!1),a.addEventListener(h.toString(),g,C);else if(a.attachEvent)a.attachEvent($(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function X(){function a(d){return h.call(a.src,a.listener,d)}const h=it;return a}function H(a,h,d,g,C){if(Array.isArray(h))for(var O=0;O<h.length;O++)H(a,h[O],d,g,C);else g=u(g)?!!g.capture:!!g,d=lt(d),a&&a[un]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],d=A(O,d,g,C),-1<d&&(Qe(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=J(a))&&(h=a.g[h.toString()],a=-1,h&&(a=A(h,d,g,C)),(d=-1<a?h[a]:null)&&G(d))}function G(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[un])w(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent($(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=J(h))?(w(d,a),d.h==0&&(d.src=null,h[M]=null)):Qe(a)}}}function $(a){return a in j?j[a]:j[a]="on"+a}function it(a,h){if(a.da)a=!0;else{h=new hr(h,this);var d=a.listener,g=a.ha||a.src;a.fa&&G(a),a=d.call(g,h)}return a}function J(a){return a=a[M],a instanceof Js?a:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(a){return typeof a=="function"?a:(a[rt]||(a[rt]=function(h){return a.handleEvent(h)}),a[rt])}function ot(){Gt.call(this),this.i=new Js(this),this.M=this,this.F=null}R(ot,Gt),ot.prototype[un]=!0,ot.prototype.removeEventListener=function(a,h,d,g){H(this,a,h,d,g)};function mt(a,h){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new Ht(h,a);else if(h instanceof Ht)h.target=h.target||a;else{var C=h;h=new Ht(g,a),I(h,C)}if(C=!0,d)for(var O=d.length-1;0<=O;O--){var W=h.g=d[O];C=yt(W,g,!0,h)&&C}if(W=h.g=a,C=yt(W,g,!0,h)&&C,C=yt(W,g,!1,h)&&C,d)for(O=0;O<d.length;O++)W=h.g=d[O],C=yt(W,g,!1,h)&&C}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var d=a.g[h],g=0;g<d.length;g++)Qe(d[g]);delete a.g[h],a.h--}}this.F=null},ot.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},ot.prototype.L=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function yt(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,O=0;O<h.length;++O){var W=h[O];if(W&&!W.da&&W.capture==d){var Ct=W.listener,Zt=W.ha||W.src;W.fa&&w(a.i,W),C=Ct.call(Zt,g)!==!1&&C}}return C&&!g.defaultPrevented}function re(a,h,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Xt(a){a.g=re(()=>{a.g=null,a.i&&(a.i=!1,Xt(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Me extends Gt{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Xt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(a){Gt.call(this),this.h=a,this.g={}}R(se,Gt);var Vn=[];function Zs(a){at(a.g,function(h,d){this.g.hasOwnProperty(d)&&G(h)},a),a.g={}}se.prototype.N=function(){se.aa.N.call(this),Zs(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=l.JSON.stringify,Fe=l.JSON.parse,Do=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ql(){}ql.prototype.h=null;function df(a){return a.h||(a.h=a.i())}function pf(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){Ht.call(this,"d")}R(Kl,Ht);function Gl(){Ht.call(this,"c")}R(Gl,Ht);var dr={},mf=null;function ko(){return mf=mf||new ot}dr.La="serverreachability";function gf(a){Ht.call(this,dr.La,a)}R(gf,Ht);function ei(a){const h=ko();mt(h,new gf(h))}dr.STAT_EVENT="statevent";function _f(a,h){Ht.call(this,dr.STAT_EVENT,a),this.stat=h}R(_f,Ht);function me(a){const h=ko();mt(h,new _f(h,a))}dr.Ma="timingevent";function yf(a,h){Ht.call(this,dr.Ma,a),this.size=h}R(yf,Ht);function ni(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function V0(a,h,d,g,C,O){a.info(function(){if(a.g)if(O)for(var W="",Ct=O.split("&"),Zt=0;Zt<Ct.length;Zt++){var wt=Ct[Zt].split("=");if(1<wt.length){var ie=wt[0];wt=wt[1];var oe=ie.split("_");W=2<=oe.length&&oe[1]=="type"?W+(ie+"="+wt+"&"):W+(ie+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+W})}function D0(a,h,d,g,C,O,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+O+" "+W})}function Zr(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+O0(a,d)+(g?" "+g:"")})}function k0(a,h){a.info(function(){return"TIMEOUT: "+h})}ri.prototype.info=function(){};function O0(a,h){if(!a.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<C.length;W++)C[W]=""}}}}return Jt(d)}catch{return h}}var Oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hl;function No(){}R(No,ql),No.prototype.g=function(){return new XMLHttpRequest},No.prototype.i=function(){return{}},Hl=new No;function Dn(a,h,d,g){this.j=a,this.i=h,this.l=d,this.R=g||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}var Ef={},Wl={};function Ql(a,h,d){a.L=1,a.v=Bo(hn(h)),a.m=d,a.P=!0,wf(a,null)}function wf(a,h){a.F=Date.now(),Mo(a),a.A=hn(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Mf(d.i,"t",g),a.C=0,d=a.j.J,a.h=new bf,a.g=td(a.j,d?h:null,!a.m),0<a.O&&(a.M=new Me(m(a.Y,a,a.g),a.O)),h=a.U,d=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Vn[0]=C.toString()),C=Vn);for(var O=0;O<C.length;O++){var W=B(d,C[O],g||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ei(),V0(a.i,a.u,a.A,a.l,a.R,a.m)}Dn.prototype.ca=function(a){a=a.target;const h=this.M;h&&fn(a)==3?h.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)t:{const oe=fn(this.g);var h=this.g.Ba();const ns=this.g.Z();if(!(3>oe)&&(oe!=3||this.g&&(this.h.h||this.g.oa()||$f(this.g)))){this.J||oe!=4||h==7||(h==8||0>=ns?ei(3):ei(2)),Yl(this);var d=this.g.Z();this.X=d;e:if(Tf(this)){var g=$f(this.g);a="";var C=g.length,O=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),si(this);var W="";break e}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(g[h],{stream:!(O&&h==C-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=d==200,D0(this.i,this.u,this.A,this.l,this.R,oe,d),this.o){if(this.T&&!this.K){e:{if(this.g){var Ct,Zt=this.g;if((Ct=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Ct)){var wt=Ct;break e}}wt=null}if(d=wt)Zr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,d);else{this.o=!1,this.s=3,me(12),pr(this),si(this);break t}}if(this.P){d=!0;let qe;for(;!this.J&&this.C<W.length;)if(qe=N0(this,W),qe==Wl){oe==4&&(this.s=4,me(14),d=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Ef){this.s=4,me(15),Zr(this.i,this.l,W,"[Invalid Chunk]"),d=!1;break}else Zr(this.i,this.l,qe,null),Xl(this,qe);if(Tf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||W.length!=0||this.h.h||(this.s=1,me(16),d=!1),this.o=this.o&&d,!d)Zr(this.i,this.l,W,"[Invalid Chunked Response]"),pr(this),si(this);else if(0<W.length&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.ba&&!ie.M&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),rc(ie),ie.M=!0,me(11))}}else Zr(this.i,this.l,W,null),Xl(this,W);oe==4&&pr(this),this.o&&!this.J&&(oe==4?Yf(this.j,this):(this.o=!1,Mo(this)))}else J0(this.g),d==400&&0<W.indexOf("Unknown SID")?(this.s=3,me(12)):(this.s=0,me(13)),pr(this),si(this)}}}catch{}finally{}};function Tf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function N0(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?Wl:(d=Number(h.substring(d,g)),isNaN(d)?Ef:(g+=1,g+d>h.length?Wl:(h=h.slice(g,g+d),a.C=g+d,h)))}Dn.prototype.cancel=function(){this.J=!0,pr(this)};function Mo(a){a.S=Date.now()+a.I,If(a,a.I)}function If(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ni(m(a.ba,a),h)}function Yl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Dn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(k0(this.i,this.A),this.L!=2&&(ei(),me(17)),pr(this),this.s=2,si(this)):If(this,this.S-a)};function si(a){a.j.G==0||a.J||Yf(a.j,a)}function pr(a){Yl(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Zs(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Xl(a,h){try{var d=a.j;if(d.G!=0&&(d.g==a||Jl(d.h,a))){if(!a.K&&Jl(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Ko(d),$o(d);else break t;nc(d),me(18)}}else d.za=C[1],0<d.za-d.T&&37500>C[2]&&d.F&&d.v==0&&!d.C&&(d.C=ni(m(d.Za,d),6e3));if(1>=Sf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else gr(d,11)}else if((a.K||d.g==a)&&Ko(d),!D(h))for(C=d.Da.g.parse(h),h=0;h<C.length;h++){let wt=C[h];if(d.T=wt[0],wt=wt[1],d.G==2)if(wt[0]=="c"){d.K=wt[1],d.ia=wt[2];const ie=wt[3];ie!=null&&(d.la=ie,d.j.info("VER="+d.la));const oe=wt[4];oe!=null&&(d.Aa=oe,d.j.info("SVER="+d.Aa));const ns=wt[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const qe=a.g;if(qe){const Ho=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var O=g.h;O.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Zl(O,O.h),O.h=null))}if(g.D){const sc=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(g.ya=sc,Dt(g.I,g.D,sc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var W=a;if(g.qa=Zf(g,g.J?g.ia:null,g.W),W.K){Pf(g.h,W);var Ct=W,Zt=g.L;Zt&&(Ct.I=Zt),Ct.B&&(Yl(Ct),Mo(Ct)),g.g=W}else Wf(g);0<d.i.length&&qo(d)}else wt[0]!="stop"&&wt[0]!="close"||gr(d,7);else d.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?gr(d,7):ec(d):wt[0]!="noop"&&d.l&&d.l.ta(wt),d.v=0)}}ei(4)}catch{}}var M0=class{constructor(a,h){this.g=a,this.map=h}};function Af(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sf(a){return a.h?1:a.g?a.g.size:0}function Jl(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Zl(a,h){a.g?a.g.add(h):a.h=h}function Pf(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Af.prototype.cancel=function(){if(this.i=Cf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Cf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.D);return h}return V(a.i)}function F0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],d=a.length,g=0;g<d;g++)h.push(a[g]);return h}h=[],d=0;for(g in a)h[d++]=a[g];return h}function L0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var d=0;d<a;d++)h.push(d);return h}h=[],d=0;for(const g in a)h[d++]=g;return h}}}function Rf(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var d=L0(a),g=F0(a),C=g.length,O=0;O<C;O++)h.call(void 0,g[O],d&&d[O],a)}var Vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B0(a,h){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),C=null;if(0<=g){var O=a[d].substring(0,g);C=a[d].substring(g+1)}else O=a[d];h(O,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function mr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof mr){this.h=a.h,Fo(this,a.j),this.o=a.o,this.g=a.g,Lo(this,a.s),this.l=a.l;var h=a.i,d=new ai;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),Df(this,d),this.m=a.m}else a&&(h=String(a).match(Vf))?(this.h=!1,Fo(this,h[1]||"",!0),this.o=ii(h[2]||""),this.g=ii(h[3]||"",!0),Lo(this,h[4]),this.l=ii(h[5]||"",!0),Df(this,h[6]||"",!0),this.m=ii(h[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}mr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(oi(h,kf,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(oi(h,kf,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(oi(d,d.charAt(0)=="/"?z0:j0,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",oi(d,q0)),a.join("")};function hn(a){return new mr(a)}function Fo(a,h,d){a.j=d?ii(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Lo(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Df(a,h,d){h instanceof ai?(a.i=h,K0(a.i,a.h)):(d||(h=oi(h,$0)),a.i=new ai(h,a.h))}function Dt(a,h,d){a.i.set(h,d)}function Bo(a){return Dt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ii(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,U0),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function U0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kf=/[#\/\?@]/g,j0=/[#\?:]/g,z0=/[#\?]/g,$0=/[#\?@]/g,q0=/#/g;function ai(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function kn(a){a.g||(a.g=new Map,a.h=0,a.i&&B0(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}n=ai.prototype,n.add=function(a,h){kn(this),this.i=null,a=ts(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Of(a,h){kn(a),h=ts(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Nf(a,h){return kn(a),h=ts(a,h),a.g.has(h)}n.forEach=function(a,h){kn(this),this.g.forEach(function(d,g){d.forEach(function(C){a.call(h,C,g,this)},this)},this)},n.na=function(){kn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let g=0;g<h.length;g++){const C=a[g];for(let O=0;O<C.length;O++)d.push(h[g])}return d},n.V=function(a){kn(this);let h=[];if(typeof a=="string")Nf(this,a)&&(h=h.concat(this.g.get(ts(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)h=h.concat(a[d])}return h},n.set=function(a,h){return kn(this),this.i=null,a=ts(this,a),Nf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Mf(a,h,d){Of(a,h),0<d.length&&(a.i=null,a.g.set(ts(a,h),V(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var g=h[d];const O=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var C=O;W[g]!==""&&(C+="="+encodeURIComponent(String(W[g]))),a.push(C)}}return this.i=a.join("&")};function ts(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function K0(a,h){h&&!a.j&&(kn(a),a.i=null,a.g.forEach(function(d,g){var C=g.toLowerCase();g!=C&&(Of(this,g),Mf(this,C,d))},a)),a.j=h}function G0(a,h){const d=new ri;if(l.Image){const g=new Image;g.onload=E(On,d,"TestLoadImage: loaded",!0,h,g),g.onerror=E(On,d,"TestLoadImage: error",!1,h,g),g.onabort=E(On,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=E(On,d,"TestLoadImage: timeout",!1,h,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function H0(a,h){const d=new ri,g=new AbortController,C=setTimeout(()=>{g.abort(),On(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(O=>{clearTimeout(C),O.ok?On(d,"TestPingServer: ok",!0,h):On(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),On(d,"TestPingServer: error",!1,h)})}function On(a,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function W0(){this.g=new Do}function Q0(a,h,d){const g=d||"";try{Rf(a,function(C,O){let W=C;u(C)&&(W=Jt(C)),h.push(g+O+"="+encodeURIComponent(W))})}catch(C){throw h.push(g+"type="+encodeURIComponent("_badmap")),C}}function Uo(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Uo,ql),Uo.prototype.g=function(){return new jo(this.l,this.j)},Uo.prototype.i=function(a){return function(){return a}}({});function jo(a,h){ot.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(jo,ot),n=jo.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ci(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ff(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ff(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?li(this):ci(this),this.readyState==3&&Ff(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,li(this))},n.Qa=function(a){this.g&&(this.response=a,li(this))},n.ga=function(){this.g&&li(this)};function li(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ci(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Lf(a){let h="";return at(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function tc(a,h,d){t:{for(g in d){var g=!1;break t}g=!0}g||(d=Lf(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Dt(a,h,d))}function jt(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(jt,ot);var Y0=/^https?$/i,X0=["POST","PUT"];n=jt.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hl.g(),this.v=this.o?df(this.o):df(Hl),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Bf(this,O);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())d.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),C=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(X0,h,void 0))||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of d)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zf(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Bf(this,O)}};function Bf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Uf(a),zo(a)}function Uf(a){a.A||(a.A=!0,mt(a,"complete"),mt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,mt(this,"complete"),mt(this,"abort"),zo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zo(this,!0)),jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jf(this):this.bb())},n.bb=function(){jf(this)};function jf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||fn(a)!=4||a.Z()!=2)){if(a.u&&fn(a)==4)re(a.Ea,0,a);else if(mt(a,"readystatechange"),fn(a)==4){a.h=!1;try{const W=a.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var d;if(!(d=h)){var g;if(g=W===0){var C=String(a.D).match(Vf)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),g=!Y0.test(C?C.toLowerCase():"")}d=g}if(d)mt(a,"complete"),mt(a,"success");else{a.m=6;try{var O=2<fn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Uf(a)}}finally{zo(a)}}}}function zo(a,h){if(a.g){zf(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||mt(a,"ready");try{d.onreadystatechange=g}catch{}}}function zf(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function fn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Fe(h)}};function $f(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function J0(a){const h={};a=(a.g&&2<=fn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(D(a[g]))continue;var d=x(a[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=h[C]||[];h[C]=O,O.push(d)}T(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function qf(a){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ui("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ui("baseRetryDelayMs",5e3,a),this.cb=ui("retryDelaySeedMs",1e4,a),this.Wa=ui("forwardChannelMaxRetries",2,a),this.wa=ui("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Af(a&&a.concurrentRequestLimit),this.Da=new W0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qf.prototype,n.la=8,n.G=1,n.connect=function(a,h,d,g){me(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=Zf(this,null,this.W),qo(this)};function ec(a){if(Kf(a),a.G==3){var h=a.U++,d=hn(a.I);if(Dt(d,"SID",a.K),Dt(d,"RID",h),Dt(d,"TYPE","terminate"),hi(a,d),h=new Dn(a,a.j,h),h.L=2,h.v=Bo(hn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=td(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Mo(h)}Jf(a)}function $o(a){a.g&&(rc(a),a.g.cancel(),a.g=null)}function Kf(a){$o(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ko(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function qo(a){if(!xf(a.h)&&!a.s){a.s=!0;var h=a.Ga;pt||ur(),Et||(pt(),Et=!0),$e.add(h,a),a.B=0}}function Z0(a,h){return Sf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ni(m(a.Ga,a,h),Xf(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Dn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=_(O),I(O,this.S)):O=this.S),this.m!==null||this.O||(C.H=O,O=null),this.P)t:{for(var h=0,d=0;d<this.i.length;d++){e:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=d;break t}if(h===4096||d===this.i.length-1){h=d+1;break t}}h=1e3}else h=1e3;h=Hf(this,C,h),d=hn(this.I),Dt(d,"RID",a),Dt(d,"CVER",22),this.D&&Dt(d,"X-HTTP-Session-Id",this.D),hi(this,d),O&&(this.O?h="headers="+encodeURIComponent(String(Lf(O)))+"&"+h:this.m&&tc(d,this.m,O)),Zl(this.h,C),this.Ua&&Dt(d,"TYPE","init"),this.P?(Dt(d,"$req",h),Dt(d,"SID","null"),C.T=!0,Ql(C,d,null)):Ql(C,d,h),this.G=2}}else this.G==3&&(a?Gf(this,a):this.i.length==0||xf(this.h)||Gf(this))};function Gf(a,h){var d;h?d=h.l:d=a.U++;const g=hn(a.I);Dt(g,"SID",a.K),Dt(g,"RID",d),Dt(g,"AID",a.T),hi(a,g),a.m&&a.o&&tc(g,a.m,a.o),d=new Dn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Hf(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Zl(a.h,d),Ql(d,g,h)}function hi(a,h){a.H&&at(a.H,function(d,g){Dt(h,g,d)}),a.l&&Rf({},function(d,g){Dt(h,g,d)})}function Hf(a,h,d){d=Math.min(a.i.length,d);var g=a.l?m(a.l.Na,a.l,a):null;t:{var C=a.i;let O=-1;for(;;){const W=["count="+d];O==-1?0<d?(O=C[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let Ct=!0;for(let Zt=0;Zt<d;Zt++){let wt=C[Zt].g;const ie=C[Zt].map;if(wt-=O,0>wt)O=Math.max(0,C[Zt].g-100),Ct=!1;else try{Q0(ie,W,"req"+wt+"_")}catch{g&&g(ie)}}if(Ct){g=W.join("&");break t}}}return a=a.i.splice(0,d),h.D=a,g}function Wf(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;pt||ur(),Et||(pt(),Et=!0),$e.add(h,a),a.v=0}}function nc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ni(m(a.Fa,a),Xf(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Qf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ni(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,me(10),$o(this),Qf(this))};function rc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Qf(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=hn(a.qa);Dt(h,"RID","rpc"),Dt(h,"SID",a.K),Dt(h,"AID",a.T),Dt(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Dt(h,"TO",a.ja),Dt(h,"TYPE","xmlhttp"),hi(a,h),a.m&&a.o&&tc(h,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Bo(hn(h)),d.m=null,d.P=!0,wf(d,a)}n.Za=function(){this.C!=null&&(this.C=null,$o(this),nc(this),me(19))};function Ko(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Yf(a,h){var d=null;if(a.g==h){Ko(a),rc(a),a.g=null;var g=2}else if(Jl(a.h,h))d=h.D,Pf(a.h,h),g=1;else return;if(a.G!=0){if(h.o)if(g==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;g=ko(),mt(g,new yf(g,d)),qo(a)}else Wf(a);else if(C=h.s,C==3||C==0&&0<h.X||!(g==1&&Z0(a,h)||g==2&&nc(a)))switch(d&&0<d.length&&(h=a.h,h.i=h.i.concat(d)),C){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Xf(a,h){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*h}function gr(a,h){if(a.j.info("Error code "+h),h==2){var d=m(a.fb,a),g=a.Xa;const C=!g;g=new mr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fo(g,"https"),Bo(g),C?G0(g.toString(),d):H0(g.toString(),d)}else me(2);a.G=0,a.l&&a.l.sa(h),Jf(a),Kf(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function Jf(a){if(a.G=0,a.ka=[],a.l){const h=Cf(a.h);(h.length!=0||a.i.length!=0)&&(v(a.ka,h),v(a.ka,a.i),a.h.i.length=0,V(a.i),a.i.length=0),a.l.ra()}}function Zf(a,h,d){var g=d instanceof mr?hn(d):new mr(d);if(g.g!="")h&&(g.g=h+"."+g.g),Lo(g,g.s);else{var C=l.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var O=new mr(null);g&&Fo(O,g),h&&(O.g=h),C&&Lo(O,C),d&&(O.l=d),g=O}return d=a.D,h=a.ya,d&&h&&Dt(g,d,h),Dt(g,"VER",a.la),hi(a,g),g}function td(a,h,d){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new jt(new Uo({eb:d})):new jt(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ed(){}n=ed.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Go(){}Go.prototype.g=function(a,h){return new Pe(a,h)};function Pe(a,h){ot.call(this),this.g=new qf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!D(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!D(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new es(this)}R(Pe,ot),Pe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pe.prototype.close=function(){ec(this.g)},Pe.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Jt(a),a=d);h.i.push(new M0(h.Ya++,a)),h.G==3&&qo(h)},Pe.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,Pe.aa.N.call(this)};function nd(a){Kl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){t:{for(const d in h){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}R(nd,Kl);function rd(){Gl.call(this),this.status=1}R(rd,Gl);function es(a){this.g=a}R(es,ed),es.prototype.ua=function(){mt(this.g,"a")},es.prototype.ta=function(a){mt(this.g,new nd(a))},es.prototype.sa=function(a){mt(this.g,new rd)},es.prototype.ra=function(){mt(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Pe.prototype.send=Pe.prototype.o,Pe.prototype.open=Pe.prototype.m,Pe.prototype.close=Pe.prototype.close,C_=function(){return new Go},P_=function(){return ko()},S_=dr,Jc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,ua=Oo,vf.COMPLETE="complete",x_=vf,pf.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Ei=pf,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,A_=jt}).apply(typeof Xo<"u"?Xo:typeof self<"u"?self:typeof window<"u"?window:{});const Qd="@firebase/firestore",Yd="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}te.UNAUTHENTICATED=new te(null),te.GOOGLE_CREDENTIALS=new te("google-credentials-uid"),te.FIRST_PARTY=new te("first-party-uid"),te.MOCK_USER=new te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new y_("@firebase/firestore");function ms(){return Br.logLevel}function q(n,...t){if(Br.logLevel<=bt.DEBUG){const e=t.map(lh);Br.debug(`Firestore (${Gs}): ${n}`,...e)}}function be(n,...t){if(Br.logLevel<=bt.ERROR){const e=t.map(lh);Br.error(`Firestore (${Gs}): ${n}`,...e)}}function Ur(n,...t){if(Br.logLevel<=bt.WARN){const e=t.map(lh);Br.warn(`Firestore (${Gs}): ${n}`,...e)}}function lh(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,R_(n,r,e)}function R_(n,t,e){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw be(r),new Error(r)}function et(n,t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,n||R_(t,s,r)}function ht(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ks{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(te.UNAUTHENTICATED))}shutdown(){}}class _T{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class yT{constructor(t){this.t=t,this.currentUser=te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){et(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new V_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return et(t===null||typeof t=="string",2055,{h:t}),new te(t)}}class vT{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bT{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new vT(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ET{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eT(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){et(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xd(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(et(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Xd(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=wT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<e&&(r+=t.charAt(s[i]%62))}return r}}function ct(n,t){return n<t?-1:n>t?1:0}function Zc(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=n.codePointAt(e),s=t.codePointAt(e);if(r!==s){if(r<128&&s<128)return ct(r,s);{const i=D_(),o=TT(i.encode(Jd(n,e)),i.encode(Jd(t,e)));return o!==0?o:ct(r,s)}}e+=r>65535?2:1}return ct(n.length,t.length)}function Jd(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function TT(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return ct(n[e],t[e]);return ct(n.length,t.length)}function Cs(n,t,e){return n.length===t.length&&n.every((r,s)=>e(r,t[s]))}function O_(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=-62135596800,tp=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(t){return Mt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*tp);return new Mt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Zd)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tp}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Zd;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(t){return new st(t)}static min(){return new st(new Mt(0,0))}static max(){return new st(new Mt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="__name__";class Je{constructor(t,e,r){e===void 0?e=0:e>t.length&&tt(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&tt(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Je.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Je?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const i=Je.compareSegments(t.get(s),e.get(s));if(i!==0)return i}return ct(t.length,e.length)}static compareSegments(t,e){const r=Je.isNumericId(t),s=Je.isNumericId(e);return r&&!s?-1:!r&&s?1:r&&s?Je.extractNumericId(t).compare(Je.extractNumericId(e)):Zc(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Wn.fromString(t.substring(4,t.length-2))}}class xt extends Je{construct(t,e,r){return new xt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(s=>s.length>0))}return new xt(e)}static emptyPath(){return new xt([])}}const IT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends Je{construct(t,e,r){return new Bt(t,e,r)}static isValidIdentifier(t){return IT.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ep}static keyField(){return new Bt([ep])}static fromServerFormat(t){const e=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let o=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Bt(e)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.path=t}static fromPath(t){return new Y(xt.fromString(t))}static fromName(t){return new Y(xt.fromString(t).popFirst(5))}static empty(){return new Y(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return xt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new xt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=-1;class La{constructor(t,e,r,s){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=s}}function tu(n){return n.fields.find(t=>t.kind===2)}function Tr(n){return n.fields.filter(t=>t.kind!==2)}La.UNKNOWN_ID=-1;class ha{constructor(t,e){this.fieldPath=t,this.kind=e}}class no{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new no(0,Oe.min())}}function AT(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=st.fromTimestamp(r===1e9?new Mt(e+1,0):new Mt(e,r));return new Oe(s,Y.empty(),t)}function N_(n){return new Oe(n.readTime,n.key,eo)}class Oe{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Oe(st.min(),Y.empty(),eo)}static max(){return new Oe(st.max(),Y.empty(),eo)}}function ch(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Y.comparator(n.documentKey,t.documentKey),e!==0?e:ct(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==M_)throw n;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new P((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(e,i).next(r,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof P?e:P.resolve(e)}catch(e){return P.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):P.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):P.reject(e)}static resolve(t){return new P((e,r)=>{e(t)})}static reject(t){return new P((e,r)=>{r(t)})}static waitFor(t){return new P((e,r)=>{let s=0,i=0,o=!1;t.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&e()},c=>r(c))}),o=!0,i===s&&e()})}static or(t){let e=P.resolve(!1);for(const r of t)e=e.next(s=>s?P.resolve(s):r());return e}static forEach(t,e){const r=[];return t.forEach((s,i)=>{r.push(e.call(this,s,i))}),this.waitFor(r)}static mapArray(t,e){return new P((r,s)=>{const i=t.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;e(t[u]).next(f=>{o[u]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(t,e){return new P((r,s)=>{const i=()=>{t()===!0?e().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="SimpleDb";class ml{static open(t,e,r,s){try{return new ml(e,t.transaction(s,r))}catch(i){throw new Fi(e,i)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Qn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Fi(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=uh(r.target.error);this.S.reject(new Fi(t,s))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(q(Re,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new ST(e)}}class Yn{static delete(t){return q(Re,"Removing database:",t),Ar(u_().indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!g_())return!1;if(Yn.F())return!0;const t=Oa(),e=Yn.M(t),r=0<e&&e<10,s=L_(t),i=0<s&&s<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.O)==="YES"}static N(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.B=r,this.L=null,Yn.M(Oa())===12.2&&be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(t){return this.db||(q(Re,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;e(o)},s.onblocked=()=>{r(new Fi(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Q(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Q(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fi(t,o))},s.onupgradeneeded=i=>{q(Re,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,s.transaction,i.oldVersion,this.version).next(()=>{q(Re,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const r=e.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=e=>this.$(e)),this.db}U(t){this.$=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,s){const i=e==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(t);const l=ml.open(this.db,t,i?"readonly":"readwrite",r),c=s(l).next(u=>(l.v(),u)).catch(u=>(l.abort(u),P.reject(u))).toPromise();return c.catch(()=>{}),await l.D,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(q(Re,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function L_(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class xT{constructor(t){this.K=t,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(t){this.K=t}done(){this.W=!0}H(t){this.G=t}delete(){return Ar(this.K.delete())}}class Fi extends Q{constructor(t,e){super(F.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function lr(n){return n.name==="IndexedDbTransactionError"}class ST{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(q(Re,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(q(Re,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ar(r)}add(t){return q(Re,"ADD",this.store.name,t,t),Ar(this.store.add(t))}get(t){return Ar(this.store.get(t)).next(e=>(e===void 0&&(e=null),q(Re,"GET",this.store.name,t,e),e))}delete(t){return q(Re,"DELETE",this.store.name,t),Ar(this.store.delete(t))}count(){return q(Re,"COUNT",this.store.name),Ar(this.store.count())}J(t,e){const r=this.options(t,e),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new P((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.Y(i,(l,c)=>{o.push(c)}).next(()=>o)}}Z(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new P((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}X(t,e){q(Re,"DELETE ALL",this.store.name);const r=this.options(t,e);r.ee=!1;const s=this.cursor(r);return this.Y(s,(i,o,l)=>l.delete())}te(t,e){let r;e?r=t:(r={},e=t);const s=this.cursor(r);return this.Y(s,e)}ne(t){const e=this.cursor({});return new P((r,s)=>{e.onerror=i=>{const o=uh(i.target.error);s(o)},e.onsuccess=i=>{const o=i.target.result;o?t(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}Y(t,e){const r=[];return new P((s,i)=>{t.onerror=o=>{i(o.target.error)},t.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const c=new xT(l),u=e(l.primaryKey,l.value,c);if(u instanceof P){const f=u.catch(p=>(c.done(),P.reject(p)));r.push(f)}c.isDone?s():c.j===null?l.continue():l.continue(c.j)}}).next(()=>P.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.ee?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Ar(n){return new P((t,e)=>{n.onsuccess=r=>{const s=r.target.result;t(s)},n.onerror=r=>{const s=uh(r.target.error);e(s)}})}let np=!1;function uh(n){const t=Yn.M(Oa());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return np||(np=!0,setTimeout(()=>{throw r},0)),r}}return n}const Li="IndexBackfiller";class PT{constructor(t,e){this.asyncQueue=t,this.re=e,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(t){q(Li,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.re.se();q(Li,`Documents written: ${e}`)}catch(e){lr(e)?q(Li,"Ignoring IndexedDB error during index backfill: ",e):await Yr(e)}await this.ie(6e4)})}}class CT{constructor(t,e){this.localStore=t,this.persistence=e}async se(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.oe(e,t))}oe(t,e){const r=new Set;let s=e,i=!0;return P.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o!==null&&!r.has(o))return q(Li,`Processing collection: ${o}`),this._e(t,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>e-s)}_e(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(s=>this.localStore.localDocuments.getNextDocuments(t,e,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.ae(s,i)).next(l=>(q(Li,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(t,e,l))).next(()=>o.size)}))}ae(t,e){let r=t;return e.changes.forEach((s,i)=>{const o=N_(i);ch(o,r)>0&&(r=o)}),new Oe(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>e.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Be.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=-1;function gl(n){return n==null}function ro(n){return n===0&&1/n==-1/0}function RT(n){return typeof n=="number"&&Number.isInteger(n)&&!ro(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="";function he(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=rp(t)),t=VT(n.get(e),t);return rp(t)}function VT(n,t){let e=t;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":e+="";break;case Ba:e+="";break;default:e+=i}}return e}function rp(n){return n+Ba+""}function tn(n){const t=n.length;if(et(t>=2,64408,{path:n}),t===2)return et(n.charAt(0)===Ba&&n.charAt(1)==="",56145,{path:n}),xt.emptyPath();const e=t-2,r=[];let s="";for(let i=0;i<t;){const o=n.indexOf(Ba,i);switch((o<0||o>e)&&tt(50515,{path:n}),n.charAt(o+1)){case"":const l=n.substring(i,o);let c;s.length===0?c=l:(s+=l,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:tt(61167,{path:n})}i=o+2}return new xt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="remoteDocuments",Eo="owner",as="owner",so="mutationQueues",DT="userId",Ke="mutations",sp="batchId",Cr="userMutationsIndex",ip=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(n,t){return[n,he(t)]}function B_(n,t,e){return[n,he(t),e]}const kT={},Rs="documentMutations",Ua="remoteDocumentsV14",OT=["prefixPath","collectionGroup","readTime","documentId"],da="documentKeyIndex",NT=["prefixPath","collectionGroup","documentId"],U_="collectionGroupIndex",MT=["collectionGroup","readTime","prefixPath","documentId"],io="remoteDocumentGlobal",eu="remoteDocumentGlobalKey",Vs="targets",j_="queryTargetsIndex",FT=["canonicalId","targetId"],Ds="targetDocuments",LT=["targetId","path"],hh="documentTargetsIndex",BT=["path","targetId"],ja="targetGlobalKey",Nr="targetGlobal",oo="collectionParents",UT=["collectionId","parent"],ks="clientMetadata",jT="clientId",_l="bundles",zT="bundleId",yl="namedQueries",$T="name",fh="indexConfiguration",qT="indexId",nu="collectionGroupIndex",KT="collectionGroup",Bi="indexState",GT=["indexId","uid"],z_="sequenceNumberIndex",HT=["uid","sequenceNumber"],Ui="indexEntries",WT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$_="documentKeyIndex",QT=["indexId","uid","orderedDocumentKey"],vl="documentOverlays",YT=["userId","collectionPath","documentId"],ru="collectionPathOverlayIndex",XT=["userId","collectionPath","largestBatchId"],q_="collectionGroupOverlayIndex",JT=["userId","collectionGroup","largestBatchId"],dh="globals",ZT="name",K_=[so,Ke,Rs,Ir,Vs,Eo,Nr,Ds,ks,io,oo,_l,yl],tI=[...K_,vl],G_=[so,Ke,Rs,Ua,Vs,Eo,Nr,Ds,ks,io,oo,_l,yl,vl],H_=G_,ph=[...H_,fh,Bi,Ui],eI=ph,W_=[...ph,dh],nI=W_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends F_{constructor(t,e){super(),this.he=t,this.currentSequenceNumber=e}}function Qt(n,t){const e=ht(n);return Yn.N(e.he,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function cr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Q_(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t,e){this.comparator=t,this.root=e||ee.EMPTY}insert(t,e){return new Ft(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ee.BLACK,null,null))}remove(t){return new Ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ee.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return e+r.left.size;s<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jo(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jo(this.root,t,this.comparator,!0)}}class Jo{constructor(t,e,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?r(t.key,e):1,e&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ee{constructor(t,e,r,s,i){this.key=t,this.value=e,this.color=r??ee.RED,this.left=s??ee.EMPTY,this.right=i??ee.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,s,i){return new ee(t??this.key,e??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,r),null):i===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ee.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return ee.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ee.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ee.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}ee.EMPTY=null,ee.RED=!0,ee.BLACK=!1;ee.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,e,r,s,i){return this}insert(t,e,r){return new ee(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.comparator=t,this.data=new Ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ap(this.data.getIterator())}getIteratorFrom(t){return new ap(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Pt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Pt(this.comparator);return e.data=t,e}}class ap{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ls(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.fields=t,t.sort(Bt.comparator)}static empty(){return new xe([])}unionWith(t){let e=new Pt(Bt.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new xe(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Cs(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Y_("Invalid base64 string: "+i):i}}(t);return new Kt(e)}static fromUint8Array(t){const e=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Kt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tn(n){if(et(!!n,39018),typeof n=="string"){let t=0;const e=rI.exec(n);if(et(!!e,46558,{timestamp:n}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function In(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="server_timestamp",J_="__type__",Z_="__previous_value__",ty="__local_write_time__";function mh(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[J_])===null||e===void 0?void 0:e.stringValue)===X_}function bl(n){const t=n.mapValue.fields[Z_];return mh(t)?bl(t):t}function ao(n){const t=Tn(n.mapValue.fields[ty].timestampValue);return new Mt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,e,r,s,i,o,l,c,u,f){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const za="(default)";class jr{constructor(t,e){this.projectId=t,this.database=e||za}static empty(){return new jr("","")}get isDefaultDatabase(){return this.database===za}isEqual(t){return t instanceof jr&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="__type__",ey="__max__",qn={mapValue:{fields:{__type__:{stringValue:ey}}}},_h="__vector__",Os="value",pa={nullValue:"NULL_VALUE"};function Jn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mh(n)?4:ny(n)?9007199254740991:El(n)?10:11:tt(28295,{value:n})}function ln(n,t){if(n===t)return!0;const e=Jn(n);if(e!==Jn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ao(n).isEqual(ao(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Tn(s.timestampValue),l=Tn(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,i){return In(s.bytesValue).isEqual(In(i.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(n,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Nt(s.doubleValue),l=Nt(i.doubleValue);return o===l?ro(o)===ro(l):isNaN(o)&&isNaN(l)}return!1}(n,t);case 9:return Cs(n.arrayValue.values||[],t.arrayValue.values||[],ln);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(op(o)!==op(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ln(o[c],l[c])))return!1;return!0}(n,t);default:return tt(52216,{left:n})}}function lo(n,t){return(n.values||[]).find(e=>ln(e,t))!==void 0}function Zn(n,t){if(n===t)return 0;const e=Jn(n),r=Jn(t);if(e!==r)return ct(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,t.booleanValue);case 2:return function(i,o){const l=Nt(i.integerValue||i.doubleValue),c=Nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return lp(n.timestampValue,t.timestampValue);case 4:return lp(ao(n),ao(t));case 5:return Zc(n.stringValue,t.stringValue);case 6:return function(i,o){const l=In(i),c=In(o);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const f=ct(l[u],c[u]);if(f!==0)return f}return ct(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const l=ct(Nt(i.latitude),Nt(o.latitude));return l!==0?l:ct(Nt(i.longitude),Nt(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return cp(n.arrayValue,t.arrayValue);case 10:return function(i,o){var l,c,u,f;const p=i.fields||{},m=o.fields||{},E=(l=p[Os])===null||l===void 0?void 0:l.arrayValue,R=(c=m[Os])===null||c===void 0?void 0:c.arrayValue,V=ct(((u=E==null?void 0:E.values)===null||u===void 0?void 0:u.length)||0,((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:cp(E,R)}(n.mapValue,t.mapValue);case 11:return function(i,o){if(i===qn.mapValue&&o===qn.mapValue)return 0;if(i===qn.mapValue)return 1;if(o===qn.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=Zc(c[p],f[p]);if(m!==0)return m;const E=Zn(l[c[p]],u[f[p]]);if(E!==0)return E}return ct(c.length,f.length)}(n.mapValue,t.mapValue);default:throw tt(23264,{Pe:e})}}function lp(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return ct(n,t);const e=Tn(n),r=Tn(t),s=ct(e.seconds,r.seconds);return s!==0?s:ct(e.nanos,r.nanos)}function cp(n,t){const e=n.values||[],r=t.values||[];for(let s=0;s<e.length&&s<r.length;++s){const i=Zn(e[s],r[s]);if(i)return i}return ct(e.length,r.length)}function Ns(n){return iu(n)}function iu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=Tn(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return In(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Y.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",s=!0;for(const i of e.values||[])s?s=!1:r+=",",r+=iu(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${iu(e.fields[o])}`;return s+"}"}(n.mapValue):tt(61005,{value:n})}function ma(n){switch(Jn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bl(n);return t?16+ma(t):16;case 5:return 2*n.stringValue.length;case 6:return In(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ma(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return cr(r.fields,(i,o)=>{s+=i.length+ma(o)}),s}(n.mapValue);default:throw tt(13486,{value:n})}}function co(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function ou(n){return!!n&&"integerValue"in n}function uo(n){return!!n&&"arrayValue"in n}function up(n){return!!n&&"nullValue"in n}function hp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ga(n){return!!n&&"mapValue"in n}function El(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[gh])===null||e===void 0?void 0:e.stringValue)===_h}function ji(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return cr(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=ji(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ji(n.arrayValue.values[e]);return t}return Object.assign({},n)}function ny(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ey}const ry={mapValue:{fields:{[gh]:{stringValue:_h},[Os]:{arrayValue:{}}}}};function iI(n){return"nullValue"in n?pa:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?co(jr.empty(),Y.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?El(n)?ry:{mapValue:{}}:tt(35942,{value:n})}function oI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?co(jr.empty(),Y.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?ry:"mapValue"in n?El(n)?{mapValue:{}}:qn:tt(61959,{value:n})}function fp(n,t){const e=Zn(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function dp(n,t){const e=Zn(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t){this.value=t}static empty(){return new ue({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!ga(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ji(e)}setAll(t){let e=Bt.emptyPath(),r={},s=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,r,s),r={},s=[],e=l.popLast()}o?r[l.lastSegment()]=ji(o):s.push(l.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,r,s)}delete(t){const e=this.field(t.popLast());ga(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ln(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=e.mapValue.fields[t.get(r)];ga(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,r){cr(e,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ue(ji(this.value))}}function sy(n){const t=[];return cr(n.fields,(e,r)=>{const s=new Bt([e]);if(ga(r)){const i=sy(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t,e,r,s,i,o,l){this.key=t,this.documentType=e,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(t){return new zt(t,0,st.min(),st.min(),st.min(),ue.empty(),0)}static newFoundDocument(t,e,r,s){return new zt(t,1,e,st.min(),r,s,0)}static newNoDocument(t,e){return new zt(t,2,e,st.min(),st.min(),ue.empty(),0)}static newUnknownDocument(t,e){return new zt(t,3,e,st.min(),st.min(),ue.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ue.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,e){this.position=t,this.inclusive=e}}function pp(n,t,e){let r=0;for(let s=0;s<n.position.length;s++){const i=t[s],o=n.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),e.key):r=Zn(o,e.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function mp(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ln(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,e="asc"){this.field=t,this.dir=e}}function aI(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{}class _t extends iy{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new lI(t,e,r):e==="array-contains"?new hI(t,r):e==="in"?new hy(t,r):e==="not-in"?new fI(t,r):e==="array-contains-any"?new dI(t,r):new _t(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new cI(t,r):new uI(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Zn(e,this.value)):e!==null&&Jn(this.value)===Jn(e)&&this.matchesComparison(Zn(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class St extends iy{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new St(t,e)}matches(t){return Fs(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Fs(n){return n.op==="and"}function au(n){return n.op==="or"}function yh(n){return oy(n)&&Fs(n)}function oy(n){for(const t of n.filters)if(t instanceof St)return!1;return!0}function lu(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+Ns(n.value);if(yh(n))return n.filters.map(t=>lu(t)).join(",");{const t=n.filters.map(e=>lu(e)).join(",");return`${n.op}(${t})`}}function ay(n,t){return n instanceof _t?function(r,s){return s instanceof _t&&r.op===s.op&&r.field.isEqual(s.field)&&ln(r.value,s.value)}(n,t):n instanceof St?function(r,s){return s instanceof St&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&ay(o,s.filters[l]),!0):!1}(n,t):void tt(19439)}function ly(n,t){const e=n.filters.concat(t);return St.create(e,n.op)}function cy(n){return n instanceof _t?function(e){return`${e.field.canonicalString()} ${e.op} ${Ns(e.value)}`}(n):n instanceof St?function(e){return e.op.toString()+" {"+e.getFilters().map(cy).join(" ,")+"}"}(n):"Filter"}class lI extends _t{constructor(t,e,r){super(t,e,r),this.key=Y.fromName(r.referenceValue)}matches(t){const e=Y.comparator(t.key,this.key);return this.matchesComparison(e)}}class cI extends _t{constructor(t,e){super(t,"in",e),this.keys=uy("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class uI extends _t{constructor(t,e){super(t,"not-in",e),this.keys=uy("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function uy(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>Y.fromName(r.referenceValue))}class hI extends _t{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return uo(e)&&lo(e.arrayValue,this.value)}}class hy extends _t{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&lo(this.value.arrayValue,e)}}class fI extends _t{constructor(t,e){super(t,"not-in",e)}matches(t){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!lo(this.value.arrayValue,e)}}class dI extends _t{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!uo(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>lo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,e=null,r=[],s=[],i=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function cu(n,t=null,e=[],r=[],s=null,i=null,o=null){return new pI(n,t,e,r,s,i,o)}function zr(n){const t=ht(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>lu(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Ns(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Ns(r)).join(",")),t.Ie=e}return t.Ie}function wo(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!aI(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!ay(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!mp(n.startAt,t.startAt)&&mp(n.endAt,t.endAt)}function $a(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function qa(n,t){return n.filters.filter(e=>e instanceof _t&&e.field.isEqual(t))}function gp(n,t,e){let r=pa,s=!0;for(const i of qa(n,t)){let o=pa,l=!0;switch(i.op){case"<":case"<=":o=iI(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=pa}fp({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(e!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(t)){const o=e.position[i];fp({value:r,inclusive:s},{value:o,inclusive:e.inclusive})<0&&(r=o,s=e.inclusive);break}}return{value:r,inclusive:s}}function _p(n,t,e){let r=qn,s=!0;for(const i of qa(n,t)){let o=qn,l=!0;switch(i.op){case">=":case">":o=oI(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=qn}dp({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(e!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(t)){const o=e.position[i];dp({value:r,inclusive:s},{value:o,inclusive:e.inclusive})>0&&(r=o,s=e.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,e=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function mI(n,t,e,r,s,i,o,l){return new Hs(n,t,e,r,s,i,o,l)}function wl(n){return new Hs(n)}function yp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fy(n){return n.collectionGroup!==null}function zi(n){const t=ht(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Pt(Bt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(t).forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new ho(i,r))}),e.has(Bt.keyField().canonicalString())||t.Ee.push(new ho(Bt.keyField(),r))}return t.Ee}function Ue(n){const t=ht(n);return t.de||(t.de=gI(t,zi(n))),t.de}function gI(n,t){if(n.limitType==="F")return cu(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ho(s.field,i)});const e=n.endAt?new Ms(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ms(n.startAt.position,n.startAt.inclusive):null;return cu(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function uu(n,t){const e=n.filters.concat([t]);return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function hu(n,t,e){return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Tl(n,t){return wo(Ue(n),Ue(t))&&n.limitType===t.limitType}function dy(n){return`${zr(Ue(n))}|lt:${n.limitType}`}function gs(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(s=>cy(s)).join(", ")}]`),gl(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Ns(s)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Ns(s)).join(",")),`Target(${r})`}(Ue(n))}; limitType=${n.limitType})`}function To(n,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,t)&&function(r,s){for(const i of zi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,t)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=pp(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,zi(r),s)||r.endAt&&!function(o,l,c){const u=pp(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,zi(r),s))}(n,t)}function _I(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function py(n){return(t,e)=>{let r=!1;for(const s of zi(n)){const i=yI(s,t,e);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yI(n,t,e){const r=n.field.isKeyField()?Y.comparator(t.key,e.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Zn(c,u):tt(42886)}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[e]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){cr(this.inner,(e,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Ft(Y.comparator);function ke(){return vI}const my=new Ft(Y.comparator);function wi(...n){let t=my;for(const e of n)t=t.insert(e.key,e);return t}function gy(n){let t=my;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function en(){return $i()}function _y(){return $i()}function $i(){return new Pn(n=>n.toString(),(n,t)=>n.isEqual(t))}const bI=new Ft(Y.comparator),EI=new Pt(Y.comparator);function gt(...n){let t=EI;for(const e of n)t=t.add(e);return t}const wI=new Pt(ct);function TI(){return wI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ro(t)?"-0":t}}function yy(n){return{integerValue:""+n}}function II(n,t){return RT(t)?yy(t):vh(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this._=void 0}}function AI(n,t,e){return n instanceof fo?function(s,i){const o={fields:{[J_]:{stringValue:X_},[ty]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&mh(i)&&(i=bl(i)),i&&(o.fields[Z_]=i),{mapValue:o}}(e,t):n instanceof Ls?by(n,t):n instanceof Bs?Ey(n,t):function(s,i){const o=vy(s,i),l=vp(o)+vp(s.Re);return ou(o)&&ou(s.Re)?yy(l):vh(s.serializer,l)}(n,t)}function xI(n,t,e){return n instanceof Ls?by(n,t):n instanceof Bs?Ey(n,t):e}function vy(n,t){return n instanceof po?function(r){return ou(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class fo extends Il{}class Ls extends Il{constructor(t){super(),this.elements=t}}function by(n,t){const e=wy(t);for(const r of n.elements)e.some(s=>ln(s,r))||e.push(r);return{arrayValue:{values:e}}}class Bs extends Il{constructor(t){super(),this.elements=t}}function Ey(n,t){let e=wy(t);for(const r of n.elements)e=e.filter(s=>!ln(s,r));return{arrayValue:{values:e}}}class po extends Il{constructor(t,e){super(),this.serializer=t,this.Re=e}}function vp(n){return Nt(n.integerValue||n.doubleValue)}function wy(n){return uo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,e){this.field=t,this.transform=e}}function PI(n,t){return n.field.isEqual(t.field)&&function(r,s){return r instanceof Ls&&s instanceof Ls||r instanceof Bs&&s instanceof Bs?Cs(r.elements,s.elements,ln):r instanceof po&&s instanceof po?ln(r.Re,s.Re):r instanceof fo&&s instanceof fo}(n.transform,t.transform)}class CI{constructor(t,e){this.version=t,this.transformResults=e}}class Se{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Se}static exists(t){return new Se(void 0,t)}static updateTime(t){return new Se(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _a(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Al{}function Ty(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new bh(n.key,Se.none()):new Ws(n.key,n.data,Se.none());{const e=n.data,r=ue.empty();let s=new Pt(Bt.comparator);for(let i of t.fields)if(!s.has(i)){let o=e.field(i);o===null&&i.length>1&&(i=i.popLast(),o=e.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Cn(n.key,r,new xe(s.toArray()),Se.none())}}function RI(n,t,e){n instanceof Ws?function(s,i,o){const l=s.value.clone(),c=Ep(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,t,e):n instanceof Cn?function(s,i,o){if(!_a(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ep(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Iy(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function qi(n,t,e,r){return n instanceof Ws?function(i,o,l,c){if(!_a(i.precondition,o))return l;const u=i.value.clone(),f=wp(i.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,t,e,r):n instanceof Cn?function(i,o,l,c){if(!_a(i.precondition,o))return l;const u=wp(i.fieldTransforms,c,o),f=o.data;return f.setAll(Iy(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(n,t,e,r):function(i,o,l){return _a(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,t,e)}function VI(n,t){let e=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),i=vy(r.transform,s||null);i!=null&&(e===null&&(e=ue.empty()),e.set(r.field,i))}return e||null}function bp(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cs(r,s,(i,o)=>PI(i,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Ws extends Al{constructor(t,e,r,s=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cn extends Al{constructor(t,e,r,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Iy(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Ep(n,t,e){const r=new Map;et(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let s=0;s<e.length;s++){const i=n[s],o=i.transform,l=t.data.field(i.field);r.set(i.field,xI(o,l,e[s]))}return r}function wp(n,t,e){const r=new Map;for(const s of n){const i=s.transform,o=e.data.field(s.field);r.set(s.field,AI(i,o,t))}return r}class bh extends Al{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ay extends Al{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,e,r,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&RI(i,t,r[s])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=qi(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=qi(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=_y();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=e.has(s.key)?null:l;const c=Ty(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(st.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),gt())}isEqual(t){return this.batchId===t.batchId&&Cs(this.mutations,t.mutations,(e,r)=>bp(e,r))&&Cs(this.baseMutations,t.baseMutations,(e,r)=>bp(e,r))}}class wh{constructor(t,e,r,s){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=s}static from(t,e,r){et(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let s=function(){return bI}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new wh(t,e,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,vt;function kI(n){switch(n){case F.OK:return tt(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return tt(15467,{code:n})}}function xy(n){if(n===void 0)return be("GRPC error has no .code"),F.UNKNOWN;switch(n){case qt.OK:return F.OK;case qt.CANCELLED:return F.CANCELLED;case qt.UNKNOWN:return F.UNKNOWN;case qt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qt.INTERNAL:return F.INTERNAL;case qt.UNAVAILABLE:return F.UNAVAILABLE;case qt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qt.NOT_FOUND:return F.NOT_FOUND;case qt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qt.ABORTED:return F.ABORTED;case qt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qt.DATA_LOSS:return F.DATA_LOSS;default:return tt(39323,{code:n})}}(vt=qt||(qt={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new Wn([4294967295,4294967295],0);function Tp(n){const t=D_().encode(n),e=new I_;return e.update(t),new Uint8Array(e.digest())}function Ip(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Wn([e,r],0),new Wn([s,i],0)]}class Ih{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Ti(`Invalid padding: ${e}`);if(r<0)throw new Ti(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=Wn.fromNumber(this.pe)}we(t,e,r){let s=t.add(e.multiply(Wn.fromNumber(r)));return s.compare(OI)===1&&(s=new Wn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=Tp(t),[r,s]=Ip(e);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.Se(o))return!1}return!0}static create(t,e,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Ih(i,s,e);return r.forEach(l=>o.insert(l)),o}insert(t){if(this.pe===0)return;const e=Tp(t),[r,s]=Ip(e);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.be(o)}}be(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,e,r,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const s=new Map;return s.set(t,Io.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new xl(st.min(),s,new Ft(ct),ke(),gt())}}class Io{constructor(t,e,r,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Io(r,e,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t,e,r,s){this.De=t,this.removedTargetIds=e,this.key=r,this.ve=s}}class Sy{constructor(t,e){this.targetId=t,this.Ce=e}}class Py{constructor(t,e,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=s}}class Ap{constructor(){this.Fe=0,this.Me=xp(),this.xe=Kt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=gt(),e=gt(),r=gt();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}}),new Io(this.xe,this.Oe,t,e,r)}Qe(){this.Ne=!1,this.Me=xp()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class NI{constructor(t){this.ze=t,this.je=new Map,this.He=ke(),this.Je=Zo(),this.Ye=Zo(),this.Ze=new Ft(ct)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const r=this.rt(e);switch(t.state){case 0:this.it(e)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(e);break;case 3:this.it(e)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),r.ke(t.resumeToken));break;default:tt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((r,s)=>{this.it(s)&&e(s)})}ot(t){const e=t.targetId,r=t.Ce.count,s=this._t(e);if(s){const i=s.target;if($a(i))if(r===0){const o=new Y(i.path);this.tt(e,o,zt.newNoDocument(o,st.min()))}else et(r===1,20013,{expectedCount:r});else{const o=this.ut(e);if(o!==r){const l=this.ct(t),c=l?this.lt(l,t,o):1;if(c!==0){this.st(e);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,u)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=e;let o,l;try{o=In(r).toUint8Array()}catch(c){if(c instanceof Y_)return Ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Ih(o,s,i)}catch(c){return Ur(c instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,e,r){return e.Ce.count===r-this.Tt(t,e.targetId)?0:2}Tt(t,e){const r=this.ze.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(e,i,null),s++)}),s}It(t){const e=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&$a(l.target)){const c=new Y(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,zt.newNoDocument(c,t))}i.Le&&(e.set(o,i.qe()),i.Qe())}});let r=gt();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(t));const s=new xl(t,e,this.Ze,this.He,r);return this.He=ke(),this.Je=Zo(),this.Ye=Zo(),this.Ze=new Ft(ct),s}et(t,e){if(!this.it(t))return;const r=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,r),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,e)?s.$e(e,1):s.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),r&&(this.He=this.He.insert(e,r))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new Ap,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new Pt(ct),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new Pt(ct),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||q("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Ap),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function Zo(){return new Ft(Y.comparator)}function xp(){return new Ft(Y.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},FI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LI={and:"AND",or:"OR"};class BI{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function fu(n,t){return n.useProto3Json||gl(t)?t:{value:t}}function Us(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cy(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function UI(n,t){return Us(n,t.toTimestamp())}function we(n){return et(!!n,49232),st.fromTimestamp(function(e){const r=Tn(e);return new Mt(r.seconds,r.nanos)}(n))}function Ah(n,t){return du(n,t).canonicalString()}function du(n,t){const e=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Ry(n){const t=xt.fromString(n);return et(By(t),10190,{key:t.toString()}),t}function Ka(n,t){return Ah(n.databaseId,t.path)}function Mr(n,t){const e=Ry(t);if(e.get(1)!==n.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Y(ky(e))}function Vy(n,t){return Ah(n.databaseId,t)}function Dy(n){const t=Ry(n);return t.length===4?xt.emptyPath():ky(t)}function pu(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ky(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Sp(n,t,e){return{name:Ka(n,t),fields:e.value.mapValue.fields}}function jI(n,t,e){const r=Mr(n,t.name),s=we(t.updateTime),i=t.createTime?we(t.createTime):st.min(),o=new ue({mapValue:{fields:t.fields}}),l=zt.newFoundDocument(r,s,i,o);return e&&l.setHasCommittedMutations(),e?l.setHasCommittedMutations():l}function zI(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:tt(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(et(f===void 0||typeof f=="string",58123),Kt.fromBase64String(f||"")):(et(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Kt.fromUint8Array(f||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(u){const f=u.code===void 0?F.UNKNOWN:xy(u.code);return new Q(f,u.message||"")}(o);e=new Py(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mr(n,r.document.name),i=we(r.document.updateTime),o=r.document.createTime?we(r.document.createTime):st.min(),l=new ue({mapValue:{fields:r.document.fields}}),c=zt.newFoundDocument(s,i,o,l),u=r.targetIds||[],f=r.removedTargetIds||[];e=new ya(u,f,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Mr(n,r.document),i=r.readTime?we(r.readTime):st.min(),o=zt.newNoDocument(s,i),l=r.removedTargetIds||[];e=new ya([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Mr(n,r.document),i=r.removedTargetIds||[];e=new ya([],i,s,null)}else{if(!("filter"in t))return tt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new DI(s,i),l=r.targetId;e=new Sy(l,o)}}return e}function Ga(n,t){let e;if(t instanceof Ws)e={update:Sp(n,t.key,t.value)};else if(t instanceof bh)e={delete:Ka(n,t.key)};else if(t instanceof Cn)e={update:Sp(n,t.key,t.data),updateMask:WI(t.fieldMask)};else{if(!(t instanceof Ay))return tt(16599,{ft:t.type});e={verify:Ka(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof fo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ls)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof po)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw tt(20930,{transform:o.transform})}(0,r))),t.precondition.isNone||(e.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)}(n,t.precondition)),e}function mu(n,t){const e=t.currentDocument?function(i){return i.updateTime!==void 0?Se.updateTime(we(i.updateTime)):i.exists!==void 0?Se.exists(i.exists):Se.none()}(t.currentDocument):Se.none(),r=t.updateTransforms?t.updateTransforms.map(s=>function(o,l){let c=null;if("setToServerValue"in l)et(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new fo;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];c=new Ls(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];c=new Bs(f)}else"increment"in l?c=new po(o,l.increment):tt(16584,{proto:l});const u=Bt.fromServerFormat(l.fieldPath);return new SI(u,c)}(n,s)):[];if(t.update){t.update.name;const s=Mr(n,t.update.name),i=new ue({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=function(c){const u=c.fieldPaths||[];return new xe(u.map(f=>Bt.fromServerFormat(f)))}(t.updateMask);return new Cn(s,i,o,e,r)}return new Ws(s,i,e,r)}if(t.delete){const s=Mr(n,t.delete);return new bh(s,e)}if(t.verify){const s=Mr(n,t.verify);return new Ay(s,e)}return tt(1463,{proto:t})}function $I(n,t){return n&&n.length>0?(et(t!==void 0,14353),n.map(e=>function(s,i){let o=s.updateTime?we(s.updateTime):we(i);return o.isEqual(st.min())&&(o=we(i)),new CI(o,s.transformResults||[])}(e,t))):[]}function Oy(n,t){return{documents:[Vy(n,t.path)]}}function Ny(n,t){const e={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=Vy(n,s);const i=function(u){if(u.length!==0)return Ly(St.create(u,"and"))}(t.filters);i&&(e.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(m){return{field:_s(m.field),direction:KI(m.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=fu(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{gt:e,parent:s}}function My(n){let t=Dy(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let s=null;if(r>0){et(r===1,65062);const f=e.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let i=[];e.where&&(i=function(p){const m=Fy(p);return m instanceof St&&yh(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(p){return p.map(m=>function(R){return new ho(ys(R.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,gl(m)?null:m}(e.limit));let c=null;e.startAt&&(c=function(p){const m=!!p.before,E=p.values||[];return new Ms(E,m)}(e.startAt));let u=null;return e.endAt&&(u=function(p){const m=!p.before,E=p.values||[];return new Ms(E,m)}(e.endAt)),mI(t,s,o,i,l,"F",c,u)}function qI(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Fy(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=ys(e.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ys(e.unaryFilter.field);return _t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ys(e.unaryFilter.field);return _t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ys(e.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(n):n.fieldFilter!==void 0?function(e){return _t.create(ys(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return St.create(e.compositeFilter.filters.map(r=>Fy(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(e.compositeFilter.op))}(n):tt(30097,{filter:n})}function KI(n){return MI[n]}function GI(n){return FI[n]}function HI(n){return LI[n]}function _s(n){return{fieldPath:n.canonicalString()}}function ys(n){return Bt.fromServerFormat(n.fieldPath)}function Ly(n){return n instanceof _t?function(e){if(e.op==="=="){if(hp(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NAN"}};if(up(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(hp(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NOT_NAN"}};if(up(e.value))return{unaryFilter:{field:_s(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(e.field),op:GI(e.op),value:e.value}}}(n):n instanceof St?function(e){const r=e.getFilters().map(s=>Ly(s));return r.length===1?r[0]:{compositeFilter:{op:HI(e.op),filters:r}}}(n):tt(54877,{filter:n})}function WI(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function By(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t,e,r,s,i=st.min(),o=st.min(),l=Kt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new bn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t){this.wt=t}}function QI(n,t){let e;if(t.document)e=jI(n.wt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Y.fromSegments(t.noDocument.path),s=qr(t.noDocument.readTime);e=zt.newNoDocument(r,s),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return tt(56709);{const r=Y.fromSegments(t.unknownDocument.path),s=qr(t.unknownDocument.version);e=zt.newUnknownDocument(r,s)}}return t.readTime&&e.setReadTime(function(s){const i=new Mt(s[0],s[1]);return st.fromTimestamp(i)}(t.readTime)),e}function Pp(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Ha(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(i,o){return{name:Ka(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Us(i,o.version.toTimestamp()),createTime:Us(i,o.createTime.toTimestamp())}}(n.wt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:$r(t.version)};else{if(!t.isUnknownDocument())return tt(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:$r(t.version)}}return r}function Ha(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function $r(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qr(n){const t=new Mt(n.seconds,n.nanoseconds);return st.fromTimestamp(t)}function xr(n,t){const e=(t.baseMutations||[]).map(i=>mu(n.wt,i));for(let i=0;i<t.mutations.length-1;++i){const o=t.mutations[i];if(i+1<t.mutations.length&&t.mutations[i+1].transform!==void 0){const l=t.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(i=>mu(n.wt,i)),s=Mt.fromMillis(t.localWriteTimeMs);return new Eh(t.batchId,s,e,r)}function Ii(n){const t=qr(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?qr(n.lastLimboFreeSnapshotVersion):st.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const o=i.documents.length;return et(o===1,1966,{count:o}),Ue(wl(Dy(i.documents[0])))}(n.query):function(i){return Ue(My(i))}(n.query),new bn(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Kt.fromBase64String(n.resumeToken))}function jy(n,t){const e=$r(t.snapshotVersion),r=$r(t.lastLimboFreeSnapshotVersion);let s;s=$a(t.target)?Oy(n.wt,t.target):Ny(n.wt,t.target).gt;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zr(t.target),readTime:e,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function zy(n){const t=My({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hu(t,t.limit,"L"):t}function bc(n,t){return new Th(t.largestBatchId,mu(n.wt,t.overlayMutation))}function Cp(n,t){const e=t.path.lastSegment();return[n,he(t.path.popLast()),e]}function Rp(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:$r(r.readTime),documentKey:he(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{getBundleMetadata(t,e){return Vp(t).get(e).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:qr(i.createTime),version:i.version}}(r)})}saveBundleMetadata(t,e){return Vp(t).put(function(s){return{bundleId:s.id,createTime:$r(we(s.createTime)),version:s.version}}(e))}getNamedQuery(t,e){return Dp(t).get(e).next(r=>{if(r)return function(i){return{name:i.name,query:zy(i.bundledQuery),readTime:qr(i.readTime)}}(r)})}saveNamedQuery(t,e){return Dp(t).put(function(s){return{name:s.name,readTime:$r(we(s.readTime)),bundledQuery:s.bundledQuery}}(e))}}function Vp(n){return Qt(n,_l)}function Dp(n){return Qt(n,yl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e){this.serializer=t,this.userId=e}static St(t,e){const r=e.uid||"";return new Sl(t,r)}getOverlay(t,e){return mi(t).get(Cp(this.userId,e)).next(r=>r?bc(this.serializer,r):null)}getOverlays(t,e){const r=en();return P.forEach(e,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,e,r){const s=[];return r.forEach((i,o)=>{const l=new Th(e,o);s.push(this.bt(t,l))}),P.waitFor(s)}removeOverlaysForBatchId(t,e,r){const s=new Set;e.forEach(o=>s.add(he(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(mi(t).X(ru,l))}),P.waitFor(i)}getOverlaysForCollection(t,e,r){const s=en(),i=he(e),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return mi(t).J(ru,o).next(l=>{for(const c of l){const u=bc(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(t,e,r,s){const i=en();let o;const l=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return mi(t).te({index:q_,range:l},(c,u,f)=>{const p=bc(this.serializer,u);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>i)}bt(t,e){return mi(t).put(function(s,i,o){const[l,c,u]=Cp(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ga(s.wt,o.mutation)}}(this.serializer,this.userId,e))}}function mi(n){return Qt(n,vl)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{Dt(t){return Qt(t,dh)}getSessionToken(t){return this.Dt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?Kt.fromUint8Array(r):Kt.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.Dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){}vt(t,e){this.Ct(t,e),e.Ft()}Ct(t,e){if("nullValue"in t)this.Mt(e,5);else if("booleanValue"in t)this.Mt(e,10),e.xt(t.booleanValue?1:0);else if("integerValue"in t)this.Mt(e,15),e.xt(Nt(t.integerValue));else if("doubleValue"in t){const r=Nt(t.doubleValue);isNaN(r)?this.Mt(e,13):(this.Mt(e,15),ro(r)?e.xt(0):e.xt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Mt(e,20),typeof r=="string"&&(r=Tn(r)),e.Ot(`${r.seconds||""}`),e.xt(r.nanos||0)}else if("stringValue"in t)this.Nt(t.stringValue,e),this.Bt(e);else if("bytesValue"in t)this.Mt(e,30),e.Lt(In(t.bytesValue)),this.Bt(e);else if("referenceValue"in t)this.kt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Mt(e,45),e.xt(r.latitude||0),e.xt(r.longitude||0)}else"mapValue"in t?ny(t)?this.Mt(e,Number.MAX_SAFE_INTEGER):El(t)?this.qt(t.mapValue,e):(this.Qt(t.mapValue,e),this.Bt(e)):"arrayValue"in t?(this.$t(t.arrayValue,e),this.Bt(e)):tt(19022,{Ut:t})}Nt(t,e){this.Mt(e,25),this.Kt(t,e)}Kt(t,e){e.Ot(t)}Qt(t,e){const r=t.fields||{};this.Mt(e,55);for(const s of Object.keys(r))this.Nt(s,e),this.Ct(r[s],e)}qt(t,e){var r,s;const i=t.fields||{};this.Mt(e,53);const o=Os,l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Mt(e,15),e.xt(Nt(l)),this.Nt(o,e),this.Ct(i[o],e)}$t(t,e){const r=t.values||[];this.Mt(e,50);for(const s of r)this.Ct(s,e)}kt(t,e){this.Mt(e,37),Y.fromName(t).path.forEach(r=>{this.Mt(e,60),this.Kt(r,e)})}Mt(t,e){t.xt(e)}Bt(t){t.xt(2)}}Sr.Wt=new Sr;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=255;function JI(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function kp(n){const t=64-function(r){let s=0;for(let i=0;i<8;++i){const o=JI(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(t/8)}class ZI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.zt(r.value),r=e.next();this.jt()}Ht(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Yt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const s=e.codePointAt(0);this.zt(240|s>>>18),this.zt(128|63&s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s)}}this.jt()}Xt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=e.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Yt()}en(t){const e=this.tn(t),r=kp(e);this.nn(1+r),this.buffer[this.position++]=255&r;for(let s=e.length-r;s<e.length;++s)this.buffer[this.position++]=255&e[s]}rn(t){const e=this.tn(t),r=kp(e);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let s=e.length-r;s<e.length;++s)this.buffer[this.position++]=~(255&e[s])}sn(){this._n(cs),this._n(255)}an(){this.un(cs),this.un(255)}reset(){this.position=0}seed(t){this.nn(t.length),this.buffer.set(t,this.position),this.position+=t.length}cn(){return this.buffer.slice(0,this.position)}tn(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let s=1;s<e.length;++s)e[s]^=r?255:0;return e}zt(t){const e=255&t;e===0?(this._n(0),this._n(255)):e===cs?(this._n(cs),this._n(0)):this._n(e)}Jt(t){const e=255&t;e===0?(this.un(0),this.un(255)):e===cs?(this.un(cs),this.un(0)):this.un(t)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(t){this.nn(1),this.buffer[this.position++]=t}un(t){this.nn(1),this.buffer[this.position++]=~t}nn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class tA{constructor(t){this.ln=t}Lt(t){this.ln.Gt(t)}Ot(t){this.ln.Zt(t)}xt(t){this.ln.en(t)}Ft(){this.ln.sn()}}class eA{constructor(t){this.ln=t}Lt(t){this.ln.Ht(t)}Ot(t){this.ln.Xt(t)}xt(t){this.ln.rn(t)}Ft(){this.ln.an()}}class gi{constructor(){this.ln=new ZI,this.hn=new tA(this.ln),this.Pn=new eA(this.ln)}seed(t){this.ln.seed(t)}Tn(t){return t===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t,e,r,s){this.In=t,this.En=e,this.dn=r,this.An=s}Rn(){const t=this.An.length,e=t===0||this.An[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.An,0),e!==t?r.set([0],this.An.length):++r[r.length-1],new Pr(this.In,this.En,this.dn,r)}Vn(t,e,r){return{indexId:this.In,uid:t,arrayValue:va(this.dn),directionalValue:va(this.An),orderedDocumentKey:va(e),documentKey:r.path.toArray()}}mn(t,e,r){const s=this.Vn(t,e,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Nn(n,t){let e=n.In-t.In;return e!==0?e:(e=Op(n.dn,t.dn),e!==0?e:(e=Op(n.An,t.An),e!==0?e:Y.comparator(n.En,t.En)))}function Op(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function va(n){return m_()?function(e){let r="";for(let s=0;s<e.length;s++)r+=String.fromCharCode(e[s]);return r}(n):n}function Np(n){return typeof n!="string"?n:function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}(n)}class Mp{constructor(t){this.fn=new Pt((e,r)=>Bt.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.gn=t.orderBy,this.pn=[];for(const e of t.filters){const r=e;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(t){if(et(t.collectionGroup===this.collectionId,49279),this.yn)return!1;const e=tu(t);if(e!==void 0&&!this.Sn(e))return!1;const r=Tr(t);let s=new Set,i=0,o=0;for(;i<r.length&&this.Sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.fn.size>0){const l=this.fn.getIterator().getNext();if(!s.has(l.field.canonicalString())){const c=r[i];if(!this.bn(l,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],l))return!1}return!0}vn(){if(this.yn)return null;let t=new Pt(Bt.comparator);const e=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new ha(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new ha(r.field,0))}for(const r of this.gn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new ha(r.field,r.dir==="asc"?0:1)));return new La(La.UNKNOWN_ID,this.collectionId,e,no.empty())}Sn(t){for(const e of this.pn)if(this.bn(e,t))return!0;return!1}bn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}Dn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n){var t,e;if(et(n instanceof _t||n instanceof St,20012),n instanceof _t){if(n instanceof hy){const s=((e=(t=n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(i=>_t.create(n.field,"==",i)))||[];return St.create(s,"or")}return n}const r=n.filters.map(s=>$y(s));return St.create(r,n.op)}function nA(n){if(n.getFilters().length===0)return[];const t=yu($y(n));return et(qy(t),7391),gu(t)||_u(t)?[t]:t.getFilters()}function gu(n){return n instanceof _t}function _u(n){return n instanceof St&&yh(n)}function qy(n){return gu(n)||_u(n)||function(e){if(e instanceof St&&au(e)){for(const r of e.getFilters())if(!gu(r)&&!_u(r))return!1;return!0}return!1}(n)}function yu(n){if(et(n instanceof _t||n instanceof St,34018),n instanceof _t)return n;if(n.filters.length===1)return yu(n.filters[0]);const t=n.filters.map(r=>yu(r));let e=St.create(t,n.op);return e=Wa(e),qy(e)?e:(et(e instanceof St,64498),et(Fs(e),40251),et(e.filters.length>1,57927),e.filters.reduce((r,s)=>xh(r,s)))}function xh(n,t){let e;return et(n instanceof _t||n instanceof St,38388),et(t instanceof _t||t instanceof St,25473),e=n instanceof _t?t instanceof _t?function(s,i){return St.create([s,i],"and")}(n,t):Fp(n,t):t instanceof _t?Fp(t,n):function(s,i){if(et(s.filters.length>0&&i.filters.length>0,48005),Fs(s)&&Fs(i))return ly(s,i.getFilters());const o=au(s)?s:i,l=au(s)?i:s,c=o.filters.map(u=>xh(u,l));return St.create(c,"or")}(n,t),Wa(e)}function Fp(n,t){if(Fs(t))return ly(t,n.getFilters());{const e=t.filters.map(r=>xh(n,r));return St.create(e,"or")}}function Wa(n){if(et(n instanceof _t||n instanceof St,11850),n instanceof _t)return n;const t=n.getFilters();if(t.length===1)return Wa(t[0]);if(oy(n))return n;const e=t.map(s=>Wa(s)),r=[];return e.forEach(s=>{s instanceof _t?r.push(s):s instanceof St&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:St.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Cn=new Sh}addToCollectionParentIndex(t,e){return this.Cn.add(e),P.resolve()}getCollectionParents(t,e){return P.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return P.resolve()}deleteFieldIndex(t,e){return P.resolve()}deleteAllFieldIndexes(t){return P.resolve()}createTargetIndexes(t,e){return P.resolve()}getDocumentsMatchingTarget(t,e){return P.resolve(null)}getIndexType(t,e){return P.resolve(0)}getFieldIndexes(t,e){return P.resolve([])}getNextCollectionGroupToUpdate(t){return P.resolve(null)}getMinOffset(t,e){return P.resolve(Oe.min())}getMinOffsetFromCollectionGroup(t,e){return P.resolve(Oe.min())}updateCollectionGroup(t,e,r){return P.resolve()}updateIndexEntries(t,e){return P.resolve()}}class Sh{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e]||new Pt(xt.comparator),i=!s.has(r);return this.index[e]=s.add(r),i}has(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Pt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="IndexedDbIndexManager",ta=new Uint8Array(0);class sA{constructor(t,e){this.databaseId=e,this.Fn=new Sh,this.Mn=new Pn(r=>zr(r),(r,s)=>wo(r,s)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Fn.has(e)){const r=e.lastSegment(),s=e.popLast();t.addOnCommittedListener(()=>{this.Fn.add(e)});const i={collectionId:r,parent:he(s)};return Bp(t).put(i)}return P.resolve()}getCollectionParents(t,e){const r=[],s=IDBKeyRange.bound([e,""],[O_(e),""],!1,!0);return Bp(t).J(s).next(i=>{for(const o of i){if(o.collectionId!==e)break;r.push(tn(o.parent))}return r})}addFieldIndex(t,e){const r=_i(t),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(e);delete s.indexId;const i=r.add(s);if(e.indexState){const o=hs(t);return i.next(l=>{o.put(Rp(l,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return i.next()}deleteFieldIndex(t,e){const r=_i(t),s=hs(t),i=us(t);return r.delete(e.indexId).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=_i(t),r=us(t),s=hs(t);return e.X().next(()=>r.X()).next(()=>s.X())}createTargetIndexes(t,e){return P.forEach(this.xn(e),r=>this.getIndexType(t,r).next(s=>{if(s===0||s===1){const i=new Mp(r).vn();if(i!=null)return this.addFieldIndex(t,i)}}))}getDocumentsMatchingTarget(t,e){const r=us(t);let s=!0;const i=new Map;return P.forEach(this.xn(e),o=>this.On(t,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=gt();const l=[];return P.forEach(i,(c,u)=>{q(Lp,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${zr(e)}`);const f=function(L,U){const Z=tu(U);if(Z===void 0)return null;for(const at of qa(L,Z.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(u,c),p=function(L,U){const Z=new Map;for(const at of Tr(U))for(const T of qa(L,at.fieldPath))switch(T.op){case"==":case"in":Z.set(at.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return Z.set(at.fieldPath.canonicalString(),T.value),Array.from(Z.values())}return null}(u,c),m=function(L,U){const Z=[];let at=!0;for(const T of Tr(U)){const _=T.kind===0?gp(L,T.fieldPath,L.startAt):_p(L,T.fieldPath,L.startAt);Z.push(_.value),at&&(at=_.inclusive)}return new Ms(Z,at)}(u,c),E=function(L,U){const Z=[];let at=!0;for(const T of Tr(U)){const _=T.kind===0?_p(L,T.fieldPath,L.endAt):gp(L,T.fieldPath,L.endAt);Z.push(_.value),at&&(at=_.inclusive)}return new Ms(Z,at)}(u,c),R=this.Nn(c,u,m),V=this.Nn(c,u,E),v=this.Bn(c,u,p),N=this.Ln(c.indexId,f,R,m.inclusive,V,E.inclusive,v);return P.forEach(N,D=>r.Z(D,e.limit).next(L=>{L.forEach(U=>{const Z=Y.fromSegments(U.documentKey);o.has(Z)||(o=o.add(Z),l.push(Z))})}))}).next(()=>l)}return P.resolve(null)})}xn(t){let e=this.Mn.get(t);return e||(t.filters.length===0?e=[t]:e=nA(St.create(t.filters,"and")).map(r=>cu(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.Mn.set(t,e),e)}Ln(t,e,r,s,i,o,l){const c=(e!=null?e.length:1)*Math.max(r.length,i.length),u=c/(e!=null?e.length:1),f=[];for(let p=0;p<c;++p){const m=e?this.kn(e[p/u]):ta,E=this.qn(t,m,r[p%u],s),R=this.Qn(t,m,i[p%u],o),V=l.map(v=>this.qn(t,m,v,!0));f.push(...this.createRange(E,R,V))}return f}qn(t,e,r,s){const i=new Pr(t,Y.empty(),e,r);return s?i:i.Rn()}Qn(t,e,r,s){const i=new Pr(t,Y.empty(),e,r);return s?i.Rn():i}On(t,e){const r=new Mp(e),s=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,s).next(i=>{let o=null;for(const l of i)r.wn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(t,e){let r=2;const s=this.xn(e);return P.forEach(s,i=>this.On(t,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Pt(Bt.comparator),f=!1;for(const p of c.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:u=u.add(m.field));for(const p of c.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(e)&&s.length>1&&r===2?1:r)}$n(t,e){const r=new gi;for(const s of Tr(t)){const i=e.data.field(s.fieldPath);if(i==null)return null;const o=r.Tn(s.kind);Sr.Wt.vt(i,o)}return r.cn()}kn(t){const e=new gi;return Sr.Wt.vt(t,e.Tn(0)),e.cn()}Un(t,e){const r=new gi;return Sr.Wt.vt(co(this.databaseId,e),r.Tn(function(i){const o=Tr(i);return o.length===0?0:o[o.length-1].kind}(t))),r.cn()}Bn(t,e,r){if(r===null)return[];let s=[];s.push(new gi);let i=0;for(const o of Tr(t)){const l=r[i++];for(const c of s)if(this.Kn(e,o.fieldPath)&&uo(l))s=this.Wn(s,o,l);else{const u=c.Tn(o.kind);Sr.Wt.vt(l,u)}}return this.Gn(s)}Nn(t,e,r){return this.Bn(t,e,r.position)}Gn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].cn();return e}Wn(t,e,r){const s=[...t],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const c=new gi;c.seed(l.cn()),Sr.Wt.vt(o,c.Tn(e.kind)),i.push(c)}return i}Kn(t,e){return!!t.filters.find(r=>r instanceof _t&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=_i(t),s=hs(t);return(e?r.J(nu,IDBKeyRange.bound(e,e)):r.J()).next(i=>{const o=[];return P.forEach(i,l=>s.get([l.indexId,this.uid]).next(c=>{o.push(function(f,p){const m=p?new no(p.sequenceNumber,new Oe(qr(p.readTime),new Y(tn(p.documentKey)),p.largestBatchId)):no.empty(),E=f.fields.map(([R,V])=>new ha(Bt.fromServerFormat(R),V));return new La(f.indexId,f.collectionGroup,E,m)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ct(r.collectionGroup,s.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const s=_i(t),i=hs(t);return this.zn(t).next(o=>s.J(nu,IDBKeyRange.bound(e,e)).next(l=>P.forEach(l,c=>i.put(Rp(c.indexId,this.uid,o,r)))))}updateIndexEntries(t,e){const r=new Map;return P.forEach(e,(s,i)=>{const o=r.get(s.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(t,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),P.forEach(l,c=>this.jn(t,s,c).next(u=>{const f=this.Hn(i,c);return u.isEqual(f)?P.resolve():this.Jn(t,i,c,u,f)}))))})}Yn(t,e,r,s){return us(t).put(s.Vn(this.uid,this.Un(r,e.key),e.key))}Zn(t,e,r,s){return us(t).delete(s.mn(this.uid,this.Un(r,e.key),e.key))}jn(t,e,r){const s=us(t);let i=new Pt(Nn);return s.te({index:$_,range:IDBKeyRange.only([r.indexId,this.uid,va(this.Un(r,e))])},(o,l)=>{i=i.add(new Pr(r.indexId,e,Np(l.arrayValue),Np(l.directionalValue)))}).next(()=>i)}Hn(t,e){let r=new Pt(Nn);const s=this.$n(e,t);if(s==null)return r;const i=tu(e);if(i!=null){const o=t.data.field(i.fieldPath);if(uo(o))for(const l of o.arrayValue.values||[])r=r.add(new Pr(e.indexId,t.key,this.kn(l),s))}else r=r.add(new Pr(e.indexId,t.key,ta,s));return r}Jn(t,e,r,s,i){q(Lp,"Updating index entries for document '%s'",e.key);const o=[];return function(c,u,f,p,m){const E=c.getIterator(),R=u.getIterator();let V=ls(E),v=ls(R);for(;V||v;){let N=!1,D=!1;if(V&&v){const L=f(V,v);L<0?D=!0:L>0&&(N=!0)}else V!=null?D=!0:N=!0;N?(p(v),v=ls(R)):D?(m(V),V=ls(E)):(V=ls(E),v=ls(R))}}(s,i,Nn,l=>{o.push(this.Yn(t,e,r,l))},l=>{o.push(this.Zn(t,e,r,l))}),P.waitFor(o)}zn(t){let e=1;return hs(t).te({index:z_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),e=s.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((o,l)=>Nn(o,l)).filter((o,l,c)=>!l||Nn(o,c[l-1])!==0);const s=[];s.push(t);for(const o of r){const l=Nn(o,t),c=Nn(o,e);if(l===0)s[0]=t.Rn();else if(l>0&&c<0)s.push(o),s.push(o.Rn());else if(c>0)break}s.push(e);const i=[];for(let o=0;o<s.length;o+=2){if(this.Xn(s[o],s[o+1]))return[];const l=s[o].mn(this.uid,ta,Y.empty()),c=s[o+1].mn(this.uid,ta,Y.empty());i.push(IDBKeyRange.bound(l,c))}return i}Xn(t,e){return Nn(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Up)}getMinOffset(t,e){return P.mapArray(this.xn(e),r=>this.On(t,r).next(s=>s||tt(44426))).next(Up)}}function Bp(n){return Qt(n,oo)}function us(n){return Qt(n,Ui)}function _i(n){return Qt(n,fh)}function hs(n){return Qt(n,Bi)}function Up(n){et(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;ch(s,t)<0&&(t=s),e<s.largestBatchId&&(e=s.largestBatchId)}return new Oe(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ky=41943040;class le{static withCacheSize(t){return new le(t,le.DEFAULT_COLLECTION_PERCENTILE,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(n,t,e){const r=n.store(Ke),s=n.store(Rs),i=[],o=IDBKeyRange.only(e.batchId);let l=0;const c=r.te({range:o},(f,p,m)=>(l++,m.delete()));i.push(c.next(()=>{et(l===1,47070,{batchId:e.batchId})}));const u=[];for(const f of e.mutations){const p=B_(t,f.key.path,e.batchId);i.push(s.delete(p)),u.push(f.key)}return P.waitFor(i).next(()=>u)}function Qa(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw tt(14731);t=n.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */le.DEFAULT_COLLECTION_PERCENTILE=10,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,le.DEFAULT=new le(Ky,le.DEFAULT_COLLECTION_PERCENTILE,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),le.DISABLED=new le(-1,0,0);class Pl{constructor(t,e,r,s){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=s,this.er={}}static St(t,e,r,s){et(t.uid!=="",64387);const i=t.isAuthenticated()?t.uid:"";return new Pl(i,e,r,s)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mn(t).te({index:Cr,range:r},(s,i,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,r,s){const i=vs(t),o=Mn(t);return o.add({}).next(l=>{et(typeof l=="number",49019);const c=new Eh(l,e,r,s),u=function(E,R,V){const v=V.baseMutations.map(D=>Ga(E.wt,D)),N=V.mutations.map(D=>Ga(E.wt,D));return{userId:R,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:v,mutations:N}}(this.serializer,this.userId,c),f=[];let p=new Pt((m,E)=>ct(m.canonicalString(),E.canonicalString()));for(const m of s){const E=B_(this.userId,m.key.path,l);p=p.add(m.key.path.popLast()),f.push(o.put(u)),f.push(i.put(E,kT))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.er[l]=c.keys()}),P.waitFor(f).next(()=>c)})}lookupMutationBatch(t,e){return Mn(t).get(e).next(r=>r?(et(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),xr(this.serializer,r)):null)}tr(t,e){return this.er[e]?P.resolve(this.er[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const s=r.keys();return this.er[e]=s,s}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Mn(t).te({index:Cr,range:s},(o,l,c)=>{l.userId===this.userId&&(et(l.batchId>=r,47524,{nr:r}),i=xr(this.serializer,l)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Or;return Mn(t).te({index:Cr,range:e,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Or],[this.userId,Number.POSITIVE_INFINITY]);return Mn(t).J(Cr,e).next(r=>r.map(s=>xr(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=fa(this.userId,e.path),s=IDBKeyRange.lowerBound(r),i=[];return vs(t).te({range:s},(o,l,c)=>{const[u,f,p]=o,m=tn(f);if(u===this.userId&&e.path.isEqual(m))return Mn(t).get(p).next(E=>{if(!E)throw tt(61480,{rr:o,batchId:p});et(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:p}),i.push(xr(this.serializer,E))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Pt(ct);const s=[];return e.forEach(i=>{const o=fa(this.userId,i.path),l=IDBKeyRange.lowerBound(o),c=vs(t).te({range:l},(u,f,p)=>{const[m,E,R]=u,V=tn(E);m===this.userId&&i.path.isEqual(V)?r=r.add(R):p.done()});s.push(c)}),P.waitFor(s).next(()=>this.ir(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1,i=fa(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new Pt(ct);return vs(t).te({range:o},(c,u,f)=>{const[p,m,E]=c,R=tn(m);p===this.userId&&r.isPrefixOf(R)?R.length===s&&(l=l.add(E)):f.done()}).next(()=>this.ir(t,l))}ir(t,e){const r=[],s=[];return e.forEach(i=>{s.push(Mn(t).get(i).next(o=>{if(o===null)throw tt(35274,{batchId:i});et(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(xr(this.serializer,o))}))}),P.waitFor(s).next(()=>r)}removeMutationBatch(t,e){return Gy(t.he,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.sr(e.batchId)}),P.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(t,s))))}sr(t){delete this.er[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return P.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return vs(t).te({range:r},(i,o,l)=>{if(i[0]===this.userId){const c=tn(i[1]);s.push(c)}else l.done()}).next(()=>{et(s.length===0,56720,{_r:s.map(i=>i.canonicalString())})})})}containsKey(t,e){return Hy(t,this.userId,e)}ar(t){return Wy(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Or,lastStreamToken:""})}}function Hy(n,t,e){const r=fa(t,e.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return vs(n).te({range:i,ee:!0},(l,c,u)=>{const[f,p,m]=l;f===t&&p===s&&(o=!0),u.done()}).next(()=>o)}function Mn(n){return Qt(n,Ke)}function vs(n){return Qt(n,Rs)}function Wy(n){return Qt(n,so)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Kr(0)}static lr(){return new Kr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.hr(t).next(e=>{const r=new Kr(e.highestTargetId);return e.highestTargetId=r.next(),this.Pr(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.hr(t).next(e=>st.fromTimestamp(new Mt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.hr(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.hr(t).next(s=>(s.highestListenSequenceNumber=e,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),e>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=e),this.Pr(t,s)))}addTargetData(t,e){return this.Tr(t,e).next(()=>this.hr(t).next(r=>(r.targetCount+=1,this.Ir(e,r),this.Pr(t,r))))}updateTargetData(t,e){return this.Tr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>fs(t).delete(e.targetId)).next(()=>this.hr(t)).next(r=>(et(r.targetCount>0,8065),r.targetCount-=1,this.Pr(t,r)))}removeTargets(t,e,r){let s=0;const i=[];return fs(t).te((o,l)=>{const c=Ii(l);c.sequenceNumber<=e&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(t,c)))}).next(()=>P.waitFor(i)).next(()=>s)}forEachTarget(t,e){return fs(t).te((r,s)=>{const i=Ii(s);e(i)})}hr(t){return zp(t).get(ja).next(e=>(et(e!==null,2888),e))}Pr(t,e){return zp(t).put(ja,e)}Tr(t,e){return fs(t).put(jy(this.serializer,e))}Ir(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.hr(t).next(e=>e.targetCount)}getTargetData(t,e){const r=zr(e),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return fs(t).te({range:s,index:j_},(o,l,c)=>{const u=Ii(l);wo(e,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(t,e,r){const s=[],i=$n(t);return e.forEach(o=>{const l=he(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(t,r,o))}),P.waitFor(s)}removeMatchingKeys(t,e,r){const s=$n(t);return P.forEach(e,i=>{const o=he(i.path);return P.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(t,r,i)])})}removeMatchingKeysForTargetId(t,e){const r=$n(t),s=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),s=$n(t);let i=gt();return s.te({range:r,ee:!0},(o,l,c)=>{const u=tn(o[1]),f=new Y(u);i=i.add(f)}).next(()=>i)}containsKey(t,e){const r=he(e.path),s=IDBKeyRange.bound([r],[O_(r)],!1,!0);let i=0;return $n(t).te({index:hh,ee:!0,range:s},([o,l],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}Rt(t,e){return fs(t).get(e).next(r=>r?Ii(r):null)}}function fs(n){return Qt(n,Vs)}function zp(n){return Qt(n,Nr)}function $n(n){return Qt(n,Ds)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="LruGarbageCollector",oA=1048576;function qp([n,t],[e,r]){const s=ct(n,e);return s===0?ct(t,r):s}class aA{constructor(t){this.Er=t,this.buffer=new Pt(qp),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();qp(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Qy{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){q($p,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lr(e)?q($p,"Ignoring IndexedDB error during garbage collection: ",e):await Yr(e)}await this.mr(3e5)})}}class lA{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return P.resolve(Be.le);const r=new aA(e);return this.gr.forEachTarget(t,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(t,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.gr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(jp)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let r,s,i,o,l,c,u;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(t,r,e))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(u=Date.now(),ms()<=bt.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Yy(n,t){return new lA(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t,e){this.db=t,this.garbageCollector=Yy(this,e)}pr(t){const e=this.Sr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(s=>r+s))}Sr(t){let e=0;return this.yr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}yr(t,e){return this.br(t,(r,s)=>e(s))}addReference(t,e,r){return ea(t,r)}removeReference(t,e,r){return ea(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return ea(t,e)}Dr(t,e){return function(s,i){let o=!1;return Wy(s).ne(l=>Hy(s,l,i).next(c=>(c&&(o=!0),P.resolve(!c)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.br(t,(o,l)=>{if(l<=e){const c=this.Dr(t,o).next(u=>{if(!u)return i++,r.getEntry(t,o).next(()=>(r.removeEntry(o,st.min()),$n(t).delete(function(p){return[0,he(p.path)]}(o))))});s.push(c)}}).next(()=>P.waitFor(s)).next(()=>r.apply(t)).next(()=>i)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return ea(t,e)}br(t,e){const r=$n(t);let s,i=Be.le;return r.te({index:hh},([o,l],{path:c,sequenceNumber:u})=>{o===0?(i!==Be.le&&e(new Y(tn(s)),i),i=u,s=c):i=Be.le}).next(()=>{i!==Be.le&&e(new Y(tn(s)),i)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ea(n,t){return $n(n).put(function(r,s){return{targetId:0,path:he(r.path),sequenceNumber:s}}(t,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.changes=new Pn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,zt.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?P.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return br(t).put(r)}removeEntry(t,e,r){return br(t).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ha(o),l[l.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.vr(t,r)))}getEntry(t,e){let r=zt.newInvalidDocument(e);return br(t).te({index:da,range:IDBKeyRange.only(yi(e))},(s,i)=>{r=this.Cr(e,i)}).next(()=>r)}Fr(t,e){let r={size:0,document:zt.newInvalidDocument(e)};return br(t).te({index:da,range:IDBKeyRange.only(yi(e))},(s,i)=>{r={document:this.Cr(e,i),size:Qa(i)}}).next(()=>r)}getEntries(t,e){let r=ke();return this.Mr(t,e,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Or(t,e){let r=ke(),s=new Ft(Y.comparator);return this.Mr(t,e,(i,o)=>{const l=this.Cr(i,o);r=r.insert(i,l),s=s.insert(i,Qa(o))}).next(()=>({documents:r,Nr:s}))}Mr(t,e,r){if(e.isEmpty())return P.resolve();let s=new Pt(Hp);e.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(yi(s.first()),yi(s.last())),o=s.getIterator();let l=o.getNext();return br(t).te({index:da,range:i},(c,u,f)=>{const p=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&Hp(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,u),l=o.hasNext()?o.getNext():null),l?f.H(yi(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,r,s,i){const o=e.path,l=[o.popLast().toArray(),o.lastSegment(),Ha(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return br(t).J(IDBKeyRange.bound(l,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let f=ke();for(const p of u){const m=this.Cr(Y.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(To(e,m)||s.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(t,e,r,s){let i=ke();const o=Gp(e,r),l=Gp(e,Oe.max());return br(t).te({index:U_,range:IDBKeyRange.bound(o,l,!0)},(c,u,f)=>{const p=this.Cr(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(p.key,p),i.size===s&&f.done()}).next(()=>i)}newChangeBuffer(t){return new hA(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Kp(t).get(eu).next(e=>(et(!!e,20021),e))}vr(t,e){return Kp(t).put(eu,e)}Cr(t,e){if(e){const r=QI(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(st.min())))return r}return zt.newInvalidDocument(t)}}function Jy(n){return new uA(n)}class hA extends Xy{constructor(t,e){super(),this.Br=t,this.trackRemovals=e,this.Lr=new Pn(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(t){const e=[];let r=0,s=new Pt((i,o)=>ct(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.Lr.get(i);if(e.push(this.Br.removeEntry(t,i,l.readTime)),o.isValidDocument()){const c=Pp(this.Br.serializer,o);s=s.add(i.path.popLast());const u=Qa(c);r+=u-l.size,e.push(this.Br.addEntry(t,i,c))}else if(r-=l.size,this.trackRemovals){const c=Pp(this.Br.serializer,o.convertToNoDocument(st.min()));e.push(this.Br.addEntry(t,i,c))}}),s.forEach(i=>{e.push(this.Br.indexManager.addToCollectionParentIndex(t,i))}),e.push(this.Br.updateMetadata(t,r)),P.waitFor(e)}getFromCache(t,e){return this.Br.Fr(t,e).next(r=>(this.Lr.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Br.Or(t,e).next(({documents:r,Nr:s})=>(s.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Kp(n){return Qt(n,io)}function br(n){return Qt(n,Ua)}function yi(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Gp(n,t){const e=t.documentKey.path.toArray();return[n,Ha(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Hp(n,t){const e=n.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<e.length-2&&i<r.length-2;++i)if(s=ct(e[i],r[i]),s)return s;return s=ct(e.length,r.length),s||(s=ct(e[e.length-2],r[r.length-2]),s||ct(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,e,r,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(r!==null&&qi(r.mutation,s,xe.empty(),Mt.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,gt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=gt()){const s=en();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,r).next(i=>{let o=wi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const r=en();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,gt()))}populateOverlays(t,e,r){const s=[];return r.forEach(i=>{e.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,r,s){let i=ke();const o=$i(),l=function(){return $i()}();return e.forEach((c,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Cn)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),qi(f.mutation,u,f.mutation.getFieldMask(),Mt.now())):o.set(u.key,xe.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((u,f)=>o.set(u,f)),e.forEach((u,f)=>{var p;return l.set(u,new fA(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,e){const r=$i();let s=new Ft((o,l)=>o-l),i=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=e.get(c);if(u===null)return;let f=r.get(c)||xe.empty();f=l.applyToLocalView(u,f),r.set(c,f);const p=(s.get(l.batchId)||gt()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,f=c.value,p=_y();f.forEach(m=>{if(!i.has(m)){const E=Ty(e.get(m),r.get(m));E!==null&&p.set(m,E),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fy(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,s):this.getDocumentsMatchingCollectionQuery(t,e,r,s)}getNextDocuments(t,e,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,s-i.size):P.resolve(en());let l=eo,c=i;return o.next(u=>P.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?P.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(t,u,i)).next(()=>this.computeViews(t,c,u,gt())).next(f=>({batchId:l,changes:gy(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Y(e)).next(r=>{let s=wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,r,s){const i=e.collectionGroup;let o=wi();return this.indexManager.getCollectionParents(t,i).next(l=>P.forEach(l,c=>{const u=function(p,m){return new Hs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,u,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,i,s))).next(o=>{i.forEach((c,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,zt.newInvalidDocument(f)))});let l=wi();return o.forEach((c,u)=>{const f=i.get(c);f!==void 0&&qi(f.mutation,u,xe.empty(),Mt.now()),To(e,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return P.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:we(s.createTime)}}(e)),P.resolve()}getNamedQuery(t,e){return P.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(s){return{name:s.name,query:zy(s.bundledQuery),readTime:we(s.readTime)}}(e)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.overlays=new Ft(Y.comparator),this.Qr=new Map}getOverlay(t,e){return P.resolve(this.overlays.get(e))}getOverlays(t,e){const r=en();return P.forEach(e,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((s,i)=>{this.bt(t,e,i)}),P.resolve()}removeOverlaysForBatchId(t,e,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(t,e,r){const s=en(),i=e.length+1,o=new Y(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return P.resolve(s)}getOverlaysForCollectionGroup(t,e,r,s){let i=new Ft((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=en(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const l=en(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=s)););return P.resolve(l)}bt(t,e,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Th(e,r));let i=this.Qr.get(e);i===void 0&&(i=gt(),this.Qr.set(e,i)),this.Qr.set(e,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(t){return P.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this.$r=new Pt(Yt.Ur),this.Kr=new Pt(Yt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const r=new Yt(t,e);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.zr(new Yt(t,e))}jr(t,e){t.forEach(r=>this.removeReference(r,e))}Hr(t){const e=new Y(new xt([])),r=new Yt(e,t),s=new Yt(e,t+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Y(new xt([])),r=new Yt(e,t),s=new Yt(e,t+1);let i=gt();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const e=new Yt(t,0),r=this.$r.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Yt{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Y.comparator(t.key,e.key)||ct(t.Zr,e.Zr)}static Wr(t,e){return ct(t.Zr,e.Zr)||Y.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new Pt(Yt.Ur)}checkEmpty(t){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Eh(i,e,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Yt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return P.resolve(o)}lookupMutationBatch(t,e){return P.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=this.ti(r),i=s<0?0:s;return P.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Or:this.nr-1)}getAllMutationBatches(t){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Yt(e,0),s=new Yt(e,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),P.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Pt(ct);return e.forEach(s=>{const i=new Yt(s,0),o=new Yt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Yt(new Y(i),0);let l=new Pt(ct);return this.Xr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Zr)),!0)},o),P.resolve(this.ni(l))}ni(t){const e=[];return t.forEach(r=>{const s=this.ei(r);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){et(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(e.mutations,s=>{const i=new Yt(s.key,e.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,e){const r=new Yt(e,0),s=this.Xr.firstAfterOrEqual(r);return P.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,P.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t){this.ii=t,this.docs=function(){return new Ft(Y.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return P.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(e))}getEntries(t,e){let r=ke();return e.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():zt.newInvalidDocument(s))}),P.resolve(r)}getDocumentsMatchingQuery(t,e,r,s){let i=ke();const o=e.path,l=new Y(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ch(N_(f),r)<=0||(s.has(f.key)||To(e,f))&&(i=i.insert(f.key,f.mutableCopy()))}return P.resolve(i)}getAllFromCollectionGroup(t,e,r,s){tt(9500)}si(t,e){return P.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new yA(this)}getSize(t){return P.resolve(this.size)}}class yA extends Xy{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?e.push(this.Br.addEntry(t,s)):this.Br.removeEntry(r)}),P.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t){this.persistence=t,this.oi=new Pn(e=>zr(e),wo),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this._i=0,this.ai=new Ph,this.targetCount=0,this.ui=Kr.cr()}forEachTarget(t,e){return this.oi.forEach((r,s)=>e(s)),P.resolve()}getLastRemoteSnapshotVersion(t){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return P.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this._i&&(this._i=e),P.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new Kr(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,P.resolve()}updateTargetData(t,e){return this.Tr(e),P.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,P.resolve()}removeTargets(t,e,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),P.waitFor(i).next(()=>s)}getTargetCount(t){return P.resolve(this.targetCount)}getTargetData(t,e){const r=this.oi.get(e)||null;return P.resolve(r)}addMatchingKeys(t,e,r){return this.ai.Gr(e,r),P.resolve()}removeMatchingKeys(t,e,r){this.ai.jr(e,r);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),P.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),P.resolve()}getMatchingKeysForTargetId(t,e){const r=this.ai.Yr(e);return P.resolve(r)}containsKey(t,e){return P.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,e){this.ci={},this.overlays={},this.li=new Be(0),this.hi=!1,this.hi=!0,this.Pi=new mA,this.referenceDelegate=t(this),this.Ti=new vA(this),this.indexManager=new rA,this.remoteDocumentCache=function(s){return new _A(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Uy(e),this.Ei=new dA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new pA,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ci[t.toKey()];return r||(r=new gA(e,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,r){q("MemoryPersistence","Starting transaction:",t);const s=new bA(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(t,e){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,e)))}}class bA extends F_{constructor(t){super(),this.currentSequenceNumber=t}}class Cl{constructor(t){this.persistence=t,this.Vi=new Ph,this.mi=null}static fi(t){return new Cl(t)}get gi(){if(this.mi)return this.mi;throw tt(60996)}addReference(t,e,r){return this.Vi.addReference(r,e),this.gi.delete(r.toString()),P.resolve()}removeReference(t,e,r){return this.Vi.removeReference(r,e),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),P.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{const s=Y.fromPath(r);return this.pi(t,s).next(i=>{i||e.removeEntry(s,st.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(r=>{r?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return P.or([()=>P.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class Ya{constructor(t,e){this.persistence=t,this.yi=new Pn(r=>he(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Yy(this,e)}static fi(t,e){return new Ya(t,e)}di(){}Ai(t){return P.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.Sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(s=>r+s))}Sr(t){let e=0;return this.yr(t,r=>{e++}).next(()=>e)}yr(t,e){return P.forEach(this.yi,(r,s)=>this.Dr(t,r,s).next(i=>i?P.resolve():e(s)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(t,o=>this.Dr(t,o,e).next(l=>{l||(r++,i.removeEntry(o,st.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),P.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.yi.set(r,t.currentSequenceNumber),P.resolve()}removeReference(t,e,r){return this.yi.set(r,t.currentSequenceNumber),P.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),P.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ma(t.data.value)),e}Dr(t,e,r){return P.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.yi.get(e);return P.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t){this.serializer=t}q(t,e,r,s){const i=new ml("createOrUpgrade",e);r<1&&s>=1&&(function(c){c.createObjectStore(Eo)}(t),function(c){c.createObjectStore(so,{keyPath:DT}),c.createObjectStore(Ke,{keyPath:sp,autoIncrement:!0}).createIndex(Cr,ip,{unique:!0}),c.createObjectStore(Rs)}(t),Wp(t),function(c){c.createObjectStore(Ir)}(t));let o=P.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore(Ds),c.deleteObjectStore(Vs),c.deleteObjectStore(Nr)}(t),Wp(t)),o=o.next(()=>function(c){const u=c.store(Nr),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:st.min().toTimestamp(),targetCount:0};return u.put(ja,f)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(Ke).J().next(p=>{c.deleteObjectStore(Ke),c.createObjectStore(Ke,{keyPath:sp,autoIncrement:!0}).createIndex(Cr,ip,{unique:!0});const m=u.store(Ke),E=p.map(R=>m.put(R));return P.waitFor(E)})}(t,i))),o=o.next(()=>{(function(c){c.createObjectStore(ks,{keyPath:jT})})(t)})),r<5&&s>=5&&(o=o.next(()=>this.wi(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore(io)}(t),this.Si(i)))),r<7&&s>=7&&(o=o.next(()=>this.bi(i))),r<8&&s>=8&&(o=o.next(()=>this.Di(t,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&s>=10&&(o=o.next(()=>this.Ci(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(_l,{keyPath:zT})})(t),function(c){c.createObjectStore(yl,{keyPath:$T})}(t)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(vl,{keyPath:YT});u.createIndex(ru,XT,{unique:!1}),u.createIndex(q_,JT,{unique:!1})})(t)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(Ua,{keyPath:OT});u.createIndex(da,NT),u.createIndex(U_,MT)}(t)).next(()=>this.Fi(t,i)).next(()=>t.deleteObjectStore(Ir))),r<14&&s>=14&&(o=o.next(()=>this.Mi(t,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore(fh,{keyPath:qT,autoIncrement:!0}).createIndex(nu,KT,{unique:!1}),c.createObjectStore(Bi,{keyPath:GT}).createIndex(z_,HT,{unique:!1}),c.createObjectStore(Ui,{keyPath:WT}).createIndex($_,QT,{unique:!1})}(t))),r<16&&s>=16&&(o=o.next(()=>{e.objectStore(Bi).clear()}).next(()=>{e.objectStore(Ui).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(dh,{keyPath:ZT})})(t)})),r<18&&s>=18&&m_()&&(o=o.next(()=>{e.objectStore(Bi).clear()}).next(()=>{e.objectStore(Ui).clear()})),o}Si(t){let e=0;return t.store(Ir).te((r,s)=>{e+=Qa(s)}).next(()=>{const r={byteSize:e};return t.store(io).put(eu,r)})}wi(t){const e=t.store(so),r=t.store(Ke);return e.J().next(s=>P.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Or],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Cr,o).next(l=>P.forEach(l,c=>{et(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=xr(this.serializer,c);return Gy(t,i.userId,u).next(()=>{})}))}))}bi(t){const e=t.store(Ds),r=t.store(Ir);return t.store(Nr).get(ja).next(s=>{const i=[];return r.te((o,l)=>{const c=new xt(o),u=function(p){return[0,he(p)]}(c);i.push(e.get(u).next(f=>f?P.resolve():(p=>e.put({targetId:0,path:he(p),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>P.waitFor(i))})}Di(t,e){t.createObjectStore(oo,{keyPath:UT});const r=e.store(oo),s=new Sh,i=o=>{if(s.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:he(c)})}};return e.store(Ir).te({ee:!0},(o,l)=>{const c=new xt(o);return i(c.popLast())}).next(()=>e.store(Rs).te({ee:!0},([o,l,c],u)=>{const f=tn(l);return i(f.popLast())}))}Ci(t){const e=t.store(Vs);return e.te((r,s)=>{const i=Ii(s),o=jy(this.serializer,i);return e.put(o)})}Fi(t,e){const r=e.store(Ir),s=[];return r.te((i,o)=>{const l=e.store(Ua),c=function(p){return p.document?new Y(xt.fromString(p.document.name).popFirst(5)):p.noDocument?Y.fromSegments(p.noDocument.path):p.unknownDocument?Y.fromSegments(p.unknownDocument.path):tt(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(u))}).next(()=>P.waitFor(s))}Mi(t,e){const r=e.store(Ke),s=Jy(this.serializer),i=new Ch(Cl.fi,this.serializer.wt);return r.J().next(o=>{const l=new Map;return o.forEach(c=>{var u;let f=(u=l.get(c.userId))!==null&&u!==void 0?u:gt();xr(this.serializer,c).keys().forEach(p=>f=f.add(p)),l.set(c.userId,f)}),P.forEach(l,(c,u)=>{const f=new te(u),p=Sl.St(this.serializer,f),m=i.getIndexManager(f),E=Pl.St(f,this.serializer,m,i.referenceDelegate);return new Zy(s,E,p,m).recalculateAndSaveOverlaysForDocumentKeys(new su(e,Be.le),c).next()})})}}function Wp(n){n.createObjectStore(Ds,{keyPath:LT}).createIndex(hh,BT,{unique:!0}),n.createObjectStore(Vs,{keyPath:"targetId"}).createIndex(j_,FT,{unique:!0}),n.createObjectStore(Nr)}const Fn="IndexedDbPersistence",Ec=18e5,wc=5e3,Tc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wA="main";class Rh{constructor(t,e,r,s,i,o,l,c,u,f,p=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.xi=i,this.window=o,this.document=l,this.Oi=u,this.Ni=f,this.Bi=p,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=m=>Promise.resolve(),!Rh.C())throw new Q(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cA(this,s),this.Ui=e+wA,this.serializer=new Uy(c),this.Ki=new Yn(this.Ui,this.Bi,new EA(this.serializer)),this.Pi=new XI,this.Ti=new iA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jy(this.serializer),this.Ei=new YI,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&be(Fn,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(F.FAILED_PRECONDITION,Tc);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ti.getHighestSequenceNumber(t))}).then(t=>{this.li=new Be(t,this.Oi)}).then(()=>{this.hi=!0}).catch(t=>(this.Ki&&this.Ki.close(),Promise.reject(t)))}Ji(t){return this.$i=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ki.U(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>na(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(t).next(e=>{e||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(t)).next(e=>this.isPrimary&&!e?this.Xi(t).next(()=>!1):!!e&&this.es(t).next(()=>!0))).catch(t=>{if(lr(t))return q(Fn,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return q(Fn,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.xi.enqueueRetryable(()=>this.$i(t)),this.isPrimary=t})}Yi(t){return vi(t).get(as).next(e=>P.resolve(this.ts(e)))}ns(t){return na(t).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Ec)){this.Qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=Qt(e,ks);return r.J().next(s=>{const i=this._s(s,Ec),o=s.filter(l=>i.indexOf(l)===-1);return P.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const e of t)this.Wi.removeItem(this.us(e.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(t){return!!t&&t.ownerId===this.clientId}Zi(t){return this.Ni?P.resolve(!0):vi(t).get(as).next(e=>{if(e!==null&&this.ss(e.leaseTimestampMs,wc)&&!this.cs(e.ownerId)){if(this.ts(e)&&this.networkEnabled)return!0;if(!this.ts(e)){if(!e.allowTabSynchronization)throw new Q(F.FAILED_PRECONDITION,Tc);return!1}}return!(!this.networkEnabled||!this.inForeground)||na(t).J().next(r=>this._s(r,wc).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&q(Fn,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Eo,ks],t=>{const e=new su(t,Be.le);return this.Xi(e).next(()=>this.ns(e))}),this.Ki.close(),this.Ts()}_s(t,e){return t.filter(r=>this.ss(r.updateTimeMs,e)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",t=>na(t).J().next(e=>this._s(e,Ec).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(t,e){return Pl.St(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new sA(t,this.serializer.wt.databaseId)}getDocumentOverlayCache(t){return Sl.St(this.serializer,t)}getBundleCache(){return this.Ei}runTransaction(t,e,r){q(Fn,"Starting transaction:",t);const s=e==="readonly"?"readonly":"readwrite",i=function(c){return c===18?nI:c===17?W_:c===16?eI:c===15?ph:c===14?H_:c===13?G_:c===12?tI:c===11?K_:void tt(60245)}(this.Bi);let o;return this.Ki.runTransaction(t,s,i,l=>(o=new su(l,this.li?this.li.next():Be.le),e==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw be(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Q(F.FAILED_PRECONDITION,M_);return r(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Es(t){return vi(t).get(as).next(e=>{if(e!==null&&this.ss(e.leaseTimestampMs,wc)&&!this.cs(e.ownerId)&&!this.ts(e)&&!(this.Ni||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Q(F.FAILED_PRECONDITION,Tc)})}es(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vi(t).put(as,e)}static C(){return Yn.C()}Xi(t){const e=vi(t);return e.get(as).next(r=>this.ts(r)?(q(Fn,"Releasing primary lease."),e.delete(as)):P.resolve())}ss(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(be(`Detected an update time that is in the future: ${t} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Li=()=>{this.ls();const e=/(?:Version|Mobile)\/1[456]/;p_()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(t){var e;try{const r=((e=this.Wi)===null||e===void 0?void 0:e.getItem(this.us(t)))!==null;return q(Fn,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return be(Fn,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(t){be("Failed to set zombie client id.",t)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vi(n){return Qt(n,Eo)}function na(n){return Qt(n,ks)}function TA(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(t,e,r,s){this.targetId=t,this.fromCache=e,this.ds=r,this.As=s}static Rs(t,e){let r=gt(),s=gt();for(const i of e.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vh(t,e.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return p_()?8:L_(Oa())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,r,s){const i={result:null};return this.ws(t,e).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(t,e,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IA;return this.bs(t,e,o).next(l=>{if(i.result=l,this.fs)return this.Ds(t,e,o,l.size)})}).next(()=>i.result)}Ds(t,e,r,s){return r.documentReadCount<this.gs?(ms()<=bt.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",gs(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(ms()<=bt.DEBUG&&q("QueryEngine","Query:",gs(e),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ms()<=bt.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",gs(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ue(e))):P.resolve())}ws(t,e){if(yp(e))return P.resolve(null);let r=Ue(e);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=hu(e,null,"F"),r=Ue(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=gt(...i);return this.ys.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const u=this.vs(e,l);return this.Cs(e,u,o,c.readTime)?this.ws(t,hu(e,null,"F")):this.Fs(t,u,e,c)}))})))}Ss(t,e,r,s){return yp(e)||s.isEqual(st.min())?P.resolve(null):this.ys.getDocuments(t,r).next(i=>{const o=this.vs(e,i);return this.Cs(e,o,r,s)?P.resolve(null):(ms()<=bt.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gs(e)),this.Fs(t,o,e,AT(s,eo)).next(l=>l))})}vs(t,e){let r=new Pt(py(t));return e.forEach((s,i)=>{To(t,i)&&(r=r.add(i))}),r}Cs(t,e,r,s){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const i=t.limitType==="F"?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}bs(t,e,r){return ms()<=bt.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",gs(e)),this.ys.getDocumentsMatchingQuery(t,e,Oe.min(),r)}Fs(t,e,r,s){return this.ys.getDocumentsMatchingQuery(t,r,s).next(i=>(e.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="LocalStore",AA=3e8;class xA{constructor(t,e,r,s){this.persistence=t,this.Ms=e,this.serializer=s,this.xs=new Ft(ct),this.Os=new Pn(i=>zr(i),wo),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Zy(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function ev(n,t,e,r){return new xA(n,t,e,r)}async function nv(n,t){const e=ht(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,e.Ls(t),e.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=gt();for(const u of s){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of i){l.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return e.localDocuments.getDocuments(r,c).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:l}))})})}function SA(n,t){const e=ht(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=e.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,f){const p=u.batch,m=p.keys();let E=P.resolve();return m.forEach(R=>{E=E.next(()=>f.getEntry(c,R)).next(V=>{const v=u.docVersions.get(R);et(v!==null,48541),V.version.compareTo(v)<0&&(p.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),f.addEntry(V)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(e,r,t,i).next(()=>i.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=gt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(t))).next(()=>e.localDocuments.getDocuments(r,s))})}function rv(n){const t=ht(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function PA(n,t){const e=ht(n),r=t.snapshotVersion;let s=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=e.Bs.newChangeBuffer({trackRemovals:!0});s=e.xs;const l=[];t.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;l.push(e.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>e.Ti.addMatchingKeys(i,f.addedDocuments,p)));let E=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(Kt.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),function(V,v,N){return V.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=AA?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,E,f)&&l.push(e.Ti.updateTargetData(i,E))});let c=ke(),u=gt();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(CA(i,o,t.documentUpdates).next(f=>{c=f.qs,u=f.Qs})),!r.isEqual(st.min())){const f=e.Ti.getLastRemoteSnapshotVersion(i).next(p=>e.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return P.waitFor(l).next(()=>o.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(e.xs=s,i))}function CA(n,t,e){let r=gt(),s=gt();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let o=ke();return e.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(st.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):q(Dh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function RA(n,t){const e=ht(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Or),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function VA(n,t){const e=ht(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return e.Ti.getTargetData(r,t).next(i=>i?(s=i,P.resolve(s)):e.Ti.allocateTargetId(r).next(o=>(s=new bn(t,o,"TargetPurposeListen",r.currentSequenceNumber),e.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=e.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.xs=e.xs.insert(r.targetId,r),e.Os.set(t,r.targetId)),r})}async function vu(n,t,e){const r=ht(n),s=r.xs.get(t),i=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lr(o))throw o;q(Dh,`Failed to update sequence numbers for target ${t}: ${o}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function Qp(n,t,e){const r=ht(n);let s=st.min(),i=gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const p=ht(c),m=p.Os.get(f);return m!==void 0?P.resolve(p.xs.get(m)):p.Ti.getTargetData(u,f)}(r,o,Ue(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,t,e?s:st.min(),e?i:gt())).next(l=>(DA(r,_I(t),l),{documents:l,$s:i})))}function DA(n,t,e){let r=n.Ns.get(t)||st.min();e.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Ns.set(t,r)}class Yp{constructor(){this.activeTargetIds=TI()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sv{constructor(){this.xo=new Yp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,r){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Yp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="ConnectivityMonitor";class Jp{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(Xp,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){q(Xp,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra=null;function bu(){return ra===null?ra=function(){return 268435456+Math.round(2147483648*Math.random())}():ra++,"0x"+ra.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="RestConnection",OA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NA{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===za?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(t,e,r,s,i){const o=bu(),l=this.jo(t,e.toUriEncodedString());q(Ic,`Sending RPC '${t}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:u}=new URL(l),f=oh(u);return this.Jo(t,l,c,r,f).then(p=>(q(Ic,`Received RPC '${t}' ${o}: `,p),p),p=>{throw Ur(Ic,`RPC '${t}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Yo(t,e,r,s,i,o){return this.zo(t,e,r,s,i)}Ho(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}jo(t,e){const r=OA[t];return`${this.Ko}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="WebChannelConnection";class FA extends NA{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,s,i){const o=bu();return new Promise((l,c)=>{const u=new A_;u.setWithCredentials(!0),u.listenOnce(x_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ua.NO_ERROR:const p=u.getResponseJson();q(ae,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(p)),l(p);break;case ua.TIMEOUT:q(ae,`RPC '${t}' ${o} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case ua.HTTP_ERROR:const m=u.getStatus();if(q(ae,`RPC '${t}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);const R=E==null?void 0:E.error;if(R&&R.status&&R.message){const V=function(N){const D=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(D)>=0?D:F.UNKNOWN}(R.status);c(new Q(V,R.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(ae,`RPC '${t}' ${o} completed.`)}});const f=JSON.stringify(s);q(ae,`RPC '${t}' ${o} sending request:`,s),u.send(e,"POST",f,r,15)})}T_(t,e,r){const s=bu(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=C_(),l=P_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,e,r),c.encodeInitMessageHeaders=!0;const f=i.join("");q(ae,`Creating RPC '${t}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);let m=!1,E=!1;const R=new MA({Zo:v=>{E?q(ae,`Not sending because RPC '${t}' stream ${s} is closed:`,v):(m||(q(ae,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),q(ae,`RPC '${t}' stream ${s} sending:`,v),p.send(v))},Xo:()=>p.close()}),V=(v,N,D)=>{v.listen(N,L=>{try{D(L)}catch(U){setTimeout(()=>{throw U},0)}})};return V(p,Ei.EventType.OPEN,()=>{E||(q(ae,`RPC '${t}' stream ${s} transport opened.`),R.__())}),V(p,Ei.EventType.CLOSE,()=>{E||(E=!0,q(ae,`RPC '${t}' stream ${s} transport closed`),R.u_())}),V(p,Ei.EventType.ERROR,v=>{E||(E=!0,Ur(ae,`RPC '${t}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),R.u_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),V(p,Ei.EventType.MESSAGE,v=>{var N;if(!E){const D=v.data[0];et(!!D,16349);const L=D,U=(L==null?void 0:L.error)||((N=L[0])===null||N===void 0?void 0:N.error);if(U){q(ae,`RPC '${t}' stream ${s} received error:`,U);const Z=U.status;let at=function(y){const I=qt[y];if(I!==void 0)return xy(I)}(Z),T=U.message;at===void 0&&(at=F.INTERNAL,T="Unknown error status: "+Z+" with message "+U.message),E=!0,R.u_(new Q(at,T)),p.close()}else q(ae,`RPC '${t}' stream ${s} received:`,D),R.c_(D)}}),V(l,S_.STAT_EVENT,v=>{v.stat===Jc.PROXY?q(ae,`RPC '${t}' stream ${s} detected buffering proxy`):v.stat===Jc.NOPROXY&&q(ae,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.a_()},0),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return typeof window<"u"?window:null}function ba(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){return new BI(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,r=1e3,s=1.5,i=6e4){this.xi=t,this.timerId=e,this.I_=r,this.E_=s,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(t){this.cancel();const e=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,e-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),t())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="PersistentStream";class ov{constructor(t,e,r,s,i,o,l,c){this.xi=t,this.y_=r,this.w_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new iv(t,e)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(t){this.k_(),this.stream.send(t)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(t,e){this.k_(),this.q_(),this.C_.cancel(),this.S_++,t!==4?this.C_.reset():e&&e.code===F.RESOURCE_EXHAUSTED?(be(e.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):e&&e.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}Q_(){}auth(){this.state=1;const t=this.U_(this.S_),e=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===e&&this.K_(r,s)},r=>{t(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(t,e){const r=this.U_(this.S_);this.stream=this.G_(t,e),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(t){return q(Zp,`close with error: ${t}`),this.stream=null,this.close(4,t)}U_(t){return e=>{this.xi.enqueueAndForget(()=>this.S_===t?e():(q(Zp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BA extends ov{constructor(t,e,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,s,o),this.serializer=i}G_(t,e){return this.connection.T_("Listen",t,e)}z_(t){return this.onNext(t)}onNext(t){this.C_.reset();const e=zI(this.serializer,t),r=function(i){if(!("targetChange"in i))return st.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?we(o.readTime):st.min()}(t);return this.listener.j_(e,r)}H_(t){const e={};e.database=pu(this.serializer),e.addTarget=function(i,o){let l;const c=o.target;if(l=$a(c)?{documents:Oy(i,c)}:{query:Ny(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Cy(i,o.resumeToken);const u=fu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(st.min())>0){l.readTime=Us(i,o.snapshotVersion.toTimestamp());const u=fu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,t);const r=qI(this.serializer,t);r&&(e.labels=r),this.L_(e)}J_(t){const e={};e.database=pu(this.serializer),e.removeTarget=t,this.L_(e)}}class UA extends ov{constructor(t,e,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,s,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(t,e){return this.connection.T_("Write",t,e)}z_(t){return et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,et(!t.writeResults||t.writeResults.length===0,55816),this.listener.X_()}onNext(t){et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.C_.reset();const e=$I(t.writeResults,t.commitTime),r=we(t.commitTime);return this.listener.ea(r,e)}ta(){const t={};t.database=pu(this.serializer),this.L_(t)}Z_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>Ga(this.serializer,r))};this.L_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{}class zA extends jA{constructor(t,e,r,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(t,du(e,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Yo(t,e,r,s,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(t,du(e,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class $A{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(t){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.aa("Offline")))}set(t){this.la(),this.ia=0,t==="Online"&&(this.oa=!1),this.aa(t)}aa(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ua(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(be(e),this.oa=!1):q("OnlineStateTracker",e)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class qA{constructor(t,e,r,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{r.enqueueAndForget(async()=>{Xr(this)&&(q(Gr,"Restarting streams for network reachability change."),await async function(c){const u=ht(c);u.Ta.add(4),await Ao(u),u.da.set("Unknown"),u.Ta.delete(4),await Vl(u)}(this))})}),this.da=new $A(r,s)}}async function Vl(n){if(Xr(n))for(const t of n.Ia)await t(!0)}async function Ao(n){for(const t of n.Ia)await t(!1)}function av(n,t){const e=ht(n);e.Pa.has(t.targetId)||(e.Pa.set(t.targetId,t),Mh(e)?Nh(e):Qs(e).M_()&&Oh(e,t))}function kh(n,t){const e=ht(n),r=Qs(e);e.Pa.delete(t),r.M_()&&lv(e,t),e.Pa.size===0&&(r.M_()?r.N_():Xr(e)&&e.da.set("Unknown"))}function Oh(n,t){if(n.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(st.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Qs(n).H_(t)}function lv(n,t){n.Aa.Ke(t),Qs(n).J_(t)}function Nh(n){n.Aa=new NI({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Pa.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),Qs(n).start(),n.da._a()}function Mh(n){return Xr(n)&&!Qs(n).F_()&&n.Pa.size>0}function Xr(n){return ht(n).Ta.size===0}function cv(n){n.Aa=void 0}async function KA(n){n.da.set("Online")}async function GA(n){n.Pa.forEach((t,e)=>{Oh(n,t)})}async function HA(n,t){cv(n),Mh(n)?(n.da.ca(t),Nh(n)):n.da.set("Unknown")}async function WA(n,t,e){if(n.da.set("Online"),t instanceof Py&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Pa.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Pa.delete(l),s.Aa.removeTarget(l))}(n,t)}catch(r){q(Gr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xa(n,r)}else if(t instanceof ya?n.Aa.Xe(t):t instanceof Sy?n.Aa.ot(t):n.Aa.nt(t),!e.isEqual(st.min()))try{const r=await rv(n.localStore);e.compareTo(r)>=0&&await function(i,o){const l=i.Aa.It(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Pa.get(u);f&&i.Pa.set(u,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const f=i.Pa.get(c);if(!f)return;i.Pa.set(c,f.withResumeToken(Kt.EMPTY_BYTE_STRING,f.snapshotVersion)),lv(i,c);const p=new bn(f.target,c,u,f.sequenceNumber);Oh(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){q(Gr,"Failed to raise snapshot:",r),await Xa(n,r)}}async function Xa(n,t,e){if(!lr(t))throw t;n.Ta.add(1),await Ao(n),n.da.set("Offline"),e||(e=()=>rv(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{q(Gr,"Retrying IndexedDB access"),await e(),n.Ta.delete(1),await Vl(n)})}function uv(n,t){return t().catch(e=>Xa(n,e,t))}async function xo(n){const t=ht(n),e=tr(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:Or;for(;QA(t);)try{const s=await RA(t.localStore,r);if(s===null){t.ha.length===0&&e.N_();break}r=s.batchId,YA(t,s)}catch(s){await Xa(t,s)}hv(t)&&fv(t)}function QA(n){return Xr(n)&&n.ha.length<10}function YA(n,t){n.ha.push(t);const e=tr(n);e.M_()&&e.Y_&&e.Z_(t.mutations)}function hv(n){return Xr(n)&&!tr(n).F_()&&n.ha.length>0}function fv(n){tr(n).start()}async function XA(n){tr(n).ta()}async function JA(n){const t=tr(n);for(const e of n.ha)t.Z_(e.mutations)}async function ZA(n,t,e){const r=n.ha.shift(),s=wh.from(r,t,e);await uv(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await xo(n)}async function tx(n,t){t&&tr(n).Y_&&await async function(r,s){if(function(o){return kI(o)&&o!==F.ABORTED}(s.code)){const i=r.ha.shift();tr(r).O_(),await uv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await xo(r)}}(n,t),hv(n)&&fv(n)}async function tm(n,t){const e=ht(n);e.asyncQueue.verifyOperationInProgress(),q(Gr,"RemoteStore received new credentials");const r=Xr(e);e.Ta.add(3),await Ao(e),r&&e.da.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ta.delete(3),await Vl(e)}async function ex(n,t){const e=ht(n);t?(e.Ta.delete(2),await Vl(e)):t||(e.Ta.add(2),await Ao(e),e.da.set("Unknown"))}function Qs(n){return n.Ra||(n.Ra=function(e,r,s){const i=ht(e);return i.ra(),new BA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:KA.bind(null,n),n_:GA.bind(null,n),i_:HA.bind(null,n),j_:WA.bind(null,n)}),n.Ia.push(async t=>{t?(n.Ra.O_(),Mh(n)?Nh(n):n.da.set("Unknown")):(await n.Ra.stop(),cv(n))})),n.Ra}function tr(n){return n.Va||(n.Va=function(e,r,s){const i=ht(e);return i.ra(),new UA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:XA.bind(null,n),i_:tx.bind(null,n),X_:JA.bind(null,n),ea:ZA.bind(null,n)}),n.Ia.push(async t=>{t?(n.Va.O_(),await xo(n)):(await n.Va.stop(),n.ha.length>0&&(q(Gr,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t,e,r,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,s,i){const o=Date.now()+r,l=new Fh(t,e,o,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(n,t){if(be("AsyncQueue",`${t}: ${n}`),lr(n))return new Q(F.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{static emptySet(t){return new xs(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Y.comparator(e.key,r.key):(e,r)=>Y.comparator(e.key,r.key),this.keyedMap=wi(),this.sortedSet=new Ft(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xs)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new xs;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.ma=new Ft(Y.comparator)}track(t){const e=t.doc.key,r=this.ma.get(e);r?t.type!==0&&r.type===3?this.ma=this.ma.insert(e,t):t.type===3&&r.type!==1?this.ma=this.ma.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ma=this.ma.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ma=this.ma.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ma=this.ma.remove(e):t.type===1&&r.type===2?this.ma=this.ma.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ma=this.ma.insert(e,{type:2,doc:t.doc}):tt(63341,{Vt:t,fa:r}):this.ma=this.ma.insert(e,t)}ga(){const t=[];return this.ma.inorderTraversal((e,r)=>{t.push(r)}),t}}class js{constructor(t,e,r,s,i,o,l,c,u){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,e,r,s,i){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new js(t,e,xs.emptySet(e),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Tl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==r[s].type||!e[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(t=>t.Sa())}}class rx{constructor(){this.queries=nm(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(e,r){const s=ht(e),i=s.queries;s.queries=nm(),i.forEach((o,l)=>{for(const c of l.ya)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function nm(){return new Pn(n=>dy(n),Tl)}async function sx(n,t){const e=ht(n);let r=3;const s=t.query;let i=e.queries.get(s);i?!i.wa()&&t.Sa()&&(r=2):(i=new nx,r=t.Sa()?0:1);try{switch(r){case 0:i.pa=await e.onListen(s,!0);break;case 1:i.pa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(o){const l=Lh(o,`Initialization of query '${gs(t.query)}' failed`);return void t.onError(l)}e.queries.set(s,i),i.ya.push(t),t.Da(e.onlineState),i.pa&&t.va(i.pa)&&Bh(e)}async function ix(n,t){const e=ht(n),r=t.query;let s=3;const i=e.queries.get(r);if(i){const o=i.ya.indexOf(t);o>=0&&(i.ya.splice(o,1),i.ya.length===0?s=t.Sa()?0:1:!i.wa()&&t.Sa()&&(s=2))}switch(s){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function ox(n,t){const e=ht(n);let r=!1;for(const s of t){const i=s.query,o=e.queries.get(i);if(o){for(const l of o.ya)l.va(s)&&(r=!0);o.pa=s}}r&&Bh(e)}function ax(n,t,e){const r=ht(n),s=r.queries.get(t);if(s)for(const i of s.ya)i.onError(e);r.queries.delete(t)}function Bh(n){n.ba.forEach(t=>{t.next()})}var Eu,rm;(rm=Eu||(Eu={})).Ca="default",rm.Cache="cache";class lx{constructor(t,e,r){this.query=t,this.Fa=e,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new js(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Ma?this.Oa(t)&&(this.Fa.next(t),e=!0):this.Na(t,this.onlineState)&&(this.Ba(t),e=!0),this.xa=t,e}onError(t){this.Fa.error(t)}Da(t){this.onlineState=t;let e=!1;return this.xa&&!this.Ma&&this.Na(this.xa,t)&&(this.Ba(this.xa),e=!0),e}Na(t,e){if(!t.fromCache||!this.Sa())return!0;const r=e!=="Offline";return(!this.options.La||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Oa(t){if(t.docChanges.length>0)return!0;const e=this.xa&&this.xa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Ba(t){t=js.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Ma=!0,this.Fa.next(t)}Sa(){return this.options.source!==Eu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this.key=t}}class pv{constructor(t){this.key=t}}class cx{constructor(t,e){this.query=t,this.Ga=e,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=gt(),this.mutatedKeys=gt(),this.Ha=py(t),this.Ja=new xs(this.Ha)}get Ya(){return this.Ga}Za(t,e){const r=e?e.Xa:new em,s=e?e.Ja:this.Ja;let i=e?e.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((f,p)=>{const m=s.get(f),E=To(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),V=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let v=!1;m&&E?m.data.isEqual(E.data)?R!==V&&(r.track({type:3,doc:E}),v=!0):this.eu(m,E)||(r.track({type:2,doc:E}),v=!0,(c&&this.Ha(E,c)>0||u&&this.Ha(E,u)<0)&&(l=!0)):!m&&E?(r.track({type:0,doc:E}),v=!0):m&&!E&&(r.track({type:1,doc:m}),v=!0,(c||u)&&(l=!0)),v&&(E?(o=o.add(E),i=V?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ja:o,Xa:r,Cs:l,mutatedKeys:i}}eu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,s){const i=this.Ja;this.Ja=t.Ja,this.mutatedKeys=t.mutatedKeys;const o=t.Xa.ga();o.sort((f,p)=>function(E,R){const V=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Vt:v})}};return V(E)-V(R)}(f.type,p.type)||this.Ha(f.doc,p.doc)),this.tu(r),s=s!=null&&s;const l=e&&!s?this.nu():[],c=this.ja.size===0&&this.current&&!s?1:0,u=c!==this.za;return this.za=c,o.length!==0||u?{snapshot:new js(this.query,t.Ja,i,o,t.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new em,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(t){return!this.Ga.has(t)&&!!this.Ja.has(t)&&!this.Ja.get(t).hasLocalMutations}tu(t){t&&(t.addedDocuments.forEach(e=>this.Ga=this.Ga.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ga=this.Ga.delete(e)),this.current=t.current)}nu(){if(!this.current)return[];const t=this.ja;this.ja=gt(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const e=[];return t.forEach(r=>{this.ja.has(r)||e.push(new pv(r))}),this.ja.forEach(r=>{t.has(r)||e.push(new dv(r))}),e}su(t){this.Ga=t.$s,this.ja=gt();const e=this.Za(t.documents);return this.applyChanges(e,!0)}ou(){return js.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Uh="SyncEngine";class ux{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class hx{constructor(t){this.key=t,this._u=!1}}class fx{constructor(t,e,r,s,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Pn(l=>dy(l),Tl),this.cu=new Map,this.lu=new Set,this.hu=new Ft(Y.comparator),this.Pu=new Map,this.Tu=new Ph,this.Iu={},this.Eu=new Map,this.du=Kr.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function dx(n,t,e=!0){const r=bv(n);let s;const i=r.uu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await mv(r,t,e,!0),s}async function px(n,t){const e=bv(n);await mv(e,t,!0,!1)}async function mv(n,t,e,r){const s=await VA(n.localStore,Ue(t)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,e);let l;return r&&(l=await mx(n,t,i,o==="current",s.resumeToken)),n.isPrimaryClient&&e&&av(n.remoteStore,s),l}async function mx(n,t,e,r,s){n.Ru=(p,m,E)=>async function(V,v,N,D){let L=v.view.Za(N);L.Cs&&(L=await Qp(V.localStore,v.query,!1).then(({documents:T})=>v.view.Za(T,L)));const U=D&&D.targetChanges.get(v.targetId),Z=D&&D.targetMismatches.get(v.targetId)!=null,at=v.view.applyChanges(L,V.isPrimaryClient,U,Z);return im(V,v.targetId,at.ru),at.snapshot}(n,p,m,E);const i=await Qp(n.localStore,t,!0),o=new cx(t,i.$s),l=o.Za(i.documents),c=Io.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",s),u=o.applyChanges(l,n.isPrimaryClient,c);im(n,e,u.ru);const f=new ux(t,e,o);return n.uu.set(t,f),n.cu.has(e)?n.cu.get(e).push(t):n.cu.set(e,[t]),u.snapshot}async function gx(n,t,e){const r=ht(n),s=r.uu.get(t),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(o=>!Tl(o,t))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),e&&kh(r.remoteStore,s.targetId),wu(r,s.targetId)}).catch(Yr)):(wu(r,s.targetId),await vu(r.localStore,s.targetId,!0))}async function _x(n,t){const e=ht(n),r=e.uu.get(t),s=e.cu.get(r.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),kh(e.remoteStore,r.targetId))}async function yx(n,t,e){const r=Ev(n);try{const s=await function(o,l){const c=ht(o),u=Mt.now(),f=l.reduce((E,R)=>E.add(R.key),gt());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=ke(),V=gt();return c.Bs.getEntries(E,f).next(v=>{R=v,R.forEach((N,D)=>{D.isValidDocument()||(V=V.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,R)).next(v=>{p=v;const N=[];for(const D of l){const L=VI(D,p.get(D.key).overlayedDocument);L!=null&&N.push(new Cn(D.key,L,sy(L.value.mapValue),Se.exists(!0)))}return c.mutationQueue.addMutationBatch(E,u,N,l)}).next(v=>{m=v;const N=v.applyToLocalDocumentSet(p,V);return c.documentOverlayCache.saveOverlays(E,v.batchId,N)})}).then(()=>({batchId:m.batchId,changes:gy(p)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Iu[o.currentUser.toKey()];u||(u=new Ft(ct)),u=u.insert(l,c),o.Iu[o.currentUser.toKey()]=u}(r,s.batchId,e),await So(r,s.changes),await xo(r.remoteStore)}catch(s){const i=Lh(s,"Failed to persist write");e.reject(i)}}async function gv(n,t){const e=ht(n);try{const r=await PA(e.localStore,t);t.targetChanges.forEach((s,i)=>{const o=e.Pu.get(i);o&&(et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o._u=!0:s.modifiedDocuments.size>0?et(o._u,14607):s.removedDocuments.size>0&&(et(o._u,42227),o._u=!1))}),await So(e,r,t)}catch(r){await Yr(r)}}function sm(n,t,e){const r=ht(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const s=[];r.uu.forEach((i,o)=>{const l=o.view.Da(t);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ht(o);c.onlineState=l;let u=!1;c.queries.forEach((f,p)=>{for(const m of p.ya)m.Da(l)&&(u=!0)}),u&&Bh(c)}(r.eventManager,t),s.length&&r.au.j_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vx(n,t,e){const r=ht(n);r.sharedClientState.updateQueryState(t,"rejected",e);const s=r.Pu.get(t),i=s&&s.key;if(i){let o=new Ft(Y.comparator);o=o.insert(i,zt.newNoDocument(i,st.min()));const l=gt().add(i),c=new xl(st.min(),new Map,new Ft(ct),o,l);await gv(r,c),r.hu=r.hu.remove(i),r.Pu.delete(t),jh(r)}else await vu(r.localStore,t,!1).then(()=>wu(r,t,e)).catch(Yr)}async function bx(n,t){const e=ht(n),r=t.batch.batchId;try{const s=await SA(e.localStore,t);yv(e,r,null),_v(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await So(e,s)}catch(s){await Yr(s)}}async function Ex(n,t,e){const r=ht(n);try{const s=await function(o,l){const c=ht(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(et(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,t);yv(r,t,e),_v(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await So(r,s)}catch(s){await Yr(s)}}function _v(n,t){(n.Eu.get(t)||[]).forEach(e=>{e.resolve()}),n.Eu.delete(t)}function yv(n,t,e){const r=ht(n);let s=r.Iu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(e?i.reject(e):i.resolve(),s=s.remove(t)),r.Iu[r.currentUser.toKey()]=s}}function wu(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.cu.get(t))n.uu.delete(r),e&&n.au.Vu(r,e);n.cu.delete(t),n.isPrimaryClient&&n.Tu.Hr(t).forEach(r=>{n.Tu.containsKey(r)||vv(n,r)})}function vv(n,t){n.lu.delete(t.path.canonicalString());const e=n.hu.get(t);e!==null&&(kh(n.remoteStore,e),n.hu=n.hu.remove(t),n.Pu.delete(e),jh(n))}function im(n,t,e){for(const r of e)r instanceof dv?(n.Tu.addReference(r.key,t),wx(n,r)):r instanceof pv?(q(Uh,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,t),n.Tu.containsKey(r.key)||vv(n,r.key)):tt(19791,{mu:r})}function wx(n,t){const e=t.key,r=e.path.canonicalString();n.hu.get(e)||n.lu.has(r)||(q(Uh,"New document in limbo: "+e),n.lu.add(r),jh(n))}function jh(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const t=n.lu.values().next().value;n.lu.delete(t);const e=new Y(xt.fromString(t)),r=n.du.next();n.Pu.set(r,new hx(e)),n.hu=n.hu.insert(e,r),av(n.remoteStore,new bn(Ue(wl(e.path)),r,"TargetPurposeLimboResolution",Be.le))}}async function So(n,t,e){const r=ht(n),s=[],i=[],o=[];r.uu.isEmpty()||(r.uu.forEach((l,c)=>{o.push(r.Ru(c,t,e).then(u=>{var f;if((u||e)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=e==null?void 0:e.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=Vh.Rs(c.targetId,u);i.push(p)}}))}),await Promise.all(o),r.au.j_(s),await async function(c,u){const f=ht(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(u,m=>P.forEach(m.ds,E=>f.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>P.forEach(m.As,E=>f.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!lr(p))throw p;q(Dh,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const E=f.xs.get(m),R=E.snapshotVersion,V=E.withLastLimboFreeSnapshotVersion(R);f.xs=f.xs.insert(m,V)}}}(r.localStore,i))}async function Tx(n,t){const e=ht(n);if(!e.currentUser.isEqual(t)){q(Uh,"User change. New user:",t.toKey());const r=await nv(e.localStore,t);e.currentUser=t,function(i,o){i.Eu.forEach(l=>{l.forEach(c=>{c.reject(new Q(F.CANCELLED,o))})}),i.Eu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await So(e,r.ks)}}function Ix(n,t){const e=ht(n),r=e.Pu.get(t);if(r&&r._u)return gt().add(r.key);{let s=gt();const i=e.cu.get(t);if(!i)return s;for(const o of i){const l=e.uu.get(o);s=s.unionWith(l.view.Ya)}return s}}function bv(n){const t=ht(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=gv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ix.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vx.bind(null,t),t.au.j_=ox.bind(null,t.eventManager),t.au.Vu=ax.bind(null,t.eventManager),t}function Ev(n){const t=ht(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ex.bind(null,t),t}class mo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Rl(t.databaseInfo.databaseId),this.sharedClientState=this.pu(t),this.persistence=this.yu(t),await this.persistence.start(),this.localStore=this.wu(t),this.gcScheduler=this.Su(t,this.localStore),this.indexBackfillerScheduler=this.bu(t,this.localStore)}Su(t,e){return null}bu(t,e){return null}wu(t){return ev(this.persistence,new tv,t.initialUser,this.serializer)}yu(t){return new Ch(Cl.fi,this.serializer)}pu(t){return new sv}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mo.provider={build:()=>new mo};class Ax extends mo{constructor(t){super(),this.cacheSizeBytes=t}Su(t,e){et(this.persistence.referenceDelegate instanceof Ya,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Qy(r,t.asyncQueue,e)}yu(t){const e=this.cacheSizeBytes!==void 0?le.withCacheSize(this.cacheSizeBytes):le.DEFAULT;return new Ch(r=>Ya.fi(r,e),this.serializer)}}class xx extends mo{constructor(t,e,r){super(),this.Du=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Du.initialize(this,t),await Ev(this.Du.syncEngine),await xo(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(t){return ev(this.persistence,new tv,t.initialUser,this.serializer)}Su(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new Qy(r,t.asyncQueue,e)}bu(t,e){const r=new CT(e,this.persistence);return new PT(t.asyncQueue,r)}yu(t){const e=TA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?le.withCacheSize(this.cacheSizeBytes):le.DEFAULT;return new Rh(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,LA(),ba(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(t){return new sv}}class Ja{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tx.bind(null,this.syncEngine),await ex(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rx}()}createDatastore(t){const e=Rl(t.databaseInfo.databaseId),r=function(i){return new FA(i)}(t.databaseInfo);return function(i,o,l,c){return new zA(i,o,l,c)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,s,i,o,l){return new qA(r,s,i,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>sm(this.syncEngine,e,0),function(){return Jp.C()?new Jp:new kA}())}createSyncEngine(t,e){return function(s,i,o,l,c,u,f){const p=new fx(s,i,o,l,c,u);return f&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const i=ht(s);q(Gr,"RemoteStore shutting down."),i.Ta.add(5),await Ao(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Ja.provider={build:()=>new Ja};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.vu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.vu(this.observer.error,t):be("Uncaught Error in snapshot listener:",t.toString()))}Cu(){this.muted=!0}vu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="FirestoreClient";class Px{constructor(t,e,r,s,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=s,this.user=te.UNAUTHENTICATED,this.clientId=k_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(er,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(er,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Lh(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ac(n,t){n.asyncQueue.verifyOperationInProgress(),q(er,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nv(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function om(n,t){n.asyncQueue.verifyOperationInProgress();const e=await Cx(n);q(er,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>tm(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>tm(t.remoteStore,s)),n._onlineComponents=t}async function Cx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(er,"Using user provided OfflineComponentProvider");try{await Ac(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;Ur("Error using user provided cache. Falling back to memory cache: "+e),await Ac(n,new mo)}}else q(er,"Using default OfflineComponentProvider"),await Ac(n,new Ax(void 0));return n._offlineComponents}async function wv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(er,"Using user provided OnlineComponentProvider"),await om(n,n._uninitializedComponentsProvider._online)):(q(er,"Using default OnlineComponentProvider"),await om(n,new Ja))),n._onlineComponents}function Rx(n){return wv(n).then(t=>t.syncEngine)}async function am(n){const t=await wv(n),e=t.eventManager;return e.onListen=dx.bind(null,t.syncEngine),e.onUnlisten=gx.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=px.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=_x.bind(null,t.syncEngine),e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n,t,e){if(!e)throw new Q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Vx(n,t,e,r){if(t===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function cm(n){if(!Y.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function um(n){if(Y.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":tt(12329,{type:typeof n})}function En(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Dl(n);throw new Q(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="firestore.googleapis.com",hm=!0;class fm{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Av,this.ssl=hm}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:hm;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ky;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<oA)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tv((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kl{constructor(t,e,r,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fm(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gT;switch(r.type){case"firstParty":return new bT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,f_("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=lm.get(e);r&&(q("ComponentProvider","Removing Datastore"),lm.delete(e),r.terminate())}(this),Promise.resolve()}}function Dx(n,t,e,r={}){var s;n=En(n,kl);const i=oh(t),o=n._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${t}:${e}`;o.host!==Av&&o.host!==c&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Na(u,l)&&(n._setSettings(u),i&&(YE(`https://${c}`),f_("Firestore",!0)),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=te.MOCK_USER;else{f=XE(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new te(m)}n._authCredentials=new _T(new V_(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Jr(this.firestore,t,this._query)}}class Te{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Te(this.firestore,t,this._key)}}class Xn extends Jr{constructor(t,e,r){super(t,e,wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Te(this.firestore,null,new Y(t))}withConverter(t){return new Xn(this.firestore,t,this._path)}}function kx(n,t,...e){if(n=an(n),Iv("collection","path",t),n instanceof kl){const r=xt.fromString(t,...e);return um(r),new Xn(n,null,r)}{if(!(n instanceof Te||n instanceof Xn))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(t,...e));return um(r),new Xn(n.firestore,null,r)}}function Tu(n,t,...e){if(n=an(n),arguments.length===1&&(t=k_.newId()),Iv("doc","path",t),n instanceof kl){const r=xt.fromString(t,...e);return cm(r),new Te(n,null,new Y(r))}{if(!(n instanceof Te||n instanceof Xn))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(t,...e));return cm(r),new Te(n.firestore,n instanceof Xn?n.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="AsyncQueue";class pm{constructor(t=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new iv(this,"async_queue_retry"),this.ec=()=>{const r=ba();r&&q(dm,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=t;const e=ba();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.nc(),this.rc(t)}enterRestrictedMode(t){if(!this.ju){this.ju=!0,this.Zu=t||!1;const e=ba();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.ec)}}enqueue(t){if(this.nc(),this.ju)return new Promise(()=>{});const e=new Qn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.zu.push(t),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(t){if(!lr(t))throw t;q(dm,"Operation failed with retryable error: "+t)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(t){const e=this.tc.then(()=>(this.Yu=!0,t().catch(r=>{throw this.Ju=r,this.Yu=!1,be("INTERNAL UNHANDLED ERROR: ",mm(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=e,e}enqueueAfterDelay(t,e,r){this.nc(),this.Xu.indexOf(t)>-1&&(e=0);const s=Fh.createAndSchedule(this,t,e,r,i=>this.oc(i));return this.Hu.push(s),s}nc(){this.Ju&&tt(47125,{_c:mm(this.Ju)})}verifyOperationInProgress(){}async ac(){let t;do t=this.tc,await t;while(t!==this.tc)}uc(t){for(const e of this.Hu)if(e.timerId===t)return!0;return!1}cc(t){return this.ac().then(()=>{this.Hu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Hu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.ac()})}lc(t){this.Xu.push(t)}oc(t){const e=this.Hu.indexOf(t);this.Hu.splice(e,1)}}function mm(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return function(e,r){if(typeof e!="object"||e===null)return!1;const s=e;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(n,["next","error","complete"])}class zs extends kl{constructor(t,e,r,s){super(t,e,r,s),this.type="firestore",this._queue=new pm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pm(t),this._firestoreClient=void 0,await t}}}function xv(n,t){const e=typeof n=="object"?n:iT(),r=typeof n=="string"?n:za,s=tT(e,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=WE("firestore");i&&Dx(s,...i)}return s}function Sv(n){if(n._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Pv(n),n._firestoreClient}function Pv(n){var t,e,r;const s=n._freezeSettings(),i=function(l,c,u,f){return new sI(l,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Tv(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Px(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}function Ox(n,t){Ur("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();return Nx(n,Ja.provider,{build:r=>new xx(r,e.cacheSizeBytes,void 0)}),Promise.resolve()}function Nx(n,t,e){if((n=En(n,zs))._firestoreClient||n._terminated)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Q(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:t,_offline:e},Pv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $s(Kt.fromBase64String(t))}catch(e){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new $s(Kt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=/^__.*__$/;class Fx{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Cn(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ws(t,this.data,e,this.fieldTransforms)}}class Cv{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Cn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Rv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{hc:n})}}class Kh{constructor(t,e,r,s,i,o){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(t){return new Kh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Tc({path:r,Ec:!1});return s.dc(t),s}Ac(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(t){return this.Tc({path:void 0,Ec:!0})}Vc(t){return Za(t,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Pc(){if(this.path)for(let t=0;t<this.path.length;t++)this.dc(this.path.get(t))}dc(t){if(t.length===0)throw this.Vc("Document fields must not be empty");if(Rv(this.hc)&&Mx.test(t))throw this.Vc('Document fields cannot begin and end with "__"')}}class Lx{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Rl(t)}gc(t,e,r,s=!1){return new Kh({hc:t,methodName:e,fc:r,path:Bt.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gh(n){const t=n._freezeSettings(),e=Rl(n._databaseId);return new Lx(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Bx(n,t,e,r,s,i={}){const o=n.gc(i.merge||i.mergeFields?2:0,t,e,s);Hh("Data must be an object, but it was:",o,r);const l=Vv(r,o);let c,u;if(i.merge)c=new xe(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=Iu(t,p,e);if(!o.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);kv(f,m)||f.push(m)}c=new xe(f),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new Fx(new ue(l),c,u)}class Nl extends zh{_toFieldTransform(t){if(t.hc!==2)throw t.hc===1?t.Vc(`${this._methodName}() can only appear at the top level of your update data`):t.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Nl}}function Ux(n,t,e,r){const s=n.gc(1,t,e);Hh("Data must be an object, but it was:",s,r);const i=[],o=ue.empty();cr(r,(c,u)=>{const f=Wh(t,c,e);u=an(u);const p=s.Ac(f);if(u instanceof Nl)i.push(f);else{const m=Po(u,p);m!=null&&(i.push(f),o.set(f,m))}});const l=new xe(i);return new Cv(o,l,s.fieldTransforms)}function jx(n,t,e,r,s,i){const o=n.gc(1,t,e),l=[Iu(t,r,e)],c=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Iu(t,i[m])),c.push(i[m+1]);const u=[],f=ue.empty();for(let m=l.length-1;m>=0;--m)if(!kv(u,l[m])){const E=l[m];let R=c[m];R=an(R);const V=o.Ac(E);if(R instanceof Nl)u.push(E);else{const v=Po(R,V);v!=null&&(u.push(E),f.set(E,v))}}const p=new xe(u);return new Cv(f,p,o.fieldTransforms)}function zx(n,t,e,r=!1){return Po(e,n.gc(r?4:3,t))}function Po(n,t){if(Dv(n=an(n)))return Hh("Unsupported field value:",t,n),Vv(n,t);if(n instanceof zh)return function(r,s){if(!Rv(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Ec&&t.hc!==4)throw t.Vc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Po(l,s.Rc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,t)}return function(r,s){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return II(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Mt.fromDate(r);return{timestampValue:Us(s.serializer,i)}}if(r instanceof Mt){const i=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Us(s.serializer,i)}}if(r instanceof $h)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:Cy(s.serializer,r._byteString)};if(r instanceof Te){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ah(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qh)return function(o,l){return{mapValue:{fields:{[gh]:{stringValue:_h},[Os]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Vc("VectorValues must only contain numeric values.");return vh(l.serializer,u)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${Dl(r)}`)}(n,t)}function Vv(n,t){const e={};return Q_(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cr(n,(r,s)=>{const i=Po(s,t.Ic(r));i!=null&&(e[r]=i)}),{mapValue:{fields:e}}}function Dv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof $h||n instanceof $s||n instanceof Te||n instanceof zh||n instanceof qh)}function Hh(n,t,e){if(!Dv(e)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(e)){const r=Dl(e);throw r==="an object"?t.Vc(n+" a custom object"):t.Vc(n+" "+r)}}function Iu(n,t,e){if((t=an(t))instanceof Ol)return t._internalPath;if(typeof t=="string")return Wh(n,t);throw Za("Field path arguments must be of type string or ",n,!1,void 0,e)}const $x=new RegExp("[~\\*/\\[\\]]");function Wh(n,t,e){if(t.search($x)>=0)throw Za(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Ol(...t.split("."))._internalPath}catch{throw Za(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Za(n,t,e,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,l+n+c)}function kv(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,e,r,s,i){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ml("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class qx extends Ov{data(){return super.data()}}function Ml(n,t){return typeof t=="string"?Wh(n,t):t instanceof Ol?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qh{}class Nv extends Qh{}function Gx(n,t,...e){let r=[];t instanceof Qh&&r.push(t),r=r.concat(e),function(i){const o=i.filter(c=>c instanceof Yh).length,l=i.filter(c=>c instanceof Fl).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Fl extends Nv{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Fl(t,e,r)}_apply(t){const e=this._parse(t);return Mv(t._query,e),new Jr(t.firestore,t.converter,uu(t._query,e))}_parse(t){const e=Gh(t.firestore);return function(i,o,l,c,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){vm(p,f);const R=[];for(const V of p)R.push(ym(c,i,V));m={arrayValue:{values:R}}}else m=ym(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||vm(p,f),m=zx(l,o,p,f==="in"||f==="not-in");return _t.create(u,f,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function _m(n,t,e){const r=t,s=Ml("where",n);return Fl._create(s,r,e)}class Yh extends Qh{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Yh(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:St.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Mv(o,c),o=uu(o,c)}(t._query,e),new Jr(t.firestore,t.converter,uu(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xh extends Nv{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Xh(t,e)}_apply(t){const e=function(s,i,o){if(s.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ho(i,o)}(t._query,this._field,this._direction);return new Jr(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Hs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,e))}}function Hx(n,t="asc"){const e=t,r=Ml("orderBy",n);return Xh._create(r,e)}function ym(n,t,e){if(typeof(e=an(e))=="string"){if(e==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fy(t)&&e.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(xt.fromString(e));if(!Y.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return co(n,new Y(r))}if(e instanceof Te)return co(n,e._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dl(e)}.`)}function vm(n,t){if(!Array.isArray(n)||n.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Mv(n,t){const e=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Wx{convertValue(t,e="none"){switch(Jn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(In(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return cr(t,(s,i)=>{r[s]=this.convertValue(i,e)}),r}convertVectorValue(t){var e,r,s;const i=(s=(r=(e=t.fields)===null||e===void 0?void 0:e[Os].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Nt(o.doubleValue));return new qh(i)}convertGeoPoint(t){return new $h(Nt(t.latitude),Nt(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=bl(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ao(t));default:return null}}convertTimestamp(t){const e=Tn(t);return new Mt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=xt.fromString(t);et(By(r),9688,{name:t});const s=new jr(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(e)||be(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fv extends Ov{constructor(t,e,r,s,i,o){super(t,e,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Ml("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Ea extends Fv{data(t={}){return super.data(t)}}class Yx{constructor(t,e,r,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Ea(this._firestore,this._userDataWriter,r.key,r,new Ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Ea(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ea(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ai(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:Xx(l.type),doc:c,oldIndex:u,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Xx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:n})}}class Lv extends Wx{constructor(t){super(),this.firestore=t}convertBytes(t){return new $s(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Te(this.firestore,null,e)}}function bm(n,t,e){n=En(n,Te);const r=En(n.firestore,zs),s=Qx(n.converter,t,e);return Bv(r,[Bx(Gh(r),"setDoc",n._key,s,n.converter!==null,e).toMutation(n._key,Se.none())])}function Jx(n,t,e,...r){n=En(n,Te);const s=En(n.firestore,zs),i=Gh(s);let o;return o=typeof(t=an(t))=="string"||t instanceof Ol?jx(i,"updateDoc",n._key,t,e,r):Ux(i,"updateDoc",n._key,t),Bv(s,[o.toMutation(n._key,Se.exists(!0))])}function Zx(n,...t){var e,r,s;n=an(n);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||gm(t[o])||(i=t[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gm(t[o])){const p=t[o];t[o]=(e=p.next)===null||e===void 0?void 0:e.bind(p),t[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),t[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,u,f;if(n instanceof Te)u=En(n.firestore,zs),f=wl(n._key.path),c={next:p=>{t[o]&&t[o](tS(u,n,p))},error:t[o+1],complete:t[o+2]};else{const p=En(n,Jr);u=En(p.firestore,zs),f=p._query;const m=new Lv(u);c={next:E=>{t[o]&&t[o](new Yx(u,m,p,E))},error:t[o+1],complete:t[o+2]},Kx(n._query)}return function(m,E,R,V){const v=new Sx(V),N=new lx(E,v,R);return m.asyncQueue.enqueueAndForget(async()=>sx(await am(m),N)),()=>{v.Cu(),m.asyncQueue.enqueueAndForget(async()=>ix(await am(m),N))}}(Sv(u),f,l,c)}function Bv(n,t){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>yx(await Rx(r),s,i)),i.promise}(Sv(n),t)}function tS(n,t,e){const r=e.docs.get(t._key),s=new Lv(n);return new Fv(n,s,t._key,r,new Ai(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){Gs=s})(sT),Fa(new Zi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new zs(new yT(r.getProvider("auth-internal")),new ET(o,r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jr(u.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),As(Qd,Yd,t),As(Qd,Yd,"esm2017")})();function Uv(n){return new URLSearchParams(window.location.search).get(n)}function Jh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}async function eS(n){const t=ze();if(typeof Le>"u")return It("FSUpdatesHandler - FileMaker not detected, skipping","warn"),{success:!1,message:"FileMaker not available"};if(t.device.deviceMode==="passive")return It("FSUpdatesHandler - Device in passive mode, skipping","info"),{success:!0,message:"Passive mode - no processing needed"};const e=n.updates||[];if(!e.length)return It("FSUpdatesHandler - No updates to process","info"),{success:!0,message:"No updates to process"};const r=[];return e.forEach(s=>{const i={id:s.id,_table:s._table,_tsModFireStore:s._tsModFireStore,_ts:{}};typeof s._ts>"u"&&(s._ts={}),Object.keys(s._ts).forEach(o=>{(typeof s._ts[o]=="number"||typeof s._ts[o]=="object")&&(i[o]=s[o],i._ts[o]=s._ts[o])}),s!=null&&s.devicePendingContainer&&(i.devicePendingContainer=s.devicePendingContainer),s!=null&&s.batchTotalEdits&&(i.batchTotalEdits=s.batchTotalEdits),s!=null&&s.batchIdEdits&&(i.batchIdEdits=s.batchIdEdits),r.push(i)}),t.updatesQueue.push(...r),t.updatesTotal+=r.length,It(`Batched updates: ${r.length}, Total Updates: ${t.updatesQueue.length}`,"info"),t.isUpdatingFM?{success:!0,message:"Update process already running"}:await nS(t)}async function nS(n){const t=n.fmUpdatesBatchSize||10;let e=!1;n.isUpdatingFM=!0;try{for(;n.updatesQueue.length>0;){n.startProcessing();const r=n.updatesQueue.slice(0,t),s="API - Web Sync Inbound dispatcher {payload}",i={updates:r,remaining:n.updatesQueue.length-r.length};It(`Sending updates: ${r.length}`,"info");const o=await Le.performScript(s,JSON.stringify(i),1e4);if(o.success){It(`${r.length} Updates successfully saved!`,"info"),n.updatesTotalCompleted+=r.length,rS(r,n),n.updatesQueue.splice(0,r.length);try{const l=window.localStorage.device}catch{It("Error updating device object in localStorage","error")}}else{It(`ERROR writing batch to database: ${JSON.stringify(o.error)}`,"error");break}}return n.updatesTotal===n.updatesTotalCompleted&&(It("Updates Completed!","info"),n.updatesTotal=0,n.updatesTotalCompleted=0),{success:!0,message:"Updates processed successfully"}}catch(r){return It(`Error in sendUpdatesToDatabase: ${r.message}`,"error"),{success:!1,error:r.message}}finally{n.isUpdatingFM=!1}}function rS(n,t){function e(i){return i&&i.toMillis?i.toMillis()+(i.nanoseconds||0)/1e6:Date.parse(i)}function r(i){if(i&&i.toMillis){const l=i.toMillis()+(i.nanoseconds||0)/1e6;return new Date(l).toISOString()}return new Date(i).toISOString()}function s(i,o){Object.prototype.hasOwnProperty.call(t.updatesBatches,i)?e(o)>e(t.updatesBatches[i].latestTs)&&(t.updatesBatches[i].latestTs=o):t.updatesBatches[i]={latestTs:o}}return n.forEach(i=>{if(i.batchIdEdits){s(i.batchIdEdits,i._tsModFireStore);const o=t.updatesBatches[i.batchIdEdits],l=o.totalReceived||0;if(l+1===i.batchTotalEdits||i.batchTotalEdits===1)return t.device.tsModFireStoreLastUpdate=r(o.latestTs),delete t.updatesBatches[i.batchIdEdits],!0;o.totalReceived=l+1}}),!1}function sS(n){const t=ze();return n.currentState&&(t.editsCurrentState=n.currentState),typeof n.pendingEdits<"u"&&(t.editsTotalPending=n.pendingEdits),typeof Le<"u"&&Le.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Edit status updated"})}function iS(n){var e,r;const t=ze();return typeof((e=n==null?void 0:n.updates)==null?void 0:e.totalContainers)<"u"&&(t.updateTotalContainers+=n.updates.totalContainers),typeof((r=n==null?void 0:n.updates)==null?void 0:r.completedContainers)<"u"&&(t.updateCompletedContainers+=n.updates.completedContainers),t.updateCompletedContainers===t.updateTotalContainers&&(t.updateCompletedContainers=0,t.updateTotalContainers=0),t.updateCompletedContainers>t.updateTotalContainers&&(t.updateCompletedContainers=0),typeof Le<"u"&&Le.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Container downloads updated"})}async function oS(n){const t=ze(),e=n.payload;if(!e)return Promise.resolve({success:!1,message:"No payload provided"});if(e.status)return typeof Le<"u"&&Le.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Status ping acknowledged"});if(e.edits&&Array.isArray(e.edits)){It(`Payload received from FM (${JSON.stringify(e).length} bytes)`,"info");let r=0;const s=5;for(;r<s;)if(window.fsDeviceRef){e.edits.forEach(o=>{It("Processing edit for Firestore","info"),o.typeEdit==="containerIsUploaded"&&(t.editsContainersComplete+=1)}),t.editsCurrentState="4",t.editsContainersComplete===t.editsContainersTotal&&(t.editsContainersComplete=0,t.editsContainersTotal=0);const i={payload:e.modificationTimestampUTCEnd?{modificationTimestampUTCEnd:e.modificationTimestampUTCEnd}:{}};return typeof Le<"u"&&Le.returnResult(i),Promise.resolve({success:!0,message:"Payload processed successfully"})}else{if(r++,It(`FS not ready yet, attempt: ${r}`,"warn"),r>=s)return It("webSync Timeout - Firebase not ready","error"),Promise.resolve({success:!1,message:"Firebase timeout"});await new Promise(i=>setTimeout(i,1e3))}}return Promise.resolve({success:!1,message:"No edits to process"})}function aS(){const n=ze();if(n.device.deviceMode==="passive")return It("subscribeUpdates - Device in passive mode, skipping subscription","info"),Promise.resolve({success:!0,message:"Passive mode - no subscription needed"});try{const t=new Date,e=n.device.tsModFireStoreLastUpdate?new Date(n.device.tsModFireStoreLastUpdate):t;if(It(`subscribeUpdates - Starting subscription from timestamp: ${e.toISOString()}`,"info"),e===t&&(n.device.tsModFireStoreLastUpdate=e,window.fsDeviceRef))try{const s=xv(),i=Tu(s,"Organizations",n.organization.id,"Devices",n.device.id);Jx(i,{tsModFireStoreLastUpdate:e}).catch(o=>{It(`Error updating device timestamp: ${o.message}`,"error")})}catch(s){It(`Error accessing Firestore for timestamp update: ${s.message}`,"error")}if(window.fsUpdatesRefUnsubscribe&&typeof window.fsUpdatesRefUnsubscribe=="function"&&(window.fsUpdatesRefUnsubscribe(),It("subscribeUpdates - Cleaned up existing subscription","info")),!window.fsUpdatesRef)return It("subscribeUpdates - Firestore updates reference not available, cannot subscribe","warn"),Promise.resolve({success:!1,message:"Firestore references not available"});const r=Gx(window.fsUpdatesRef,Hx("_tsModFireStore","asc"),_m("_tsModFireStore",">",Mt.fromDate(e)),_m("_contexts","array-contains-any",n.device.contexts));return window.fsUpdatesRefUnsubscribe=Zx(r,{includeMetadataChanges:!1},s=>{jv(s,n)},s=>{It(`subscribeUpdates - Snapshot listener error: ${s.message}`,"error")}),It("subscribeUpdates - Firestore listener established successfully","info"),Promise.resolve({success:!0,message:"Updates subscription established"})}catch(t){return It(`subscribeUpdates - Error setting up subscription: ${t.message}`,"error"),Promise.resolve({success:!1,error:t.message})}}function jv(n,t){if(!n||n.empty){It("processSnapshot - No updates in snapshot","info");return}const e=[],r=["devicePendingContainer","batchTotalEdits","batchIdEdits"];if(n.docChanges().forEach(async s=>{const i=s.doc.data();if(s.type==="added"||s.type==="modified"){It(`processSnapshot - Processing ${s.type} update: ${i.id||s.doc.id}`,"info"),go("isProcessing");const o=62135596800,l=Date.parse(t.device.tsModFireStoreLastUpdate)/1e3;if(i.updatedKeys||(i.updatedKeys=[]),i._ts)for(const[u,f]of Object.entries(i._ts))f&&f.ts&&Math.round(f.ts/1e3)-o>l&&!i.updatedKeys.includes(u)&&i.updatedKeys.push(u);const c={_table:i._table,id:i.id||s.doc.id,_tsModFireStore:i._tsModFireStore,_ts:{}};i.updatedKeys.forEach(u=>{c[u]=i[u],r.includes(u)||(c._ts[u]=i._ts[u])}),i.batchTotalEdits&&(c.batchTotalEdits=i.batchTotalEdits),i.batchIdEdits&&(c.batchIdEdits=i.batchIdEdits),i.devicePendingContainer&&(c.devicePendingContainer=i.devicePendingContainer),e.push(c)}}),e.length>0){It(`processSnapshot - Calling FSUpdatesHandler with ${e.length} updates`,"info");const i=e[e.length-1]._tsModFireStore;go("FSUpdatesHandler",{updates:e,_tsModFireStoreLastUpdate:i instanceof Date?i:new Date(i)})}}function go(n,t={}){const e=ze();switch(n){case"isProcessing":return e.startProcessing();case"endProcessing":return e.endProcessing();case"promptUserToConfigure":return console.log("[namedAction] promptUserToConfigure called"),Promise.resolve({success:!0,message:"User prompted (mocked)"});case"getSignedURL":return console.log("[namedAction] getSignedURL called with options:",t),Promise.resolve(`https://mock-signed-url.com/${t.name}`);case"FSUpdatesHandler":return eS(t);case"editsUpdateStatus":return sS(t);case"updatesContainerDownloads":return iS(t);case"webSyncReceivePayload":return oS(t);case"subscribeUpdates":return aS();case"subscribeUpdatesDebounce":return It("subscribeUpdatesDebounce called - would re-subscribe to updates","info"),Promise.resolve({success:!0,message:"Debounced subscription triggered"});default:return console.warn(`[namedAction] Unknown action: ${n}`),Promise.resolve({success:!1,message:`Unknown action: ${n}`})}}function zv(){console.log("[BF] actionsClear called - clearing action queue (mocked)"),ze().endProcessing()}function $v(n,t){const e=ze();switch(n){case"isProcessing":t?e.startProcessing():e.endProcessing();break;default:console.log(`[setGlobalVar] ${n} = ${t}`);break}}function qv(n){const t=ze();switch(n){case"isProcessing":return t.isProcessing;case"deviceId":return t.device.id;case"organizationId":return t.organization.id;default:return console.warn(`[getGlobalVar] Unknown variable: ${n}`),null}}function Kv(n,t="Alert"){console.log(`[Alert] ${t}: ${n}`),alert(`${t}

${n}`)}function It(n,t="info"){const e=new Date().toISOString(),r=`[BF-${t.toUpperCase()}] ${e}`;switch(t){case"error":console.error(r,n);break;case"warn":console.warn(r,n);break;case"debug":console.debug(r,n);break;default:console.log(r,n)}}function Gv(n){try{const t=JSON.parse(n),{name:e,options:r={}}=t;return It(`namedActionFM called: ${e}`,"info"),go(e,r)}catch(t){return It(`Error in namedActionFM: ${t.message}`,"error"),Promise.resolve({success:!1,error:t.message})}}const Hv={getQueryParam:Uv,getUUID:Jh,namedAction:go,namedActionFM:Gv,actionsClear:zv,setGlobalVar:$v,getGlobalVar:qv,showAlert:Kv,log:It};typeof window<"u"&&(window.BF=Hv,window.processSnapshot=jv);const lS=Object.freeze(Object.defineProperty({__proto__:null,BF:Hv,actionsClear:zv,getGlobalVar:qv,getQueryParam:Uv,getUUID:Jh,log:It,namedAction:go,namedActionFM:Gv,setGlobalVar:$v,showAlert:Kv},Symbol.toStringTag,{value:"Module"})),ze=FE("appConfig",{state:()=>({sessionId:Jh(),activeJob:null,configx:{deviceMode:"passive",deviceType:"webApp",idContext:"CON_north",idDevice:null,idOrganization:null,tsModFireStoreLastUpdate:new Date().toISOString()},device:{id:"DEV_demo",deviceMode:"passive",deviceType:"webApp",tsModFireStoreLastUpdate:null,contexts:["defaultContext"],tables:[],recordID:null,lastSyncOutUTC:null,syncAppURL:null},editsContainersComplete:0,editsContainersTotal:0,editsCurrentState:"0",editsStates:{0:"No New Edits",1:"Starting Sync",2:"Fetching New Edits",3:"Sending Data",4:"Updates Sent",5:"New Edits"},editsTotalPending:0,env:{logoURL:"https://ucarecdn.com/cbbbcd08-c49f-499d-8125-e1dbb2a4f262/"},fmUpdatesBatchSize:25,isOnline:!0,isProcessing:!1,isUpdatingFM:!1,localFSInSync:"-",log:"---",organization:{id:"ORG_demo"},payload:{},people:[],storageSize:0,updateCompletedContainers:0,updateTotalContainers:0,updatesBatches:{},updatesCurrentTS:{},updatesQueue:[],updatesTotal:0,updatesTotalCompleted:0,updatesTotalRecords:0}),actions:{initializeConfigFromURLParams(){const n=s=>new URLSearchParams(window.location.search).get(s);console.log("@onAppLoad InitConfigs - Initial device state before URL params: ",JSON.parse(JSON.stringify(this.device)));const t=n("idOrganization");this.organization.id=t||this.organization.id||"ORG_demo",this.configx.idOrganization=this.organization.id;const e=n("idDevice");if(this.device.id=e||this.device.id||"DEV_demo",this.configx.idDevice=this.device.id,this.device.deviceMode=n("deviceMode")||this.device.deviceMode||"passive",this.configx.deviceMode=this.device.deviceMode,this.device.deviceType=n("deviceType")||this.device.deviceType||"webApp",this.configx.deviceType=this.device.deviceType,this.device.deviceType==="webApp"){const s=new Date;this.device.tsModFireStoreLastUpdate=s,this.configx.tsModFireStoreLastUpdate=s.toISOString()}const r=n("contexts");if(r)try{const i=decodeURI(r).split(",");this.device.contexts=i.length>0?i:this.device.contexts}catch(s){console.error("Error decoding contexts from URL query parameter:",s)}console.log("Final appConfig store state after URL params:",JSON.parse(JSON.stringify(this.$state)))},startProcessing(){this.isProcessing=!0,console.log("isProcessing set to true")},endProcessing(){this.isProcessing=!1,console.log("isProcessing set to false")}}}),cS="modulepreload",uS=function(n,t){return new URL(n,t).href},Em={},hS=function(t,e,r){let s=Promise.resolve();if(e&&e.length>0){let o=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(e.map(f=>{if(f=uS(f,r),f in Em)return;Em[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(!!r)for(let V=l.length-1;V>=0;V--){const v=l[V];if(v.href===f&&(!p||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${m}`))return;const R=document.createElement("link");if(R.rel=p?"stylesheet":cS,p||(R.as="script"),R.crossOrigin="",R.href=f,u&&R.setAttribute("nonce",u),document.head.appendChild(R),p)return new Promise((V,v)=>{R.addEventListener("load",V),R.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var fS="firebase",dS="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(fS,dS,"app");const pS={apiKey:"AIzaSyC7IAF_M-rtG-W-M-OxTstiEeS3oG3ctoY",appId:"1:415177867181:web:f0c952ea381ee04fe3ab24",authDomain:"bf-pwa.firebaseapp.com",measurementId:"G-RMDP2726CQ",messagingSenderId:"415177867181",projectId:"bf-pwa",storageBucket:"bf-pwa.appspot.com"};let xc=null,Sc=null,mS=null,Ki=null,Zh=null,Wv=null;async function gS(){const n=ze();if(!n.organization.id||!n.device.id){console.error("Organization ID or Device ID is missing. Cannot check/create parent documents.");return}try{console.log(`Ensuring Organization document exists: Organizations/${n.organization.id}`),await bm(Ki,{},{merge:!0}),console.log(`Ensuring Device document exists: Organizations/${n.organization.id}/Devices/${n.device.id}`),await bm(Zh,{deviceType:n.device.deviceType},{merge:!0}),console.log("Parent documents checked/created successfully.")}catch(t){console.error("Error in checkParentDocuments: ",t)}}async function _S(){const n=ze();if(n.device.deviceMode==="passive"){console.log("Device mode is passive. Skipping Firebase initialization.");return}if(Sc){console.log("Firebase already initialized.");return}try{if(console.log("Initializing Firebase app..."),Sc=E_(pS),xc=xv(Sc),console.log("Enabling Firestore offline persistence..."),await Ox(xc),console.log("Firestore offline persistence enabled."),n.organization.id&&n.device.id)Ki=Tu(xc,"Organizations",n.organization.id),Zh=Tu(Ki,"Devices",n.device.id),Wv=kx(Ki,"Updates"),console.log("Firestore document/collection references initialized.");else{console.error("Organization ID or Device ID not available from config store for Firebase refs initialization.");return}console.log("Firebase services initialized."),await yS()}catch(t){console.error("Error initializing Firebase: ",t)}}async function yS(){console.log("Setting up Firestore listeners and initial checks..."),await gS(),typeof window<"u"&&(window.fsOrganizationRef=Ki,window.fsDeviceRef=Zh,window.fsUpdatesRef=Wv,window.fsUpdatesRefUnsubscribe=mS,console.log("Firestore references exposed globally for BetterForms compatibility"));try{const{namedAction:n}=await hS(async()=>{const{namedAction:e}=await Promise.resolve().then(()=>lS);return{namedAction:e}},void 0,import.meta.url),t=await n("subscribeUpdates");console.log("subscribeUpdates result:",t)}catch(n){console.error("Error setting up updates subscription:",n)}console.log("Firestore listeners and checks setup complete.")}const vS=(n,t)=>{const e=n.__vccOpts||n;for(const[r,s]of t)e[r]=s;return e},bS={class:"min-h-screen w-full bg-gray-900 text-gray-100 overflow-x-hidden"},ES={class:"w-full bg-gray-800 border-b border-gray-700 sticky top-0 z-30"},wS={class:"px-0 py-6"},TS={class:"flex items-center justify-between px-4"},IS={class:"flex items-center space-x-6"},AS={class:"flex items-center space-x-4"},xS={class:"p-3 bg-blue-600 rounded-xl"},SS={class:"flex items-center space-x-8"},PS={class:"flex items-center space-x-3"},CS={class:"text-sm text-gray-300 font-medium"},RS={class:"flex items-center space-x-3"},VS={class:"text-sm text-gray-300 font-medium capitalize"},DS={class:"w-full overflow-x-hidden"},kS={class:"px-0 py-6"},OS={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 px-4 mb-6"},NS={class:"bg-gray-800 border border-gray-700 rounded-2xl p-6"},MS={class:"mb-4"},FS={class:"text-base text-gray-300"},LS={key:0,class:"space-y-4"},BS={class:"flex justify-between items-center"},US={class:"text-blue-400 font-bold"},jS={class:"w-full bg-gray-700 rounded-full h-2"},zS={class:"flex justify-between text-sm text-gray-400"},$S={key:1,class:"text-center py-8 text-gray-500"},qS={class:"bg-gray-800 border border-gray-700 rounded-2xl p-6"},KS={key:0,class:"space-y-6"},GS={class:"space-y-4"},HS={class:"flex justify-between items-center"},WS={class:"text-green-400 font-bold"},QS={class:"w-full bg-gray-700 rounded-full h-2"},YS={class:"flex justify-between text-sm text-gray-400"},XS={key:0,class:"border-t border-gray-700 pt-4 space-y-4"},JS={class:"flex justify-between items-center"},ZS={class:"text-green-400 font-bold"},t2={class:"w-full bg-gray-700 rounded-full h-2"},e2={class:"flex justify-between text-sm text-gray-400"},n2={key:1,class:"text-center py-8"},r2={class:"px-0 py-2"},s2={class:"grid grid-cols-1 md:grid-cols-3 gap-8 px-4"},i2={class:"bg-gray-800 border border-gray-700 rounded-2xl p-8"},o2={class:"space-y-4"},a2={class:"flex justify-between items-center"},l2={class:"text-white font-mono font-medium"},c2={class:"flex justify-between items-center"},u2={class:"px-3 py-1 bg-gray-700 rounded-lg text-sm text-white font-medium"},h2={class:"flex justify-between items-center"},f2={class:"text-white font-medium"},d2={class:"bg-gray-800 border border-gray-700 rounded-2xl p-8"},p2={class:"space-y-4"},m2={class:"flex justify-between items-center"},g2={class:"text-white font-mono font-medium"},_2={class:"flex justify-between items-center"},y2={class:"text-white font-medium"},v2={class:"bg-gray-800 border border-gray-700 rounded-2xl p-8"},b2={class:"space-y-4"},E2={class:"flex items-center justify-between"},w2={class:"flex items-center space-x-2"},T2={class:"text-white text-sm font-medium"},I2={class:"flex items-center justify-between"},A2={class:"flex items-center justify-between mb-8"},x2={class:"mb-8"},S2={class:"flex items-center justify-between mb-4"},P2={class:"grid grid-cols-2 gap-4"},C2={class:"mb-8"},R2={class:"space-y-4"},V2={class:"flex items-center justify-between"},D2={class:"flex items-center space-x-2"},k2={class:"flex items-center justify-between"},O2={class:"flex items-center space-x-2"},N2={class:"flex items-center justify-between"},M2={class:"flex items-center space-x-2"},F2={class:"border-t border-gray-700 pt-6"},L2={class:"space-y-2 text-xs text-gray-400 font-mono"},B2={__name:"App",setup(n){const t=ze(),e=Aa("Initializing..."),r=Aa(!1),s=Ve(()=>t.editsContainersTotal?Math.round(t.editsContainersComplete/t.editsContainersTotal*100):0),i=Ve(()=>t.updatesTotal?Math.round(t.updatesTotalCompleted/t.updatesTotal*100):0),o=Ve(()=>t.updateTotalContainers?Math.round(t.updateCompletedContainers/t.updateTotalContainers*100):0),l=Ve(()=>e.value.includes("successfully")?"connected":e.value.includes("error")?"error":"connecting"),c=Ve(()=>t.isProcessing?"processing":t.updatesTotal>0||t.editsContainersTotal>0?"syncing":"idle");kg(async()=>{try{console.log("BetterForms utilities initialized:",typeof window.BF<"u"?"BF available globally":"BF not found"),console.log("FileMaker Bridge initialized:",Le.isFileMakerEnvironment?"FileMaker detected":"Standalone mode"),t.initializeConfigFromURLParams(),await _S(),e.value="Connected successfully"}catch(V){e.value=`Connection failed: ${V.message}`,console.error("Firebase initialization error:",V)}});const u=async()=>{console.log("Testing FSUpdatesHandler...");const V=[{id:"test-update-1",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()},field2:{ts:Date.now()+1e3}},field1:"Test Value 1",field2:"Test Value 2",batchTotalEdits:2,batchIdEdits:"batch-123"},{id:"test-update-2",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()+2e3}},field1:"Test Value 3",batchTotalEdits:2,batchIdEdits:"batch-123"}],v=await window.BF.namedAction("FSUpdatesHandler",{updates:V});console.log("FSUpdatesHandler result:",v)},f=async()=>{console.log("Testing editsUpdateStatus...");const V=await window.BF.namedAction("editsUpdateStatus",{currentState:"3",pendingEdits:5});console.log("editsUpdateStatus result:",V)},p=async()=>{console.log("Testing updatesContainerDownloads...");const V=await window.BF.namedAction("updatesContainerDownloads",{updates:{totalContainers:10,completedContainers:3}});console.log("updatesContainerDownloads result:",V)},m=async()=>{console.log("Testing FSUpdatesHandler in active mode...");const V=t.device.deviceMode;t.device.deviceMode="active";const v=[{id:"test-update-1",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()},field2:{ts:Date.now()+1e3}},field1:"Test Value 1",field2:"Test Value 2",batchTotalEdits:2,batchIdEdits:"batch-123"},{id:"test-update-2",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()+2e3}},field1:"Test Value 3",batchTotalEdits:2,batchIdEdits:"batch-123"}],N=await window.BF.namedAction("FSUpdatesHandler",{updates:v});console.log("FSUpdatesHandler active mode result:",N),t.device.deviceMode=V,console.log(`Device mode restored to: ${V}`)},E=async()=>{console.log("Testing subscribeUpdates...");const V=await window.BF.namedAction("subscribeUpdates");console.log("subscribeUpdates result:",V)},R=async()=>{console.log("Simulating Firestore update...");const V={empty:!1,docChanges:()=>[{type:"added",doc:{id:"simulated-update-"+Date.now(),data:()=>({id:"simulated-update-"+Date.now(),_table:"SimulatedTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()*1e3},field2:{ts:(Date.now()+1e3)*1e3}},field1:"Simulated Value 1",field2:"Simulated Value 2",updatedKeys:["field1","field2"],batchTotalEdits:1,batchIdEdits:"simulated-batch-"+Date.now(),_contexts:t.device.contexts})}}]};if(window.processSnapshot)window.processSnapshot(V,t);else{console.log("processSnapshot not available - this would normally be called by the Firestore listener");const v=[{id:"simulated-update-"+Date.now(),_table:"SimulatedTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()*1e3},field2:{ts:(Date.now()+1e3)*1e3}},field1:"Simulated Value 1",field2:"Simulated Value 2",batchTotalEdits:1,batchIdEdits:"simulated-batch-"+Date.now()}],N=t.device.deviceMode;t.device.deviceMode="active";const D=await window.BF.namedAction("FSUpdatesHandler",{updates:v});console.log("Simulated update result:",D),t.device.deviceMode=N}};return(V,v)=>{const N=a1("font-awesome-icon");return Bn(),vr("div",bS,[k("nav",ES,[k("div",wS,[k("div",TS,[k("div",IS,[k("div",AS,[k("div",xS,[Ee(N,{icon:["fas","arrows-rotate"],class:mn([ft(t).isProcessing?"animate-spin":"","text-white text-2xl"])},null,8,["class"])]),v[12]||(v[12]=k("div",null,[k("h1",{class:"text-2xl font-bold text-white"},"WebSync"),k("p",{class:"text-sm text-gray-400 mt-1"},"Admin Dashboard")],-1))])]),k("div",SS,[k("div",PS,[k("div",{class:mn([{"bg-green-500":l.value==="connected","bg-red-500":l.value==="error","bg-yellow-500":l.value==="connecting"},"w-3 h-3 rounded-full"])},null,2),k("span",CS,kt(l.value==="connected"?"Connected":l.value==="error"?"Error":"Connecting"),1)]),k("div",RS,[k("div",{class:mn([{"bg-blue-500":c.value==="processing","bg-purple-500":c.value==="syncing","bg-gray-500":c.value==="idle"},"w-3 h-3 rounded-full"])},null,2),k("span",VS,kt(c.value),1)]),k("button",{onClick:v[0]||(v[0]=D=>r.value=!r.value),class:"p-3 text-gray-400 hover:text-white hover:bg-gray-700 rounded-xl transition-colors",title:"Debug Controls"},v[13]||(v[13]=[k("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))])])])]),k("div",DS,[k("div",kS,[k("div",OS,[k("div",NS,[v[16]||(v[16]=pi('<div class="flex items-center justify-between mb-6" data-v-1900d722><div class="flex items-center space-x-4" data-v-1900d722><div class="p-3 bg-blue-600 bg-opacity-20 rounded-xl" data-v-1900d722><svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1900d722><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-1900d722></path></svg></div><div data-v-1900d722><h2 class="text-xl font-bold text-white" data-v-1900d722>Data Uploads</h2><p class="text-sm text-gray-400 mt-1" data-v-1900d722>Local to Cloud Sync</p></div></div><div class="px-3 py-1 bg-blue-600 bg-opacity-20 rounded-full" data-v-1900d722><span class="text-xs font-semibold text-blue-400 uppercase tracking-wide" data-v-1900d722>EDITS</span></div></div>',1)),k("div",MS,[k("p",FS,kt(ft(t).editsTotalPending?ft(t).editsStates[ft(t).editsCurrentState]+": "+ft(t).editsTotalPending:ft(t).editsStates[ft(t).editsCurrentState]),1)]),ft(t).editsContainersTotal?(Bn(),vr("div",LS,[k("div",BS,[v[14]||(v[14]=k("span",{class:"text-gray-300 font-medium"},"Container Upload Progress",-1)),k("span",US,kt(s.value)+"%",1)]),k("div",jS,[k("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-700 ease-out",style:Ts(`width: ${s.value}%`)},null,4)]),k("div",zS,[k("span",null,kt(ft(t).editsContainersComplete)+" completed",1),k("span",null,kt(ft(t).editsContainersTotal)+" total",1)])])):(Bn(),vr("div",$S,v[15]||(v[15]=[k("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k("p",{class:"text-base"},"No pending uploads",-1)])))]),k("div",qS,[v[20]||(v[20]=pi('<div class="flex items-center justify-between mb-6" data-v-1900d722><div class="flex items-center space-x-4" data-v-1900d722><div class="p-3 bg-green-600 bg-opacity-20 rounded-xl" data-v-1900d722><svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1900d722><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 12l2 2 4-4" data-v-1900d722></path></svg></div><div data-v-1900d722><h2 class="text-xl font-bold text-white" data-v-1900d722>Data Downloads</h2><p class="text-sm text-gray-400 mt-1" data-v-1900d722>Cloud to Local Sync</p></div></div><div class="px-3 py-1 bg-green-600 bg-opacity-20 rounded-full" data-v-1900d722><span class="text-xs font-semibold text-green-400 uppercase tracking-wide" data-v-1900d722>UPDATES</span></div></div>',1)),ft(t).updatesTotal?(Bn(),vr("div",KS,[k("div",GS,[k("div",HS,[v[17]||(v[17]=k("span",{class:"text-gray-300 font-medium"},"Download Progress",-1)),k("span",WS,kt(i.value)+"%",1)]),k("div",QS,[k("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-700 ease-out",style:Ts(`width: ${i.value}%`)},null,4)]),k("div",YS,[k("span",null,kt(ft(t).updatesTotalCompleted)+" completed",1),k("span",null,kt(ft(t).updatesTotal)+" total",1)])]),ft(t).updateTotalContainers?(Bn(),vr("div",XS,[k("div",JS,[v[18]||(v[18]=k("span",{class:"text-gray-300 font-medium"},"Container Downloads",-1)),k("span",ZS,kt(o.value)+"%",1)]),k("div",t2,[k("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-700 ease-out",style:Ts(`width: ${o.value}%`)},null,4)]),k("div",e2,[k("span",null,kt(ft(t).updateCompletedContainers)+" completed",1),k("span",null,kt(ft(t).updateTotalContainers)+" total",1)])])):yd("",!0)])):(Bn(),vr("div",n2,v[19]||(v[19]=[k("svg",{class:"w-12 h-12 mx-auto mb-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),k("p",{class:"text-green-400 font-semibold"},"System Up to Date",-1),k("p",{class:"text-sm text-gray-400 mt-1"},"All data synchronized",-1)])))])])]),k("div",r2,[k("div",s2,[k("div",i2,[v[24]||(v[24]=pi('<div class="flex items-center justify-between mb-6" data-v-1900d722><h3 class="text-xl font-semibold text-white" data-v-1900d722>Device Info</h3><div class="p-3 bg-blue-600 bg-opacity-20 rounded-xl" data-v-1900d722><svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1900d722><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-1900d722></path></svg></div></div>',1)),k("div",o2,[k("div",a2,[v[21]||(v[21]=k("span",{class:"text-gray-400 text-sm"},"ID:",-1)),k("span",l2,kt(ft(t).device.id),1)]),k("div",c2,[v[22]||(v[22]=k("span",{class:"text-gray-400 text-sm"},"Mode:",-1)),k("span",u2,kt(ft(t).device.deviceMode),1)]),k("div",h2,[v[23]||(v[23]=k("span",{class:"text-gray-400 text-sm"},"Type:",-1)),k("span",f2,kt(ft(t).device.deviceType),1)])])]),k("div",d2,[v[27]||(v[27]=pi('<div class="flex items-center justify-between mb-6" data-v-1900d722><h3 class="text-xl font-semibold text-white" data-v-1900d722>Organization</h3><div class="p-3 bg-green-600 bg-opacity-20 rounded-xl" data-v-1900d722><svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1900d722><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-1900d722></path></svg></div></div>',1)),k("div",p2,[k("div",m2,[v[25]||(v[25]=k("span",{class:"text-gray-400 text-sm"},"ID:",-1)),k("span",g2,kt(ft(t).organization.id),1)]),k("div",_2,[v[26]||(v[26]=k("span",{class:"text-gray-400 text-sm"},"Contexts:",-1)),k("span",y2,kt(ft(t).device.contexts.length),1)])])]),k("div",v2,[v[30]||(v[30]=pi('<div class="flex items-center justify-between mb-6" data-v-1900d722><h3 class="text-xl font-semibold text-white" data-v-1900d722>System Status</h3><div class="p-3 bg-purple-600 bg-opacity-20 rounded-xl" data-v-1900d722><svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-1900d722><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z" data-v-1900d722></path></svg></div></div>',1)),k("div",b2,[k("div",E2,[v[28]||(v[28]=k("span",{class:"text-gray-400 text-sm"},"Database:",-1)),k("div",w2,[k("div",{class:mn([{"bg-green-500":l.value==="connected","bg-red-500":l.value==="error","bg-yellow-500":l.value==="connecting"},"w-2 h-2 rounded-full"])},null,2),k("span",T2,kt(l.value==="connected"?"Online":"Offline"),1)])]),k("div",I2,[v[29]||(v[29]=k("span",{class:"text-gray-400 text-sm"},"Processing:",-1)),k("span",{class:mn([ft(t).isProcessing?"text-yellow-400":"text-gray-400","text-sm font-medium"])},kt(ft(t).isProcessing?"Active":"Idle"),3)])])])])])]),r.value?(Bn(),vr("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:v[11]||(v[11]=D=>r.value=!1)},[k("div",{class:"bg-gray-800 border border-gray-700 rounded-2xl p-8 w-full max-w-lg",onClick:v[10]||(v[10]=AE(()=>{},["stop"]))},[k("div",A2,[v[32]||(v[32]=k("h3",{class:"text-xl font-bold text-white"},"Debug Controls",-1)),k("button",{onClick:v[1]||(v[1]=D=>r.value=!1),class:"text-gray-400 hover:text-white"},v[31]||(v[31]=[k("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),k("div",x2,[v[34]||(v[34]=k("h4",{class:"text-sm font-semibold text-white mb-4"},"Processing State",-1)),k("div",S2,[v[33]||(v[33]=k("span",{class:"text-gray-400"},"Status:",-1)),k("span",{class:mn([ft(t).isProcessing?"text-yellow-400":"text-green-400","font-semibold"])},kt(ft(t).isProcessing?"Active":"Idle"),3)]),k("div",P2,[k("button",{onClick:v[2]||(v[2]=D=>ft(t).startProcessing()),class:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Start "),k("button",{onClick:v[3]||(v[3]=D=>ft(t).endProcessing()),class:"bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Stop ")])]),k("div",C2,[v[41]||(v[41]=k("h4",{class:"text-sm font-semibold text-white mb-4"},"Simulate Progress",-1)),k("div",R2,[k("div",V2,[v[36]||(v[36]=k("label",{class:"text-gray-400 text-sm"},"Edits:",-1)),k("div",D2,[ss(k("input",{"onUpdate:modelValue":v[4]||(v[4]=D=>ft(t).editsContainersComplete=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).editsContainersComplete,void 0,{number:!0}]]),v[35]||(v[35]=k("span",{class:"text-gray-500"},"/",-1)),ss(k("input",{"onUpdate:modelValue":v[5]||(v[5]=D=>ft(t).editsContainersTotal=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).editsContainersTotal,void 0,{number:!0}]])])]),k("div",k2,[v[38]||(v[38]=k("label",{class:"text-gray-400 text-sm"},"Updates:",-1)),k("div",O2,[ss(k("input",{"onUpdate:modelValue":v[6]||(v[6]=D=>ft(t).updatesTotalCompleted=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).updatesTotalCompleted,void 0,{number:!0}]]),v[37]||(v[37]=k("span",{class:"text-gray-500"},"/",-1)),ss(k("input",{"onUpdate:modelValue":v[7]||(v[7]=D=>ft(t).updatesTotal=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).updatesTotal,void 0,{number:!0}]])])]),k("div",N2,[v[40]||(v[40]=k("label",{class:"text-gray-400 text-sm"},"Containers:",-1)),k("div",M2,[ss(k("input",{"onUpdate:modelValue":v[8]||(v[8]=D=>ft(t).updateCompletedContainers=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).updateCompletedContainers,void 0,{number:!0}]]),v[39]||(v[39]=k("span",{class:"text-gray-500"},"/",-1)),ss(k("input",{"onUpdate:modelValue":v[9]||(v[9]=D=>ft(t).updateTotalContainers=D),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[is,ft(t).updateTotalContainers,void 0,{number:!0}]])])])])]),k("div",{class:"mb-8 border-t border-gray-700 pt-6"},[v[42]||(v[42]=k("h4",{class:"text-sm font-semibold text-white mb-4"},"Test Actions",-1)),k("div",{class:"space-y-3"},[k("button",{onClick:u,class:"w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test FSUpdatesHandler "),k("button",{onClick:f,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Edits Update Status "),k("button",{onClick:p,class:"w-full bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Container Downloads "),k("button",{onClick:m,class:"w-full bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test FSUpdatesHandler in Active Mode "),k("button",{onClick:E,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Subscribe Updates "),k("button",{onClick:R,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Simulate Firestore Update ")])]),k("div",F2,[v[43]||(v[43]=k("h4",{class:"text-sm font-semibold text-white mb-3"},"System Info",-1)),k("div",L2,[k("div",null,"ORG: "+kt(ft(t).organization.id),1),k("div",null,"DEV: "+kt(ft(t).device.id)+" ("+kt(ft(t).device.deviceMode)+")",1),k("div",null,"DB: "+kt(e.value),1)])])])])):yd("",!0)])}}},U2=vS(B2,[["__scopeId","data-v-1900d722"]]);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function j2(n,t,e){return(t=$2(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function wm(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,r)}return e}function K(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?wm(Object(e),!0).forEach(function(r){j2(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wm(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function z2(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function $2(n){var t=z2(n,"string");return typeof t=="symbol"?t:t+""}const Tm=()=>{};let tf={},Qv={},Yv=null,Xv={mark:Tm,measure:Tm};try{typeof window<"u"&&(tf=window),typeof document<"u"&&(Qv=document),typeof MutationObserver<"u"&&(Yv=MutationObserver),typeof performance<"u"&&(Xv=performance)}catch{}const{userAgent:Im=""}=tf.navigator||{},nr=tf,Ot=Qv,Am=Yv,sa=Xv;nr.document;const Rn=!!Ot.documentElement&&!!Ot.head&&typeof Ot.addEventListener=="function"&&typeof Ot.createElement=="function",Jv=~Im.indexOf("MSIE")||~Im.indexOf("Trident/");var q2=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,K2=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Zv={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},G2={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},t0=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],de="classic",Ll="duotone",H2="sharp",W2="sharp-duotone",e0=[de,Ll,H2,W2],Q2={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},Y2={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},X2=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),J2={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},Z2=["fak","fa-kit","fakd","fa-kit-duotone"],xm={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},tP=["kit"],eP={kit:{"fa-kit":"fak"}},nP=["fak","fakd"],rP={kit:{fak:"fa-kit"}},Sm={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},ia={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},sP=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],iP=["fak","fa-kit","fakd","fa-kit-duotone"],oP={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},aP={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},lP={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},Au={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},cP=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],xu=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...sP,...cP],uP=["solid","regular","light","thin","duotone","brands"],n0=[1,2,3,4,5,6,7,8,9,10],hP=n0.concat([11,12,13,14,15,16,17,18,19,20]),fP=[...Object.keys(lP),...uP,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ia.GROUP,ia.SWAP_OPACITY,ia.PRIMARY,ia.SECONDARY].concat(n0.map(n=>"".concat(n,"x"))).concat(hP.map(n=>"w-".concat(n))),dP={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const An="___FONT_AWESOME___",Su=16,r0="fa",s0="svg-inline--fa",Hr="data-fa-i2svg",Pu="data-fa-pseudo-element",pP="data-fa-pseudo-element-pending",ef="data-prefix",nf="data-icon",Pm="fontawesome-i2svg",mP="async",gP=["HTML","HEAD","STYLE","SCRIPT"],i0=(()=>{try{return!0}catch{return!1}})();function Co(n){return new Proxy(n,{get(t,e){return e in t?t[e]:t[de]}})}const o0=K({},Zv);o0[de]=K(K(K(K({},{"fa-duotone":"duotone"}),Zv[de]),xm.kit),xm["kit-duotone"]);const _P=Co(o0),Cu=K({},J2);Cu[de]=K(K(K(K({},{duotone:"fad"}),Cu[de]),Sm.kit),Sm["kit-duotone"]);const Cm=Co(Cu),Ru=K({},Au);Ru[de]=K(K({},Ru[de]),rP.kit);const rf=Co(Ru),Vu=K({},aP);Vu[de]=K(K({},Vu[de]),eP.kit);Co(Vu);const yP=q2,a0="fa-layers-text",vP=K2,bP=K({},Q2);Co(bP);const EP=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Pc=G2,wP=[...tP,...fP],Gi=nr.FontAwesomeConfig||{};function TP(n){var t=Ot.querySelector("script["+n+"]");if(t)return t.getAttribute(n)}function IP(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}Ot&&typeof Ot.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[e,r]=t;const s=IP(TP(e));s!=null&&(Gi[r]=s)});const l0={styleDefault:"solid",familyDefault:de,cssPrefix:r0,replacementClass:s0,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Gi.familyPrefix&&(Gi.cssPrefix=Gi.familyPrefix);const qs=K(K({},l0),Gi);qs.autoReplaceSvg||(qs.observeMutations=!1);const nt={};Object.keys(l0).forEach(n=>{Object.defineProperty(nt,n,{enumerable:!0,set:function(t){qs[n]=t,Hi.forEach(e=>e(nt))},get:function(){return qs[n]}})});Object.defineProperty(nt,"familyPrefix",{enumerable:!0,set:function(n){qs.cssPrefix=n,Hi.forEach(t=>t(nt))},get:function(){return qs.cssPrefix}});nr.FontAwesomeConfig=nt;const Hi=[];function AP(n){return Hi.push(n),()=>{Hi.splice(Hi.indexOf(n),1)}}const Ln=Su,nn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function xP(n){if(!n||!Rn)return;const t=Ot.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=n;const e=Ot.head.childNodes;let r=null;for(let s=e.length-1;s>-1;s--){const i=e[s],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}return Ot.head.insertBefore(t,r),n}const SP="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function _o(){let n=12,t="";for(;n-- >0;)t+=SP[Math.random()*62|0];return t}function Ys(n){const t=[];for(let e=(n||[]).length>>>0;e--;)t[e]=n[e];return t}function sf(n){return n.classList?Ys(n.classList):(n.getAttribute("class")||"").split(" ").filter(t=>t)}function c0(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function PP(n){return Object.keys(n||{}).reduce((t,e)=>t+"".concat(e,'="').concat(c0(n[e]),'" '),"").trim()}function Bl(n){return Object.keys(n||{}).reduce((t,e)=>t+"".concat(e,": ").concat(n[e].trim(),";"),"")}function of(n){return n.size!==nn.size||n.x!==nn.x||n.y!==nn.y||n.rotate!==nn.rotate||n.flipX||n.flipY}function CP(n){let{transform:t,containerWidth:e,iconWidth:r}=n;const s={transform:"translate(".concat(e/2," 256)")},i="translate(".concat(t.x*32,", ").concat(t.y*32,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(i," ").concat(o," ").concat(l)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:c,path:u}}function RP(n){let{transform:t,width:e=Su,height:r=Su,startCentered:s=!1}=n,i="";return s&&Jv?i+="translate(".concat(t.x/Ln-e/2,"em, ").concat(t.y/Ln-r/2,"em) "):s?i+="translate(calc(-50% + ".concat(t.x/Ln,"em), calc(-50% + ").concat(t.y/Ln,"em)) "):i+="translate(".concat(t.x/Ln,"em, ").concat(t.y/Ln,"em) "),i+="scale(".concat(t.size/Ln*(t.flipX?-1:1),", ").concat(t.size/Ln*(t.flipY?-1:1),") "),i+="rotate(".concat(t.rotate,"deg) "),i}var VP=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function u0(){const n=r0,t=s0,e=nt.cssPrefix,r=nt.replacementClass;let s=VP;if(e!==n||r!==t){const i=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");s=s.replace(i,".".concat(e,"-")).replace(o,"--".concat(e,"-")).replace(l,".".concat(r))}return s}let Rm=!1;function Cc(){nt.autoAddCss&&!Rm&&(xP(u0()),Rm=!0)}var DP={mixout(){return{dom:{css:u0,insertCss:Cc}}},hooks(){return{beforeDOMElementCreation(){Cc()},beforeI2svg(){Cc()}}}};const xn=nr||{};xn[An]||(xn[An]={});xn[An].styles||(xn[An].styles={});xn[An].hooks||(xn[An].hooks={});xn[An].shims||(xn[An].shims=[]);var rn=xn[An];const h0=[],f0=function(){Ot.removeEventListener("DOMContentLoaded",f0),tl=1,h0.map(n=>n())};let tl=!1;Rn&&(tl=(Ot.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ot.readyState),tl||Ot.addEventListener("DOMContentLoaded",f0));function kP(n){Rn&&(tl?setTimeout(n,0):h0.push(n))}function Ro(n){const{tag:t,attributes:e={},children:r=[]}=n;return typeof n=="string"?c0(n):"<".concat(t," ").concat(PP(e),">").concat(r.map(Ro).join(""),"</").concat(t,">")}function Vm(n,t,e){if(n&&n[t]&&n[t][e])return{prefix:t,iconName:e,icon:n[t][e]}}var Rc=function(t,e,r,s){var i=Object.keys(t),o=i.length,l=e,c,u,f;for(r===void 0?(c=1,f=t[i[0]]):(c=0,f=r);c<o;c++)u=i[c],f=l(f,t[u],u,t);return f};function OP(n){const t=[];let e=0;const r=n.length;for(;e<r;){const s=n.charCodeAt(e++);if(s>=55296&&s<=56319&&e<r){const i=n.charCodeAt(e++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),e--)}else t.push(s)}return t}function Du(n){const t=OP(n);return t.length===1?t[0].toString(16):null}function NP(n,t){const e=n.length;let r=n.charCodeAt(t),s;return r>=55296&&r<=56319&&e>t+1&&(s=n.charCodeAt(t+1),s>=56320&&s<=57343)?(r-55296)*1024+s-56320+65536:r}function Dm(n){return Object.keys(n).reduce((t,e)=>{const r=n[e];return!!r.icon?t[r.iconName]=r.icon:t[e]=r,t},{})}function ku(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=e,s=Dm(t);typeof rn.hooks.addPack=="function"&&!r?rn.hooks.addPack(n,Dm(t)):rn.styles[n]=K(K({},rn.styles[n]||{}),s),n==="fas"&&ku("fa",t)}const{styles:yo,shims:MP}=rn,d0=Object.keys(rf),FP=d0.reduce((n,t)=>(n[t]=Object.keys(rf[t]),n),{});let af=null,p0={},m0={},g0={},_0={},y0={};function LP(n){return~wP.indexOf(n)}function BP(n,t){const e=t.split("-"),r=e[0],s=e.slice(1).join("-");return r===n&&s!==""&&!LP(s)?s:null}const v0=()=>{const n=r=>Rc(yo,(s,i,o)=>(s[o]=Rc(i,r,{}),s),{});p0=n((r,s,i)=>(s[3]&&(r[s[3]]=i),s[2]&&s[2].filter(l=>typeof l=="number").forEach(l=>{r[l.toString(16)]=i}),r)),m0=n((r,s,i)=>(r[i]=i,s[2]&&s[2].filter(l=>typeof l=="string").forEach(l=>{r[l]=i}),r)),y0=n((r,s,i)=>{const o=s[2];return r[i]=i,o.forEach(l=>{r[l]=i}),r});const t="far"in yo||nt.autoFetchSvg,e=Rc(MP,(r,s)=>{const i=s[0];let o=s[1];const l=s[2];return o==="far"&&!t&&(o="fas"),typeof i=="string"&&(r.names[i]={prefix:o,iconName:l}),typeof i=="number"&&(r.unicodes[i.toString(16)]={prefix:o,iconName:l}),r},{names:{},unicodes:{}});g0=e.names,_0=e.unicodes,af=Ul(nt.styleDefault,{family:nt.familyDefault})};AP(n=>{af=Ul(n.styleDefault,{family:nt.familyDefault})});v0();function lf(n,t){return(p0[n]||{})[t]}function UP(n,t){return(m0[n]||{})[t]}function Rr(n,t){return(y0[n]||{})[t]}function b0(n){return g0[n]||{prefix:null,iconName:null}}function jP(n){const t=_0[n],e=lf("fas",n);return t||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}function rr(){return af}const E0=()=>({prefix:null,iconName:null,rest:[]});function zP(n){let t=de;const e=d0.reduce((r,s)=>(r[s]="".concat(nt.cssPrefix,"-").concat(s),r),{});return e0.forEach(r=>{(n.includes(e[r])||n.some(s=>FP[r].includes(s)))&&(t=r)}),t}function Ul(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:e=de}=t,r=_P[e][n];if(e===Ll&&!n)return"fad";const s=Cm[e][n]||Cm[e][r],i=n in rn.styles?n:null;return s||i||null}function $P(n){let t=[],e=null;return n.forEach(r=>{const s=BP(nt.cssPrefix,r);s?e=s:r&&t.push(r)}),{iconName:e,rest:t}}function km(n){return n.sort().filter((t,e,r)=>r.indexOf(t)===e)}function jl(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:e=!1}=t;let r=null;const s=xu.concat(iP),i=km(n.filter(p=>s.includes(p))),o=km(n.filter(p=>!xu.includes(p))),l=i.filter(p=>(r=p,!t0.includes(p))),[c=null]=l,u=zP(i),f=K(K({},$P(o)),{},{prefix:Ul(c,{family:u})});return K(K(K({},f),HP({values:n,family:u,styles:yo,config:nt,canonical:f,givenPrefix:r})),qP(e,r,f))}function qP(n,t,e){let{prefix:r,iconName:s}=e;if(n||!r||!s)return{prefix:r,iconName:s};const i=t==="fa"?b0(s):{},o=Rr(r,s);return s=i.iconName||o||s,r=i.prefix||r,r==="far"&&!yo.far&&yo.fas&&!nt.autoFetchSvg&&(r="fas"),{prefix:r,iconName:s}}const KP=e0.filter(n=>n!==de||n!==Ll),GP=Object.keys(Au).filter(n=>n!==de).map(n=>Object.keys(Au[n])).flat();function HP(n){const{values:t,family:e,canonical:r,givenPrefix:s="",styles:i={},config:o={}}=n,l=e===Ll,c=t.includes("fa-duotone")||t.includes("fad"),u=o.familyDefault==="duotone",f=r.prefix==="fad"||r.prefix==="fa-duotone";if(!l&&(c||u||f)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&KP.includes(e)&&(Object.keys(i).find(m=>GP.includes(m))||o.autoFetchSvg)){const m=X2.get(e).defaultShortPrefixId;r.prefix=m,r.iconName=Rr(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||s==="fa")&&(r.prefix=rr()||"fas"),r}class WP{constructor(){this.definitions={}}add(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const s=e.reduce(this._pullDefinitions,{});Object.keys(s).forEach(i=>{this.definitions[i]=K(K({},this.definitions[i]||{}),s[i]),ku(i,s[i]);const o=rf[de][i];o&&ku(o,s[i]),v0()})}reset(){this.definitions={}}_pullDefinitions(t,e){const r=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(r).map(s=>{const{prefix:i,iconName:o,icon:l}=r[s],c=l[2];t[i]||(t[i]={}),c.length>0&&c.forEach(u=>{typeof u=="string"&&(t[i][u]=l)}),t[i][o]=l}),t}}let Om=[],bs={};const Ss={},QP=Object.keys(Ss);function YP(n,t){let{mixoutsTo:e}=t;return Om=n,bs={},Object.keys(Ss).forEach(r=>{QP.indexOf(r)===-1&&delete Ss[r]}),Om.forEach(r=>{const s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(i=>{typeof s[i]=="function"&&(e[i]=s[i]),typeof s[i]=="object"&&Object.keys(s[i]).forEach(o=>{e[i]||(e[i]={}),e[i][o]=s[i][o]})}),r.hooks){const i=r.hooks();Object.keys(i).forEach(o=>{bs[o]||(bs[o]=[]),bs[o].push(i[o])})}r.provides&&r.provides(Ss)}),e}function Ou(n,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),s=2;s<e;s++)r[s-2]=arguments[s];return(bs[n]||[]).forEach(o=>{t=o.apply(null,[t,...r])}),t}function Wr(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];(bs[n]||[]).forEach(i=>{i.apply(null,e)})}function sr(){const n=arguments[0],t=Array.prototype.slice.call(arguments,1);return Ss[n]?Ss[n].apply(null,t):void 0}function Nu(n){n.prefix==="fa"&&(n.prefix="fas");let{iconName:t}=n;const e=n.prefix||rr();if(t)return t=Rr(e,t)||t,Vm(w0.definitions,e,t)||Vm(rn.styles,e,t)}const w0=new WP,XP=()=>{nt.autoReplaceSvg=!1,nt.observeMutations=!1,Wr("noAuto")},JP={i2svg:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rn?(Wr("beforeI2svg",n),sr("pseudoElements2svg",n),sr("i2svg",n)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=n;nt.autoReplaceSvg===!1&&(nt.autoReplaceSvg=!0),nt.observeMutations=!0,kP(()=>{tC({autoReplaceSvgRoot:t}),Wr("watch",n)})}},ZP={icon:n=>{if(n===null)return null;if(typeof n=="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:Rr(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){const t=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],e=Ul(n[0]);return{prefix:e,iconName:Rr(e,t)||t}}if(typeof n=="string"&&(n.indexOf("".concat(nt.cssPrefix,"-"))>-1||n.match(yP))){const t=jl(n.split(" "),{skipLookups:!0});return{prefix:t.prefix||rr(),iconName:Rr(t.prefix,t.iconName)||t.iconName}}if(typeof n=="string"){const t=rr();return{prefix:t,iconName:Rr(t,n)||n}}}},Ne={noAuto:XP,config:nt,dom:JP,parse:ZP,library:w0,findIconDefinition:Nu,toHtml:Ro},tC=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=Ot}=n;(Object.keys(rn.styles).length>0||nt.autoFetchSvg)&&Rn&&nt.autoReplaceSvg&&Ne.dom.i2svg({node:t})};function zl(n,t){return Object.defineProperty(n,"abstract",{get:t}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(e=>Ro(e))}}),Object.defineProperty(n,"node",{get:function(){if(!Rn)return;const e=Ot.createElement("div");return e.innerHTML=n.html,e.children}}),n}function eC(n){let{children:t,main:e,mask:r,attributes:s,styles:i,transform:o}=n;if(of(o)&&e.found&&!r.found){const{width:l,height:c}=e,u={x:l/c/2,y:.5};s.style=Bl(K(K({},i),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}function nC(n){let{prefix:t,iconName:e,children:r,attributes:s,symbol:i}=n;const o=i===!0?"".concat(t,"-").concat(nt.cssPrefix,"-").concat(e):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:K(K({},s),{},{id:o}),children:r}]}]}function cf(n){const{icons:{main:t,mask:e},prefix:r,iconName:s,transform:i,symbol:o,title:l,maskId:c,titleId:u,extra:f,watchable:p=!1}=n,{width:m,height:E}=e.found?e:t,R=nP.includes(r),V=[nt.replacementClass,s?"".concat(nt.cssPrefix,"-").concat(s):""].filter(Z=>f.classes.indexOf(Z)===-1).filter(Z=>Z!==""||!!Z).concat(f.classes).join(" ");let v={children:[],attributes:K(K({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:V,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(E)})};const N=R&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/E*16*.0625,"em")}:{};p&&(v.attributes[Hr]=""),l&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||_o())},children:[l]}),delete v.attributes.title);const D=K(K({},v),{},{prefix:r,iconName:s,main:t,mask:e,maskId:c,transform:i,symbol:o,styles:K(K({},N),f.styles)}),{children:L,attributes:U}=e.found&&t.found?sr("generateAbstractMask",D)||{children:[],attributes:{}}:sr("generateAbstractIcon",D)||{children:[],attributes:{}};return D.children=L,D.attributes=U,o?nC(D):eC(D)}function Nm(n){const{content:t,width:e,height:r,transform:s,title:i,extra:o,watchable:l=!1}=n,c=K(K(K({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});l&&(c[Hr]="");const u=K({},o.styles);of(s)&&(u.transform=RP({transform:s,startCentered:!0,width:e,height:r}),u["-webkit-transform"]=u.transform);const f=Bl(u);f.length>0&&(c.style=f);const p=[];return p.push({tag:"span",attributes:c,children:[t]}),i&&p.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),p}function rC(n){const{content:t,title:e,extra:r}=n,s=K(K(K({},r.attributes),e?{title:e}:{}),{},{class:r.classes.join(" ")}),i=Bl(r.styles);i.length>0&&(s.style=i);const o=[];return o.push({tag:"span",attributes:s,children:[t]}),e&&o.push({tag:"span",attributes:{class:"sr-only"},children:[e]}),o}const{styles:Vc}=rn;function Mu(n){const t=n[0],e=n[1],[r]=n.slice(4);let s=null;return Array.isArray(r)?s={tag:"g",attributes:{class:"".concat(nt.cssPrefix,"-").concat(Pc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(nt.cssPrefix,"-").concat(Pc.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(nt.cssPrefix,"-").concat(Pc.PRIMARY),fill:"currentColor",d:r[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:e,icon:s}}const sC={found:!1,width:512,height:512};function iC(n,t){!i0&&!nt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(t,'" is missing.'))}function Fu(n,t){let e=t;return t==="fa"&&nt.styleDefault!==null&&(t=rr()),new Promise((r,s)=>{if(e==="fa"){const i=b0(n)||{};n=i.iconName||n,t=i.prefix||t}if(n&&t&&Vc[t]&&Vc[t][n]){const i=Vc[t][n];return r(Mu(i))}iC(n,t),r(K(K({},sC),{},{icon:nt.showMissingIcons&&n?sr("missingIconAbstract")||{}:{}}))})}const Mm=()=>{},Lu=nt.measurePerformance&&sa&&sa.mark&&sa.measure?sa:{mark:Mm,measure:Mm},xi='FA "6.7.2"',oC=n=>(Lu.mark("".concat(xi," ").concat(n," begins")),()=>T0(n)),T0=n=>{Lu.mark("".concat(xi," ").concat(n," ends")),Lu.measure("".concat(xi," ").concat(n),"".concat(xi," ").concat(n," begins"),"".concat(xi," ").concat(n," ends"))};var uf={begin:oC,end:T0};const wa=()=>{};function Fm(n){return typeof(n.getAttribute?n.getAttribute(Hr):null)=="string"}function aC(n){const t=n.getAttribute?n.getAttribute(ef):null,e=n.getAttribute?n.getAttribute(nf):null;return t&&e}function lC(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(nt.replacementClass)}function cC(){return nt.autoReplaceSvg===!0?Ta.replace:Ta[nt.autoReplaceSvg]||Ta.replace}function uC(n){return Ot.createElementNS("http://www.w3.org/2000/svg",n)}function hC(n){return Ot.createElement(n)}function I0(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:e=n.tag==="svg"?uC:hC}=t;if(typeof n=="string")return Ot.createTextNode(n);const r=e(n.tag);return Object.keys(n.attributes||[]).forEach(function(i){r.setAttribute(i,n.attributes[i])}),(n.children||[]).forEach(function(i){r.appendChild(I0(i,{ceFn:e}))}),r}function fC(n){let t=" ".concat(n.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const Ta={replace:function(n){const t=n[0];if(t.parentNode)if(n[1].forEach(e=>{t.parentNode.insertBefore(I0(e),t)}),t.getAttribute(Hr)===null&&nt.keepOriginalSource){let e=Ot.createComment(fC(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(n){const t=n[0],e=n[1];if(~sf(t).indexOf(nt.replacementClass))return Ta.replace(n);const r=new RegExp("".concat(nt.cssPrefix,"-.*"));if(delete e[0].attributes.id,e[0].attributes.class){const i=e[0].attributes.class.split(" ").reduce((o,l)=>(l===nt.replacementClass||l.match(r)?o.toSvg.push(l):o.toNode.push(l),o),{toNode:[],toSvg:[]});e[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}const s=e.map(i=>Ro(i)).join(`
`);t.setAttribute(Hr,""),t.innerHTML=s}};function Lm(n){n()}function A0(n,t){const e=typeof t=="function"?t:wa;if(n.length===0)e();else{let r=Lm;nt.mutateApproach===mP&&(r=nr.requestAnimationFrame||Lm),r(()=>{const s=cC(),i=uf.begin("mutate");n.map(s),i(),e()})}}let hf=!1;function x0(){hf=!0}function Bu(){hf=!1}let el=null;function Bm(n){if(!Am||!nt.observeMutations)return;const{treeCallback:t=wa,nodeCallback:e=wa,pseudoElementsCallback:r=wa,observeMutationsRoot:s=Ot}=n;el=new Am(i=>{if(hf)return;const o=rr();Ys(i).forEach(l=>{if(l.type==="childList"&&l.addedNodes.length>0&&!Fm(l.addedNodes[0])&&(nt.searchPseudoElements&&r(l.target),t(l.target)),l.type==="attributes"&&l.target.parentNode&&nt.searchPseudoElements&&r(l.target.parentNode),l.type==="attributes"&&Fm(l.target)&&~EP.indexOf(l.attributeName))if(l.attributeName==="class"&&aC(l.target)){const{prefix:c,iconName:u}=jl(sf(l.target));l.target.setAttribute(ef,c||o),u&&l.target.setAttribute(nf,u)}else lC(l.target)&&e(l.target)})}),Rn&&el.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function dC(){el&&el.disconnect()}function pC(n){const t=n.getAttribute("style");let e=[];return t&&(e=t.split(";").reduce((r,s)=>{const i=s.split(":"),o=i[0],l=i.slice(1);return o&&l.length>0&&(r[o]=l.join(":").trim()),r},{})),e}function mC(n){const t=n.getAttribute("data-prefix"),e=n.getAttribute("data-icon"),r=n.innerText!==void 0?n.innerText.trim():"";let s=jl(sf(n));return s.prefix||(s.prefix=rr()),t&&e&&(s.prefix=t,s.iconName=e),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=UP(s.prefix,n.innerText)||lf(s.prefix,Du(n.innerText))),!s.iconName&&nt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=n.firstChild.data)),s}function gC(n){const t=Ys(n.attributes).reduce((s,i)=>(s.name!=="class"&&s.name!=="style"&&(s[i.name]=i.value),s),{}),e=n.getAttribute("title"),r=n.getAttribute("data-fa-title-id");return nt.autoA11y&&(e?t["aria-labelledby"]="".concat(nt.replacementClass,"-title-").concat(r||_o()):(t["aria-hidden"]="true",t.focusable="false")),t}function _C(){return{iconName:null,title:null,titleId:null,prefix:null,transform:nn,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Um(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:e,prefix:r,rest:s}=mC(n),i=gC(n),o=Ou("parseNodeAttributes",{},n);let l=t.styleParser?pC(n):[];return K({iconName:e,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:nn,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:i}},o)}const{styles:yC}=rn;function S0(n){const t=nt.autoReplaceSvg==="nest"?Um(n,{styleParser:!1}):Um(n);return~t.extra.classes.indexOf(a0)?sr("generateLayersText",n,t):sr("generateSvgReplacementMutation",n,t)}function vC(){return[...Z2,...xu]}function jm(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Rn)return Promise.resolve();const e=Ot.documentElement.classList,r=f=>e.add("".concat(Pm,"-").concat(f)),s=f=>e.remove("".concat(Pm,"-").concat(f)),i=nt.autoFetchSvg?vC():t0.concat(Object.keys(yC));i.includes("fa")||i.push("fa");const o=[".".concat(a0,":not([").concat(Hr,"])")].concat(i.map(f=>".".concat(f,":not([").concat(Hr,"])"))).join(", ");if(o.length===0)return Promise.resolve();let l=[];try{l=Ys(n.querySelectorAll(o))}catch{}if(l.length>0)r("pending"),s("complete");else return Promise.resolve();const c=uf.begin("onTree"),u=l.reduce((f,p)=>{try{const m=S0(p);m&&f.push(m)}catch(m){i0||m.name==="MissingIcon"&&console.error(m)}return f},[]);return new Promise((f,p)=>{Promise.all(u).then(m=>{A0(m,()=>{r("active"),r("complete"),s("pending"),typeof t=="function"&&t(),c(),f()})}).catch(m=>{c(),p(m)})})}function bC(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;S0(n).then(e=>{e&&A0([e],t)})}function EC(n){return function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(t||{}).icon?t:Nu(t||{});let{mask:s}=e;return s&&(s=(s||{}).icon?s:Nu(s||{})),n(r,K(K({},e),{},{mask:s}))}}const wC=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:e=nn,symbol:r=!1,mask:s=null,maskId:i=null,title:o=null,titleId:l=null,classes:c=[],attributes:u={},styles:f={}}=t;if(!n)return;const{prefix:p,iconName:m,icon:E}=n;return zl(K({type:"icon"},n),()=>(Wr("beforeDOMElementCreation",{iconDefinition:n,params:t}),nt.autoA11y&&(o?u["aria-labelledby"]="".concat(nt.replacementClass,"-title-").concat(l||_o()):(u["aria-hidden"]="true",u.focusable="false")),cf({icons:{main:Mu(E),mask:s?Mu(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:p,iconName:m,transform:K(K({},nn),e),symbol:r,title:o,maskId:i,titleId:l,extra:{attributes:u,styles:f,classes:c}})))};var TC={mixout(){return{icon:EC(wC)}},hooks(){return{mutationObserverCallbacks(n){return n.treeCallback=jm,n.nodeCallback=bC,n}}},provides(n){n.i2svg=function(t){const{node:e=Ot,callback:r=()=>{}}=t;return jm(e,r)},n.generateSvgReplacementMutation=function(t,e){const{iconName:r,title:s,titleId:i,prefix:o,transform:l,symbol:c,mask:u,maskId:f,extra:p}=e;return new Promise((m,E)=>{Promise.all([Fu(r,o),u.iconName?Fu(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(R=>{let[V,v]=R;m([t,cf({icons:{main:V,mask:v},prefix:o,iconName:r,transform:l,symbol:c,maskId:f,title:s,titleId:i,extra:p,watchable:!0})])}).catch(E)})},n.generateAbstractIcon=function(t){let{children:e,attributes:r,main:s,transform:i,styles:o}=t;const l=Bl(o);l.length>0&&(r.style=l);let c;return of(i)&&(c=sr("generateAbstractTransformGrouping",{main:s,transform:i,containerWidth:s.width,iconWidth:s.width})),e.push(c||s.icon),{children:e,attributes:r}}}},IC={mixout(){return{layer(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:e=[]}=t;return zl({type:"layer"},()=>{Wr("beforeDOMElementCreation",{assembler:n,params:t});let r=[];return n(s=>{Array.isArray(s)?s.map(i=>{r=r.concat(i.abstract)}):r=r.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(nt.cssPrefix,"-layers"),...e].join(" ")},children:r}]})}}}},AC={mixout(){return{counter(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:e=null,classes:r=[],attributes:s={},styles:i={}}=t;return zl({type:"counter",content:n},()=>(Wr("beforeDOMElementCreation",{content:n,params:t}),rC({content:n.toString(),title:e,extra:{attributes:s,styles:i,classes:["".concat(nt.cssPrefix,"-layers-counter"),...r]}})))}}}},xC={mixout(){return{text(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:e=nn,title:r=null,classes:s=[],attributes:i={},styles:o={}}=t;return zl({type:"text",content:n},()=>(Wr("beforeDOMElementCreation",{content:n,params:t}),Nm({content:n,transform:K(K({},nn),e),title:r,extra:{attributes:i,styles:o,classes:["".concat(nt.cssPrefix,"-layers-text"),...s]}})))}}},provides(n){n.generateLayersText=function(t,e){const{title:r,transform:s,extra:i}=e;let o=null,l=null;if(Jv){const c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();o=u.width/c,l=u.height/c}return nt.autoA11y&&!r&&(i.attributes["aria-hidden"]="true"),Promise.resolve([t,Nm({content:t.innerHTML,width:o,height:l,transform:s,title:r,extra:i,watchable:!0})])}}};const SC=new RegExp('"',"ug"),zm=[1105920,1112319],$m=K(K(K(K({},{FontAwesome:{normal:"fas",400:"fas"}}),Y2),dP),oP),Uu=Object.keys($m).reduce((n,t)=>(n[t.toLowerCase()]=$m[t],n),{}),PC=Object.keys(Uu).reduce((n,t)=>{const e=Uu[t];return n[t]=e[900]||[...Object.entries(e)][0][1],n},{});function CC(n){const t=n.replace(SC,""),e=NP(t,0),r=e>=zm[0]&&e<=zm[1],s=t.length===2?t[0]===t[1]:!1;return{value:Du(s?t[0]:t),isSecondary:r||s}}function RC(n,t){const e=n.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(Uu[e]||{})[s]||PC[e]}function qm(n,t){const e="".concat(pP).concat(t.replace(":","-"));return new Promise((r,s)=>{if(n.getAttribute(e)!==null)return r();const o=Ys(n.children).filter(m=>m.getAttribute(Pu)===t)[0],l=nr.getComputedStyle(n,t),c=l.getPropertyValue("font-family"),u=c.match(vP),f=l.getPropertyValue("font-weight"),p=l.getPropertyValue("content");if(o&&!u)return n.removeChild(o),r();if(u&&p!=="none"&&p!==""){const m=l.getPropertyValue("content");let E=RC(c,f);const{value:R,isSecondary:V}=CC(m),v=u[0].startsWith("FontAwesome");let N=lf(E,R),D=N;if(v){const L=jP(R);L.iconName&&L.prefix&&(N=L.iconName,E=L.prefix)}if(N&&!V&&(!o||o.getAttribute(ef)!==E||o.getAttribute(nf)!==D)){n.setAttribute(e,D),o&&n.removeChild(o);const L=_C(),{extra:U}=L;U.attributes[Pu]=t,Fu(N,E).then(Z=>{const at=cf(K(K({},L),{},{icons:{main:Z,mask:E0()},prefix:E,iconName:D,extra:U,watchable:!0})),T=Ot.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?n.insertBefore(T,n.firstChild):n.appendChild(T),T.outerHTML=at.map(_=>Ro(_)).join(`
`),n.removeAttribute(e),r()}).catch(s)}else r()}else r()})}function VC(n){return Promise.all([qm(n,"::before"),qm(n,"::after")])}function DC(n){return n.parentNode!==document.head&&!~gP.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(Pu)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function Km(n){if(Rn)return new Promise((t,e)=>{const r=Ys(n.querySelectorAll("*")).filter(DC).map(VC),s=uf.begin("searchPseudoElements");x0(),Promise.all(r).then(()=>{s(),Bu(),t()}).catch(()=>{s(),Bu(),e()})})}var kC={hooks(){return{mutationObserverCallbacks(n){return n.pseudoElementsCallback=Km,n}}},provides(n){n.pseudoElements2svg=function(t){const{node:e=Ot}=t;nt.searchPseudoElements&&Km(e)}}};let Gm=!1;var OC={mixout(){return{dom:{unwatch(){x0(),Gm=!0}}}},hooks(){return{bootstrap(){Bm(Ou("mutationObserverCallbacks",{}))},noAuto(){dC()},watch(n){const{observeMutationsRoot:t}=n;Gm?Bu():Bm(Ou("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const Hm=n=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce((e,r)=>{const s=r.toLowerCase().split("-"),i=s[0];let o=s.slice(1).join("-");if(i&&o==="h")return e.flipX=!0,e;if(i&&o==="v")return e.flipY=!0,e;if(o=parseFloat(o),isNaN(o))return e;switch(i){case"grow":e.size=e.size+o;break;case"shrink":e.size=e.size-o;break;case"left":e.x=e.x-o;break;case"right":e.x=e.x+o;break;case"up":e.y=e.y-o;break;case"down":e.y=e.y+o;break;case"rotate":e.rotate=e.rotate+o;break}return e},t)};var NC={mixout(){return{parse:{transform:n=>Hm(n)}}},hooks(){return{parseNodeAttributes(n,t){const e=t.getAttribute("data-fa-transform");return e&&(n.transform=Hm(e)),n}}},provides(n){n.generateAbstractTransformGrouping=function(t){let{main:e,transform:r,containerWidth:s,iconWidth:i}=t;const o={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(r.x*32,", ").concat(r.y*32,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},p={transform:"translate(".concat(i/2*-1," -256)")},m={outer:o,inner:f,path:p};return{tag:"g",attributes:K({},m.outer),children:[{tag:"g",attributes:K({},m.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:K(K({},e.icon.attributes),m.path)}]}]}}}};const Dc={x:0,y:0,width:"100%",height:"100%"};function Wm(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||t)&&(n.attributes.fill="black"),n}function MC(n){return n.tag==="g"?n.children:[n]}var FC={hooks(){return{parseNodeAttributes(n,t){const e=t.getAttribute("data-fa-mask"),r=e?jl(e.split(" ").map(s=>s.trim())):E0();return r.prefix||(r.prefix=rr()),n.mask=r,n.maskId=t.getAttribute("data-fa-mask-id"),n}}},provides(n){n.generateAbstractMask=function(t){let{children:e,attributes:r,main:s,mask:i,maskId:o,transform:l}=t;const{width:c,icon:u}=s,{width:f,icon:p}=i,m=CP({transform:l,containerWidth:f,iconWidth:c}),E={tag:"rect",attributes:K(K({},Dc),{},{fill:"white"})},R=u.children?{children:u.children.map(Wm)}:{},V={tag:"g",attributes:K({},m.inner),children:[Wm(K({tag:u.tag,attributes:K(K({},u.attributes),m.path)},R))]},v={tag:"g",attributes:K({},m.outer),children:[V]},N="mask-".concat(o||_o()),D="clip-".concat(o||_o()),L={tag:"mask",attributes:K(K({},Dc),{},{id:N,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[E,v]},U={tag:"defs",children:[{tag:"clipPath",attributes:{id:D},children:MC(p)},L]};return e.push(U,{tag:"rect",attributes:K({fill:"currentColor","clip-path":"url(#".concat(D,")"),mask:"url(#".concat(N,")")},Dc)}),{children:e,attributes:r}}}},LC={provides(n){let t=!1;nr.matchMedia&&(t=nr.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){const e=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:K(K({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=K(K({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:K(K({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:K(K({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:K(K({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(o),e.push({tag:"path",attributes:K(K({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:K(K({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:K(K({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:K(K({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},BC={hooks(){return{parseNodeAttributes(n,t){const e=t.getAttribute("data-fa-symbol"),r=e===null?!1:e===""?!0:e;return n.symbol=r,n}}}},UC=[DP,TC,IC,AC,xC,kC,OC,NC,FC,LC,BC];YP(UC,{mixoutsTo:Ne});Ne.noAuto;Ne.config;const jC=Ne.library;Ne.dom;const ju=Ne.parse;Ne.findIconDefinition;Ne.toHtml;const zC=Ne.icon;Ne.layer;Ne.text;Ne.counter;function Qm(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,r)}return e}function vn(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Qm(Object(e),!0).forEach(function(r){Ie(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Qm(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function $C(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function qC(n){var t=$C(n,"string");return typeof t=="symbol"?t:t+""}function nl(n){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(n)}function Ie(n,t,e){return t=qC(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function KC(n,t){if(n==null)return{};var e={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(t.indexOf(r)>=0)continue;e[r]=n[r]}return e}function GC(n,t){if(n==null)return{};var e=KC(n,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(e[r]=n[r])}return e}var HC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P0={exports:{}};(function(n){(function(t){var e=function(N,D,L){if(!u(D)||p(D)||m(D)||E(D)||c(D))return D;var U,Z=0,at=0;if(f(D))for(U=[],at=D.length;Z<at;Z++)U.push(e(N,D[Z],L));else{U={};for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&(U[N(T,L)]=e(N,D[T],L))}return U},r=function(N,D){D=D||{};var L=D.separator||"_",U=D.split||/(?=[A-Z])/;return N.split(U).join(L)},s=function(N){return R(N)?N:(N=N.replace(/[\-_\s]+(.)?/g,function(D,L){return L?L.toUpperCase():""}),N.substr(0,1).toLowerCase()+N.substr(1))},i=function(N){var D=s(N);return D.substr(0,1).toUpperCase()+D.substr(1)},o=function(N,D){return r(N,D).toLowerCase()},l=Object.prototype.toString,c=function(N){return typeof N=="function"},u=function(N){return N===Object(N)},f=function(N){return l.call(N)=="[object Array]"},p=function(N){return l.call(N)=="[object Date]"},m=function(N){return l.call(N)=="[object RegExp]"},E=function(N){return l.call(N)=="[object Boolean]"},R=function(N){return N=N-0,N===N},V=function(N,D){var L=D&&"process"in D?D.process:D;return typeof L!="function"?N:function(U,Z){return L(U,N,Z)}},v={camelize:s,decamelize:o,pascalize:i,depascalize:o,camelizeKeys:function(N,D){return e(V(s,D),N)},decamelizeKeys:function(N,D){return e(V(o,D),N,D)},pascalizeKeys:function(N,D){return e(V(i,D),N)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};n.exports?n.exports=v:t.humps=v})(HC)})(P0);var WC=P0.exports,QC=["class","style"];function YC(n){return n.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.indexOf(":"),s=WC.camelize(e.slice(0,r)),i=e.slice(r+1).trim();return t[s]=i,t},{})}function XC(n){return n.split(/\s+/).reduce(function(t,e){return t[e]=!0,t},{})}function C0(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n=="string")return n;var r=(n.children||[]).map(function(c){return C0(c)}),s=Object.keys(n.attributes||{}).reduce(function(c,u){var f=n.attributes[u];switch(u){case"class":c.class=XC(f);break;case"style":c.style=YC(f);break;default:c.attrs[u]=f}return c},{attrs:{},class:{},style:{}});e.class;var i=e.style,o=i===void 0?{}:i,l=GC(e,QC);return eE(n.tag,vn(vn(vn({},t),{},{class:s.class,style:vn(vn({},s.style),o)},s.attrs),l),r)}var R0=!1;try{R0=!0}catch{}function JC(){if(!R0&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function kc(n,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Ie({},n,t):{}}function ZC(n){var t,e=(t={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-li":n.listItem,"fa-inverse":n.inverse,"fa-flip":n.flip===!0,"fa-flip-horizontal":n.flip==="horizontal"||n.flip==="both","fa-flip-vertical":n.flip==="vertical"||n.flip==="both"},Ie(Ie(Ie(Ie(Ie(Ie(Ie(Ie(Ie(Ie(t,"fa-".concat(n.size),n.size!==null),"fa-rotate-".concat(n.rotation),n.rotation!==null),"fa-pull-".concat(n.pull),n.pull!==null),"fa-swap-opacity",n.swapOpacity),"fa-bounce",n.bounce),"fa-shake",n.shake),"fa-beat",n.beat),"fa-fade",n.fade),"fa-beat-fade",n.beatFade),"fa-flash",n.flash),Ie(Ie(t,"fa-spin-pulse",n.spinPulse),"fa-spin-reverse",n.spinReverse));return Object.keys(e).map(function(r){return e[r]?r:null}).filter(function(r){return r})}function Ym(n){if(n&&nl(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(ju.icon)return ju.icon(n);if(n===null)return null;if(nl(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}var tR=Wb({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(t){return[!0,!1,"horizontal","vertical","both"].indexOf(t)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(t){return["right","left"].indexOf(t)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(t){return[90,180,270].indexOf(Number.parseInt(t,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(t){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(t)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(t,e){var r=e.attrs,s=Ve(function(){return Ym(t.icon)}),i=Ve(function(){return kc("classes",ZC(t))}),o=Ve(function(){return kc("transform",typeof t.transform=="string"?ju.transform(t.transform):t.transform)}),l=Ve(function(){return kc("mask",Ym(t.mask))}),c=Ve(function(){return zC(s.value,vn(vn(vn(vn({},i.value),o.value),l.value),{},{symbol:t.symbol,title:t.title,titleId:t.titleId,maskId:t.maskId}))});ki(c,function(f){if(!f)return JC("Could not find one or more icon(s)",s.value,l.value)},{immediate:!0});var u=Ve(function(){return c.value?C0(c.value.abstract[0],{},r):null});return function(){return u.value}}});/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const eR={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},nR={prefix:"fas",iconName:"arrows-spin",icon:[512,512,[],"e4bb","M256 96c38.4 0 73.7 13.5 101.3 36.1l-32.6 32.6c-4.6 4.6-5.9 11.5-3.5 17.4s8.3 9.9 14.8 9.9l112 0c8.8 0 16-7.2 16-16l0-112c0-6.5-3.9-12.3-9.9-14.8s-12.9-1.1-17.4 3.5l-34 34C363.4 52.6 312.1 32 256 32c-10.9 0-21.5 .8-32 2.3l0 64.9c10.3-2.1 21-3.2 32-3.2zM132.1 154.7l32.6 32.6c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-112c0-8.8-7.2-16-16-16L64 48c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l34 34C52.6 148.6 32 199.9 32 256c0 10.9 .8 21.5 2.3 32l64.9 0c-2.1-10.3-3.2-21-3.2-32c0-38.4 13.5-73.7 36.1-101.3zM477.7 224l-64.9 0c2.1 10.3 3.2 21 3.2 32c0 38.4-13.5 73.7-36.1 101.3l-32.6-32.6c-4.6-4.6-11.5-5.9-17.4-3.5s-9.9 8.3-9.9 14.8l0 112c0 8.8 7.2 16 16 16l112 0c6.5 0 12.3-3.9 14.8-9.9s1.1-12.9-3.5-17.4l-34-34C459.4 363.4 480 312.1 480 256c0-10.9-.8-21.5-2.3-32zM256 416c-38.4 0-73.7-13.5-101.3-36.1l32.6-32.6c4.6-4.6 5.9-11.5 3.5-17.4s-8.3-9.9-14.8-9.9L64 320c-8.8 0-16 7.2-16 16l0 112c0 6.5 3.9 12.3 9.9 14.8s12.9 1.1 17.4-3.5l34-34C148.6 459.4 199.9 480 256 480c10.9 0 21.5-.8 32-2.3l0-64.9c-10.3 2.1-21 3.2-32 3.2z"]};jC.add(nR,eR);const ff=PE(U2);ff.use(VE());ff.component("font-awesome-icon",tR);ff.mount("#app");</script>
    <style rel="stylesheet" crossorigin>/*! tailwindcss v4.1.6 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-font-weight:initial;--tw-tracking:initial;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-teal-600:oklch(60% .118 184.704);--color-teal-700:oklch(51.1% .096 186.391);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-lg:32rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--animate-spin:spin 1s linear infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.z-30{z-index:30}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-auto{margin-inline:auto}.mt-1{margin-top:calc(var(--spacing)*1)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.flex{display:flex}.grid{display:grid}.table{display:table}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-6{height:calc(var(--spacing)*6)}.h-12{height:calc(var(--spacing)*12)}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-6{width:calc(var(--spacing)*6)}.w-12{width:calc(var(--spacing)*12)}.w-20{width:calc(var(--spacing)*20)}.w-full{width:100%}.max-w-lg{max-width:var(--container-lg)}.shrink{flex-shrink:1}.grow{flex-grow:1}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.rotate-270{rotate:270deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.transform\!{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)!important}.animate-spin{animation:var(--animate-spin)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-4{gap:calc(var(--spacing)*4)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-8>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*8)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-x-reverse)))}.overflow-x-hidden{overflow-x:hidden}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.bg-black{background-color:var(--color-black)}.bg-blue-200{background-color:var(--color-blue-200)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-teal-600{background-color:var(--color-teal-600)}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-500{--tw-gradient-from:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-400{--tw-gradient-to:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-400{--tw-gradient-to:var(--color-green-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-0{padding-inline:calc(var(--spacing)*0)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-6{padding-top:calc(var(--spacing)*6)}.text-center{text-align:center}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.text-blue-400{color:var(--color-blue-400)}.text-gray-100{color:var(--color-gray-100)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-purple-400{color:var(--color-purple-400)}.text-white{color:var(--color-white)}.text-yellow-400{color:var(--color-yellow-400)}.capitalize{text-transform:capitalize}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-700{--tw-duration:.7s;transition-duration:.7s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}@media (hover:hover){.hover\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\:bg-orange-700:hover{background-color:var(--color-orange-700)}.hover\:bg-purple-700:hover{background-color:var(--color-purple-700)}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:bg-teal-700:hover{background-color:var(--color-teal-700)}.hover\:text-white:hover{color:var(--color-white)}}@media (min-width:48rem){.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:64rem){.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}}html,body{overscroll-behavior:none;-webkit-overflow-scrolling:touch;width:100%;max-width:100%;overflow-x:hidden}body{position:fixed;top:0;right:0;bottom:0;left:0;overflow-y:auto}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}[data-v-1900d722]::-webkit-scrollbar{width:6px}[data-v-1900d722]::-webkit-scrollbar-track{background:#374151}[data-v-1900d722]::-webkit-scrollbar-thumb{background:#6b7280;border-radius:3px}[data-v-1900d722]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
