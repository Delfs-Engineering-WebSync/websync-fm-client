<!doctype html><html lang="en"><head><meta charset="UTF-8"/><link href="./favicon.ico" rel="icon"/><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"/><link href="./manifest.json" rel="manifest"/><meta content="#2563eb" name="theme-color"/><meta content="FileMaker WebSync Dashboard - Sync data between FileMaker and Firebase" name="description"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="WebSync" name="apple-mobile-web-app-title"/><title>WebSync Dashboard</title><script crossorigin type="module">function e(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),function(){const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0;if(!e)return;let t=!!e.__fileMakerConsoleBridgeApplied;const n=console.log.__fileMakerOriginal||console.log.bind(console);function r(){if(t)return;const r=function(...t){n(...t);try{if(e.FileMaker&&"function"==typeof e.FileMaker.PerformScript){const n=function(e){try{return JSON.stringify(e)}catch{try{return JSON.stringify(e.map(e=>{if(e instanceof Error)return{name:e.name,message:e.message,stack:e.stack};const t=typeof e;if(null===e||"string"===t||"number"===t||"boolean"===t)return e;try{return JSON.parse(JSON.stringify(e))}catch{return Object.prototype.toString.call(e)}}))}catch{try{return JSON.stringify(e.map(e=>String(e)))}catch{return"[]"}}}}(t);e.FileMaker.PerformScript("DebugLog",n)}}catch(e){try{n("[FileMaker Console Bridge] Error sending to FileMaker:",e)}catch{}}};r.__fileMakerOriginal=n,console.log=r,t=!0,e.__fileMakerConsoleBridgeApplied=!0}e.enableFileMakerConsoleBridge=function(){r()},e.disableFileMakerConsoleBridge=function(){!function(){if(t){try{const e=console.log.__fileMakerOriginal||n;console.log=e}catch{}t=!1,e.__fileMakerConsoleBridgeApplied=!1}}()};let s=!1;try{s=!!e.__fileMakerConsoleBridgeEnabled||e.localStorage&&"1"===e.localStorage.getItem("fmLog")||e.location&&"1"===new URL(e.location.href).searchParams.get("fmLog")}catch{}s&&r()}();const t={},n=[],r=()=>{},s=()=>!1,i=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),o=e=>e.startsWith("onUpdate:"),a=Object.assign,c=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},l=Object.prototype.hasOwnProperty,u=(e,t)=>l.call(e,t),h=Array.isArray,d=e=>"[object Map]"===w(e),f=e=>"[object Set]"===w(e),p=e=>"function"==typeof e,g=e=>"string"==typeof e,m=e=>"symbol"==typeof e,y=e=>null!==e&&"object"==typeof e,v=e=>(y(e)||p(e))&&p(e.then)&&p(e.catch),b=Object.prototype.toString,w=e=>b.call(e),x=e=>"[object Object]"===w(e),S=e=>g(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,_=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),E=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},I=/-\w/g,C=E(e=>e.replace(I,e=>e.slice(1).toUpperCase())),T=/\B([A-Z])/g,k=E(e=>e.replace(T,"-$1").toLowerCase()),A=E(e=>e.charAt(0).toUpperCase()+e.slice(1)),D=E(e=>e?`on${A(e)}`:""),N=(e,t)=>!Object.is(e,t),O=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},P=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},M=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let R;const F=()=>R||(R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function L(e){if(h(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=g(r)?j(r):L(r);if(s)for(const e in s)t[e]=s[e]}return t}if(g(e)||y(e))return e}const U=/;(?![^(]*\))/g,V=/:([^]+)/,B=/\/\*[^]*?\*\//g;function j(e){const t={};return e.replace(B,"").split(U).forEach(e=>{if(e){const n=e.split(V);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function z(e){let t="";if(g(e))t=e;else if(h(e))for(let n=0;n<e.length;n++){const r=z(e[n]);r&&(t+=r+" ")}else if(y(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const $=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function q(e){return!!e||""===e}const G=e=>!(!e||!0!==e.__v_isRef),K=e=>g(e)?e:null==e?"":h(e)||y(e)&&(e.toString===b||!p(e.toString))?G(e)?K(e.value):JSON.stringify(e,W,2):String(e),W=(e,t)=>G(t)?W(e,t.value):d(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[H(t,r)+" =>"]=n,e),{})}:f(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>H(e))}:m(t)?H(t):!y(t)||h(t)||x(t)?t:String(t),H=(e,t="")=>{var n;return m(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};let Q,J;class X{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Q,!e&&Q&&(this.index=(Q.scopes||(Q.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Q;try{return Q=this,e()}finally{Q=t}}}on(){1===++this._on&&(this.prevScope=Q,Q=this)}off(){this._on>0&&0===--this._on&&(Q=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function Y(e){return new X(e)}function Z(){return Q}const ee=new WeakSet;class te{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Q&&Q.active&&Q.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,ee.has(this)&&(ee.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||ie(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,ve(this),ce(this);const e=J,t=pe;J=this,pe=!0;try{return this.fn()}finally{le(this),J=e,pe=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)de(e);this.deps=this.depsTail=void 0,ve(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?ee.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ue(this)&&this.run()}get dirty(){return ue(this)}}let ne,re,se=0;function ie(e,t=!1){if(e.flags|=8,t)return e.next=re,void(re=e);e.next=ne,ne=e}function oe(){se++}function ae(){if(--se>0)return;if(re){let e=re;for(re=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ne;){let t=ne;for(ne=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}function ce(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function le(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),de(r),fe(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function ue(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(he(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function he(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===be)return;if(e.globalVersion=be,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!ue(e)))return;e.flags|=2;const t=e.dep,n=J,r=pe;J=e,pe=!0;try{ce(e);const n=e.fn(e._value);(0===t.version||N(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{J=n,pe=r,le(e),e.flags&=-3}}function de(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)de(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function fe(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let pe=!0;const ge=[];function me(){ge.push(pe),pe=!1}function ye(){const e=ge.pop();pe=void 0===e||e}function ve(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=J;J=void 0;try{t()}finally{J=e}}}let be=0;class we{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xe{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!J||!pe||J===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==J)t=this.activeLink=new we(J,this),J.deps?(t.prevDep=J.depsTail,J.depsTail.nextDep=t,J.depsTail=t):J.deps=J.depsTail=t,Se(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=J.depsTail,t.nextDep=void 0,J.depsTail.nextDep=t,J.depsTail=t,J.deps===t&&(J.deps=e)}return t}trigger(e){this.version++,be++,this.notify(e)}notify(e){oe();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{ae()}}}function Se(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Se(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const _e=new WeakMap,Ee=Symbol(""),Ie=Symbol(""),Ce=Symbol("");function Te(e,t,n){if(pe&&J){let t=_e.get(e);t||_e.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new xe),r.map=t,r.key=n),r.track()}}function ke(e,t,n,r,s,i){const o=_e.get(e);if(!o)return void be++;const a=e=>{e&&e.trigger()};if(oe(),"clear"===t)o.forEach(a);else{const s=h(e),i=s&&S(n);if(s&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===Ce||!m(n)&&n>=e)&&a(t)})}else switch((void 0!==n||o.has(void 0))&&a(o.get(n)),i&&a(o.get(Ce)),t){case"add":s?i&&a(o.get("length")):(a(o.get(Ee)),d(e)&&a(o.get(Ie)));break;case"delete":s||(a(o.get(Ee)),d(e)&&a(o.get(Ie)));break;case"set":d(e)&&a(o.get(Ee))}}ae()}function Ae(e){const t=ft(e);return t===e?t:(Te(t,0,Ce),ht(e)?t:t.map(gt))}function De(e){return Te(e=ft(e),0,Ce),e}const Ne={__proto__:null,[Symbol.iterator](){return Oe(this,Symbol.iterator,gt)},concat(...e){return Ae(this).concat(...e.map(e=>h(e)?Ae(e):e))},entries(){return Oe(this,"entries",e=>(e[1]=gt(e[1]),e))},every(e,t){return Me(this,"every",e,t,void 0,arguments)},filter(e,t){return Me(this,"filter",e,t,e=>e.map(gt),arguments)},find(e,t){return Me(this,"find",e,t,gt,arguments)},findIndex(e,t){return Me(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Me(this,"findLast",e,t,gt,arguments)},findLastIndex(e,t){return Me(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Me(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fe(this,"includes",e)},indexOf(...e){return Fe(this,"indexOf",e)},join(e){return Ae(this).join(e)},lastIndexOf(...e){return Fe(this,"lastIndexOf",e)},map(e,t){return Me(this,"map",e,t,void 0,arguments)},pop(){return Le(this,"pop")},push(...e){return Le(this,"push",e)},reduce(e,...t){return Re(this,"reduce",e,t)},reduceRight(e,...t){return Re(this,"reduceRight",e,t)},shift(){return Le(this,"shift")},some(e,t){return Me(this,"some",e,t,void 0,arguments)},splice(...e){return Le(this,"splice",e)},toReversed(){return Ae(this).toReversed()},toSorted(e){return Ae(this).toSorted(e)},toSpliced(...e){return Ae(this).toSpliced(...e)},unshift(...e){return Le(this,"unshift",e)},values(){return Oe(this,"values",gt)}};function Oe(e,t,n){const r=De(e),s=r[t]();return r===e||ht(e)||(s._next=s.next,s.next=()=>{const e=s._next();return e.value&&(e.value=n(e.value)),e}),s}const Pe=Array.prototype;function Me(e,t,n,r,s,i){const o=De(e),a=o!==e&&!ht(e),c=o[t];if(c!==Pe[t]){const t=c.apply(e,i);return a?gt(t):t}let l=n;o!==e&&(a?l=function(t,r){return n.call(this,gt(t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));const u=c.call(o,l,r);return a&&s?s(u):u}function Re(e,t,n,r){const s=De(e);let i=n;return s!==e&&(ht(e)?n.length>3&&(i=function(t,r,s){return n.call(this,t,r,s,e)}):i=function(t,r,s){return n.call(this,t,gt(r),s,e)}),s[t](i,...r)}function Fe(e,t,n){const r=ft(e);Te(r,0,Ce);const s=r[t](...n);return-1!==s&&!1!==s||!dt(n[0])?s:(n[0]=ft(n[0]),r[t](...n))}function Le(e,t,n=[]){me(),oe();const r=ft(e)[t].apply(e,n);return ae(),ye(),r}const Ue=e("__proto__,__v_isRef,__isVue"),Ve=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(m));function Be(e){m(e)||(e=String(e));const t=ft(this);return Te(t,0,e),t.hasOwnProperty(e)}class je{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return s;if("__v_raw"===t)return n===(r?s?st:rt:s?nt:tt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=h(e);if(!r){let e;if(i&&(e=Ne[t]))return e;if("hasOwnProperty"===t)return Be}const o=Reflect.get(e,t,yt(e)?e:n);return(m(t)?Ve.has(t):Ue(t))?o:(r||Te(e,0,t),s?o:yt(o)?i&&S(t)?o:o.value:y(o)?r?at(o):ot(o):o)}}class ze extends je{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const t=ut(s);if(ht(n)||ut(n)||(s=ft(s),n=ft(n)),!h(e)&&yt(s)&&!yt(n))return t||(s.value=n),!0}const i=h(e)&&S(t)?Number(t)<e.length:u(e,t),o=Reflect.set(e,t,n,yt(e)?e:r);return e===ft(r)&&(i?N(n,s)&&ke(e,"set",t,n):ke(e,"add",t,n)),o}deleteProperty(e,t){const n=u(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&ke(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return m(t)&&Ve.has(t)||Te(e,0,t),n}ownKeys(e){return Te(e,0,h(e)?"length":Ee),Reflect.ownKeys(e)}}class $e extends je{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const qe=new ze,Ge=new $e,Ke=new ze(!0),We=e=>e,He=e=>Reflect.getPrototypeOf(e);function Qe(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Je(e,t){const n={get(n){const r=this.__v_raw,s=ft(r),i=ft(n);e||(N(n,i)&&Te(s,0,n),Te(s,0,i));const{has:o}=He(s),a=t?We:e?mt:gt;return o.call(s,n)?a(r.get(n)):o.call(s,i)?a(r.get(i)):void(r!==s&&r.get(n))},get size(){const t=this.__v_raw;return!e&&Te(ft(t),0,Ee),t.size},has(t){const n=this.__v_raw,r=ft(n),s=ft(t);return e||(N(t,s)&&Te(r,0,t),Te(r,0,s)),t===s?n.has(t):n.has(t)||n.has(s)},forEach(n,r){const s=this,i=s.__v_raw,o=ft(i),a=t?We:e?mt:gt;return!e&&Te(o,0,Ee),i.forEach((e,t)=>n.call(r,a(e),a(t),s))}};return a(n,e?{add:Qe("add"),set:Qe("set"),delete:Qe("delete"),clear:Qe("clear")}:{add(e){t||ht(e)||ut(e)||(e=ft(e));const n=ft(this);return He(n).has.call(n,e)||(n.add(e),ke(n,"add",e,e)),this},set(e,n){t||ht(n)||ut(n)||(n=ft(n));const r=ft(this),{has:s,get:i}=He(r);let o=s.call(r,e);o||(e=ft(e),o=s.call(r,e));const a=i.call(r,e);return r.set(e,n),o?N(n,a)&&ke(r,"set",e,n):ke(r,"add",e,n),this},delete(e){const t=ft(this),{has:n,get:r}=He(t);let s=n.call(t,e);s||(e=ft(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&ke(t,"delete",e,void 0),i},clear(){const e=ft(this),t=0!==e.size,n=e.clear();return t&&ke(e,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=function(e,t,n){return function(...r){const s=this.__v_raw,i=ft(s),o=d(i),a="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,l=s[e](...r),u=n?We:t?mt:gt;return!t&&Te(i,0,c?Ie:Ee),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(r,e,t)}),n}function Xe(e,t){const n=Je(e,t);return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(u(n,r)&&r in t?n:t,r,s)}const Ye={get:Xe(!1,!1)},Ze={get:Xe(!1,!0)},et={get:Xe(!0,!1)},tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,st=new WeakMap;function it(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>w(e).slice(8,-1))(e))}function ot(e){return ut(e)?e:ct(e,!1,qe,Ye,tt)}function at(e){return ct(e,!0,Ge,et,rt)}function ct(e,t,n,r,s){if(!y(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=it(e);if(0===i)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,2===i?r:n);return s.set(e,a),a}function lt(e){return ut(e)?lt(e.__v_raw):!(!e||!e.__v_isReactive)}function ut(e){return!(!e||!e.__v_isReadonly)}function ht(e){return!(!e||!e.__v_isShallow)}function dt(e){return!!e&&!!e.__v_raw}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function pt(e){return!u(e,"__v_skip")&&Object.isExtensible(e)&&P(e,"__v_skip",!0),e}const gt=e=>y(e)?ot(e):e,mt=e=>y(e)?at(e):e;function yt(e){return!!e&&!0===e.__v_isRef}function vt(e){return function(e){return yt(e)?e:new bt(e,!1)}(e)}class bt{constructor(e,t){this.dep=new xe,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ft(e),this._value=t?e:gt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||ht(e)||ut(e);e=n?e:ft(e),N(e,t)&&(this._rawValue=e,this._value=n?e:gt(e),this.dep.trigger())}}function wt(e){return yt(e)?e.value:e}const xt={get:(e,t,n)=>"__v_raw"===t?e:wt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return yt(s)&&!yt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function St(e){return lt(e)?e:new Proxy(e,xt)}class _t{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=_e.get(e);return n&&n.get(t)}(ft(this._object),this._key)}}function Et(e,t,n){const r=e[t];return yt(r)?r:new _t(e,t,n)}class It{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new xe(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=be-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&J!==this)return ie(this,!0),!0}get value(){const e=this.dep.track();return he(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const Ct={},Tt=new WeakMap;let kt;function At(e,n,s=t){const{immediate:i,deep:o,once:a,scheduler:l,augmentJob:u,call:d}=s,f=e=>o?e:ht(e)||!1===o||0===o?Dt(e,1):Dt(e);let g,m,y,v,b=!1,w=!1;if(yt(e)?(m=()=>e.value,b=ht(e)):lt(e)?(m=()=>f(e),b=!0):h(e)?(w=!0,b=e.some(e=>lt(e)||ht(e)),m=()=>e.map(e=>yt(e)?e.value:lt(e)?f(e):p(e)?d?d(e,2):e():void 0)):m=p(e)?n?d?()=>d(e,2):e:()=>{if(y){me();try{y()}finally{ye()}}const t=kt;kt=g;try{return d?d(e,3,[v]):e(v)}finally{kt=t}}:r,n&&o){const e=m,t=!0===o?1/0:o;m=()=>Dt(e(),t)}const S=Z(),_=()=>{g.stop(),S&&S.active&&c(S.effects,g)};if(a&&n){const e=n;n=(...t)=>{e(...t),_()}}let x=w?new Array(e.length).fill(Ct):Ct;const E=e=>{if(1&g.flags&&(g.dirty||e))if(n){const e=g.run();if(o||b||(w?e.some((e,t)=>N(e,x[t])):N(e,x))){y&&y();const t=kt;kt=g;try{const t=[e,x===Ct?void 0:w&&x[0]===Ct?[]:x,v];x=e,d?d(n,3,t):n(...t)}finally{kt=t}}}else g.run()};return u&&u(E),g=new te(m),g.scheduler=l?()=>l(E,!1):E,v=e=>function(e,t=!1,n=kt){if(n){let t=Tt.get(n);t||Tt.set(n,t=[]),t.push(e)}}(e,!1,g),y=g.onStop=()=>{const e=Tt.get(g);if(e){if(d)d(e,4);else for(const t of e)t();Tt.delete(g)}},n?i?E(!0):x=g.run():l?l(E.bind(null,!0),!0):g.run(),_.pause=g.pause.bind(g),_.resume=g.resume.bind(g),_.stop=_,_}function Dt(e,t=1/0,n){if(t<=0||!y(e)||e.__v_skip)return e;if(((n=n||new Map).get(e)||0)>=t)return e;if(n.set(e,t),t--,yt(e))Dt(e.value,t,n);else if(h(e))for(let r=0;r<e.length;r++)Dt(e[r],t,n);else if(f(e)||d(e))e.forEach(e=>{Dt(e,t,n)});else if(x(e)){for(const r in e)Dt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Dt(e[r],t,n)}return e}function Nt(e,t,n,r){try{return r?e(...r):e()}catch(e){Pt(e,t,n)}}function Ot(e,t,n,r){if(p(e)){const s=Nt(e,t,n,r);return s&&v(s)&&s.catch(e=>{Pt(e,t,n)}),s}if(h(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ot(e[i],t,n,r));return s}}function Pt(e,n,r,s=!0){n&&n.vnode;const{errorHandler:i,throwUnhandledErrorInProduction:o}=n&&n.appContext.config||t;if(n){let t=n.parent;const s=n.proxy,o=`https://vuejs.org/error-reference/#runtime-${r}`;for(;t;){const n=t.ec;if(n)for(let t=0;t<n.length;t++)if(!1===n[t](e,s,o))return;t=t.parent}if(i)return me(),Nt(i,null,10,[e,s,o]),void ye()}!function(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}(e,0,0,s,o)}const Mt=[];let Rt=-1;const Ft=[];let Lt=null,Ut=0;const Vt=Promise.resolve();let Bt=null;function jt(e){const t=Bt||Vt;return e?t.then(this?e.bind(this):e):t}function zt(e){if(!(1&e.flags)){const t=Kt(e),n=Mt[Mt.length-1];!n||!(2&e.flags)&&t>=Kt(n)?Mt.push(e):Mt.splice(function(e){let t=Rt+1,n=Mt.length;for(;t<n;){const r=t+n>>>1,s=Mt[r],i=Kt(s);i<e||i===e&&2&s.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,$t()}}function $t(){Bt||(Bt=Vt.then(Wt))}function qt(e,t,n=Rt+1){for(;n<Mt.length;n++){const t=Mt[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Mt.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function Gt(e){if(Ft.length){const e=[...new Set(Ft)].sort((e,t)=>Kt(e)-Kt(t));if(Ft.length=0,Lt)return void Lt.push(...e);for(Lt=e,Ut=0;Ut<Lt.length;Ut++){const e=Lt[Ut];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Lt=null,Ut=0}}const Kt=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Wt(e){try{for(Rt=0;Rt<Mt.length;Rt++){const e=Mt[Rt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Nt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Rt<Mt.length;Rt++){const e=Mt[Rt];e&&(e.flags&=-2)}Rt=-1,Mt.length=0,Gt(),Bt=null,(Mt.length||Ft.length)&&Wt()}}let Ht=null,Qt=null;function Jt(e){const t=Ht;return Ht=e,Qt=e&&e.type.__scopeId||null,t}function Xt(e,n){if(null===Ht)return e;const r=bs(Ht),s=e.dirs||(e.dirs=[]);for(let e=0;e<n.length;e++){let[i,o,a,c=t]=n[e];i&&(p(i)&&(i={mounted:i,updated:i}),i.deep&&Dt(o),s.push({dir:i,instance:r,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function Yt(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(me(),Ot(c,n,8,[e.el,a,e,t]),ye())}}const Zt=Symbol("_vte"),en=Symbol("_leaveCb");function tn(e,t){6&e.shapeFlag&&e.component?(e.transition=t,tn(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nn(e,t){return p(e)?a({name:e.name},t,{setup:e}):e}function rn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const sn=new WeakMap;function on(e,n,r,i,o=!1){if(h(e))return void e.forEach((e,t)=>on(e,n&&(h(n)?n[t]:n),r,i,o));if(cn(i)&&!o)return void(512&i.shapeFlag&&i.type.__asyncResolved&&i.component.subTree.component&&on(e,n,r,i.component.subTree));const a=4&i.shapeFlag?bs(i.component):i.el,l=o?null:a,{i:d,r:f}=e,m=n&&n.r,y=d.refs===t?d.refs={}:d.refs,v=d.setupState,b=ft(v),w=v===t?s:e=>u(b,e);if(null!=m&&m!==f)if(an(n),g(m))y[m]=null,w(m)&&(v[m]=null);else if(yt(m)){m.value=null;const e=n;e.k&&(y[e.k]=null)}if(p(f))Nt(f,d,12,[l,y]);else{const t=g(f),n=yt(f);if(t||n){const s=()=>{if(e.f){const n=t?w(f)?v[f]:y[f]:f.value;if(o)h(n)&&c(n,a);else if(h(n))n.includes(a)||n.push(a);else if(t)y[f]=[a],w(f)&&(v[f]=y[f]);else{const t=[a];f.value=t,e.k&&(y[e.k]=t)}}else t?(y[f]=l,w(f)&&(v[f]=l)):n&&(f.value=l,e.k&&(y[e.k]=l))};if(l){const t=()=>{s(),sn.delete(e)};t.id=-1,sn.set(e,t),dr(t,r)}else an(e),s()}}}function an(e){const t=sn.get(e);t&&(t.flags|=8,sn.delete(e))}F().requestIdleCallback,F().cancelIdleCallback;const cn=e=>!!e.type.__asyncLoader,ln=e=>e.type.__isKeepAlive;function un(e,t){dn(e,"a",t)}function hn(e,t){dn(e,"da",t)}function dn(e,t,n=cs){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(pn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)ln(e.parent.vnode)&&fn(r,t,n,e),e=e.parent}}function fn(e,t,n,r){const s=pn(t,e,r,!0);xn(()=>{c(r[t],s)},n)}function pn(e,t,n=cs,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{me();const s=ds(n),i=Ot(t,n,e,r);return s(),ye(),i});return r?s.unshift(i):s.push(i),i}}const gn=e=>(t,n=cs)=>{gs&&"sp"!==e||pn(e,(...e)=>t(...e),n)},mn=gn("bm"),yn=gn("m"),vn=gn("bu"),bn=gn("u"),wn=gn("bum"),xn=gn("um"),Sn=gn("sp"),_n=gn("rtg"),En=gn("rtc");function In(e,t=cs){pn("ec",e,t)}function Cn(e,t){return function(e,t,n=!0,r=!1){const s=Ht||cs;if(s){const n=s.type;{const e=ws(n,!1);if(e&&(e===t||e===C(t)||e===A(C(t))))return n}const i=kn(s[e]||n[e],t)||kn(s.appContext[e],t);return!i&&r?n:i}}("components",e,!0,t)||e}const Tn=Symbol.for("v-ndc");function kn(e,t){return e&&(e[t]||e[C(t)]||e[A(C(t))])}const An=e=>e?ps(e)?bs(e):An(e.parent):null,Dn=a(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>An(e.parent),$root:e=>An(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Un(e),$forceUpdate:e=>e.f||(e.f=()=>{zt(e.update)}),$nextTick:e=>e.n||(e.n=jt.bind(e.proxy)),$watch:e=>_r.bind(e)}),Nn=(e,n)=>e!==t&&!e.__isScriptSetup&&u(e,n),On={get({_:e},n){if("__v_skip"===n)return!0;const{ctx:r,setupState:s,data:i,props:o,accessCache:a,type:c,appContext:l}=e;let h;if("$"!==n[0]){const c=a[n];if(void 0!==c)switch(c){case 1:return s[n];case 2:return i[n];case 4:return r[n];case 3:return o[n]}else{if(Nn(s,n))return a[n]=1,s[n];if(i!==t&&u(i,n))return a[n]=2,i[n];if((h=e.propsOptions[0])&&u(h,n))return a[n]=3,o[n];if(r!==t&&u(r,n))return a[n]=4,r[n];Mn&&(a[n]=0)}}const d=Dn[n];let f,p;return d?("$attrs"===n&&Te(e.attrs,0,""),d(e)):(f=c.__cssModules)&&(f=f[n])?f:r!==t&&u(r,n)?(a[n]=4,r[n]):(p=l.config.globalProperties,u(p,n)?p[n]:void 0)},set({_:e},n,r){const{data:s,setupState:i,ctx:o}=e;return Nn(i,n)?(i[n]=r,!0):s!==t&&u(s,n)?(s[n]=r,!0):!(u(e.props,n)||"$"===n[0]&&n.slice(1)in e||(o[n]=r,0))},has({_:{data:e,setupState:n,accessCache:r,ctx:s,appContext:i,propsOptions:o,type:a}},c){let l,h;return!!(r[c]||e!==t&&"$"!==c[0]&&u(e,c)||Nn(n,c)||(l=o[0])&&u(l,c)||u(s,c)||u(Dn,c)||u(i.config.globalProperties,c)||(h=a.__cssModules)&&h[c])},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:u(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Pn(e){return h(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let Mn=!0;function Rn(e){const t=Un(e),n=e.proxy,s=e.ctx;Mn=!1,t.beforeCreate&&Fn(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:c,provide:l,inject:u,created:d,beforeMount:f,mounted:g,beforeUpdate:m,updated:v,activated:b,deactivated:w,beforeDestroy:S,beforeUnmount:_,destroyed:x,unmounted:E,render:I,renderTracked:T,renderTriggered:C,errorCaptured:k,serverPrefetch:A,expose:D,inheritAttrs:N,components:O,directives:P,filters:F}=t;if(u&&function(e,t){h(e)&&(e=zn(e));for(const n in e){const r=e[n];let s;s=y(r)?"default"in r?Jn(r.from||n,r.default,!0):Jn(r.from||n):Jn(r),yt(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[n]=s}}(u,s),a)for(const e in a){const t=a[e];p(t)&&(s[e]=t.bind(n))}if(i){const t=i.call(n,n);y(t)&&(e.data=ot(t))}if(Mn=!0,o)for(const e in o){const t=o[e],i=p(t)?t.bind(n,n):p(t.get)?t.get.bind(n,n):r,a=!p(t)&&p(t.set)?t.set.bind(n):r,c=xs({get:i,set:a});Object.defineProperty(s,e,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(c)for(const e in c)Ln(c[e],s,n,e);if(l){const e=p(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{!function(e,t){if(cs){let n=cs.provides;const r=cs.parent&&cs.parent.provides;r===n&&(n=cs.provides=Object.create(r)),n[e]=t}}(t,e[t])})}function M(e,t){h(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(d&&Fn(d,e,"c"),M(mn,f),M(yn,g),M(vn,m),M(bn,v),M(un,b),M(hn,w),M(In,k),M(En,T),M(_n,C),M(wn,_),M(xn,E),M(Sn,A),h(D))if(D.length){const t=e.exposed||(e.exposed={});D.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||(e.exposed={});I&&e.render===r&&(e.render=I),null!=N&&(e.inheritAttrs=N),O&&(e.components=O),P&&(e.directives=P),A&&rn(e)}function Fn(e,t,n){Ot(h(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ln(e,t,n,r){let s=r.includes(".")?Er(n,r):()=>n[r];if(g(e)){const n=t[e];p(n)&&xr(s,n)}else if(p(e))xr(s,e.bind(n));else if(y(e))if(h(e))e.forEach(e=>Ln(e,t,n,r));else{const r=p(e.handler)?e.handler.bind(n):t[e.handler];p(r)&&xr(s,r,e)}}function Un(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:s.length||n||r?(c={},s.length&&s.forEach(e=>Vn(c,e,o,!0)),Vn(c,t,o)):c=t,y(t)&&i.set(t,c),c}function Vn(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Vn(e,i,n,!0),s&&s.forEach(t=>Vn(e,t,n,!0));for(const s in t)if(r&&"expose"===s);else{const r=Bn[s]||n&&n[s];e[s]=r?r(e[s],t[s]):t[s]}return e}const Bn={data:jn,props:Gn,emits:Gn,methods:qn,computed:qn,beforeCreate:$n,created:$n,beforeMount:$n,mounted:$n,beforeUpdate:$n,updated:$n,beforeDestroy:$n,beforeUnmount:$n,destroyed:$n,unmounted:$n,activated:$n,deactivated:$n,errorCaptured:$n,serverPrefetch:$n,components:qn,directives:qn,watch:function(e,t){if(!e)return t;if(!t)return e;const n=a(Object.create(null),e);for(const r in t)n[r]=$n(e[r],t[r]);return n},provide:jn,inject:function(e,t){return qn(zn(e),zn(t))}};function jn(e,t){return t?e?function(){return a(p(e)?e.call(this,this):e,p(t)?t.call(this,this):t)}:t:e}function zn(e){if(h(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function $n(e,t){return e?[...new Set([].concat(e,t))]:t}function qn(e,t){return e?a(Object.create(null),e,t):t}function Gn(e,t){return e?h(e)&&h(t)?[...new Set([...e,...t])]:a(Object.create(null),Pn(e),Pn(null!=t?t:{})):t}function Kn(){return{app:null,config:{isNativeTag:s,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wn=0;function Hn(e,t){return function(t,n=null){p(t)||(t=a({},t)),null==n||y(n)||(n=null);const r=Kn(),s=new WeakSet,i=[];let o=!1;const c=r.app={_uid:Wn++,_component:t,_props:n,_container:null,_context:r,_instance:null,version:Ss,get config(){return r.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&p(e.install)?(s.add(e),e.install(c,...t)):p(e)&&(s.add(e),e(c,...t))),c),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),c),component:(e,t)=>t?(r.components[e]=t,c):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,c):r.directives[e],mount(s,i,a){if(!o){const i=c._ceVNode||Xr(t,n);return i.appContext=r,!0===a?a="svg":!1===a&&(a=void 0),e(i,s,a),o=!0,c._container=s,s.__vue_app__=c,bs(i.component)}},onUnmount(e){i.push(e)},unmount(){o&&(Ot(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,c),runWithContext(e){const t=Qn;Qn=c;try{return e()}finally{Qn=t}}};return c}}let Qn=null;function Jn(e,t,n=!1){const r=ls();if(r||Qn){let s=Qn?Qn._context.provides:r?null==r.parent||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&p(t)?t.call(r&&r.proxy):t}}const Xn={},Yn=()=>Object.create(Xn),Zn=e=>Object.getPrototypeOf(e)===Xn;function er(e,t,n,r=!1){const s={},i=Yn();e.propsDefaults=Object.create(null),tr(e,t,s,i);for(const t in e.propsOptions[0])t in s||(s[t]=void 0);n?e.props=r?s:ct(s,!1,Ke,Ze,nt):e.type.props?e.props=s:e.props=i,e.attrs=i}function tr(e,n,r,s){const[i,o]=e.propsOptions;let a,c=!1;if(n)for(let t in n){if(_(t))continue;const l=n[t];let h;i&&u(i,h=C(t))?o&&o.includes(h)?(a||(a={}))[h]=l:r[h]=l:Ar(e.emitsOptions,t)||t in s&&l===s[t]||(s[t]=l,c=!0)}if(o){const n=ft(r),s=a||t;for(let t=0;t<o.length;t++){const a=o[t];r[a]=nr(i,n,a,s[a],e,!u(s,a))}}return c}function nr(e,t,n,r,s,i){const o=e[n];if(null!=o){const e=u(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&!o.skipFactory&&p(e)){const{propsDefaults:i}=s;if(n in i)r=i[n];else{const o=ds(s);r=i[n]=e.call(null,t),o()}}else r=e;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!e?r=!1:!o[1]||""!==r&&r!==k(n)||(r=!0))}return r}const rr=new WeakMap;function sr(e,r,s=!1){const i=s?rr:r.propsCache,o=i.get(e);if(o)return o;const c=e.props,l={},d=[];let f=!1;if(!p(e)){const t=e=>{f=!0;const[t,n]=sr(e,r,!0);a(l,t),n&&d.push(...n)};!s&&r.mixins.length&&r.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!c&&!f)return y(e)&&i.set(e,n),n;if(h(c))for(let e=0;e<c.length;e++){const n=C(c[e]);ir(n)&&(l[n]=t)}else if(c)for(const e in c){const t=C(e);if(ir(t)){const n=c[e],r=l[t]=h(n)||p(n)?{type:n}:a({},n),s=r.type;let i=!1,o=!0;if(h(s))for(let e=0;e<s.length;++e){const t=s[e],n=p(t)&&t.name;if("Boolean"===n){i=!0;break}"String"===n&&(o=!1)}else i=p(s)&&"Boolean"===s.name;r[0]=i,r[1]=o,(i||u(r,"default"))&&d.push(t)}}const g=[l,d];return y(e)&&i.set(e,g),g}function ir(e){return"$"!==e[0]&&!_(e)}const or=e=>"_"===e||"_ctx"===e||"$stable"===e,ar=e=>h(e)?e.map(ns):[ns(e)],cr=(e,t,n)=>{if(t._n)return t;const r=function(e,t=Ht){if(!t)return e;if(e._n)return e;const n=(...r)=>{n._d&&$r(-1);const s=Jt(t);let i;try{i=e(...r)}finally{Jt(s),n._d&&$r(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}((...e)=>ar(t(...e)),n);return r._c=!1,r},lr=(e,t,n)=>{const r=e._ctx;for(const n in e){if(or(n))continue;const s=e[n];if(p(s))t[n]=cr(0,s,r);else if(null!=s){const e=ar(s);t[n]=()=>e}}},ur=(e,t)=>{const n=ar(t);e.slots.default=()=>n},hr=(e,t,n)=>{for(const r in t)!n&&or(r)||(e[r]=t[r])},dr=function(e,t){var n;t&&t.pendingBranch?h(e)?t.effects.push(...e):t.effects.push(e):(h(n=e)?Ft.push(...n):Lt&&-1===n.id?Lt.splice(Ut+1,0,n):1&n.flags||(Ft.push(n),n.flags|=1),$t())};function fr(e){return function(e){F().__VUE__=!0;const{insert:s,remove:i,patchProp:o,createElement:a,createText:c,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=r,insertStaticContent:m}=e,y=(e,t,n,r=null,s=null,i=null,o=void 0,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Wr(e,t)&&(r=H(e),Q(e,s,i,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=t;switch(l){case Fr:b(e,t,n,r);break;case Lr:w(e,t,n,r);break;case Ur:null==e&&S(t,n,r,o);break;case Rr:M(e,t,n,r,s,i,o,a,c);break;default:1&h?x(e,t,n,r,s,i,o,a,c):6&h?R(e,t,n,r,s,i,o,a,c):(64&h||128&h)&&l.process(e,t,n,r,s,i,o,a,c,ee)}null!=u&&s?on(u,e&&e.ref,i,t||e,!t):null==u&&e&&null!=e.ref&&on(e.ref,null,i,e,!0)},b=(e,t,n,r)=>{if(null==e)s(t.el=c(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},w=(e,t,n,r)=>{null==e?s(t.el=l(t.children||""),n,r):t.el=e.el},S=(e,t,n,r)=>{[e.el,e.anchor]=m(e.children,t,n,r,e.el,e.anchor)},x=(e,t,n,r,s,i,o,a,c)=>{"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?E(t,n,r,s,i,o,a,c):A(e,t,s,i,o,a,c)},E=(e,t,n,r,i,c,l,u)=>{let h,f;const{props:p,shapeFlag:g,transition:m,dirs:y}=e;if(h=e.el=a(e.type,c,p&&p.is,p),8&g?d(h,e.children):16&g&&T(e.children,h,null,r,i,pr(e,c),l,u),y&&Yt(e,null,r,"created"),I(h,e,e.scopeId,l,r),p){for(const e in p)"value"===e||_(e)||o(h,e,null,p[e],c,r);"value"in p&&o(h,"value",null,p.value,c),(f=p.onVnodeBeforeMount)&&is(f,r,e)}y&&Yt(e,null,r,"beforeMount");const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(i,m);v&&m.beforeEnter(h),s(h,t,n),((f=p&&p.onVnodeMounted)||v||y)&&dr(()=>{f&&is(f,r,e),v&&m.enter(h),y&&Yt(e,null,r,"mounted")},i)},I=(e,t,n,r,s)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(s){let n=s.subTree;if(t===n||Mr(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=s.vnode;I(e,t,t.scopeId,t.slotScopeIds,s.parent)}}},T=(e,t,n,r,s,i,o,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?rs(e[l]):ns(e[l]);y(null,c,t,n,r,s,i,o,a)}},A=(e,n,r,s,i,a,c)=>{const l=n.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=n;u|=16&e.patchFlag;const p=e.props||t,g=n.props||t;let m;if(r&&gr(r,!1),(m=g.onVnodeBeforeUpdate)&&is(m,r,n,e),f&&Yt(n,e,r,"beforeUpdate"),r&&gr(r,!0),(p.innerHTML&&null==g.innerHTML||p.textContent&&null==g.textContent)&&d(l,""),h?D(e.dynamicChildren,h,l,r,s,pr(n,i),a):c||j(e,n,l,null,r,s,pr(n,i),a,!1),u>0){if(16&u)N(l,p,g,r,i);else if(2&u&&p.class!==g.class&&o(l,"class",null,g.class,i),4&u&&o(l,"style",p.style,g.style,i),8&u){const e=n.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t],s=p[n],a=g[n];a===s&&"value"!==n||o(l,n,s,a,i,r)}}1&u&&e.children!==n.children&&d(l,n.children)}else c||null!=h||N(l,p,g,r,i);((m=g.onVnodeUpdated)||f)&&dr(()=>{m&&is(m,r,n,e),f&&Yt(n,e,r,"updated")},s)},D=(e,t,n,r,s,i,o)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],u=c.el&&(c.type===Rr||!Wr(c,l)||198&c.shapeFlag)?f(c.el):n;y(c,l,u,null,r,s,i,o,!0)}},N=(e,n,r,s,i)=>{if(n!==r){if(n!==t)for(const t in n)_(t)||t in r||o(e,t,n[t],null,i,s);for(const t in r){if(_(t))continue;const a=r[t],c=n[t];a!==c&&"value"!==t&&o(e,t,c,a,i,s)}"value"in r&&o(e,"value",n.value,r.value,i)}},M=(e,t,n,r,i,o,a,l,u)=>{const h=t.el=e?e.el:c(""),d=t.anchor=e?e.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=t;g&&(l=l?l.concat(g):g),null==e?(s(h,n,r),s(d,n,r),T(t.children||[],n,d,i,o,a,l,u)):f>0&&64&f&&p&&e.dynamicChildren?(D(e.dynamicChildren,p,n,i,o,a,l),(null!=t.key||i&&t===i.subTree)&&mr(e,t,!0)):j(e,t,n,d,i,o,a,l,u)},R=(e,t,n,r,s,i,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?s.ctx.activate(t,n,r,o,c):L(t,n,r,s,i,o,c):U(e,t,c)},L=(e,n,r,s,i,o,a)=>{const c=e.component=function(e,n,r){const s=e.type,i=(n?n.appContext:e.appContext)||os,o={uid:as++,vnode:e,type:s,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new X(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sr(s,i),emitsOptions:kr(s,i),emit:null,emitted:null,propsDefaults:t,inheritAttrs:s.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=n?n.root:o,o.emit=Cr.bind(null,o),e.ce&&e.ce(o),o}(e,s,i);if(ln(e)&&(c.ctx.renderer=ee),function(e,t=!1,n=!1){t&&hs(t);const{props:r,children:s}=e.vnode,i=ps(e);er(e,r,i,t),((e,t,n)=>{const r=e.slots=Yn();if(32&e.vnode.shapeFlag){const e=t._;e?(hr(r,t,n),n&&P(r,"_",e,!0)):lr(t,r)}else t&&ur(e,t)})(e,s,n||t);i&&function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,On);const{setup:r}=n;if(r){me();const n=e.setupContext=r.length>1?function(e){return{attrs:new Proxy(e.attrs,vs),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}(e):null,s=ds(e),i=Nt(r,e,0,[e.props,n]),o=v(i);if(ye(),s(),!o&&!e.sp||cn(e)||rn(e),o){if(i.then(fs,fs),t)return i.then(t=>{ms(e,t)}).catch(t=>{Pt(t,e,0)});e.asyncDep=i}else ms(e,i)}else ys(e)}(e,t);t&&hs(!1)}(c,!1,a),c.asyncDep){if(i&&i.registerDep(c,V,a),!e.el){const t=c.subTree=Xr(Lr);w(null,t,n,r),e.placeholder=t.el}}else V(c,e,n,r,i,o,a)},U=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!s&&!a||a&&a.$stable)||r!==o&&(r?!o||Pr(r,o,l):!!o);if(1024&c)return!0;if(16&c)return r?Pr(r,o,l):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!Ar(l,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void B(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},V=(e,t,n,r,s,i,o)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{const n=yr(e);if(n)return t&&(t.el=l.el,B(e,t,o)),void n.asyncDep.then(()=>{e.isUnmounted||a()})}let u,h=t;gr(e,!1),t?(t.el=l.el,B(e,t,o)):t=l,n&&O(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&is(u,c,t,l),gr(e,!0);const d=Dr(e),p=e.subTree;e.subTree=d,y(p,d,f(p.el),H(p),e,s,i),t.el=d.el,null===h&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,d.el),r&&dr(r,s),(u=t.props&&t.props.onVnodeUpdated)&&dr(()=>is(u,c,t,l),s)}else{let o;const{el:a,props:c}=t,{bm:l,m:u,parent:h,root:d,type:f}=e,p=cn(t);gr(e,!1),l&&O(l),!p&&(o=c&&c.onVnodeBeforeMount)&&is(o,h,t),gr(e,!0);{d.ce&&!1!==d.ce._def.shadowRoot&&d.ce._injectChildStyle(f);const o=e.subTree=Dr(e);y(null,o,n,r,e,s,i),t.el=o.el}if(u&&dr(u,s),!p&&(o=c&&c.onVnodeMounted)){const e=t;dr(()=>is(o,h,e),s)}(256&t.shapeFlag||h&&cn(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&dr(e.a,s),e.isMounted=!0,t=n=r=null}};e.scope.on();const c=e.effect=new te(a);e.scope.off();const l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>zt(u),gr(e,!0),l()},B=(e,n,r)=>{n.component=e;const s=e.vnode.props;e.vnode=n,e.next=null,function(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=ft(s),[c]=e.propsOptions;let l=!1;if(!(r||o>0)||16&o){let r;tr(e,t,s,i)&&(l=!0);for(const i in a)t&&(u(t,i)||(r=k(i))!==i&&u(t,r))||(c?!n||void 0===n[i]&&void 0===n[r]||(s[i]=nr(c,a,i,void 0,e,!0)):delete s[i]);if(i!==a)for(const e in i)t&&u(t,e)||(delete i[e],l=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(Ar(e.emitsOptions,o))continue;const h=t[o];if(c)if(u(i,o))h!==i[o]&&(i[o]=h,l=!0);else{const t=C(o);s[t]=nr(c,a,t,h,e,!1)}else h!==i[o]&&(i[o]=h,l=!0)}}l&&ke(e.attrs,"set","")}(e,n.props,s,r),((e,n,r)=>{const{vnode:s,slots:i}=e;let o=!0,a=t;if(32&s.shapeFlag){const e=n._;e?r&&1===e?o=!1:hr(i,n,r):(o=!n.$stable,lr(n,i)),a=n}else n&&(ur(e,n),a={default:1});if(o)for(const e in i)or(e)||null!=a[e]||delete i[e]})(e,n.children,r),me(),qt(e),ye()},j=(e,t,n,r,s,i,o,a,c=!1)=>{const l=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void $(l,h,n,r,s,i,o,a,c);if(256&f)return void z(l,h,n,r,s,i,o,a,c)}8&p?(16&u&&W(l,s,i),h!==l&&d(n,h)):16&u?16&p?$(l,h,n,r,s,i,o,a,c):W(l,s,i,!0):(8&u&&d(n,""),16&p&&T(h,n,r,s,i,o,a,c))},z=(e,t,r,s,i,o,a,c,l)=>{t=t||n;const u=(e=e||n).length,h=t.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const n=t[f]=l?rs(t[f]):ns(t[f]);y(e[f],n,r,null,i,o,a,c,l)}u>h?W(e,i,o,!0,!1,d):T(t,r,s,i,o,a,c,l,d)},$=(e,t,r,s,i,o,a,c,l)=>{let u=0;const h=t.length;let d=e.length-1,f=h-1;for(;u<=d&&u<=f;){const n=e[u],s=t[u]=l?rs(t[u]):ns(t[u]);if(!Wr(n,s))break;y(n,s,r,null,i,o,a,c,l),u++}for(;u<=d&&u<=f;){const n=e[d],s=t[f]=l?rs(t[f]):ns(t[f]);if(!Wr(n,s))break;y(n,s,r,null,i,o,a,c,l),d--,f--}if(u>d){if(u<=f){const e=f+1,n=e<h?t[e].el:s;for(;u<=f;)y(null,t[u]=l?rs(t[u]):ns(t[u]),r,n,i,o,a,c,l),u++}}else if(u>f)for(;u<=d;)Q(e[u],i,o,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const e=t[u]=l?rs(t[u]):ns(t[u]);null!=e.key&&m.set(e.key,u)}let v,b=0;const w=f-g+1;let S=!1,_=0;const x=new Array(w);for(u=0;u<w;u++)x[u]=0;for(u=p;u<=d;u++){const n=e[u];if(b>=w){Q(n,i,o,!0);continue}let s;if(null!=n.key)s=m.get(n.key);else for(v=g;v<=f;v++)if(0===x[v-g]&&Wr(n,t[v])){s=v;break}void 0===s?Q(n,i,o,!0):(x[s-g]=u+1,s>=_?_=s:S=!0,y(n,t[s],r,null,i,o,a,c,l),b++)}const E=S?function(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}(x):n;for(v=E.length-1,u=w-1;u>=0;u--){const e=g+u,n=t[e],d=t[e+1],f=e+1<h?d.el||d.placeholder:s;0===x[u]?y(null,n,r,f,i,o,a,c,l):S&&(v<0||u!==E[v]?G(n,r,f,2):v--)}}},G=(e,t,n,r,o=null)=>{const{el:a,type:c,transition:l,children:u,shapeFlag:h}=e;if(6&h)G(e.component.subTree,t,n,r);else if(128&h)e.suspense.move(t,n,r);else if(64&h)c.move(e,t,n,ee);else if(c!==Rr)if(c!==Ur)if(2!==r&&1&h&&l)if(0===r)l.beforeEnter(a),s(a,t,n),dr(()=>l.enter(a),o);else{const{leave:r,delayLeave:o,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?i(a):s(a,t,n)},h=()=>{a._isLeaving&&a[en](!0),r(a,()=>{u(),c&&c()})};o?o(a,u,h):h()}else s(a,t,n);else(({el:e,anchor:t},n,r)=>{let i;for(;e&&e!==t;)i=p(e),s(e,n,r),e=i;s(t,n,r)})(e,t,n);else{s(a,t,n);for(let e=0;e<u.length;e++)G(u[e],t,n,r);s(e.anchor,t,n)}},Q=(e,t,n,r=!1,s=!1)=>{const{type:i,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:f}=e;if(-2===h&&(s=!1),null!=a&&(me(),on(a,null,n,e,!0),ye()),null!=f&&(t.renderCache[f]=void 0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,g=!cn(e);let m;if(g&&(m=o&&o.onVnodeBeforeUnmount)&&is(m,t,e),6&u)K(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&Yt(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,ee,r):l&&!l.hasOnce&&(i!==Rr||h>0&&64&h)?W(l,t,n,!1,!0):(i===Rr&&384&h||!s&&16&u)&&W(c,t,n),r&&q(e)}(g&&(m=o&&o.onVnodeUnmounted)||p)&&dr(()=>{m&&is(m,t,e),p&&Yt(e,null,t,"unmounted")},n)},q=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===Rr)return void J(n,r);if(t===Ur)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=p(e),i(e),e=n;i(t)})(e);const o=()=>{i(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},J=(e,t)=>{let n;for(;e!==t;)n=p(e),i(e),e=n;i(t)},K=(e,t,n)=>{const{bum:r,scope:s,job:i,subTree:o,um:a,m:c,a:l}=e;vr(c),vr(l),r&&O(r),s.stop(),i&&(i.flags|=8,Q(o,e,t,n)),a&&dr(a,t),dr(()=>{e.isUnmounted=!0},t)},W=(e,t,n,r=!1,s=!1,i=0)=>{for(let o=i;o<e.length;o++)Q(e[o],t,n,r,s)},H=e=>{if(6&e.shapeFlag)return H(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=p(e.anchor||e.el),n=t&&t[Zt];return n?p(n):t};let Y=!1;const Z=(e,t,n)=>{null==e?t._vnode&&Q(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Y||(Y=!0,qt(),Gt(),Y=!1)},ee={p:y,um:Q,m:G,r:q,mt:L,mc:T,pc:j,pbc:D,n:H,o:e};return{render:Z,hydrate:undefined,createApp:Hn(Z)}}(e)}function pr({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function gr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mr(e,t,n=!1){const r=e.children,s=t.children;if(h(r)&&h(s))for(let e=0;e<r.length;e++){const t=r[e];let i=s[e];1&i.shapeFlag&&!i.dynamicChildren&&((i.patchFlag<=0||32===i.patchFlag)&&(i=s[e]=rs(s[e]),i.el=t.el),n||-2===i.patchFlag||mr(t,i)),i.type===Fr&&-1!==i.patchFlag&&(i.el=t.el),i.type!==Lr||i.el||(i.el=t.el)}}function yr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yr(t)}function vr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const br=Symbol.for("v-scx"),wr=()=>Jn(br);function xr(e,t,n){return Sr(e,t,n)}function Sr(e,n,s=t){const{immediate:i,deep:o,flush:c,once:l}=s,u=a({},s),h=n&&i||!n&&"post"!==c;let d;if(gs)if("sync"===c){const e=wr();d=e.__watcherHandles||(e.__watcherHandles=[])}else if(!h){const e=()=>{};return e.stop=r,e.resume=r,e.pause=r,e}const f=cs;u.call=(e,t,n)=>Ot(e,f,t,n);let p=!1;"post"===c?u.scheduler=e=>{dr(e,f&&f.suspense)}:"sync"!==c&&(p=!0,u.scheduler=(e,t)=>{t?e():zt(e)}),u.augmentJob=e=>{n&&(e.flags|=4),p&&(e.flags|=2,f&&(e.id=f.uid,e.i=f))};const g=At(e,n,u);return gs&&(d?d.push(g):h&&g()),g}function _r(e,t,n){const r=this.proxy,s=g(e)?e.includes(".")?Er(r,e):()=>r[e]:e.bind(r,r);let i;p(t)?i=t:(i=t.handler,n=t);const o=ds(this),a=Sr(s,i.bind(r),n);return o(),a}function Er(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const Ir=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${C(t)}Modifiers`]||e[`${k(t)}Modifiers`];function Cr(e,n,...r){if(e.isUnmounted)return;const s=e.vnode.props||t;let i=r;const o=n.startsWith("update:"),a=o&&Ir(s,n.slice(7));let c;a&&(a.trim&&(i=r.map(e=>g(e)?e.trim():e)),a.number&&(i=r.map(M)));let l=s[c=D(n)]||s[c=D(C(n))];!l&&o&&(l=s[c=D(k(n))]),l&&Ot(l,e,6,i);const u=s[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,Ot(u,e,6,i)}}const Tr=new WeakMap;function kr(e,t,n=!1){const r=n?Tr:t.emitsCache,s=r.get(e);if(void 0!==s)return s;const i=e.emits;let o={},c=!1;if(!p(e)){const r=e=>{const n=kr(e,t,!0);n&&(c=!0,a(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||c?(h(i)?i.forEach(e=>o[e]=null):a(o,i),y(e)&&r.set(e,o),o):(y(e)&&r.set(e,null),null)}function Ar(e,t){return!(!e||!i(t))&&(t=t.slice(2).replace(/Once$/,""),u(e,t[0].toLowerCase()+t.slice(1))||u(e,k(t))||u(e,t))}function Dr(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:c,emit:l,render:u,renderCache:h,props:d,data:f,setupState:p,ctx:g,inheritAttrs:m}=e,y=Jt(e);let v,b;try{if(4&n.shapeFlag){const e=s||r,t=e;v=ns(u.call(t,e,h,d,p,f,g)),b=c}else{const e=t;v=ns(e.length>1?e(d,{attrs:c,slots:a,emit:l}):e(d,null)),b=t.props?c:Nr(c)}}catch(t){Vr.length=0,Pt(t,e,1),v=Xr(Lr)}let w=v;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=w;e.length&&7&t&&(i&&e.some(o)&&(b=Or(b,i)),w=Yr(w,b,!1,!0))}return n.dirs&&(w=Yr(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&tn(w,n.transition),v=w,Jt(y),v}const Nr=e=>{let t;for(const n in e)("class"===n||"style"===n||i(n))&&((t||(t={}))[n]=e[n]);return t},Or=(e,t)=>{const n={};for(const r in e)o(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Pr(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ar(n,i))return!0}return!1}const Mr=e=>e.__isSuspense,Rr=Symbol.for("v-fgt"),Fr=Symbol.for("v-txt"),Lr=Symbol.for("v-cmt"),Ur=Symbol.for("v-stc"),Vr=[];let Br=null;function jr(e=!1){Vr.push(Br=e?null:[])}let zr=1;function $r(e,t=!1){zr+=e,e<0&&Br&&t&&(Br.hasOnce=!0)}function qr(e){return e.dynamicChildren=zr>0?Br||n:null,Vr.pop(),Br=Vr[Vr.length-1]||null,zr>0&&Br&&Br.push(e),e}function Gr(e,t,n,r,s,i){return qr(Jr(e,t,n,r,s,i,!0))}function Kr(e){return!!e&&!0===e.__v_isVNode}function Wr(e,t){return e.type===t.type&&e.key===t.key}const Hr=({key:e})=>null!=e?e:null,Qr=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?g(e)||yt(e)||p(e)?{i:Ht,r:e,k:t,f:!!n}:e:null);function Jr(e,t=null,n=null,r=0,s=null,i=(e===Rr?0:1),o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hr(t),ref:t&&Qr(t),scopeId:Qt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return a?(ss(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=g(n)?8:16),zr>0&&!o&&Br&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&Br.push(c),c}const Xr=function(e,t=null,n=null,r=0,s=null,i=!1){if(e&&e!==Tn||(e=Lr),Kr(e)){const r=Yr(e,t,!0);return n&&ss(r,n),zr>0&&!i&&Br&&(6&r.shapeFlag?Br[Br.indexOf(e)]=r:Br.push(r)),r.patchFlag=-2,r}var o;if(p(o=e)&&"__vccOpts"in o&&(e=e.__vccOpts),t){t=function(e){return e?dt(e)||Zn(e)?a({},e):e:null}(t);let{class:e,style:n}=t;e&&!g(e)&&(t.class=z(e)),y(n)&&(dt(n)&&!h(n)&&(n=a({},n)),t.style=L(n))}return Jr(e,t,n,r,s,g(e)?1:Mr(e)?128:(e=>e.__isTeleport)(e)?64:y(e)?4:p(e)?2:0,i,!0)};function Yr(e,t,n=!1,r=!1){const{props:s,ref:o,patchFlag:a,children:c,transition:l}=e,u=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=z([t.class,r.class]));else if("style"===e)t.style=L([t.style,r.style]);else if(i(e)){const n=t[e],s=r[e];!s||n===s||h(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=r[e])}return t}(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Hr(u),ref:t&&t.ref?n&&o?h(o)?o.concat(Qr(t)):[o,Qr(t)]:Qr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Rr?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yr(e.ssContent),ssFallback:e.ssFallback&&Yr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&tn(d,l.clone(d)),d}function Zr(e=" ",t=0){return Xr(Fr,null,e,t)}function es(e,t){const n=Xr(Ur,null,e);return n.staticCount=t,n}function ts(e="",t=!1){return t?(jr(),qr(Xr(Lr,null,e,undefined,undefined,!0))):Xr(Lr,null,e)}function ns(e){return null==e||"boolean"==typeof e?Xr(Lr):h(e)?Xr(Rr,null,e.slice()):Kr(e)?rs(e):Xr(Fr,null,String(e))}function rs(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Yr(e)}function ss(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(h(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),ss(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Zn(t)?3===r&&Ht&&(1===Ht.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Ht}}else p(t)?(t={default:t,_ctx:Ht},n=32):(t=String(t),64&r?(n=16,t=[Zr(t)]):n=8);e.children=t,e.shapeFlag|=n}function is(e,t,n,r=null){Ot(e,t,7,[n,r])}const os=Kn();let as=0,cs=null;const ls=()=>cs||Ht;let us,hs;{const e=F(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};us=t("__VUE_INSTANCE_SETTERS__",e=>cs=e),hs=t("__VUE_SSR_SETTERS__",e=>gs=e)}const ds=e=>{const t=cs;return us(e),e.scope.on(),()=>{e.scope.off(),us(t)}},fs=()=>{cs&&cs.scope.off(),us(null)};function ps(e){return 4&e.vnode.shapeFlag}let gs=!1;function ms(e,t,n){p(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:y(t)&&(e.setupState=St(t)),ys(e)}function ys(e,t,n){const s=e.type;e.render||(e.render=s.render||r);{const t=ds(e);me();try{Rn(e)}finally{ye(),t()}}}const vs={get:(e,t)=>(Te(e,0,""),e[t])};function bs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(St(pt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Dn?Dn[n](e):void 0,has:(e,t)=>t in e||t in Dn})):e.proxy}function ws(e,t=!0){return p(e)?e.displayName||e.name:e.name||t&&e.__name}const xs=(e,t)=>{const n=function(e,t,n=!1){let r,s;return p(e)?r=e:(r=e.get,s=e.set),new It(r,s,n)}(e,0,gs);return n},Ss="3.5.21";let _s;const Es="undefined"!=typeof window&&window.trustedTypes;if(Es)try{_s=Es.createPolicy("vue",{createHTML:e=>e})}catch(e){}const Is=_s?e=>_s.createHTML(e):e=>e,Cs="undefined"!=typeof document?document:null,Ts=Cs&&Cs.createElement("template"),ks={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s="svg"===t?Cs.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Cs.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?Cs.createElement(e,{is:n}):Cs.createElement(e);return"select"===e&&r&&null!=r.multiple&&s.setAttribute("multiple",r.multiple),s},createText:e=>Cs.createTextNode(e),createComment:e=>Cs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Cs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),s!==i&&(s=s.nextSibling););else{Ts.innerHTML=Is("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const s=Ts.content;if("svg"===r||"mathml"===r){const e=s.firstChild;for(;e.firstChild;)s.appendChild(e.firstChild);s.removeChild(e)}t.insertBefore(s,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},As=Symbol("_vtc"),Ds=Symbol("_vod"),Ns=Symbol("_vsh"),Os=Symbol(""),Ps=/(?:^|;)\s*display\s*:/,Ms=/\s*!important$/;function Rs(e,t,n){if(h(n))n.forEach(n=>Rs(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Ls[t];if(n)return n;let r=C(t);if("filter"!==r&&r in e)return Ls[t]=r;r=A(r);for(let n=0;n<Fs.length;n++){const s=Fs[n]+r;if(s in e)return Ls[t]=s}return t}(e,t);Ms.test(n)?e.setProperty(k(r),n.replace(Ms,""),"important"):e[r]=n}}const Fs=["Webkit","Moz","ms"],Ls={},Us="http://www.w3.org/1999/xlink";function Vs(e,t,n,r,s,i=$(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(Us,t.slice(6,t.length)):e.setAttributeNS(Us,t,n):null==n||i&&!q(n)?e.removeAttribute(t):e.setAttribute(t,i?"":m(n)?String(n):n)}function Bs(e,t,n,r,s){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?Is(n):n));const i=e.tagName;if("value"===t&&"PROGRESS"!==i&&!i.includes("-")){const r="OPTION"===i?e.getAttribute("value")||"":e.value,s=null==n?"checkbox"===e.type?"on":"":String(n);return r===s&&"_value"in e||(e.value=s),null==n&&e.removeAttribute(t),void(e._value=n)}let o=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=q(n):null==n&&"string"===r?(n="",o=!0):"number"===r&&(n=0,o=!0)}try{e[t]=n}catch(e){}o&&e.removeAttribute(s||t)}function js(e,t,n,r){e.addEventListener(t,n,r)}const zs=Symbol("_vei");function $s(e,t,n,r,s=null){const i=e[zs]||(e[zs]={}),o=i[t];if(r&&o)o.value=r;else{const[n,a]=function(e){let t;if(qs.test(e)){let n;for(t={};n=e.match(qs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):k(e.slice(2)),t]}(t);if(r){const o=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();Ot(function(e,t){if(h(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Ws(),n}(r,s);js(e,n,o,a)}else o&&(function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,a),i[t]=void 0)}}const qs=/(?:Once|Passive|Capture)$/;let Gs=0;const Ks=Promise.resolve(),Ws=()=>Gs||(Ks.then(()=>Gs=0),Gs=Date.now()),Hs=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return h(t)?e=>O(t,e):t};function Js(e){e.target.composing=!0}function Xs(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ys=Symbol("_assign"),Zs={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Ys]=Qs(s);const i=r||s.props&&"number"===s.props.type;js(e,t?"change":"input",t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),i&&(r=M(r)),e[Ys](r)}),n&&js(e,"change",()=>{e.value=e.value.trim()}),t||(js(e,"compositionstart",Js),js(e,"compositionend",Xs),js(e,"change",Xs))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(e[Ys]=Qs(o),e.composing)return;const a=null==t?"":t;if((!i&&"number"!==e.type||/^0\d/.test(e.value)?e.value:M(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(r&&t===n)return;if(s&&e.value.trim()===a)return}e.value=a}}},ei=["ctrl","shift","alt","meta"],ti={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ei.some(n=>e[`${n}Key`]&&!t.includes(n))},ni=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=ti[t[e]];if(r&&r(n,t))return}return e(n,...r)})},ri=a({patchProp:(e,t,n,r,s,a)=>{const c="svg"===s;"class"===t?function(e,t,n){const r=e[As];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,c):"style"===t?function(e,t,n){const r=e.style,s=g(n);let i=!1;if(n&&!s){if(t)if(g(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&Rs(r,t,"")}else for(const e in t)null==n[e]&&Rs(r,e,"");for(const e in n)"display"===e&&(i=!0),Rs(r,e,n[e])}else if(s){if(t!==n){const e=r[Os];e&&(n+=";"+e),r.cssText=n,i=Ps.test(n)}}else t&&e.removeAttribute("style");Ds in e&&(e[Ds]=i?r.display:"",e[Ns]&&(r.display="none"))}(e,n,r):i(t)?o(t)||$s(e,t,0,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Hs(t)&&p(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!Hs(t)||!g(n))&&t in e}(e,t,r,c))?(Bs(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Vs(e,t,r,c,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&g(r)?("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),Vs(e,t,r,c)):Bs(e,C(t),r,0,t)}},ks);let si,ii;const oi=e=>ii=e,ai=Symbol();function ci(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var li,ui;(ui=li||(li={})).direct="direct",ui.patchObject="patch object",ui.patchFunction="patch function";const hi=()=>{};function di(e,t,n,r=hi){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};var i;return!n&&Z()&&(i=s,Q&&Q.cleanups.push(i)),s}function fi(e,...t){e.slice().forEach(e=>{e(...t)})}const pi=e=>e(),gi=Symbol(),mi=Symbol();function yi(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];ci(s)&&ci(r)&&e.hasOwnProperty(n)&&!yt(r)&&!lt(r)?e[n]=yi(s,r):e[n]=r}return e}const vi=Symbol();function bi(e){return!ci(e)||!Object.prototype.hasOwnProperty.call(e,vi)}const{assign:wi}=Object;function xi(e){return!(!yt(e)||!e.effect)}function Si(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let c;return c=_i(e,function(){a||(n.state.value[e]=s?s():{});const t=function(e){const t=h(e)?new Array(e.length):{};for(const n in e)t[n]=Et(e,n);return t}(n.state.value[e]);return wi(t,i,Object.keys(o||{}).reduce((t,r)=>(t[r]=pt(xs(()=>{oi(n);const t=n._s.get(e);return o[r].call(t,t)})),t),{}))},t,n,r,!0),c}function _i(e,t,n={},r,s,i){let o;const a=wi({actions:{}},n),c={deep:!0};let l,u,h,d=[],f=[];const p=r.state.value[e];let g;function m(t){let n;l=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:li.patchFunction,storeId:e,events:h}):(yi(r.state.value[e],t),n={type:li.patchObject,payload:t,storeId:e,events:h});const s=g=Symbol();jt().then(()=>{g===s&&(l=!0)}),u=!0,fi(d,n,r.state.value[e])}i||p||(r.state.value[e]={}),vt({});const y=i?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{wi(e,t)})}:hi,v=(t,n="")=>{if(gi in t)return t[mi]=n,t;const s=function(){oi(r);const n=Array.from(arguments),i=[],o=[];let a;fi(f,{args:n,name:s[mi],store:b,after:function(e){i.push(e)},onError:function(e){o.push(e)}});try{a=t.apply(this&&this.$id===e?this:b,n)}catch(e){throw fi(o,e),e}return a instanceof Promise?a.then(e=>(fi(i,e),e)).catch(e=>(fi(o,e),Promise.reject(e))):(fi(i,a),a)};return s[gi]=!0,s[mi]=n,s},b=ot({_p:r,$id:e,$onAction:di.bind(null,f),$patch:m,$reset:y,$subscribe(t,n={}){const s=di(d,t,n.detached,()=>i()),i=o.run(()=>xr(()=>r.state.value[e],r=>{("sync"===n.flush?u:l)&&t({storeId:e,type:li.direct,events:h},r)},wi({},c,n)));return s},$dispose:function(){o.stop(),d=[],f=[],r._s.delete(e)}});r._s.set(e,b);const w=(r._a&&r._a.runWithContext||pi)(()=>r._e.run(()=>(o=Y()).run(()=>t({action:v}))));for(const t in w){const n=w[t];if(yt(n)&&!xi(n)||lt(n))i||(p&&bi(n)&&(yt(n)?n.value=p[t]:yi(n,p[t])),r.state.value[e][t]=n);else if("function"==typeof n){const e=v(n,t);w[t]=e,a.actions[t]=n}}return wi(b,w),wi(ft(b),w),Object.defineProperty(b,"$state",{get:()=>r.state.value[e],set:e=>{m(t=>{wi(t,e)})}}),r._p.forEach(e=>{wi(b,o.run(()=>e({store:b,app:r._a,pinia:r,options:a})))}),p&&i&&n.hydrate&&n.hydrate(b.$state,p),l=!0,u=!0,b}function Ei(e,t,n){let r;const s="function"==typeof t;function i(n,i){const o=!(!ls()&&!Qn);return(n=n||(o?Jn(ai,null):null))&&oi(n),(n=ii)._s.has(e)||(s?_i(e,t,r,n):Si(e,r,n)),n._s.get(e)}return r=s?n:t,i.$id=e,i}const Ii={},Ci=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in Ii)return;Ii[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(n)for(let n=s.length-1;n>=0;n--){const r=s[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},Ti=new class{constructor(){this._q={},this._counter=0,this._fireAndForgetIds=new Set,"undefined"!=typeof window&&window.addEventListener("unhandledrejection",e=>{e.preventDefault()})}get isFileMakerEnvironment(){return"undefined"!=typeof window&&void 0!==window.FileMaker}async performScript(e,t="",n={}){var r,s,i;if("undefined"!=typeof window){let r=0;const s=20;for(;void 0===window.FileMaker&&r<s;)r+=1,await this._sleep(100);if(void 0!==window.FileMaker){const r=this._counter++,s={id:r,scriptParameter:t,scriptName:e};n&&n.fireAndForget&&this._fireAndForgetIds.add(String(r));try{return"function"==typeof window.FileMaker.PerformScriptWithOption?window.FileMaker.PerformScriptWithOption("_fmBridgit.webhook",JSON.stringify(s),"0"):"function"==typeof window.FileMaker.PerformScriptWithOptions?window.FileMaker.PerformScriptWithOptions("_fmBridgit.webhook",JSON.stringify(s),"0"):window.FileMaker.PerformScript("_fmBridgit.webhook",JSON.stringify(s)),this._registerPromise(r)}catch(e){throw console.error("Error performing FileMaker script:",e),e}}}console.log(`[FileMaker Mock] Script: ${e}`);let o=t;try{"string"==typeof t&&t.startsWith("{")&&(o=JSON.parse(t))}catch{}switch(e){case"API - Web Sync Inbound dispatcher {payload}":return console.log(`[FileMaker Mock] Processing ${(null==(r=null==o?void 0:o.updates)?void 0:r.length)||0} updates, ${(null==o?void 0:o.remaining)||0} remaining`),{success:!0,message:`Processed ${(null==(s=null==o?void 0:o.updates)?void 0:s.length)||0} updates successfully (mocked)`,data:{recordsProcessed:(null==(i=null==o?void 0:o.updates)?void 0:i.length)||0}};case"API - Upload Complete Callback":return{success:!0,message:"Upload completed (mocked)"};case"_fmBridgit.webhook":return{success:!0,message:"Webhook received (mocked)"};case"_fmBridgit.returnResult":return{success:!0,data:t};default:return console.log(`[FileMaker Mock] Unknown script: ${e}`),{success:!0,message:`Script ${e} executed (mocked)`}}}callback(e){try{const t=JSON.parse(e);t.error?t.error_message:t.success;let n=null;if(t.error)if("object"==typeof t.error)n={code:t.error.code??t.error.error??"1",message:t.error.message??t.error.error_message,raw:t.error};else if("string"==typeof t.error){let e=null;const r=null!=t.error?String(t.error).trim():"";if(r.startsWith("{")||r.startsWith("["))try{e=JSON.parse(r)}catch{}n=e&&"object"==typeof e?{code:e.code??e.error??t.error,message:e.message??e.error_message,raw:e}:{code:t.error,message:t.error_message}}else n={code:String(t.error),message:t.error_message};this._applyPromise(t.id,t.success,n)}catch{}}returnResult(e){return this.performScript("_fmBridgit.returnResult",JSON.stringify(e),{fireAndForget:!0})}_registerPromise(e){return new Promise((t,n)=>{this._q[e]={resolve:t,reject:n}})}_applyPromise(e,t,n){const r=this._q[e];r&&(t?r.resolve(t):n?this._fireAndForgetIds.has(String(e))?(this._fireAndForgetIds.delete(String(e)),r.resolve(!0)):r.reject(n):r.resolve(!0),delete this._q[e])}_sleep(e){return new Promise(t=>setTimeout(t,e))}testCallback(e,t=!0,n=null){const r={id:e,success:t?n||{message:"Test callback successful"}:null,error:t?null:n||"Test error"};this.callback(JSON.stringify(r))}};"undefined"!=typeof window&&(window.fmBridgit=Ti);var ki={};const Ai=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Di={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const s=e[t],i=t+1<e.length,o=i?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ai(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==i||null==o||null==a)throw new Ni;const c=s<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ni extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oi=function(e){return function(e){const t=Ai(e);return Di.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function Pi(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}const Mi=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return Di.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)},Ri=()=>{try{return Pi().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const e=ki.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||Mi()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Fi=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Ri())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Li=()=>{var e;return null===(e=Ri())||void 0===e?void 0:e.config};class Ui{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Vi(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function Bi(e){return(await fetch(e,{credentials:"include"})).ok}const ji={};let zi=!1;function $i(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Vi(window.location.host)||ji[e]===t||ji[e]||zi)return;function n(e){return`__firebase__banner__${e}`}ji[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ji))ji[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),a=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),l=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(a,o);const n=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{zi=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(l,c),t.append(l,i,a,n),document.body.appendChild(t)}s?(i.innerText="Preview backend disconnected.",l.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(l.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function qi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Gi(){var e;const t=null===(e=Ri())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function Ki(){return!Gi()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wi(){return!Gi()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Hi(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Qi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ji.prototype.create)}}class Ji{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace(Xi,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new Qi(r,o,n)}}const Xi=/\{\$([^}]+)}/g;function Yi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Zi(n)&&Zi(i)){if(!Yi(n,i))return!1}else if(n!==i)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Zi(e){return null!==e&&"object"==typeof e}function eo(e){return e&&e._delegate?e._delegate:e}class to{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const no="[DEFAULT]";class ro{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ui;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===no?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class so{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ro(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var io,oo;(oo=io||(io={}))[oo.DEBUG=0]="DEBUG",oo[oo.VERBOSE=1]="VERBOSE",oo[oo.INFO=2]="INFO",oo[oo.WARN=3]="WARN",oo[oo.ERROR=4]="ERROR",oo[oo.SILENT=5]="SILENT";const ao={debug:io.DEBUG,verbose:io.VERBOSE,info:io.INFO,warn:io.WARN,error:io.ERROR,silent:io.SILENT},co=io.INFO,lo={[io.DEBUG]:"log",[io.VERBOSE]:"log",[io.INFO]:"info",[io.WARN]:"warn",[io.ERROR]:"error"},uo=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=lo[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class ho{constructor(e){this.name=e,this._logLevel=co,this._logHandler=uo,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in io))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ao[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,io.DEBUG,...e),this._logHandler(this,io.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,io.VERBOSE,...e),this._logHandler(this,io.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,io.INFO,...e),this._logHandler(this,io.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,io.WARN,...e),this._logHandler(this,io.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,io.ERROR,...e),this._logHandler(this,io.ERROR,...e)}}let fo,po;const go=new WeakMap,mo=new WeakMap,yo=new WeakMap,vo=new WeakMap,bo=new WeakMap;let wo={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||yo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _o(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function xo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(po||(po=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Eo(this),t),_o(go.get(this))}:function(...t){return _o(e.apply(Eo(this),t))}:function(t,...n){const r=e.call(Eo(this),t,...n);return yo.set(r,t.sort?t.sort():[t]),_o(r)}}function So(e){return"function"==typeof e?xo(e):(e instanceof IDBTransaction&&function(e){if(mo.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});mo.set(e,t)}(e),t=e,(fo||(fo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,wo):e);var t}function _o(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(_o(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&go.set(t,e)}).catch(()=>{}),bo.set(t,e),t}(e);if(vo.has(e))return vo.get(e);const t=So(e);return t!==e&&(vo.set(e,t),bo.set(t,e)),t}const Eo=e=>bo.get(e),Io=["get","getKey","getAll","getAllKeys","count"],Co=["put","add","delete","clear"],To=new Map;function ko(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(To.get(t))return To.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Co.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Io.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,s?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&i.done]))[0]};return To.set(t,i),i}wo=(e=>({...e,get:(t,n,r)=>ko(t,n)||e.get(t,n,r),has:(t,n)=>!!ko(t,n)||e.has(t,n)}))(wo);class Ao{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Do="@firebase/app",No="0.13.2",Oo=new ho("@firebase/app"),Po="@firebase/app-compat",Mo="@firebase/analytics-compat",Ro="@firebase/analytics",Fo="@firebase/app-check-compat",Lo="@firebase/app-check",Uo="@firebase/auth",Vo="@firebase/auth-compat",Bo="@firebase/database",jo="@firebase/data-connect",zo="@firebase/database-compat",$o="@firebase/functions",qo="@firebase/functions-compat",Go="@firebase/installations",Ko="@firebase/installations-compat",Wo="@firebase/messaging",Ho="@firebase/messaging-compat",Qo="@firebase/performance",Jo="@firebase/performance-compat",Xo="@firebase/remote-config",Yo="@firebase/remote-config-compat",Zo="@firebase/storage",ea="@firebase/storage-compat",ta="@firebase/firestore",na="@firebase/ai",ra="@firebase/firestore-compat",sa="firebase",ia="[DEFAULT]",oa={[Do]:"fire-core",[Po]:"fire-core-compat",[Ro]:"fire-analytics",[Mo]:"fire-analytics-compat",[Lo]:"fire-app-check",[Fo]:"fire-app-check-compat",[Uo]:"fire-auth",[Vo]:"fire-auth-compat",[Bo]:"fire-rtdb",[jo]:"fire-data-connect",[zo]:"fire-rtdb-compat",[$o]:"fire-fn",[qo]:"fire-fn-compat",[Go]:"fire-iid",[Ko]:"fire-iid-compat",[Wo]:"fire-fcm",[Ho]:"fire-fcm-compat",[Qo]:"fire-perf",[Jo]:"fire-perf-compat",[Xo]:"fire-rc",[Yo]:"fire-rc-compat",[Zo]:"fire-gcs",[ea]:"fire-gcs-compat",[ta]:"fire-fst",[ra]:"fire-fst-compat",[na]:"fire-vertex","fire-js":"fire-js",[sa]:"fire-js-all"},aa=new Map,ca=new Map,la=new Map;function ua(e,t){try{e.container.addComponent(t)}catch(n){Oo.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ha(e){const t=e.name;if(la.has(t))return Oo.debug(`There were multiple attempts to register component ${t}.`),!1;la.set(t,e);for(const t of aa.values())ua(t,e);for(const t of ca.values())ua(t,e);return!0}function da(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const fa=new Ji("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class pa{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}function ga(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:ia,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!=typeof s||!s)throw fa.create("bad-app-name",{appName:String(s)});if(n||(n=Li()),!n)throw fa.create("no-options");const i=aa.get(s);if(i){if(Yi(n,i.options)&&Yi(r,i.config))return i;throw fa.create("duplicate-app",{appName:s})}const o=new so(s);for(const e of la.values())o.addComponent(e);const a=new pa(n,r,o);return aa.set(s,a),a}function ma(e,t,n){var r;let s=null!==(r=oa[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Oo.warn(e.join(" "))}ha(new to(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const ya="firebase-heartbeat-store";let va=null;function ba(){return va||(va=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=_o(o);return r&&o.addEventListener("upgradeneeded",e=>{r(_o(o.result),e.oldVersion,e.newVersion,_o(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ya)}catch(e){console.warn(e)}}}).catch(e=>{throw fa.create("idb-open",{originalErrorMessage:e.message})})),va}async function wa(e,t){try{const n=(await ba()).transaction(ya,"readwrite"),r=n.objectStore(ya);await r.put(t,xa(e)),await n.done}catch(e){if(e instanceof Qi)Oo.warn(e.message);else{const t=fa.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Oo.warn(t.message)}}}function xa(e){return`${e.name}!${e.options.appId}`}class Sa{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ea(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_a();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Oo.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=_a(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Ia(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ia(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Oi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Oo.warn(e),""}}}function _a(){return(new Date).toISOString().substring(0,10)}class Ea{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Hi()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ba()).transaction(ya),n=await t.objectStore(ya).get(xa(e));return await t.done,n}catch(e){if(e instanceof Qi)Oo.warn(e.message);else{const t=fa.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Oo.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ia(e){return Oi(JSON.stringify({version:2,heartbeats:e})).length}var Ca;Ca="",ha(new to("platform-logger",e=>new Ao(e),"PRIVATE")),ha(new to("heartbeat",e=>new Sa(e),"PRIVATE")),ma(Do,No,Ca),ma(Do,No,"esm2017"),ma("fire-js","");var Ta,ka,Aa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e){var t=s;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var a=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=i.add(r);0>=l.l(e)&&(s=s.add(n),i=l),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new g(s,t)}for(s=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(i=o(n)).j(t);h(l)||0<l.l(e);)l=(i=o(n-=r)).j(t);u(i)&&(i=c),s=s.add(i),e=f(e,l)}return new g(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],o=0;o<s;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var s=m(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var o=s+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var c=this.i(s)>>>16,f=65535&this.i(s),g=e.i(i)>>>16,m=65535&e.i(i);n[2*s+2*i]+=f*m,p(n,2*s+2*i),n[2*s+2*i+1]+=c*m,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*g,p(n,2*s+2*i+1),n[2*s+2*i+2]+=c*g,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ka=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),s=a,i=0;i<t.length;i+=8){var c=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+c),n);8>c?(c=o(Math.pow(n,c)),s=s.j(c).add(o(l))):s=(s=s.j(r)).add(o(l))}return s},Ta=r}).apply(void 0!==Aa?Aa:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Da,Na,Oa,Pa,Ma,Ra,Fa,La,Ua="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ua&&Ua];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(i(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let s=0;s<r;s++)e[t+s]=n[s]}else e.push(n)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){s.setTimeout(()=>{throw e},0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,k=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(N)}};var N=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(e){x(e)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function O(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(e){}return e}();function M(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:R[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,P);var R={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),U=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}j.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=$(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),Q={};function q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=Z(n),e&&e[L]?e.K(t,n,!!o(r)&&!!r.capture,s):function(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,c=X(e);if(c||(e[G]=c=new j(e)),(n=c.add(t,n,r,a,i)).proxy)return n;if(r=function(){const e=H;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)F||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function J(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)J(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=$(i=e.g[t],n,r,s))&&(B(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?(z(n,e),0==n.h&&(n.src=null,t[G]=null)):B(e)}}}function W(e){return e in Q?Q[e]:Q[e]="on"+e}function H(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function X(e){return(e=e[G])instanceof j?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function ee(){O.call(this),this.i=new j(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var s=t;S(t=new P(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ne(o,r,!0,t)&&s}if(s=ne(o=t.g=e,r,!0,t)&&s,s=ne(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ne(o=t.g=n[i],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&z(e.i,o),s=!1!==a.call(c,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,O),ee.prototype[L]=!0,ee.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){O.call(this),this.h=e,this.g={}}h(oe,O);var ae=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=s.JSON.stringify,ue=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){P.call(this,"d")}function ye(){P.call(this,"c")}h(me,P),h(ye,P);var ve={},be=null;function we(){return be=be||new ee}function Se(e){P.call(this,ve.La,e)}function _e(e){const t=we();te(t,new Se(t))}function xe(e,t){P.call(this,ve.STAT_EVENT,e),this.stat=t}function Ee(e){const t=we();te(t,new xe(t,e))}function Ie(e,t){P.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return le(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",h(Se,P),ve.STAT_EVENT="statevent",h(xe,P),ve.Ma="timingevent",h(Ie,P),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}h(Oe,de),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Ae=new Oe;var Me={},Re={};function Le(e,t,n){e.L=1,e.v=lt(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),je(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Fe,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ae[0]=s.toString()),s=ae);for(var i=0;i<s.length;i++){var o=q(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(l(e.ba,e),t)}function $e(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||sn(e.j,e)}function Qe(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Jt(n)}en(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(l(n.Za,n),6e3));if(1>=He(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=l[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=ln(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&($e(a),je(a)),r.g=o}else Zt(r);0<n.i.length&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||an(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?an(n,7):qt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}_e()}catch(e){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=zt(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=d||7==t||_e(),$e(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=$t(this.g);e="";var i=r.length,o=4==zt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qe(this),Ge(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Qe(this),Ge(this);break e}ke(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Re){4==d&&(this.s=4,Ee(14),n=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ee(15),ke(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}ke(this.i,this.l,e,null),qe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,Ee(11))}}else ke(this.i,this.l,a,"[Invalid Chunked Response]"),Qe(this),Ge(this)}else ke(this.i,this.l,a,null),qe(this,a);4==d&&Qe(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Qe(this),Ge(this)}}}catch(e){}},Pe.prototype.cancel=function(){this.J=!0,Qe(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Ee(17)),Qe(this),this.s=2,Ge(this)):ze(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,e=s.PerformanceNavigationTiming?0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function He(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),ot(this,t[4]),this.l=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function st(e){return new rt(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,mt)),e.i=new vt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function lt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,gt=/[#\?]/g,mt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wt(e,t){bt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return bt(e),t=xt(e,t),e.g.has(t)}function _t(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(e){}}function It(){this.g=new he}function Tt(e,t,n){const r=n||"";try{tt(e,function(e,n){let s=e;o(e)&&(s=le(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Ct(e){this.l=e.Ub||null,this.j=e.eb||!1}function kt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ft(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){bt(this),this.i=null,e=xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"==typeof e)St(this,e)&&(t=t.concat(this.g.get(xt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,St(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},h(Ct,de),Ct.prototype.g=function(){return new kt(this.l,this.j)},Ct.prototype.i=function(e){return function(){return e}}({}),h(kt,ee),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Nt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ee);var Mt=/^https?$/i,Rt=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Bt(e)}function Ut(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Vt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(nt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Mt.test(o?o.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<zt(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){jt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function jt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function qt(e){if(Kt(e),3==e.G){var t=e.U++,n=st(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Xt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=lt(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),je(t)}cn(e)}function Jt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Kt(e){Jt(e),e.u&&(s.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Wt(e){if(!We(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||D(),k||(C(),k=!0),A.add(t,e),e.B=0}}function Ht(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Xt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Yt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ye(e.h,n),Le(n,r,t)}function Xt(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&tt({},function(e,n){ct(t,n,e)})}function Yt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Tt(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||D(),k||(C(),k=!0),A.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=Te(l(e.Fa,e),on(e,e.v)),e.v++,0))}function tn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=lt(st(t)),n.m=null,n.P=!0,Ue(n,e)}function rn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=we(),new Ie(r,n)),Wt(e)}else Zt(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(He(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(l(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||it(r,"https"),lt(r),t?function(e,t){const n=new Ce;if(s.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),cn(e),Kt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function ln(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new rt(null);r&&it(o,r),t&&(o.g=t),i&&ot(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Xt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Ct({eb:n})):new Ft(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new mn(this)}function pn(e){me.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function mn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Lt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Rt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jt(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Lt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=ln(this,null,this.W),Wt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Pe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),S(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yt(this,s,t),ct(n=st(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Xt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Pt(n,this.m,i)),Ye(this.h,s),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),s.T=!0,Le(s,n,null)):Le(s,n,t),this.G=2}}else 3==this.G&&(e?Ht(this,e):0==this.i.length||We(this.h)||Ht(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Jt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),en(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){qt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=le(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&Wt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,fn.aa.N.call(this)},h(pn,me),h(gn,ye),h(mn,hn),mn.prototype.ua=function(){te(this.g,"a")},mn.prototype.ta=function(e){te(this.g,new pn(e))},mn.prototype.sa=function(e){te(this.g,new gn)},mn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,La=function(){return new dn},Fa=function(){return we()},Ra=ve,Ma={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Pa=De,Ne.COMPLETE="complete",Oa=Ne,pe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Na=pe,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Da=Ft}).apply(void 0!==Ua?Ua:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Va="@firebase/firestore",Ba="4.8.0";class ja{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ja.UNAUTHENTICATED=new ja(null),ja.GOOGLE_CREDENTIALS=new ja("google-credentials-uid"),ja.FIRST_PARTY=new ja("first-party-uid"),ja.MOCK_USER=new ja("mock-user");let za="11.10.0";const $a=new ho("@firebase/firestore");function qa(){return $a.logLevel}function Ga(e,...t){if($a.logLevel<=io.DEBUG){const n=t.map(Ha);$a.debug(`Firestore (${za}): ${e}`,...n)}}function Ka(e,...t){if($a.logLevel<=io.ERROR){const n=t.map(Ha);$a.error(`Firestore (${za}): ${e}`,...n)}}function Wa(e,...t){if($a.logLevel<=io.WARN){const n=t.map(Ha);$a.warn(`Firestore (${za}): ${e}`,...n)}}function Ha(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Qa(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ja(e,r,n)}function Ja(e,t,n){let r=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ka(r),new Error(r)}function Xa(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Ja(t,s,r)}function Ya(e,t){return e}const Za={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ec extends Qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ja.UNAUTHENTICATED))}shutdown(){}}class sc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ic{constructor(e){this.t=e,this.currentUser=ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xa(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tc,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Ga("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ga("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tc)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ga("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Xa("string"==typeof t.accessToken,31837,{l:t}),new nc(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xa(null===e||"string"==typeof e,2055,{h:e}),new ja(e)}}class oc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ja.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ac{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new oc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ja.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lc{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xa(void 0===this.o,3512);const n=e=>{null!=e.error&&Ga("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Ga("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ga("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ga("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Xa("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new cc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}function hc(){return new TextEncoder}class dc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=uc(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function fc(e,t){return e<t?-1:e>t?1:0}function pc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return fc(r,s);{const i=hc(),o=mc(i.encode(gc(e,n)),i.encode(gc(t,n)));return 0!==o?o:fc(r,s)}}n+=r>65535?2:1}return fc(e.length,t.length)}function gc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function mc(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return fc(e[n],t[n]);return fc(e.length,t.length)}function yc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function vc(e){return e+"\0"}const bc="__name__";class wc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qa(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Qa(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=wc.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return fc(e.length,t.length)}static compareSegments(e,t){const n=wc.isNumericId(e),r=wc.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?wc.extractNumericId(e).compare(wc.extractNumericId(t)):pc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class xc extends wc{construct(e,t,n){return new xc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ec(Za.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new xc(t)}static emptyPath(){return new xc([])}}const Sc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _c extends wc{construct(e,t,n){return new _c(e,t,n)}static isValidIdentifier(e){return Sc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_c.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===bc}static keyField(){return new _c([bc])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new ec(Za.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ec(Za.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ec(Za.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new ec(Za.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _c(t)}static emptyPath(){return new _c([])}}class Ec{constructor(e){this.path=e}static fromPath(e){return new Ec(xc.fromString(e))}static fromName(e){return new Ec(xc.fromString(e).popFirst(5))}static empty(){return new Ec(xc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ec(new xc(e.slice()))}}function Ic(e,t,n){if(!n)throw new ec(Za.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Cc(e,t,n,r){if(!0===t&&!0===r)throw new ec(Za.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Tc(e){if(!Ec.isDocumentKey(e))throw new ec(Za.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function kc(e){if(Ec.isDocumentKey(e))throw new ec(Za.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ac(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Dc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Qa(12329,{type:typeof e})}function Nc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ec(Za.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dc(e);throw new ec(Za.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oc(e,t){const n={typeString:e};return t&&(n.value=t),n}function Pc(e,t){if(!Ac(e))throw new ec(Za.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ec(Za.INVALID_ARGUMENT,n);return!0}const Mc=-62135596800,Rc=1e6;class Fc{static now(){return Fc.fromMillis(Date.now())}static fromDate(e){return Fc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Rc);return new Fc(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ec(Za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ec(Za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mc)throw new ec(Za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ec(Za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rc}_compareTo(e){return this.seconds===e.seconds?fc(this.nanoseconds,e.nanoseconds):fc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fc._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pc(e,Fc._jsonSchema))return new Fc(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fc._jsonSchemaVersion="firestore/timestamp/1.0",Fc._jsonSchema={type:Oc("string",Fc._jsonSchemaVersion),seconds:Oc("number"),nanoseconds:Oc("number")};class Lc{static fromTimestamp(e){return new Lc(e)}static min(){return new Lc(new Fc(0,0))}static max(){return new Lc(new Fc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Vc(e){return e.fields.find(e=>2===e.kind)}function Bc(e){return e.fields.filter(e=>2!==e.kind)}Uc.UNKNOWN_ID=-1;class jc{constructor(e,t){this.fieldPath=e,this.kind=t}}class zc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zc(0,qc.min())}}function $c(e){return new qc(e.readTime,e.key,-1)}class qc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new qc(Lc.min(),Ec.empty(),-1)}static max(){return new qc(Lc.max(),Ec.empty(),-1)}}function Gc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ec.comparator(e.documentKey,t.documentKey),0!==n?n:fc(e.largestBatchId,t.largestBatchId))}const Kc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Hc(e){if(e.code!==Za.FAILED_PRECONDITION||e.message!==Kc)throw e;Ga("LocalStore","Unexpectedly lost primary lease")}class Qc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qa(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Qc?t:Qc.resolve(t)}catch(e){return Qc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Qc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Qc.reject(t)}static resolve(e){return new Qc((t,n)=>{t(e)})}static reject(e){return new Qc((t,n)=>{n(e)})}static waitFor(e){return new Qc((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Qc.resolve(!1);for(const n of e)t=t.next(e=>e?Qc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Qc((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next(e=>{i[c]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Qc((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}const Jc="SimpleDb";class Xc{static open(e,t,n,r){try{return new Xc(t,e.transaction(r,n))}catch(e){throw new tl(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new tc,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new tl(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=ol(t.target.error);this.S.reject(new tl(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ga(Jc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rl(t)}}class Yc{static delete(e){return Ga(Jc,"Removing database:",e),sl(Pi().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Hi())return!1;if(Yc.F())return!0;const e=qi(),t=Yc.M(e),n=0<t&&t<10,r=Zc(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===Yc.M(qi())&&Ka("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ga(Jc,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new tl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ec(Za.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ec(Za.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new tl(e,r))},r.onupgradeneeded=e=>{Ga(Jc,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.B.q(t,r.transaction,e.oldVersion,this.version).next(()=>{Ga(Jc,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const t=e.target;this.L=t.version},{passive:!0})),this.db.addEventListener("versionchange",e=>{var t;null===e.newVersion&&(Wa('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),null===(t=this.databaseDeletedListener)||void 0===t||t.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.k(e);const t=Xc.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.v(),e)).catch(e=>(t.abort(e),Qc.reject(e))).toPromise();return i.catch(()=>{}),await t.D,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(Ga(Jc,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Zc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class el{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return sl(this.$.delete())}}class tl extends ec{constructor(e,t){super(Za.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nl(e){return"IndexedDbTransactionError"===e.name}class rl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ga(Jc,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ga(Jc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),sl(n)}add(e){return Ga(Jc,"ADD",this.store.name,e,e),sl(this.store.add(e))}get(e){return sl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ga(Jc,"GET",this.store.name,e,t),t))}delete(e){return Ga(Jc,"DELETE",this.store.name,e),sl(this.store.delete(e))}count(){return Ga(Jc,"COUNT",this.store.name),sl(this.store.count())}j(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Qc((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.J(e,(e,n)=>{t.push(n)}).next(()=>t)}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Qc((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Y(e,t){Ga(Jc,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Z=!1;const r=this.cursor(n);return this.J(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.J(r,t)}ee(e){const t=this.cursor({});return new Qc((n,r)=>{t.onerror=e=>{const t=ol(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}J(e,t){const n=[];return new Qc((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new el(s),o=t(s.primaryKey,s.value,i);if(o instanceof Qc){const e=o.catch(e=>(i.done(),Qc.reject(e)));n.push(e)}i.isDone?r():null===i.W?s.continue():s.continue(i.W)}}).next(()=>Qc.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sl(e){return new Qc((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ol(e.target.error);n(t)}})}let il=!1;function ol(e){const t=Yc.M(qi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ec("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return il||(il=!0,setTimeout(()=>{throw e},0)),e}}return e}const al="IndexBackfiller";class cl{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ne(e){Ga(al,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.te.re();Ga(al,`Documents written: ${e}`)}catch(e){nl(e)?Ga(al,"Ignoring IndexedDB error during index backfill: ",e):await Hc(e)}await this.ne(6e4)})}}class ll{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))}ie(e,t){const n=new Set;let r=t,s=!0;return Qc.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return Ga(al,`Processing collection: ${t}`),this.se(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}se(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(r,n)).next(n=>(Ga(al,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}oe(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=$c(t);Gc(r,n)>0&&(n=r)}),new qc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ul{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ul.ue=-1;const hl=-1;function dl(e){return null==e}function fl(e){return 0===e&&1/e==-1/0}const pl="";function gl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=yl(t)),t=ml(e.get(n),t);return yl(t)}function ml(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case pl:n+="";break;default:n+=r}}return n}function yl(e){return e+pl+""}function vl(e){const t=e.length;if(Xa(t>=2,64408,{path:e}),2===t)return Xa(e.charAt(0)===pl&&""===e.charAt(1),56145,{path:e}),xc.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf(pl,i);switch((t<0||t>n)&&Qa(50515,{path:e}),e.charAt(t+1)){case"":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"":s+=e.substring(i,t),s+="\0";break;case"":s+=e.substring(i,t+1);break;default:Qa(61167,{path:e})}i=t+2}return new xc(r)}const bl="remoteDocuments",wl="owner",xl="owner",Sl="mutationQueues",_l="mutations",El="batchId",Il="userMutationsIndex",Cl=["userId","batchId"];function Tl(e,t){return[e,gl(t)]}function kl(e,t,n){return[e,gl(t),n]}const Al={},Dl="documentMutations",Nl="remoteDocumentsV14",Ol=["prefixPath","collectionGroup","readTime","documentId"],Pl="documentKeyIndex",Ml=["prefixPath","collectionGroup","documentId"],Rl="collectionGroupIndex",Fl=["collectionGroup","readTime","prefixPath","documentId"],Ll="remoteDocumentGlobal",Ul="remoteDocumentGlobalKey",Vl="targets",Bl="queryTargetsIndex",jl=["canonicalId","targetId"],zl="targetDocuments",$l=["targetId","path"],ql="documentTargetsIndex",Gl=["path","targetId"],Kl="targetGlobalKey",Wl="targetGlobal",Hl="collectionParents",Ql=["collectionId","parent"],Jl="clientMetadata",Xl="bundles",Yl="namedQueries",Zl="indexConfiguration",eu="collectionGroupIndex",tu="indexState",nu=["indexId","uid"],ru="sequenceNumberIndex",su=["uid","sequenceNumber"],iu="indexEntries",ou=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],au="documentKeyIndex",cu=["indexId","uid","orderedDocumentKey"],lu="documentOverlays",uu=["userId","collectionPath","documentId"],hu="collectionPathOverlayIndex",du=["userId","collectionPath","largestBatchId"],fu="collectionGroupOverlayIndex",pu=["userId","collectionGroup","largestBatchId"],gu="globals",mu=[Sl,_l,Dl,bl,Vl,wl,Wl,zl,Jl,Ll,Hl,Xl,Yl],yu=[...mu,lu],vu=[Sl,_l,Dl,Nl,Vl,wl,Wl,zl,Jl,Ll,Hl,Xl,Yl,lu],bu=vu,wu=[...bu,Zl,tu,iu],xu=wu,Su=[...wu,gu],_u=Su;class Eu extends Wc{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Iu(e,t){const n=Ya(e);return Yc.N(n.ce,t)}function Cu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ku(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Au{constructor(e,t){this.comparator=e,this.root=t||Nu.EMPTY}insert(e,t){return new Au(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nu.BLACK,null,null))}remove(e){return new Au(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nu{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Nu.RED,this.left=null!=r?r:Nu.EMPTY,this.right=null!=s?s:Nu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Nu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Nu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qa(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qa(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qa(27949);return e+(this.isRed()?0:1)}}Nu.EMPTY=null,Nu.RED=!0,Nu.BLACK=!1,Nu.EMPTY=new class{constructor(){this.size=0}get key(){throw Qa(57766)}get value(){throw Qa(16141)}get color(){throw Qa(16727)}get left(){throw Qa(29726)}get right(){throw Qa(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Nu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ou{constructor(e){this.comparator=e,this.data=new Au(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pu(this.data.getIterator())}getIteratorFrom(e){return new Pu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ou))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ou(this.comparator);return t.data=e,t}}class Pu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mu(e){return e.hasNext()?e.getNext():void 0}class Ru{constructor(e){this.fields=e,e.sort(_c.comparator)}static empty(){return new Ru([])}unionWith(e){let t=new Ou(_c.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Ru(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Fu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fu("Invalid base64 string: "+e):e}}(e);return new Lu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Lu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lu.EMPTY_BYTE_STRING=new Lu("");const Uu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vu(e){if(Xa(!!e,39018),"string"==typeof e){let t=0;const n=Uu.exec(e);if(Xa(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Bu(e.seconds),nanos:Bu(e.nanos)}}function Bu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ju(e){return"string"==typeof e?Lu.fromBase64String(e):Lu.fromUint8Array(e)}const zu="server_timestamp",$u="__type__",qu="__previous_value__",Gu="__local_write_time__";function Ku(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[$u])||void 0===n?void 0:n.stringValue)===zu}function Wu(e){const t=e.mapValue.fields[qu];return Ku(t)?Wu(t):t}function Hu(e){const t=Vu(e.mapValue.fields[Gu].timestampValue);return new Fc(t.seconds,t.nanos)}class Qu{constructor(e,t,n,r,s,i,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=l}}const Ju="(default)";class Xu{constructor(e,t){this.projectId=e,this.database=t||Ju}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===Ju}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}const Yu="__type__",Zu="__max__",eh={mapValue:{fields:{__type__:{stringValue:Zu}}}},th="__vector__",nh="value",rh={nullValue:"NULL_VALUE"};function sh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ku(e)?4:xh(e)?9007199254740991:bh(e)?10:11:Qa(28295,{value:e})}function ih(e,t){if(e===t)return!0;const n=sh(e);if(n!==sh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hu(e).isEqual(Hu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Vu(e.timestampValue),r=Vu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,ju(e.bytesValue).isEqual(ju(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bu(e.geoPointValue.latitude)===Bu(t.geoPointValue.latitude)&&Bu(e.geoPointValue.longitude)===Bu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bu(e.integerValue)===Bu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Bu(e.doubleValue),r=Bu(t.doubleValue);return n===r?fl(n)===fl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yc(e.arrayValue.values||[],t.arrayValue.values||[],ih);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cu(n)!==Cu(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!ih(n[e],r[e])))return!1;return!0}(e,t);default:return Qa(52216,{left:e})}var r}function oh(e,t){return void 0!==(e.values||[]).find(e=>ih(e,t))}function ah(e,t){if(e===t)return 0;const n=sh(e),r=sh(t);if(n!==r)return fc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Bu(e.integerValue||e.doubleValue),r=Bu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ch(e.timestampValue,t.timestampValue);case 4:return ch(Hu(e),Hu(t));case 5:return pc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ju(e),r=ju(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=fc(n[e],r[e]);if(0!==t)return t}return fc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=fc(Bu(e.latitude),Bu(t.latitude));return 0!==n?n:fc(Bu(e.longitude),Bu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return lh(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const o=e.fields||{},a=t.fields||{},c=null===(n=o[nh])||void 0===n?void 0:n.arrayValue,l=null===(r=a[nh])||void 0===r?void 0:r.arrayValue,u=fc((null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0,(null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:lh(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===eh.mapValue&&t===eh.mapValue)return 0;if(e===eh.mapValue)return 1;if(t===eh.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let e=0;e<r.length&&e<i.length;++e){const t=pc(r[e],i[e]);if(0!==t)return t;const o=ah(n[r[e]],s[i[e]]);if(0!==o)return o}return fc(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Qa(23264,{le:n})}}function ch(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fc(e,t);const n=Vu(e),r=Vu(t),s=fc(n.seconds,r.seconds);return 0!==s?s:fc(n.nanos,r.nanos)}function lh(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=ah(n[e],r[e]);if(t)return t}return fc(n.length,r.length)}function uh(e){return hh(e)}function hh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Vu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ju(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Ec.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hh(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${hh(e.fields[s])}`;return n+"}"}(e.mapValue):Qa(61005,{value:e})}function dh(e){switch(sh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Wu(e);return t?16+dh(t):16;case 5:return 2*e.stringValue.length;case 6:return ju(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+dh(t),0);case 10:case 11:return function(e){let t=0;return Tu(e.fields,(e,n)=>{t+=e.length+dh(n)}),t}(e.mapValue);default:throw Qa(13486,{value:e})}}function fh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ph(e){return!!e&&"integerValue"in e}function gh(e){return!!e&&"arrayValue"in e}function mh(e){return!!e&&"nullValue"in e}function yh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vh(e){return!!e&&"mapValue"in e}function bh(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Yu])||void 0===n?void 0:n.stringValue)===th}function wh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Tu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=wh(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=wh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xh(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Zu}const Sh={mapValue:{fields:{[Yu]:{stringValue:th},[nh]:{arrayValue:{}}}}};function _h(e){return"nullValue"in e?rh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?fh(Xu.empty(),Ec.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?bh(e)?Sh:{mapValue:{}}:Qa(35942,{value:e})}function Eh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?fh(Xu.empty(),Ec.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Sh:"mapValue"in e?bh(e)?{mapValue:{}}:eh:Qa(61959,{value:e})}function Ih(e,t){const n=ah(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ch(e,t){const n=ah(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Th{constructor(e){this.value=e}static empty(){return new Th({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wh(t)}setAll(e){let t=_c.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=wh(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ih(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];vh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Tu(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new Th(wh(this.value))}}function kh(e){const t=[];return Tu(e.fields,(e,n)=>{const r=new _c([e]);if(vh(n)){const e=kh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ru(t)}class Ah{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ah(e,0,Lc.min(),Lc.min(),Lc.min(),Th.empty(),0)}static newFoundDocument(e,t,n,r){return new Ah(e,1,t,Lc.min(),n,r,0)}static newNoDocument(e,t){return new Ah(e,2,t,Lc.min(),Lc.min(),Th.empty(),0)}static newUnknownDocument(e,t){return new Ah(e,3,t,Lc.min(),Lc.min(),Th.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Th.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Th.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ah&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ah(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dh{constructor(e,t){this.position=e,this.inclusive=t}}function Nh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?Ec.comparator(Ec.fromName(o.referenceValue),n.key):ah(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Oh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ih(e.position[n],t.position[n]))return!1;return!0}class Ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Rh{}class Fh extends Rh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Kh(e,t,n):"array-contains"===t?new Jh(e,n):"in"===t?new Xh(e,n):"not-in"===t?new Yh(e,n):"array-contains-any"===t?new Zh(e,n):new Fh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Wh(e,n):new Hh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ah(t,this.value)):null!==t&&sh(this.value)===sh(t)&&this.matchesComparison(ah(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qa(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lh extends Rh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Lh(e,t)}matches(e){return Uh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Uh(e){return"and"===e.op}function Vh(e){return"or"===e.op}function Bh(e){return jh(e)&&Uh(e)}function jh(e){for(const t of e.filters)if(t instanceof Lh)return!1;return!0}function zh(e){if(e instanceof Fh)return e.field.canonicalString()+e.op.toString()+uh(e.value);if(Bh(e))return e.filters.map(e=>zh(e)).join(",");{const t=e.filters.map(e=>zh(e)).join(",");return`${e.op}(${t})`}}function $h(e,t){return e instanceof Fh?(n=e,(r=t)instanceof Fh&&n.op===r.op&&n.field.isEqual(r.field)&&ih(n.value,r.value)):e instanceof Lh?function(e,t){return t instanceof Lh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&$h(n,t.filters[r]),!0)}(e,t):void Qa(19439);var n,r}function qh(e,t){const n=e.filters.concat(t);return Lh.create(n,e.op)}function Gh(e){return e instanceof Fh?`${(t=e).field.canonicalString()} ${t.op} ${uh(t.value)}`:e instanceof Lh?function(e){return e.op.toString()+" {"+e.getFilters().map(Gh).join(" ,")+"}"}(e):"Filter";var t}class Kh extends Fh{constructor(e,t,n){super(e,t,n),this.key=Ec.fromName(n.referenceValue)}matches(e){const t=Ec.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wh extends Fh{constructor(e,t){super(e,"in",t),this.keys=Qh("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hh extends Fh{constructor(e,t){super(e,"not-in",t),this.keys=Qh("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ec.fromName(e.referenceValue))}class Jh extends Fh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gh(t)&&oh(t.arrayValue,this.value)}}class Xh extends Fh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oh(this.value.arrayValue,t)}}class Yh extends Fh{constructor(e,t){super(e,"not-in",t)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!oh(this.value.arrayValue,t)}}class Zh extends Fh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>oh(this.value.arrayValue,e))}}class ed{constructor(e,t=null,n=[],r=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Pe=null}}function td(e,t=null,n=[],r=[],s=null,i=null,o=null){return new ed(e,t,n,r,s,i,o)}function nd(e){const t=Ya(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>zh(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),dl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>uh(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>uh(e)).join(",")),t.Pe=e}return t.Pe}function rd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$h(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oh(e.startAt,t.startAt)&&Oh(e.endAt,t.endAt)}function sd(e){return Ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function id(e,t){return e.filters.filter(e=>e instanceof Fh&&e.field.isEqual(t))}function od(e,t,n){let r=rh,s=!0;for(const n of id(e,t)){let e=rh,t=!0;switch(n.op){case"<":case"<=":e=_h(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=rh}Ih({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Ih({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function ad(e,t,n){let r=eh,s=!0;for(const n of id(e,t)){let e=eh,t=!0;switch(n.op){case">=":case">":e=Eh(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=eh}Ch({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Ch({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class cd{constructor(e,t=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ld(e){return new cd(e)}function ud(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hd(e){return null!==e.collectionGroup}function dd(e){const t=Ya(e);if(null===t.Te){t.Te=[];const e=new Set;for(const n of t.explicitOrderBy)t.Te.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Ou(_c.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Ph(r,n))}),e.has(_c.keyField().canonicalString())||t.Te.push(new Ph(_c.keyField(),n))}return t.Te}function fd(e){const t=Ya(e);return t.Ie||(t.Ie=function(e,t){if("F"===e.limitType)return td(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ph(e.field,t)});const n=e.endAt?new Dh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Dh(e.startAt.position,e.startAt.inclusive):null;return td(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,dd(e))),t.Ie}function pd(e,t){const n=e.filters.concat([t]);return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gd(e,t,n){return new cd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function md(e,t){return rd(fd(e),fd(t))&&e.limitType===t.limitType}function yd(e){return`${nd(fd(e))}|lt:${e.limitType}`}function vd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Gh(e)).join(", ")}]`),dl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>uh(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>uh(e)).join(",")),`Target(${t})`}(fd(e))}; limitType=${e.limitType})`}function bd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ec.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of dd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=Nh(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,dd(n),r)||n.endAt&&!function(e,t,n){const r=Nh(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,dd(n),r)));var n,r}function wd(e){return(t,n)=>{let r=!1;for(const s of dd(e)){const e=xd(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function xd(e,t,n){const r=e.field.isKeyField()?Ec.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?ah(r,s):Qa(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qa(19790,{direction:e.dir})}}class Sd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return ku(this.inner)}size(){return this.innerSize}}const _d=new Au(Ec.comparator);function Ed(){return _d}const Id=new Au(Ec.comparator);function Cd(...e){let t=Id;for(const n of e)t=t.insert(n.key,n);return t}function Td(e){let t=Id;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function kd(){return Dd()}function Ad(){return Dd()}function Dd(){return new Sd(e=>e.toString(),(e,t)=>e.isEqual(t))}const Nd=new Au(Ec.comparator),Od=new Ou(Ec.comparator);function Pd(...e){let t=Od;for(const n of e)t=t.add(n);return t}const Md=new Ou(fc);function Rd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fl(t)?"-0":t}}function Fd(e){return{integerValue:""+e}}function Ld(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!fl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Fd(t):Rd(e,t)}class Ud{constructor(){this._=void 0}}function Vd(e,t,n){return e instanceof zd?function(e,t){const n={fields:{[$u]:{stringValue:zu},[Gu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ku(t)&&(t=Wu(t)),t&&(n.fields[qu]=t),{mapValue:n}}(n,t):e instanceof $d?qd(e,t):e instanceof Gd?Kd(e,t):function(e,t){const n=jd(e,t),r=Hd(n)+Hd(e.Ee);return ph(n)&&ph(e.Ee)?Fd(r):Rd(e.serializer,r)}(e,t)}function Bd(e,t,n){return e instanceof $d?qd(e,t):e instanceof Gd?Kd(e,t):n}function jd(e,t){return e instanceof Wd?ph(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class zd extends Ud{}class $d extends Ud{constructor(e){super(),this.elements=e}}function qd(e,t){const n=Qd(t);for(const t of e.elements)n.some(e=>ih(e,t))||n.push(t);return{arrayValue:{values:n}}}class Gd extends Ud{constructor(e){super(),this.elements=e}}function Kd(e,t){let n=Qd(t);for(const t of e.elements)n=n.filter(e=>!ih(e,t));return{arrayValue:{values:n}}}class Wd extends Ud{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Hd(e){return Bu(e.integerValue||e.doubleValue)}function Qd(e){return gh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Jd{constructor(e,t){this.field=e,this.transform=t}}class Xd{constructor(e,t){this.version=e,this.transformResults=t}}class Yd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yd}static exists(e){return new Yd(void 0,e)}static updateTime(e){return new Yd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ef{}function tf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new df(e.key,Yd.none()):new af(e.key,e.data,Yd.none());{const n=e.data,r=Th.empty();let s=new Ou(_c.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new cf(e.key,r,new Ru(s.toArray()),Yd.none())}}function nf(e,t,n){var r;e instanceof af?function(e,t,n){const r=e.value.clone(),s=uf(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cf?function(e,t,n){if(!Zd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=uf(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(lf(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function rf(e,t,n,r){return e instanceof af?function(e,t,n,r){if(!Zd(e.precondition,t))return n;const s=e.value.clone(),i=hf(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof cf?function(e,t,n,r){if(!Zd(e.precondition,t))return n;const s=hf(e.fieldTransforms,r,t),i=t.data;return i.setAll(lf(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(s=t,i=n,Zd(e.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):i);var s,i}function sf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=jd(r.transform,e||null);null!=s&&(null===n&&(n=Th.empty()),n.set(r.field,s))}return n||null}function of(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&yc(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof $d&&r instanceof $d||n instanceof Gd&&r instanceof Gd?yc(n.elements,r.elements,ih):n instanceof Wd&&r instanceof Wd?ih(n.Ee,r.Ee):n instanceof zd&&r instanceof zd);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class af extends ef{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cf extends ef{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function uf(e,t,n){const r=new Map;Xa(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Bd(o,a,n[s]))}return r}function hf(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Vd(e,i,t))}return r}class df extends ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ff extends ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&nf(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ad();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=tf(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(Lc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pd())}isEqual(e){return this.batchId===e.batchId&&yc(this.mutations,e.mutations,(e,t)=>of(e,t))&&yc(this.baseMutations,e.baseMutations,(e,t)=>of(e,t))}}class gf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Xa(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let r=Nd;const s=e.mutations;for(let e=0;e<s.length;e++)r=r.insert(s[e].key,n[e].version);return new gf(e,t,n,r)}}class mf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yf{constructor(e,t){this.count=e,this.unchangedNames=t}}var vf,bf;function wf(e){if(void 0===e)return Ka("GRPC error has no .code"),Za.UNKNOWN;switch(e){case vf.OK:return Za.OK;case vf.CANCELLED:return Za.CANCELLED;case vf.UNKNOWN:return Za.UNKNOWN;case vf.DEADLINE_EXCEEDED:return Za.DEADLINE_EXCEEDED;case vf.RESOURCE_EXHAUSTED:return Za.RESOURCE_EXHAUSTED;case vf.INTERNAL:return Za.INTERNAL;case vf.UNAVAILABLE:return Za.UNAVAILABLE;case vf.UNAUTHENTICATED:return Za.UNAUTHENTICATED;case vf.INVALID_ARGUMENT:return Za.INVALID_ARGUMENT;case vf.NOT_FOUND:return Za.NOT_FOUND;case vf.ALREADY_EXISTS:return Za.ALREADY_EXISTS;case vf.PERMISSION_DENIED:return Za.PERMISSION_DENIED;case vf.FAILED_PRECONDITION:return Za.FAILED_PRECONDITION;case vf.ABORTED:return Za.ABORTED;case vf.OUT_OF_RANGE:return Za.OUT_OF_RANGE;case vf.UNIMPLEMENTED:return Za.UNIMPLEMENTED;case vf.DATA_LOSS:return Za.DATA_LOSS;default:return Qa(39323,{code:e})}}(bf=vf||(vf={}))[bf.OK=0]="OK",bf[bf.CANCELLED=1]="CANCELLED",bf[bf.UNKNOWN=2]="UNKNOWN",bf[bf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bf[bf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bf[bf.NOT_FOUND=5]="NOT_FOUND",bf[bf.ALREADY_EXISTS=6]="ALREADY_EXISTS",bf[bf.PERMISSION_DENIED=7]="PERMISSION_DENIED",bf[bf.UNAUTHENTICATED=16]="UNAUTHENTICATED",bf[bf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bf[bf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bf[bf.ABORTED=10]="ABORTED",bf[bf.OUT_OF_RANGE=11]="OUT_OF_RANGE",bf[bf.UNIMPLEMENTED=12]="UNIMPLEMENTED",bf[bf.INTERNAL=13]="INTERNAL",bf[bf.UNAVAILABLE=14]="UNAVAILABLE",bf[bf.DATA_LOSS=15]="DATA_LOSS";const xf=new Ta([4294967295,4294967295],0);function Sf(e){const t=hc().encode(e),n=new ka;return n.update(t),new Uint8Array(n.digest())}function _f(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ta([n,r],0),new Ta([s,i],0)]}class Ef{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new If(`Invalid padding: ${t}`);if(n<0)throw new If(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new If(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new If(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ta.fromNumber(this.fe)}pe(e,t,n){let r=e.add(t.multiply(Ta.fromNumber(n)));return 1===r.compare(xf)&&(r=new Ta([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=Sf(e),[n,r]=_f(t);for(let e=0;e<this.hashCount;e++){const t=this.pe(n,r,e);if(!this.ye(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ef(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.fe)return;const t=Sf(e),[n,r]=_f(t);for(let e=0;e<this.hashCount;e++){const t=this.pe(n,r,e);this.we(t)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class If extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cf{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Tf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Cf(Lc.min(),r,new Au(fc),Ed(),Pd())}}class Tf{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Tf(n,t,Pd(),Pd(),Pd())}}class kf{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=r}}class Af{constructor(e,t){this.targetId=e,this.De=t}}class Df{constructor(e,t,n=Lu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Nf{constructor(){this.ve=0,this.Ce=Mf(),this.Fe=Lu.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pd(),t=Pd(),n=Pd();return this.Ce.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qa(38017,{changeType:s})}}),new Tf(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=Mf()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xa(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Of{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ed(),this.je=Pf(),this.Je=Pf(),this.He=new Au(fc)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:Qa(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,n)=>{this.nt(n)&&t(n)})}it(e){const t=e.targetId,n=e.De.count,r=this.st(t);if(r){const s=r.target;if(sd(s))if(0===n){const e=new Ec(s.path);this.Xe(t,e,Ah.newNoDocument(e,Lc.min()))}else Xa(1===n,20013,{expectedCount:n});else{const r=this.ot(t);if(r!==n){const n=this._t(e),s=n?this.ut(n,e,r):1;if(0!==s){this.rt(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=ju(n).toUint8Array()}catch(e){if(e instanceof Fu)return Wa("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Ef(i,r,s)}catch(e){return Wa(e instanceof If?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.fe?null:o}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.We.lt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Xe(t,n,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((n,r)=>{const s=this.st(r);if(s){if(n.current&&sd(s.target)){const t=new Ec(s.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Ah.newNoDocument(t,e))}n.Ne&&(t.set(r,n.Le()),n.ke())}});let n=Pd();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ze.forEach((t,n)=>n.setReadTime(e));const r=new Cf(e,t,this.He,this.ze,n);return this.ze=Ed(),this.je=Pf(),this.Je=Pf(),this.He=new Au(fc),r}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Nf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ou(fc),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ou(fc),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||Ga("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Nf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new Au(Ec.comparator)}function Mf(){return new Au(Ec.comparator)}const Rf={asc:"ASCENDING",desc:"DESCENDING"},Ff={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lf={and:"AND",or:"OR"};class Uf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vf(e,t){return e.useProto3Json||dl(t)?t:{value:t}}function Bf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zf(e,t){return Bf(e,t.toTimestamp())}function $f(e){return Xa(!!e,49232),Lc.fromTimestamp(function(e){const t=Vu(e);return new Fc(t.seconds,t.nanos)}(e))}function qf(e,t){return Gf(e,t).canonicalString()}function Gf(e,t){const n=(r=e,new xc(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Kf(e){const t=xc.fromString(e);return Xa(fp(t),10190,{key:t.toString()}),t}function Wf(e,t){return qf(e.databaseId,t.path)}function Hf(e,t){const n=Kf(t);if(n.get(1)!==e.databaseId.projectId)throw new ec(Za.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ec(Za.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ec(Yf(n))}function Qf(e,t){return qf(e.databaseId,t)}function Jf(e){const t=Kf(e);return 4===t.length?xc.emptyPath():Yf(t)}function Xf(e){return new xc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yf(e){return Xa(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Zf(e,t,n){return{name:Wf(e,t),fields:n.value.mapValue.fields}}function ep(e,t){let n;if(t instanceof af)n={update:Zf(e,t.key,t.value)};else if(t instanceof df)n={delete:Wf(e,t.key)};else if(t instanceof cf)n={update:Zf(e,t.key,t.data),updateMask:dp(t.fieldMask)};else{if(!(t instanceof ff))return Qa(16599,{Rt:t.type});n={verify:Wf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof zd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $d)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wd)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw Qa(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(s=t.precondition).updateTime?{updateTime:zf(r,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qa(27497))),n;var r,s}function tp(e,t){const n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Yd.updateTime($f(s.updateTime)):void 0!==s.exists?Yd.exists(s.exists):Yd.none():Yd.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)Xa("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new zd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new $d(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Gd(e)}else"increment"in t?n=new Wd(e,t.increment):Qa(16584,{proto:t});const r=_c.fromServerFormat(t.fieldPath);return new Jd(r,n)}(e,t)):[];var s;if(t.update){t.update.name;const s=Hf(e,t.update.name),i=new Th({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ru(t.map(e=>_c.fromServerFormat(e)))}(t.updateMask);return new cf(s,i,e,n,r)}return new af(s,i,n,r)}if(t.delete){const r=Hf(e,t.delete);return new df(r,n)}if(t.verify){const r=Hf(e,t.verify);return new ff(r,n)}return Qa(1463,{proto:t})}function np(e,t){return{documents:[Qf(e,t.path)]}}function rp(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qf(e,s);const i=function(e){if(0!==e.length)return hp(Lh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:lp((t=e).field),direction:op(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vf(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:n,parent:s};var c}function sp(e){let t=Jf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xa(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=ip(e);return t instanceof Lh&&Bh(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new Ph(up((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,dl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Dh(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Dh(n,t)}(n.endAt)),function(e,t,n,r,s,i,o,a){return new cd(e,t,n,r,s,"F",o,a)}(t,s,o,i,a,0,c,l)}function ip(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=up(e.unaryFilter.field);return Fh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=up(e.unaryFilter.field);return Fh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=up(e.unaryFilter.field);return Fh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=up(e.unaryFilter.field);return Fh.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qa(61313);default:return Qa(60726)}}(e):void 0!==e.fieldFilter?(t=e,Fh.create(up(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qa(58110);default:return Qa(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Lh.create(e.compositeFilter.filters.map(e=>ip(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qa(1026)}}(e.compositeFilter.op))}(e):Qa(30097,{filter:e});var t}function op(e){return Rf[e]}function ap(e){return Ff[e]}function cp(e){return Lf[e]}function lp(e){return{fieldPath:e.canonicalString()}}function up(e){return _c.fromServerFormat(e.fieldPath)}function hp(e){return e instanceof Fh?function(e){if("=="===e.op){if(yh(e.value))return{unaryFilter:{field:lp(e.field),op:"IS_NAN"}};if(mh(e.value))return{unaryFilter:{field:lp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yh(e.value))return{unaryFilter:{field:lp(e.field),op:"IS_NOT_NAN"}};if(mh(e.value))return{unaryFilter:{field:lp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lp(e.field),op:ap(e.op),value:e.value}}}(e):e instanceof Lh?function(e){const t=e.getFilters().map(e=>hp(e));return 1===t.length?t[0]:{compositeFilter:{op:cp(e.op),filters:t}}}(e):Qa(54877,{filter:e})}function dp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function fp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class pp{constructor(e,t,n,r,s=Lc.min(),i=Lc.min(),o=Lu.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new pp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gp{constructor(e){this.gt=e}}function mp(e,t){let n;if(t.document)n=function(e,t,n){const r=Hf(e,t.name),s=$f(t.updateTime),i=t.createTime?$f(t.createTime):Lc.min(),o=new Th({mapValue:{fields:t.fields}}),a=Ah.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(e.gt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ec.fromSegments(t.noDocument.path),r=wp(t.noDocument.readTime);n=Ah.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Qa(56709);{const e=Ec.fromSegments(t.unknownDocument.path),r=wp(t.unknownDocument.version);n=Ah.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Fc(e[0],e[1]);return Lc.fromTimestamp(t)}(t.readTime)),n}function yp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:Wf(s=e.gt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:Bf(s,i.version.toTimestamp()),createTime:Bf(s,i.createTime.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bp(t.version)};else{if(!t.isUnknownDocument())return Qa(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:bp(t.version)}}var s,i;return r}function vp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wp(e){const t=new Fc(e.seconds,e.nanoseconds);return Lc.fromTimestamp(t)}function xp(e,t){const n=(t.baseMutations||[]).map(t=>tp(e.gt,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>tp(e.gt,t)),s=Fc.fromMillis(t.localWriteTimeMs);return new pf(t.batchId,s,n,r)}function Sp(e){const t=wp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?wp(e.lastLimboFreeSnapshotVersion):Lc.min();let r;return r=void 0!==e.query.documents?function(e){const t=e.documents.length;return Xa(1===t,1966,{count:t}),fd(ld(Jf(e.documents[0])))}(e.query):function(e){return fd(sp(e))}(e.query),new pp(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Lu.fromBase64String(e.resumeToken))}function _p(e,t){const n=bp(t.snapshotVersion),r=bp(t.lastLimboFreeSnapshotVersion);let s;s=sd(t.target)?np(e.gt,t.target):rp(e.gt,t.target).Vt;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nd(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ep(e){const t=sp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gd(t,t.limit,"L"):t}function Ip(e,t){return new mf(t.largestBatchId,tp(e.gt,t.overlayMutation))}function Cp(e,t){const n=t.path.lastSegment();return[e,gl(t.path.popLast()),n]}function Tp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:bp(r.readTime),documentKey:gl(r.documentKey.path),largestBatchId:r.largestBatchId}}class kp{getBundleMetadata(e,t){return Ap(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:wp(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Ap(e).put({bundleId:(n=t).id,createTime:bp($f(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Dp(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Ep(t.bundledQuery),readTime:wp(t.readTime)};var t})}saveNamedQuery(e,t){return Dp(e).put({name:(n=t).name,readTime:bp($f(n.readTime)),bundledQuery:n.bundledQuery});var n}}function Ap(e){return Iu(e,Xl)}function Dp(e){return Iu(e,Yl)}class Np{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const n=t.uid||"";return new Np(e,n)}getOverlay(e,t){return Op(e).get(Cp(this.userId,t)).next(e=>e?Ip(this.serializer,e):null)}getOverlays(e,t){const n=kd();return Qc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new mf(t,s);r.push(this.wt(e,i))}),Qc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(gl(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(Op(e).Y(hu,r))}),Qc.waitFor(s)}getOverlaysForCollection(e,t,n){const r=kd(),s=gl(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Op(e).j(hu,i).next(e=>{for(const t of e){const e=Ip(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=kd();let i;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Op(e).X({index:fu,range:o},(e,t,n)=>{const o=Ip(this.serializer,t);s.size()<r||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(()=>s)}wt(e,t){return Op(e).put(function(e,t,n){const[r,s,i]=Cp(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ep(e.gt,n.mutation)}}(this.serializer,this.userId,t))}}function Op(e){return Iu(e,lu)}class Pp{St(e){return Iu(e,gu)}getSessionToken(e){return this.St(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Lu.fromUint8Array(t):Lu.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Mp{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Bu(e.integerValue));else if("doubleValue"in e){const n=Bu(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),fl(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=Vu(n)),t.Mt(`${n.seconds||""}`),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ju(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?xh(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):bh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Qa(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const e of Object.keys(n))this.xt(e,t),this.Dt(n[e],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const i=nh,o=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(Bu(o)),this.xt(i,t),this.Dt(s[i],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const e of n)this.Dt(e,t)}Bt(e,t){this.Ct(t,37),Ec.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Mp.Ut=new Mp;const Rp=255;function Fp(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Lp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Fp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Up{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Wt(n.value),n=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.jt(n.value),n=t.next();this.Jt()}Ht(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Wt(e);else if(e<2048)this.Wt(960|e>>>6),this.Wt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Wt(480|e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e);else{const e=t.codePointAt(0);this.Wt(240|e>>>18),this.Wt(128|63&e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e)}}this.Gt()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.jt(e);else if(e<2048)this.jt(960|e>>>6),this.jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.jt(480|e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e);else{const e=t.codePointAt(0);this.jt(240|e>>>18),this.jt(128|63&e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e)}}this.Jt()}Zt(e){const t=this.Xt(e),n=Lp(t);this.en(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}tn(e){const t=this.Xt(e),n=Lp(t);this.en(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}nn(){this.rn(Rp),this.rn(255)}sn(){this._n(Rp),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Wt(e){const t=255&e;0===t?(this.rn(0),this.rn(255)):t===Rp?(this.rn(Rp),this.rn(0)):this.rn(t)}jt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===Rp?(this._n(Rp),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Vp{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class Bp{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class jp{constructor(){this.un=new Up,this.cn=new Vp(this.un),this.ln=new Bp(this.un)}seed(e){this.un.seed(e)}hn(e){return 0===e?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}class zp{constructor(e,t,n,r){this.Pn=e,this.Tn=t,this.In=n,this.dn=r}En(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new zp(this.Pn,this.Tn,this.In,n)}An(e,t,n){return{indexId:this.Pn,uid:e,arrayValue:Gp(this.In),directionalValue:Gp(this.dn),orderedDocumentKey:Gp(t),documentKey:n.path.toArray()}}Rn(e,t,n){const r=this.An(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function $p(e,t){let n=e.Pn-t.Pn;return 0!==n?n:(n=qp(e.In,t.In),0!==n?n:(n=qp(e.dn,t.dn),0!==n?n:Ec.comparator(e.Tn,t.Tn)))}function qp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Gp(e){return Wi()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Kp(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Wp{constructor(e){this.Vn=new Ou((e,t)=>_c.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Vn=this.Vn.add(e):this.fn.push(e)}}get gn(){return this.Vn.size>1}pn(e){if(Xa(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Vc(e);if(void 0!==t&&!this.yn(t))return!1;const n=Bc(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.yn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Vn.size>0){const e=this.Vn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.wn(e,t)||!this.Sn(this.mn[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.mn.length||!this.Sn(this.mn[i++],e))return!1}return!0}bn(){if(this.gn)return null;let e=new Ou(_c.comparator);const t=[];for(const n of this.fn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new jc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new jc(n.field,0))}for(const n of this.mn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new jc(n.field,"asc"===n.dir?0:1)));return new Uc(Uc.UNKNOWN_ID,this.collectionId,t,zc.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Hp(e){var t,n;if(Xa(e instanceof Fh||e instanceof Lh,20012),e instanceof Fh){if(e instanceof Xh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Fh.create(e.field,"==",t)))||[];return Lh.create(r,"or")}return e}const r=e.filters.map(e=>Hp(e));return Lh.create(r,e.op)}function Qp(e){if(0===e.getFilters().length)return[];const t=Zp(Hp(e));return Xa(Yp(t),7391),Jp(t)||Xp(t)?[t]:t.getFilters()}function Jp(e){return e instanceof Fh}function Xp(e){return e instanceof Lh&&Bh(e)}function Yp(e){return Jp(e)||Xp(e)||function(e){if(e instanceof Lh&&Vh(e)){for(const t of e.getFilters())if(!Jp(t)&&!Xp(t))return!1;return!0}return!1}(e)}function Zp(e){if(Xa(e instanceof Fh||e instanceof Lh,34018),e instanceof Fh)return e;if(1===e.filters.length)return Zp(e.filters[0]);const t=e.filters.map(e=>Zp(e));let n=Lh.create(t,e.op);return n=ng(n),Yp(n)?n:(Xa(n instanceof Lh,64498),Xa(Uh(n),40251),Xa(n.filters.length>1,57927),n.filters.reduce((e,t)=>eg(e,t)))}function eg(e,t){let n;return Xa(e instanceof Fh||e instanceof Lh,38388),Xa(t instanceof Fh||t instanceof Lh,25473),n=e instanceof Fh?t instanceof Fh?(r=e,s=t,Lh.create([r,s],"and")):tg(e,t):t instanceof Fh?tg(t,e):function(e,t){if(Xa(e.filters.length>0&&t.filters.length>0,48005),Uh(e)&&Uh(t))return qh(e,t.getFilters());const n=Vh(e)?e:t,r=Vh(e)?t:e,s=n.filters.map(e=>eg(e,r));return Lh.create(s,"or")}(e,t),ng(n);var r,s}function tg(e,t){if(Uh(t))return qh(t,e.getFilters());{const n=t.filters.map(t=>eg(e,t));return Lh.create(n,"or")}}function ng(e){if(Xa(e instanceof Fh||e instanceof Lh,11850),e instanceof Fh)return e;const t=e.getFilters();if(1===t.length)return ng(t[0]);if(jh(e))return e;const n=t.map(e=>ng(e)),r=[];return n.forEach(t=>{t instanceof Fh?r.push(t):t instanceof Lh&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Lh.create(r,e.op)}class rg{constructor(){this.Dn=new sg}addToCollectionParentIndex(e,t){return this.Dn.add(t),Qc.resolve()}getCollectionParents(e,t){return Qc.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Qc.resolve()}deleteFieldIndex(e,t){return Qc.resolve()}deleteAllFieldIndexes(e){return Qc.resolve()}createTargetIndexes(e,t){return Qc.resolve()}getDocumentsMatchingTarget(e,t){return Qc.resolve(null)}getIndexType(e,t){return Qc.resolve(0)}getFieldIndexes(e,t){return Qc.resolve([])}getNextCollectionGroupToUpdate(e){return Qc.resolve(null)}getMinOffset(e,t){return Qc.resolve(qc.min())}getMinOffsetFromCollectionGroup(e,t){return Qc.resolve(qc.min())}updateCollectionGroup(e,t,n){return Qc.resolve()}updateIndexEntries(e,t){return Qc.resolve()}}class sg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ou(xc.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ou(xc.comparator)).toArray()}}const ig="IndexedDbIndexManager",og=new Uint8Array(0);class ag{constructor(e,t){this.databaseId=t,this.vn=new sg,this.Cn=new Sd(e=>nd(e),(e,t)=>rd(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const s={collectionId:n,parent:gl(r)};return cg(e).put(s)}return Qc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[vc(t),""],!1,!0);return cg(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(vl(r.parent))}return n})}addFieldIndex(e,t){const n=ug(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};var s;delete r.indexId;const i=n.add(r);if(t.indexState){const n=hg(e);return i.next(e=>{n.put(Tp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=ug(e),r=hg(e),s=lg(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ug(e),n=lg(e),r=hg(e);return t.Y().next(()=>n.Y()).next(()=>r.Y())}createTargetIndexes(e,t){return Qc.forEach(this.Fn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Wp(t).bn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=lg(e);let r=!0;const s=new Map;return Qc.forEach(this.Fn(t),t=>this.Mn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=Pd();const r=[];return Qc.forEach(s,(s,i)=>{var o;Ga(ig,`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${nd(t)}`);const a=function(e,t){const n=Vc(t);if(void 0===n)return null;for(const t of id(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(i,s),c=function(e,t){const n=new Map;for(const r of Bc(t))for(const t of id(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of Bc(t)){const t=0===s.kind?od(e,s.fieldPath,e.startAt):ad(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Dh(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of Bc(t)){const t=0===s.kind?ad(e,s.fieldPath,e.endAt):od(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Dh(n,r)}(i,s),h=this.xn(s,i,l),d=this.xn(s,i,u),f=this.On(s,i,c),p=this.Nn(s.indexId,a,h,l.inclusive,d,u.inclusive,f);return Qc.forEach(p,s=>n.H(s,t.limit).next(t=>{t.forEach(t=>{const n=Ec.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Qc.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(t=0===e.filters.length?[e]:Qp(Lh.create(e.filters,"and")).map(t=>td(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,n,r,s,i,o){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Bn(t[u/c]):og,h=this.Ln(e,a,n[u%c],r),d=this.kn(e,a,s[u%c],i),f=o.map(t=>this.Ln(e,a,t,!0));l.push(...this.createRange(h,d,f))}return l}Ln(e,t,n,r){const s=new zp(e,Ec.empty(),t,n);return r?s:s.En()}kn(e,t,n,r){const s=new zp(e,Ec.empty(),t,n);return r?s.En():s}Mn(e,t){const n=new Wp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.pn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Fn(t);return Qc.forEach(r,t=>this.Mn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Ou(_c.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>null!==t.limit&&r.length>1&&2===n?1:n)}qn(e,t){const n=new jp;for(const r of Bc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.hn(r.kind);Mp.Ut.bt(e,s)}return n.an()}Bn(e){const t=new jp;return Mp.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const n=new jp;return Mp.Ut.bt(fh(this.databaseId,t),n.hn(function(e){const t=Bc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.an()}On(e,t,n){if(null===n)return[];let r=[];r.push(new jp);let s=0;for(const i of Bc(e)){const e=n[s++];for(const n of r)if(this.$n(t,i.fieldPath)&&gh(e))r=this.Un(r,i,e);else{const t=n.hn(i.kind);Mp.Ut.bt(e,t)}}return this.Kn(r)}xn(e,t,n){return this.On(e,t,n.position)}Kn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].an();return t}Un(e,t,n){const r=[...e],s=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new jp;r.seed(n.an()),Mp.Ut.bt(e,r.hn(t.kind)),s.push(r)}return s}$n(e,t){return!!e.filters.find(e=>e instanceof Fh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=ug(e),r=hg(e);return(t?n.j(eu,IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return Qc.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new zc(t.sequenceNumber,new qc(wp(t.readTime),new Ec(vl(t.documentKey)),t.largestBatchId)):zc.empty(),r=e.fields.map(([e,t])=>new jc(_c.fromServerFormat(e),t));return new Uc(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fc(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=ug(e),s=hg(e);return this.Wn(e).next(e=>r.j(eu,IDBKeyRange.bound(t,t)).next(t=>Qc.forEach(t,t=>s.put(Tp(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Qc.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?Qc.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),Qc.forEach(s,n=>this.Gn(e,t,n).next(t=>{const s=this.zn(r,n);return t.isEqual(s)?Qc.resolve():this.jn(e,r,n,t,s)}))))})}Jn(e,t,n,r){return lg(e).put(r.An(this.uid,this.Qn(n,t.key),t.key))}Hn(e,t,n,r){return lg(e).delete(r.Rn(this.uid,this.Qn(n,t.key),t.key))}Gn(e,t,n){const r=lg(e);let s=new Ou($p);return r.X({index:au,range:IDBKeyRange.only([n.indexId,this.uid,Gp(this.Qn(n,t))])},(e,r)=>{s=s.add(new zp(n.indexId,t,Kp(r.arrayValue),Kp(r.directionalValue)))}).next(()=>s)}zn(e,t){let n=new Ou($p);const r=this.qn(t,e);if(null==r)return n;const s=Vc(t);if(null!=s){const i=e.data.field(s.fieldPath);if(gh(i))for(const s of i.arrayValue.values||[])n=n.add(new zp(t.indexId,e.key,this.Bn(s),r))}else n=n.add(new zp(t.indexId,e.key,og,r));return n}jn(e,t,n,r,s){Ga(ig,"Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),o=t.getIterator();let a=Mu(i),c=Mu(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Mu(o)):t?(s(a),a=Mu(i)):(a=Mu(i),c=Mu(o))}}(r,s,$p,r=>{i.push(this.Jn(e,t,n,r))},r=>{i.push(this.Hn(e,t,n,r))}),Qc.waitFor(i)}Wn(e){let t=1;return hg(e).X({index:ru,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>$p(e,t)).filter((e,t,n)=>!t||0!==$p(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=$p(s,e),i=$p(s,t);if(0===n)r[0]=e.En();else if(n>0&&i<0)r.push(s),r.push(s.En());else if(i>0)break}r.push(t);const s=[];for(let e=0;e<r.length;e+=2){if(this.Yn(r[e],r[e+1]))return[];const t=r[e].Rn(this.uid,og,Ec.empty()),n=r[e+1].Rn(this.uid,og,Ec.empty());s.push(IDBKeyRange.bound(t,n))}return s}Yn(e,t){return $p(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dg)}getMinOffset(e,t){return Qc.mapArray(this.Fn(t),t=>this.Mn(e,t).next(e=>e||Qa(44426))).next(dg)}}function cg(e){return Iu(e,Hl)}function lg(e){return Iu(e,iu)}function ug(e){return Iu(e,Zl)}function hg(e){return Iu(e,tu)}function dg(e){Xa(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Gc(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new qc(t.readTime,t.documentKey,n)}const fg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pg=41943040;class gg{static withCacheSize(e){return new gg(e,gg.DEFAULT_COLLECTION_PERCENTILE,gg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function mg(e,t,n){const r=e.store(_l),s=e.store(Dl),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},(e,t,n)=>(a++,n.delete()));i.push(c.next(()=>{Xa(1===a,47070,{batchId:n.batchId})}));const l=[];for(const e of n.mutations){const r=kl(t,e.key.path,n.batchId);i.push(s.delete(r)),l.push(e.key)}return Qc.waitFor(i).next(()=>l)}function yg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qa(14731);t=e.noDocument}return JSON.stringify(t).length}gg.DEFAULT_COLLECTION_PERCENTILE=10,gg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gg.DEFAULT=new gg(pg,gg.DEFAULT_COLLECTION_PERCENTILE,gg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gg.DISABLED=new gg(-1,0,0);class vg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Zn={}}static yt(e,t,n,r){Xa(""!==e.uid,64387);const s=e.isAuthenticated()?e.uid:"";return new vg(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wg(e).X({index:Il,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=xg(e),i=wg(e);return i.add({}).next(o=>{Xa("number"==typeof o,49019);const a=new pf(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>ep(e.gt,t)),s=n.mutations.map(t=>ep(e.gt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,a),l=[];let u=new Ou((e,t)=>fc(e.canonicalString(),t.canonicalString()));for(const e of r){const t=kl(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(i.put(c)),l.push(s.put(t,Al))}return u.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Zn[o]=a.keys()}),Qc.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return wg(e).get(t).next(e=>e?(Xa(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),xp(this.serializer,e)):null)}Xn(e,t){return this.Zn[t]?Qc.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Zn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return wg(e).X({index:Il,range:r},(e,t,r)=>{t.userId===this.userId&&(Xa(t.batchId>=n,47524,{er:n}),s=xp(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return wg(e).X({index:Il,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wg(e).j(Il,t).next(e=>e.map(e=>xp(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Tl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return xg(e).X({range:r},(n,r,i)=>{const[o,a,c]=n,l=vl(a);if(o===this.userId&&t.path.isEqual(l))return wg(e).get(c).next(e=>{if(!e)throw Qa(61480,{tr:n,batchId:c});Xa(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:c}),s.push(xp(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ou(fc);const r=[];return t.forEach(t=>{const s=Tl(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=xg(e).X({range:i},(e,r,s)=>{const[i,o,a]=e,c=vl(o);i===this.userId&&t.path.isEqual(c)?n=n.add(a):s.done()});r.push(o)}),Qc.waitFor(r).next(()=>this.nr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Tl(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new Ou(fc);return xg(e).X({range:i},(e,t,s)=>{const[i,a,c]=e,l=vl(a);i===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):s.done()}).next(()=>this.nr(e,o))}nr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(wg(e).get(t).next(e=>{if(null===e)throw Qa(35274,{batchId:t});Xa(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(xp(this.serializer,e))}))}),Qc.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return mg(e.ce,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),Qc.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Qc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return xg(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=vl(e[1]);r.push(t)}else n.done()}).next(()=>{Xa(0===r.length,56720,{ir:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return bg(e,this.userId,t)}sr(e){return Sg(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bg(e,t,n){const r=Tl(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return xg(e).X({range:i,Z:!0},(e,n,r)=>{const[i,a,c]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function wg(e){return Iu(e,_l)}function xg(e){return Iu(e,Dl)}function Sg(e){return Iu(e,Sl)}class _g{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new _g(0)}static ur(){return new _g(-1)}}class Eg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{const n=new _g(t.highestTargetId);return t.highestTargetId=n.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(e=>Lc.fromTimestamp(new Fc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.cr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.lr(e,r)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(n=>(n.targetCount+=1,this.Pr(t,n),this.lr(e,n))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ig(e).delete(t.targetId)).next(()=>this.cr(e)).next(t=>(Xa(t.targetCount>0,8065),t.targetCount-=1,this.lr(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return Ig(e).X((i,o)=>{const a=Sp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>Qc.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Ig(e).X((e,n)=>{const r=Sp(n);t(r)})}cr(e){return Cg(e).get(Kl).next(e=>(Xa(null!==e,2888),e))}lr(e,t){return Cg(e).put(Kl,t)}hr(e,t){return Ig(e).put(_p(this.serializer,t))}Pr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.cr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=nd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Ig(e).X({range:r,index:Bl},(e,n,r)=>{const i=Sp(n);rd(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Tg(e);return t.forEach(t=>{const i=gl(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),Qc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Tg(e);return Qc.forEach(t,t=>{const s=gl(t.path);return Qc.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Tg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Tg(e);let s=Pd();return r.X({range:n,Z:!0},(e,t,n)=>{const r=vl(e[1]),i=new Ec(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=gl(t.path),r=IDBKeyRange.bound([n],[vc(n)],!1,!0);let s=0;return Tg(e).X({index:ql,Z:!0,range:r},([e,t],n,r)=>{0!==e&&(s++,r.done())}).next(()=>s>0)}Et(e,t){return Ig(e).get(t).next(e=>e?Sp(e):null)}}function Ig(e){return Iu(e,Vl)}function Cg(e){return Iu(e,Wl)}function Tg(e){return Iu(e,zl)}const kg="LruGarbageCollector",Ag=1048576;function Dg([e,t],[n,r]){const s=fc(e,n);return 0===s?fc(t,r):s}class Ng{constructor(e){this.Tr=e,this.buffer=new Ou(Dg),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Dg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Og{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){Ga(kg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){nl(e)?Ga(kg,"Ignoring IndexedDB error during garbage collection: ",e):await Hc(e)}await this.Rr(3e5)})}}class Pg{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Qc.resolve(ul.ue);const n=new Ng(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ga("LruGarbageCollector","Garbage collection skipped; disabled"),Qc.resolve(fg)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ga("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fg):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,r,s,i,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ga("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),qa()<=io.DEBUG&&Ga("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${r} in `+(o-i)+`ms\n\tRemoved ${s} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(c-a)+`ms\nTotal Duration: ${c-l}ms`),Qc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Mg(e,t){return new Pg(e,t)}class Rg{constructor(e,t){this.db=e,this.garbageCollector=Mg(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(e,n)=>t(n))}addReference(e,t,n){return Fg(e,n)}removeReference(e,t,n){return Fg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Fg(e,t)}Sr(e,t){return function(e,t){let n=!1;return Sg(e).ee(r=>bg(e,r,t).next(e=>(e&&(n=!0),Qc.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.wr(e,(i,o)=>{if(o<=t){const t=this.Sr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Lc.min()),Tg(e).delete([0,gl(i.path)])))});r.push(t)}}).next(()=>Qc.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Fg(e,t)}wr(e,t){const n=Tg(e);let r,s=ul.ue;return n.X({index:ql},([e,n],{path:i,sequenceNumber:o})=>{0===e?(s!==ul.ue&&t(new Ec(vl(r)),s),s=o,r=i):s=ul.ue}).next(()=>{s!==ul.ue&&t(new Ec(vl(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fg(e,t){return Tg(e).put((n=t,r=e.currentSequenceNumber,{targetId:0,path:gl(n.path),sequenceNumber:r}));var n,r}class Lg{constructor(){this.changes=new Sd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ah.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Qc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ug{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return zg(e).put(n)}removeEntry(e,t,n){return zg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],vp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.br(e,n)))}getEntry(e,t){let n=Ah.newInvalidDocument(t);return zg(e).X({index:Pl,range:IDBKeyRange.only($g(t))},(e,r)=>{n=this.Dr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:Ah.newInvalidDocument(t)};return zg(e).X({index:Pl,range:IDBKeyRange.only($g(t))},(e,r)=>{n={document:this.Dr(t,r),size:yg(r)}}).next(()=>n)}getEntries(e,t){let n=Ed();return this.Cr(e,t,(e,t)=>{const r=this.Dr(e,t);n=n.insert(e,r)}).next(()=>n)}Fr(e,t){let n=Ed(),r=new Au(Ec.comparator);return this.Cr(e,t,(e,t)=>{const s=this.Dr(e,t);n=n.insert(e,s),r=r.insert(e,yg(t))}).next(()=>({documents:n,Mr:r}))}Cr(e,t,n){if(t.isEmpty())return Qc.resolve();let r=new Ou(Gg);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound($g(r.first()),$g(r.last())),i=r.getIterator();let o=i.getNext();return zg(e).X({index:Pl,range:s},(e,t,r)=>{const s=Ec.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Gg(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.G($g(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,o=[i.popLast().toArray(),i.lastSegment(),vp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zg(e).j(IDBKeyRange.bound(o,a,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=Ed();for(const s of e){const e=this.Dr(Ec.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(bd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=Ed();const i=qg(t,n),o=qg(t,qc.max());return zg(e).X({index:Rl,range:IDBKeyRange.bound(i,o,!0)},(e,t,n)=>{const i=this.Dr(Ec.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Bg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return jg(e).get(Ul).next(e=>(Xa(!!e,20021),e))}br(e,t){return jg(e).put(Ul,t)}Dr(e,t){if(t){const e=mp(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Lc.min()))return e}return Ah.newInvalidDocument(e)}}function Vg(e){return new Ug(e)}class Bg extends Lg{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Sd(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Ou((e,t)=>fc(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.Nr.get(s);if(t.push(this.Or.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=yp(this.Or.serializer,i);r=r.add(s.path.popLast());const c=yg(a);n+=c-o.size,t.push(this.Or.addEntry(e,s,a))}else if(n-=o.size,this.trackRemovals){const n=yp(this.Or.serializer,i.convertToNoDocument(Lc.min()));t.push(this.Or.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Or.updateMetadata(e,n)),Qc.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(e=>(this.Nr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:e,Mr:t})=>(t.forEach((t,n)=>{this.Nr.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function jg(e){return Iu(e,Ll)}function zg(e){return Iu(e,Nl)}function $g(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qg(e,t){const n=t.documentKey.path.toArray();return[e,vp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Gg(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(s=fc(n[e],r[e]),s)return s;return s=fc(n.length,r.length),s||(s=fc(n[n.length-2],r[r.length-2]),s||fc(n[n.length-1],r[r.length-1]))}class Kg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&rf(n.mutation,e,Ru.empty(),Fc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Pd()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Pd()){const r=kd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Cd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=kd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Pd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Ed();const i=Dd(),o=Dd();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof cf)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),rf(o.mutation,t,o.mutation.getFieldMask(),Fc.now())):i.set(t.key,Ru.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Kg(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Dd();let r=new Au((e,t)=>e-t),s=Pd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||Ru.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||Pd()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Ad();c.forEach(e=>{if(!s.has(e)){const r=tf(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Qc.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return s=t,Ec.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var s}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Qc.resolve(kd());let o=-1,a=s;return i.next(t=>Qc.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Qc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,Pd())).next(e=>({batchId:o,changes:Td(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ec(t)).next(e=>{let t=Cd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Cd();return this.indexManager.getCollectionParents(e,s).next(o=>Qc.forEach(o,o=>{const a=(c=t,l=o.child(s),new cd(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ah.newInvalidDocument(r)))});let n=Cd();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&rf(i.mutation,r,Ru.empty(),Fc.now()),bd(t,r)&&(n=n.insert(e,r))}),n})}}class Hg{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Qc.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,{id:(n=t).id,version:n.version,createTime:$f(n.createTime)}),Qc.resolve();var n}getNamedQuery(e,t){return Qc.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,{name:(n=t).name,query:Ep(n.bundledQuery),readTime:$f(n.readTime)}),Qc.resolve();var n}}class Qg{constructor(){this.overlays=new Au(Ec.comparator),this.kr=new Map}getOverlay(e,t){return Qc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=kd();return Qc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),Qc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),Qc.resolve()}getOverlaysForCollection(e,t,n){const r=kd(),s=t.length+1,i=new Ec(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Qc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Au((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=kd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=kd(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Qc.resolve(o)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new mf(t,n));let s=this.kr.get(t);void 0===s&&(s=Pd(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class Jg{constructor(){this.sessionToken=Lu.EMPTY_BYTE_STRING}getSessionToken(e){return Qc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qc.resolve()}}class Xg{constructor(){this.qr=new Ou(Yg.Qr),this.$r=new Ou(Yg.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Yg(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Yg(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Ec(new xc([])),n=new Yg(t,e),r=new Yg(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Ec(new xc([])),n=new Yg(t,e),r=new Yg(t,e+1);let s=Pd();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Yg(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Yg{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ec.comparator(e.key,t.key)||fc(e.Hr,t.Hr)}static Ur(e,t){return fc(e.Hr,t.Hr)||Ec.comparator(e.key,t.key)}}class Zg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ou(Yg.Qr)}checkEmpty(e){return Qc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new pf(s,t,n,r);this.mutationQueue.push(i);for(const t of r)this.Yr=this.Yr.add(new Yg(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Qc.resolve(i)}lookupMutationBatch(e,t){return Qc.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return Qc.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qc.resolve(0===this.mutationQueue.length?-1:this.er-1)}getAllMutationBatches(e){return Qc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Yg(t,0),r=new Yg(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),Qc.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ou(fc);return t.forEach(e=>{const t=new Yg(e,0),r=new Yg(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),Qc.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ec.isDocumentKey(s)||(s=s.child(""));const i=new Yg(new Ec(s),0);let o=new Ou(fc);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},i),Qc.resolve(this.ei(o))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Xa(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return Qc.forEach(t.mutations,r=>{const s=new Yg(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new Yg(t,0),r=this.Yr.firstAfterOrEqual(n);return Qc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qc.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class em{constructor(e){this.ni=e,this.docs=new Au(Ec.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Qc.resolve(n?n.document.mutableCopy():Ah.newInvalidDocument(t))}getEntries(e,t){let n=Ed();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ah.newInvalidDocument(e))}),Qc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Ed();const i=t.path,o=new Ec(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Gc($c(o),n)<=0||(r.has(o.key)||bd(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Qc.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Qa(9500)}ri(e,t){return Qc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new tm(this)}getSize(e){return Qc.resolve(this.size)}}class tm extends Lg{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),Qc.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class nm{constructor(e){this.persistence=e,this.ii=new Sd(e=>nd(e),rd),this.lastRemoteSnapshotVersion=Lc.min(),this.highestTargetId=0,this.si=0,this.oi=new Xg,this.targetCount=0,this._i=_g.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),Qc.resolve()}getLastRemoteSnapshotVersion(e){return Qc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qc.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Qc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),Qc.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new _g(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Qc.resolve()}updateTargetData(e,t){return this.hr(t),Qc.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Qc.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ii.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Qc.waitFor(s).next(()=>r)}getTargetCount(e){return Qc.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return Qc.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),Qc.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Qc.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Qc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return Qc.resolve(n)}containsKey(e,t){return Qc.resolve(this.oi.containsKey(t))}}class rm{constructor(e,t){this.ai={},this.overlays={},this.ui=new ul(0),this.ci=!1,this.ci=!0,this.li=new Jg,this.referenceDelegate=e(this),this.hi=new nm(this),this.indexManager=new rg,this.remoteDocumentCache=new em(e=>this.referenceDelegate.Pi(e)),this.serializer=new gp(t),this.Ti=new Hg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new Zg(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){Ga("MemoryPersistence","Starting transaction:",e);const r=new sm(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return Qc.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class sm extends Wc{constructor(e){super(),this.currentSequenceNumber=e}}class im{constructor(e){this.persistence=e,this.Ai=new Xg,this.Ri=null}static Vi(e){return new im(e)}get mi(){if(this.Ri)return this.Ri;throw Qa(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),Qc.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),Qc.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Qc.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qc.forEach(this.mi,n=>{const r=Ec.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,Lc.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Qc.or([()=>Qc.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class om{constructor(e,t){this.persistence=e,this.gi=new Sd(e=>gl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Mg(this,t)}static Vi(e,t){return new om(e,t)}Ii(){}di(e){return Qc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return Qc.forEach(this.gi,(n,r)=>this.Sr(e,n,r).next(e=>e?Qc.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Lc.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Qc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Qc.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),Qc.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Qc.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dh(e.data.value)),t}Sr(e,t,n){return Qc.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return Qc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class am{constructor(e){this.serializer=e}q(e,t,n,r){const s=new Xc("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(wl),function(e){e.createObjectStore(Sl,{keyPath:"userId"}),e.createObjectStore(_l,{keyPath:El,autoIncrement:!0}).createIndex(Il,Cl,{unique:!0}),e.createObjectStore(Dl)}(e),cm(e),function(e){e.createObjectStore(bl)}(e));let i=Qc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(zl),e.deleteObjectStore(Vl),e.deleteObjectStore(Wl)}(e),cm(e)),i=i.next(()=>function(e){const t=e.store(Wl),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lc.min().toTimestamp(),targetCount:0};return t.put(Kl,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(_l).j().next(n=>{e.deleteObjectStore(_l),e.createObjectStore(_l,{keyPath:El,autoIncrement:!0}).createIndex(Il,Cl,{unique:!0});const r=t.store(_l),s=n.map(e=>r.put(e));return Qc.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(Jl,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.pi(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(Ll)}(e),this.yi(s)))),n<7&&r>=7&&(i=i.next(()=>this.wi(s))),n<8&&r>=8&&(i=i.next(()=>this.Si(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.bi(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(Xl,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Yl,{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore(lu,{keyPath:uu});t.createIndex(hu,du,{unique:!1}),t.createIndex(fu,pu,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore(Nl,{keyPath:Ol});t.createIndex(Pl,Ml),t.createIndex(Rl,Fl)}(e)).next(()=>this.Di(e,s)).next(()=>e.deleteObjectStore(bl))),n<14&&r>=14&&(i=i.next(()=>this.Ci(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore(Zl,{keyPath:"indexId",autoIncrement:!0}).createIndex(eu,"collectionGroup",{unique:!1}),e.createObjectStore(tu,{keyPath:nu}).createIndex(ru,su,{unique:!1}),e.createObjectStore(iu,{keyPath:ou}).createIndex(au,cu,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore(tu).clear()}).next(()=>{t.objectStore(iu).clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore(gu,{keyPath:"name"})}(e)})),n<18&&r>=18&&Wi()&&(i=i.next(()=>{t.objectStore(tu).clear()}).next(()=>{t.objectStore(iu).clear()})),i}yi(e){let t=0;return e.store(bl).X((e,n)=>{t+=yg(n)}).next(()=>{const n={byteSize:t};return e.store(Ll).put(Ul,n)})}pi(e){const t=e.store(Sl),n=e.store(_l);return t.j().next(t=>Qc.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j(Il,r).next(n=>Qc.forEach(n,n=>{Xa(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=xp(this.serializer,n);return mg(e,t.userId,r).next(()=>{})}))}))}wi(e){const t=e.store(zl),n=e.store(bl);return e.store(Wl).get(Kl).next(e=>{const r=[];return n.X((n,s)=>{const i=new xc(n),o=[0,gl(i)];r.push(t.get(o).next(n=>{return n?Qc.resolve():(r=i,t.put({targetId:0,path:gl(r),sequenceNumber:e.highestListenSequenceNumber}));var r}))}).next(()=>Qc.waitFor(r))})}Si(e,t){e.createObjectStore(Hl,{keyPath:Ql});const n=t.store(Hl),r=new sg,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:gl(r)})}};return t.store(bl).X({Z:!0},(e,t)=>{const n=new xc(e);return s(n.popLast())}).next(()=>t.store(Dl).X({Z:!0},([e,t,n],r)=>{const i=vl(t);return s(i.popLast())}))}bi(e){const t=e.store(Vl);return t.X((e,n)=>{const r=Sp(n),s=_p(this.serializer,r);return t.put(s)})}Di(e,t){const n=t.store(bl),r=[];return n.X((e,n)=>{const s=t.store(Nl),i=(a=n,a.document?new Ec(xc.fromString(a.document.name).popFirst(5)):a.noDocument?Ec.fromSegments(a.noDocument.path):a.unknownDocument?Ec.fromSegments(a.unknownDocument.path):Qa(36783)).path.toArray(),o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};var a;r.push(s.put(o))}).next(()=>Qc.waitFor(r))}Ci(e,t){const n=t.store(_l),r=Vg(this.serializer),s=new rm(im.Vi,this.serializer.gt);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Pd();xp(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Qc.forEach(n,(e,n)=>{const i=new ja(n),o=Np.yt(this.serializer,i),a=s.getIndexManager(i),c=vg.yt(i,this.serializer,a,s.referenceDelegate);return new Wg(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Eu(t,ul.ue),e).next()})})}}function cm(e){e.createObjectStore(zl,{keyPath:$l}).createIndex(ql,Gl,{unique:!0}),e.createObjectStore(Vl,{keyPath:"targetId"}).createIndex(Bl,jl,{unique:!0}),e.createObjectStore(Wl)}const lm="IndexedDbPersistence",um=18e5,hm=5e3,dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fm{constructor(e,t,n,r,s,i,o,a,c,l,u=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Fi=s,this.window=i,this.document=o,this.Mi=c,this.xi=l,this.Oi=u,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=e=>Promise.resolve(),!fm.C())throw new ec(Za.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rg(this,r),this.Qi=t+"main",this.serializer=new gp(a),this.$i=new Yc(this.Qi,this.Oi,new am(this.serializer)),this.li=new Pp,this.hi=new Eg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vg(this.serializer),this.Ti=new kp,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,!1===l&&Ka(lm,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ec(Za.FAILED_PRECONDITION,dm);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new ul(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(e=>{e||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(nl(e))return Ga(lm,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ga(lm,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return pm(e).get(xl).next(e=>Qc.resolve(this.Xi(e)))}es(e){return gm(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,um)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Iu(e,Jl);return t.j().next(e=>{const n=this.rs(e,um),r=e.filter(e=>-1===n.indexOf(e));return Qc.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?Qc.resolve(!0):pm(e).get(xl).next(t=>{if(null!==t&&this.ns(t.leaseTimestampMs,hm)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ec(Za.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gm(e).j().next(e=>void 0===this.rs(e,hm).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ga(lm,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[wl,Jl],e=>{const t=new Eu(e,ul.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()}rs(e,t){return e.filter(e=>this.ns(e.updateTimeMs,t)&&!this._s(e.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>gm(e).j().next(e=>this.rs(e,um).map(e=>e.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return vg.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ag(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Np.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,n){Ga(lm,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=18===(i=this.Oi)?_u:17===i?Su:16===i?xu:15===i?wu:14===i?bu:13===i?vu:12===i?yu:11===i?mu:void Qa(60245);var i;let o;return this.$i.runTransaction(e,r,s,r=>(o=new Eu(r,this.ui?this.ui.next():ul.ue),"readwrite-primary"===t?this.Ji(o).next(e=>!!e||this.Hi(o)).next(t=>{if(!t)throw Ka(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new ec(Za.FAILED_PRECONDITION,Kc);return n(o)}).next(e=>this.Zi(o).next(()=>e)):this.Ts(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Ts(e){return pm(e).get(xl).next(e=>{if(null!==e&&this.ns(e.leaseTimestampMs,hm)&&!this._s(e.ownerId)&&!this.Xi(e)&&!(this.xi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ec(Za.FAILED_PRECONDITION,dm)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pm(e).put(xl,t)}static C(){return Yc.C()}Yi(e){const t=pm(e);return t.get(xl).next(e=>this.Xi(e)?(Ga(lm,"Releasing primary lease."),t.delete(xl)):Qc.resolve())}ns(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ka(`Detected an update time that is in the future: ${e} > ${n}`),1))}Wi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground="visible"===this.document.visibilityState)}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ni=()=>{this.us();const e=/(?:Version|Mobile)\/1[456]/;Ki()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const n=null!==(null===(t=this.Ui)||void 0===t?void 0:t.getItem(this.ss(e)));return Ga(lm,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ka(lm,"Failed to get zombied client id.",e),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Ka("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pm(e){return Iu(e,wl)}function gm(e){return Iu(e,Jl)}class mm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=Pd(),r=Pd();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new mm(e,t.fromCache,n,r)}}class ym{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vm{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=Ki()?8:Zc(qi())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new ym;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(qa()<=io.DEBUG&&Ga("QueryEngine","SDK will not create cache indexes for query:",vd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Qc.resolve()):(qa()<=io.DEBUG&&Ga("QueryEngine","Query:",vd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(qa()<=io.DEBUG&&Ga("QueryEngine","The SDK decides to create cache indexes for query:",vd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fd(t))):Qc.resolve())}ps(e,t){if(ud(t))return Qc.resolve(null);let n=fd(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=gd(t,null,"F"),n=fd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Pd(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.bs(t,r);return this.Ds(t,i,s,n.readTime)?this.ps(e,gd(t,null,"F")):this.vs(e,i,t,n)}))})))}ys(e,t,n,r){return ud(t)||r.isEqual(Lc.min())?Qc.resolve(null):this.gs.getDocuments(e,n).next(s=>{const i=this.bs(t,s);return this.Ds(t,i,n,r)?Qc.resolve(null):(qa()<=io.DEBUG&&Ga("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vd(t)),this.vs(e,i,t,function(e){const t=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=Lc.fromTimestamp(1e9===n?new Fc(t+1,0):new Fc(t,n));return new qc(r,Ec.empty(),-1)}(r)).next(e=>e))})}bs(e,t){let n=new Ou(wd(e));return t.forEach((t,r)=>{bd(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return qa()<=io.DEBUG&&Ga("QueryEngine","Using full collection scan to execute query:",vd(t)),this.gs.getDocumentsMatchingQuery(e,t,qc.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const bm="LocalStore";class wm{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Au(fc),this.Ms=new Sd(e=>nd(e),rd),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wg(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function xm(e,t,n,r){return new wm(e,t,n,r)}async function Sm(e,t){const n=Ya(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=Pd();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:i}))})})}function _m(e){const t=Ya(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Em(e,t){const n=Ya(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const o=[];t.targetChanges.forEach((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.hi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.hi.addMatchingKeys(e,i.addedDocuments,a)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Lu.EMPTY_BYTE_STRING,Lc.min()).withLastLimboFreeSnapshotVersion(Lc.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,i)&&o.push(n.hi.updateTargetData(e,l))});let a=Ed(),c=Pd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=Pd(),s=Pd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ed();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Lc.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Ga(bm,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{Ls:r,ks:s}})}(e,i,t.documentUpdates).next(e=>{a=e.Ls,c=e.ks})),!r.isEqual(Lc.min())){const t=n.hi.getLastRemoteSnapshotVersion(e).next(t=>n.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Qc.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Fs=s,e))}function Im(e,t){const n=Ya(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Cm(e,t,n){const r=Ya(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!nl(e))throw e;Ga(bm,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function Tm(e,t,n){const r=Ya(e);let s=Lc.min(),i=Pd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ya(e),s=r.Ms.get(n);return void 0!==s?Qc.resolve(r.Fs.get(s)):r.hi.getTargetData(t,n)}(r,e,fd(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?s:Lc.min(),n?i:Pd())).next(e=>(function(e,t,n){let r=e.xs.get(t)||Lc.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,qs:i})))}class km{constructor(){this.activeTargetIds=Md}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Am{constructor(){this.Fo=new km,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new km,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dm{xo(e){}shutdown(){}}const Nm="ConnectivityMonitor";class Om{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ga(Nm,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ga(Nm,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pm=null;function Mm(){return null===Pm?Pm=268435456+Math.round(2147483648*Math.random()):Pm++,"0x"+Pm.toString(16)}const Rm="RestConnection",Fm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lm{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${r}`,this.Ko=this.databaseId.database===Ju?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,s){const i=Mm(),o=this.Go(e,t.toUriEncodedString());Ga(Rm,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,s);const{host:c}=new URL(o),l=Vi(c);return this.jo(e,o,a,n,l).then(t=>(Ga(Rm,`Received RPC '${e}' ${i}: `,t),t),t=>{throw Wa(Rm,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Jo(e,t,n,r,s,i){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Fm[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}class Um{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Vm="WebChannelConnection";class Bm extends Lm{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const i=Mm();return new Promise((s,o)=>{const a=new Da;a.setWithCredentials(!0),a.listenOnce(Oa.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Pa.NO_ERROR:const t=a.getResponseJson();Ga(Vm,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Pa.TIMEOUT:Ga(Vm,`RPC '${e}' ${i} timed out`),o(new ec(Za.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const n=a.getStatus();if(Ga(Vm,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Za).indexOf(t)>=0?t:Za.UNKNOWN}(t.status);o(new ec(e,t.message))}else o(new ec(Za.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ec(Za.UNAVAILABLE,"Connection failed."));break;default:Qa(9055,{c_:e,streamId:i,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{Ga(Vm,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(r);Ga(Vm,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)})}P_(e,t,n){const r=Mm(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=La(),o=Fa(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");Ga(Vm,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=i.createWebChannel(l,a);this.T_(u);let h=!1,d=!1;const f=new Um({Ho:t=>{d?Ga(Vm,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Ga(Vm,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Ga(Vm,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Na.EventType.OPEN,()=>{d||(Ga(Vm,`RPC '${e}' stream ${r} transport opened.`),f.s_())}),p(u,Na.EventType.CLOSE,()=>{d||(d=!0,Ga(Vm,`RPC '${e}' stream ${r} transport closed`),f.__(),this.I_(u))}),p(u,Na.EventType.ERROR,t=>{d||(d=!0,Wa(Vm,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.__(new ec(Za.UNAVAILABLE,"The operation could not be completed")))}),p(u,Na.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];Xa(!!s,16349);const i=s,o=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Ga(Vm,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=vf[e];if(void 0!==t)return wf(t)}(t),s=o.message;void 0===n&&(n=Za.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,f.__(new ec(n,s)),u.close()}else Ga(Vm,`RPC '${e}' stream ${r} received:`,s),f.a_(s)}}),p(o,Ra.STAT_EVENT,t=>{t.stat===Ma.PROXY?Ga(Vm,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ma.NOPROXY&&Ga(Vm,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function jm(){return"undefined"!=typeof document?document:null}function zm(e){return new Uf(e,!0)}class $m{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&Ga("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const qm="PersistentStream";class Gm{constructor(e,t,n,r,s,i,o,a){this.Fi=e,this.w_=n,this.S_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new $m(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===Za.RESOURCE_EXHAUSTED?(Ka(t.toString()),Ka("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Za.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.b_===t&&this.W_(e,n)},t=>{e(()=>{const e=new ec(Za.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ga(qm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ga(qm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Km extends Gm{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Qa(39313,{state:r}),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Xa(void 0===t||"string"==typeof t,58123),Lu.fromBase64String(t||"")):(Xa(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Lu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(e){const t=void 0===e.code?Za.UNKNOWN:wf(e.code);return new ec(t,e.message||"")}(a);n=new Df(s,i,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hf(e,r.document.name),i=$f(r.document.updateTime),o=r.document.createTime?$f(r.document.createTime):Lc.min(),a=new Th({mapValue:{fields:r.document.fields}}),c=Ah.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new kf(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Hf(e,r.document),i=r.readTime?$f(r.readTime):Lc.min(),o=Ah.newNoDocument(s,i),a=r.removedTargetIds||[];n=new kf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Hf(e,r.document),i=r.removedTargetIds||[];n=new kf([],i,s,null)}else{if(!("filter"in t))return Qa(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new yf(r,s),o=e.targetId;n=new Af(o,i)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Lc.min():t.readTime?$f(t.readTime):Lc.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=Xf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=sd(r)?{documents:np(e,r)}:{query:rp(e,r).Vt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jf(e,t.resumeToken);const r=Vf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Lc.min())>0){n.readTime=Bf(e,t.snapshotVersion.toTimestamp());const r=Vf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qa(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=Xf(this.serializer),t.removeTarget=e,this.k_(t)}}class Wm extends Gm{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xa(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xa(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){Xa(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(Xa(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?$f(e.updateTime):$f(t);return n.isEqual(Lc.min())&&(n=$f(t)),new Xd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=$f(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Xf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ep(this.serializer,e))};this.k_(t)}}class Hm{}class Qm extends Hm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ec(Za.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Wo(e,Gf(t,n),r,s,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Za.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ec(Za.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Jo(e,Gf(t,n),r,i,o,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Za.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ec(Za.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Jm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ka(t),this._a=!1):Ga("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const Xm="RemoteStore";class Ym{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{ay(this)&&(Ga(Xm,"Restarting streams for network reachability change."),await async function(e){const t=Ya(e);t.Ia.add(4),await ey(t),t.Aa.set("Unknown"),t.Ia.delete(4),await Zm(t)}(this))})}),this.Aa=new Jm(n,r)}}async function Zm(e){if(ay(e))for(const t of e.da)await t(!0)}async function ey(e){for(const t of e.da)await t(!1)}function ty(e,t){const n=Ya(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),oy(n)?iy(n):Iy(n).x_()&&ry(n,t))}function ny(e,t){const n=Ya(e),r=Iy(n);n.Ta.delete(t),r.x_()&&sy(n,t),0===n.Ta.size&&(r.x_()?r.B_():ay(n)&&n.Aa.set("Unknown"))}function ry(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Iy(e).H_(t)}function sy(e,t){e.Ra.$e(t),Iy(e).Y_(t)}function iy(e){e.Ra=new Of({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Iy(e).start(),e.Aa.aa()}function oy(e){return ay(e)&&!Iy(e).M_()&&e.Ta.size>0}function ay(e){return 0===Ya(e).Ia.size}function cy(e){e.Ra=void 0}async function ly(e){e.Aa.set("Online")}async function uy(e){e.Ta.forEach((t,n)=>{ry(e,t)})}async function hy(e,t){cy(e),oy(e)?(e.Aa.la(t),iy(e)):e.Aa.set("Unknown")}async function dy(e,t,n){if(e.Aa.set("Online"),t instanceof Df&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(n){Ga(Xm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fy(e,n)}else if(t instanceof kf?e.Ra.Ye(t):t instanceof Af?e.Ra.it(t):e.Ra.et(t),!n.isEqual(Lc.min()))try{const t=await _m(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Ra.Pt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ta.get(r);s&&e.Ta.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Lu.EMPTY_BYTE_STRING,r.snapshotVersion)),sy(e,t);const s=new pp(r.target,t,n,r.sequenceNumber);ry(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ga(Xm,"Failed to raise snapshot:",t),await fy(e,t)}}async function fy(e,t,n){if(!nl(t))throw t;e.Ia.add(1),await ey(e),e.Aa.set("Offline"),n||(n=()=>_m(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ga(Xm,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Zm(e)})}function py(e,t){return t().catch(n=>fy(e,n,t))}async function gy(e){const t=Ya(e),n=Cy(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:-1;for(;my(t);)try{const e=await Im(t.localStore,r);if(null===e){0===t.Pa.length&&n.B_();break}r=e.batchId,yy(t,e)}catch(e){await fy(t,e)}vy(t)&&by(t)}function my(e){return ay(e)&&e.Pa.length<10}function yy(e,t){e.Pa.push(t);const n=Cy(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function vy(e){return ay(e)&&!Cy(e).M_()&&e.Pa.length>0}function by(e){Cy(e).start()}async function wy(e){Cy(e).na()}async function xy(e){const t=Cy(e);for(const n of e.Pa)t.X_(n.mutations)}async function Sy(e,t,n){const r=e.Pa.shift(),s=gf.from(r,t,n);await py(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await gy(e)}async function _y(e,t){t&&Cy(e).Z_&&await async function(e,t){if(function(e){switch(e){case Za.OK:return Qa(64938);case Za.CANCELLED:case Za.UNKNOWN:case Za.DEADLINE_EXCEEDED:case Za.RESOURCE_EXHAUSTED:case Za.INTERNAL:case Za.UNAVAILABLE:case Za.UNAUTHENTICATED:return!1;case Za.INVALID_ARGUMENT:case Za.NOT_FOUND:case Za.ALREADY_EXISTS:case Za.PERMISSION_DENIED:case Za.FAILED_PRECONDITION:case Za.ABORTED:case Za.OUT_OF_RANGE:case Za.UNIMPLEMENTED:case Za.DATA_LOSS:return!0;default:return Qa(15467,{code:e})}}(n=t.code)&&n!==Za.ABORTED){const n=e.Pa.shift();Cy(e).N_(),await py(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await gy(e)}var n}(e,t),vy(e)&&by(e)}async function Ey(e,t){const n=Ya(e);n.asyncQueue.verifyOperationInProgress(),Ga(Xm,"RemoteStore received new credentials");const r=ay(n);n.Ia.add(3),await ey(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Zm(n)}function Iy(e){return e.Va||(e.Va=function(e,t,n){const r=Ya(e);return r.ia(),new Km(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ly.bind(null,e),e_:uy.bind(null,e),n_:hy.bind(null,e),J_:dy.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),oy(e)?iy(e):e.Aa.set("Unknown")):(await e.Va.stop(),cy(e))})),e.Va}function Cy(e){return e.ma||(e.ma=function(e,t,n){const r=Ya(e);return r.ia(),new Wm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:wy.bind(null,e),n_:_y.bind(null,e),ea:xy.bind(null,e),ta:Sy.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await gy(e)):(await e.ma.stop(),e.Pa.length>0&&(Ga(Xm,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma}class Ty{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Ty(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ec(Za.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ky(e,t){if(Ka("AsyncQueue",`${t}: ${e}`),nl(e))return new ec(Za.UNAVAILABLE,`${t}: ${e}`);throw e}class Ay{static emptySet(e){return new Ay(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ec.comparator(t.key,n.key):(e,t)=>Ec.comparator(e.key,t.key),this.keyedMap=Cd(),this.sortedSet=new Au(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ay))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ay;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Dy{constructor(){this.fa=new Au(Ec.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?0!==e.type&&3===n.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==n.type?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.fa=this.fa.remove(t):1===e.type&&2===n.type?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Qa(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ny{constructor(e,t,n,r,s,i,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ny(e,t,Ay.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Oy{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Py{constructor(){this.queries=My(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=Ya(e),r=n.queries;n.queries=My(),r.forEach((e,n)=>{for(const e of n.wa)e.onError(t)})}(this,new ec(Za.ABORTED,"Firestore shutting down"))}}function My(){return new Sd(e=>yd(e),md)}async function Ry(e,t){const n=Ya(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new Oy,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=ky(e,`Initialization of query '${vd(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Vy(n)}async function Fy(e,t){const n=Ya(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.wa.indexOf(t);e>=0&&(i.wa.splice(e,1),0===i.wa.length?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ly(e,t){const n=Ya(e);let r=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.wa)t.Ca(e)&&(r=!0);s.ya=e}}r&&Vy(n)}function Uy(e,t,n){const r=Ya(e),s=r.queries.get(t);if(s)for(const e of s.wa)e.onError(n);r.queries.delete(t)}function Vy(e){e.Da.forEach(e=>{e.next()})}var By,jy;(jy=By||(By={})).Fa="default",jy.Cache="cache";class zy{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ny(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const n="Offline"!==t;return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Ny.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==By.Cache}}class $y{constructor(e){this.key=e}}class qy{constructor(e){this.key=e}}class Gy{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pd(),this.mutatedKeys=Pd(),this.Xa=wd(e),this.eu=new Ay(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new Dy,r=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=bd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.iu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Xa(u,a)>0||c&&this.Xa(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{eu:i,ru:n,Ds:o,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qa(20277,{At:e})}};return n(e)-n(t)}(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(n),r=null!=r&&r;const o=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,c=a!==this.Ya;return this.Ya=a,0!==i.length||c?{snapshot:new Ny(this.query,e.eu,s,i,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Dy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pd(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new qy(e))}),this.Za.forEach(n=>{e.has(n)||t.push(new $y(n))}),t}uu(e){this.Ha=e.qs,this.Za=Pd();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ny.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Ky="SyncEngine";class Wy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Hy{constructor(e){this.key=e,this.lu=!1}}class Qy{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new Sd(e=>yd(e),md),this.Tu=new Map,this.Iu=new Set,this.du=new Au(Ec.comparator),this.Eu=new Map,this.Au=new Xg,this.Ru={},this.Vu=new Map,this.mu=_g.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function Jy(e,t,n=!0){const r=mv(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await Yy(r,t,n,!0),s}async function Xy(e,t){const n=mv(e);await Yy(n,t,!0,!1)}async function Yy(e,t,n,r){const s=await function(e,t){const n=Ya(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.hi.getTargetData(e,t).next(s=>s?(r=s,Qc.resolve(r)):n.hi.allocateTargetId(e).next(s=>(r=new pp(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(e.targetId,e),n.Ms.set(t,e.targetId)),e})}(e.localStore,fd(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await async function(e,t,n,r,s){e.gu=(t,n,r)=>async function(e,t,n,r){let s=t.view.nu(n);s.Ds&&(s=await Tm(e.localStore,t.query,!1).then(({documents:e})=>t.view.nu(e,s)));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return uv(e,t.targetId,a._u),a.snapshot}(e,t,n,r);const i=await Tm(e.localStore,t,!0),o=new Gy(t,i.qs),a=o.nu(i.documents),c=Tf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);uv(e,n,l._u);const u=new Wy(t,n,o);return e.Pu.set(t,u),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),l.snapshot}(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&ty(e.remoteStore,s),a}async function Zy(e,t,n){const r=Ya(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(e=>!md(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ny(r.remoteStore,s.targetId),cv(r,s.targetId)}).catch(Hc)):(cv(r,s.targetId),await Cm(r.localStore,s.targetId,!0))}async function ev(e,t){const n=Ya(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ny(n.remoteStore,r.targetId))}async function tv(e,t){const n=Ya(e);try{const e=await Em(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(Xa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?Xa(r.lu,14607):e.removedDocuments.size>0&&(Xa(r.lu,42227),r.lu=!1))}),await fv(n,e,t)}catch(e){await Hc(e)}}function nv(e,t,n){const r=Ya(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Ya(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.wa)e.va(t)&&(r=!0)}),r&&Vy(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rv(e,t,n){const r=Ya(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new Au(Ec.comparator);e=e.insert(i,Ah.newNoDocument(i,Lc.min()));const n=Pd().add(i),s=new Cf(Lc.min(),new Map,new Au(fc),e,n);await tv(r,s),r.du=r.du.remove(i),r.Eu.delete(t),dv(r)}else await Cm(r.localStore,t,!1).then(()=>cv(r,t,n)).catch(Hc)}async function sv(e,t){const n=Ya(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ya(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Qc.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Xa(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Pd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);av(n,r,null),ov(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fv(n,e)}catch(e){await Hc(e)}}async function iv(e,t,n){const r=Ya(e);try{const e=await function(e,t){const n=Ya(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Xa(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);av(r,t,n),ov(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fv(r,e)}catch(e){await Hc(e)}}function ov(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function av(e,t,n){const r=Ya(e);let s=r.Ru[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function cv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||lv(e,t)})}function lv(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ny(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),dv(e))}function uv(e,t,n){for(const r of n)r instanceof $y?(e.Au.addReference(r.key,t),hv(e,r)):r instanceof qy?(Ga(Ky,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||lv(e,r.key)):Qa(19791,{yu:r})}function hv(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(Ga(Ky,"New document in limbo: "+n),e.Iu.add(r),dv(e))}function dv(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new Ec(xc.fromString(t)),r=e.mu.next();e.Eu.set(r,new Hy(n)),e.du=e.du.insert(n,r),ty(e.remoteStore,new pp(fd(ld(n.path)),r,"TargetPurposeLimboResolution",ul.ue))}}async function fv(e,t,n){const r=Ya(e),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{o.push(r.gu(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=mm.Es(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.hu.J_(s),await async function(e,t){const n=Ya(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Qc.forEach(t,t=>Qc.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Qc.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!nl(e))throw e;Ga(bm,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Fs.get(t),r=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(t,s)}}}(r.localStore,i))}async function pv(e,t){const n=Ya(e);if(!n.currentUser.isEqual(t)){Ga(Ky,"User change. New user:",t.toKey());const e=await Sm(n.localStore,t);n.currentUser=t,(r=n).Vu.forEach(e=>{e.forEach(e=>{e.reject(new ec(Za.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Vu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fv(n,e.Bs)}var r}function gv(e,t){const n=Ya(e),r=n.Eu.get(t);if(r&&r.lu)return Pd().add(r.key);{let e=Pd();const r=n.Tu.get(t);if(!r)return e;for(const t of r){const r=n.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function mv(e){const t=Ya(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rv.bind(null,t),t.hu.J_=Ly.bind(null,t.eventManager),t.hu.pu=Uy.bind(null,t.eventManager),t}function yv(e){const t=Ya(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iv.bind(null,t),t}class vv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return xm(this.persistence,new vm,e.initialUser,this.serializer)}Du(e){return new rm(im.Vi,this.serializer)}bu(e){return new Am}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vv.provider={build:()=>new vv};class bv extends vv{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xa(this.persistence.referenceDelegate instanceof om,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Og(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?gg.withCacheSize(this.cacheSizeBytes):gg.DEFAULT;return new rm(e=>om.Vi(e,t),this.serializer)}}class wv extends vv{constructor(e,t,n){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await yv(this.Mu.syncEngine),await gy(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return xm(this.persistence,new vm,e.initialUser,this.serializer)}Cu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Og(n,e.asyncQueue,t)}Fu(e,t){const n=new ll(t,this.persistence);return new cl(e.asyncQueue,n)}Du(e){const t=function(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gg.withCacheSize(this.cacheSizeBytes):gg.DEFAULT;return new fm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,"undefined"!=typeof window?window:null,jm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Am}}class xv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>nv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pv.bind(null,this.syncEngine),await async function(e,t){const n=Ya(e);t?(n.Ia.delete(2),await Zm(n)):t||(n.Ia.add(2),await ey(n),n.Aa.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Py}createDatastore(e){const t=zm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Bm(r));var r;return function(e,t,n,r){return new Qm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>nv(this.syncEngine,e,0),i=Om.C()?new Om:new Dm,new Ym(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new Qy(e,t,n,r,s,i);return o&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ya(e);Ga(Xm,"RemoteStore shutting down."),t.Ia.add(5),await ey(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}xv.provider={build:()=>new xv};class Sv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ka("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const _v="FirestoreClient";class Ev{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ja.UNAUTHENTICATED,this.clientId=dc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Ga(_v,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ga(_v,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ky(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Iv(e,t){e.asyncQueue.verifyOperationInProgress(),Ga(_v,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Sm(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Wa("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{Ga("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Wa("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function Cv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Tv(e);Ga(_v,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ey(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ey(t.remoteStore,n)),e._onlineComponents=t}async function Tv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ga(_v,"Using user provided OfflineComponentProvider");try{await Iv(e,e._uninitializedComponentsProvider._offline)}catch(n){const r=n;if(!("FirebaseError"===(t=r).name?t.code===Za.FAILED_PRECONDITION||t.code===Za.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw r;Wa("Error using user provided cache. Falling back to memory cache: "+r),await Iv(e,new vv)}}else Ga(_v,"Using default OfflineComponentProvider"),await Iv(e,new bv(void 0));var t;return e._offlineComponents}async function kv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ga(_v,"Using user provided OnlineComponentProvider"),await Cv(e,e._uninitializedComponentsProvider._online)):(Ga(_v,"Using default OnlineComponentProvider"),await Cv(e,new xv))),e._onlineComponents}function Av(e){return Tv(e).then(e=>e.persistence)}function Dv(e){return kv(e).then(e=>e.remoteStore)}async function Nv(e){const t=await kv(e),n=t.eventManager;return n.onListen=Jy.bind(null,t.syncEngine),n.onUnlisten=Zy.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Xy.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ev.bind(null,t.syncEngine),n}function Ov(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Pv=new Map,Mv="firestore.googleapis.com",Rv=!0;class Fv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ec(Za.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mv,this.ssl=Rv}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Rv;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=pg;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ag)throw new ec(Za.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ov(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ec(Za.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ec(Za.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ec(Za.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Lv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ec(Za.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ec(Za.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fv(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new rc;switch(e.type){case"firstParty":return new ac(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ec(Za.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Pv.get(e);t&&(Ga("ComponentProvider","Removing Datastore"),Pv.delete(e),t.terminate())}(this),Promise.resolve()}}function Uv(e,t,n,r={}){var s;e=Nc(e,Lv);const i=Vi(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(Bi(`https://${c}`),$i("Firestore",!0)),o.host!==Mv&&o.host!==c&&Wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Yi(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ja.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oi(JSON.stringify({alg:"none",type:"JWT"})),Oi(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ec(Za.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ja(i)}e._authCredentials=new sc(new nc(t,n))}}class Vv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vv(this.firestore,e,this._query)}}class Bv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bv(this.firestore,e,this._key)}toJSON(){return{type:Bv._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Pc(t,Bv._jsonSchema))return new Bv(e,n||null,new Ec(xc.fromString(t.referencePath)))}}Bv._jsonSchemaVersion="firestore/documentReference/1.0",Bv._jsonSchema={type:Oc("string",Bv._jsonSchemaVersion),referencePath:Oc("string")};class jv extends Vv{constructor(e,t,n){super(e,t,ld(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bv(this.firestore,null,new Ec(e))}withConverter(e){return new jv(this.firestore,e,this._path)}}function zv(e,t,...n){if(e=eo(e),Ic("collection","path",t),e instanceof Lv){const r=xc.fromString(t,...n);return kc(r),new jv(e,null,r)}{if(!(e instanceof Bv||e instanceof jv))throw new ec(Za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(xc.fromString(t,...n));return kc(r),new jv(e.firestore,null,r)}}function $v(e,t,...n){if(e=eo(e),1===arguments.length&&(t=dc.newId()),Ic("doc","path",t),e instanceof Lv){const r=xc.fromString(t,...n);return Tc(r),new Bv(e,null,new Ec(r))}{if(!(e instanceof Bv||e instanceof jv))throw new ec(Za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(xc.fromString(t,...n));return Tc(r),new Bv(e.firestore,e instanceof jv?e.converter:null,new Ec(r))}}const qv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new $m(this,"async_queue_retry"),this.oc=()=>{const e=jm();e&&Ga(qv,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=jm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=jm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new tc;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!nl(e))throw e;Ga(qv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,Ka("INTERNAL UNHANDLED ERROR: ",Kv(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Ty.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&Qa(47125,{hc:Kv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Kv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Wv(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(e)}class Hv extends Lv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function Qv(e,t,n){n||(n=Ju);const r=da(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Yi(r.getOptions(n),t))return e;throw new ec(Za.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new ec(Za.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<Ag)throw new ec(Za.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Vi(t.host)&&Bi(t.host),r.initialize({options:t,instanceIdentifier:n})}function Jv(e,t){const n=function(e=ia){const t=aa.get(e);if(!t&&e===ia&&Li())return ga();if(!t)throw fa.create("no-app",{appName:e});return t}(),r=Ju,s=da(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=Fi("firestore");e&&Uv(s,...e)}return s}function Xv(e){if(e._terminated)throw new ec(Za.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const s=e._freezeSettings(),i=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",c=e._persistenceKey,new Qu(o,a,c,(l=s).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ov(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator));var o,a,c,l;e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Ev(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}function Yv(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Av(e),n=await Dv(e);return t.setNetworkEnabled(!0),function(e){const t=Ya(e);return t.Ia.delete(0),Zm(t)}(n)})}(Xv(e=Nc(e,Hv)))}function Zv(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Av(e),n=await Dv(e);return t.setNetworkEnabled(!1),async function(e){const t=Ya(e);t.Ia.add(0),await ey(t),t.Aa.set("Offline")}(n)})}(Xv(e=Nc(e,Hv)))}class eb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eb(Lu.fromBase64String(e))}catch(e){throw new ec(Za.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new eb(Lu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:eb._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pc(e,eb._jsonSchema))return eb.fromBase64String(e.bytes)}}eb._jsonSchemaVersion="firestore/bytes/1.0",eb._jsonSchema={type:Oc("string",eb._jsonSchemaVersion),bytes:Oc("string")};class tb{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ec(Za.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _c(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nb{constructor(e){this._methodName=e}}class rb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ec(Za.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ec(Za.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fc(this._lat,e._lat)||fc(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rb._jsonSchemaVersion}}static fromJSON(e){if(Pc(e,rb._jsonSchema))return new rb(e.latitude,e.longitude)}}rb._jsonSchemaVersion="firestore/geoPoint/1.0",rb._jsonSchema={type:Oc("string",rb._jsonSchemaVersion),latitude:Oc("number"),longitude:Oc("number")};class sb{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sb._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pc(e,sb._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new sb(e.vectorValues);throw new ec(Za.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sb._jsonSchemaVersion="firestore/vectorValue/1.0",sb._jsonSchema={type:Oc("string",sb._jsonSchemaVersion),vectorValues:Oc("object")};const ib=/^__.*__$/;class ob{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cf(e,this.data,this.fieldMask,t,this.fieldTransforms):new af(e,this.data,t,this.fieldTransforms)}}class ab{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qa(40011,{Ec:e})}}class lb{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.fc(e),r}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:n,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return xb(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(cb(this.Ec)&&ib.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class ub{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zm(e)}Dc(e,t,n,r=!1){return new lb({Ec:e,methodName:t,bc:n,path:_c.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hb(e){const t=e._freezeSettings(),n=zm(e._databaseId);return new ub(e._databaseId,!!t.ignoreUndefinedProperties,n)}function db(e,t,n,r,s,i={}){const o=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);yb("Data must be an object, but it was:",o,r);const a=gb(r,o);let c,l;if(i.merge)c=new Ru(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=vb(t,r,n);if(!o.contains(s))throw new ec(Za.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Sb(e,s)||e.push(s)}c=new Ru(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new ob(new Th(a),c,l)}class fb extends nb{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fb}}function pb(e,t){if(mb(e=eo(e)))return yb("Unsupported field value:",t,e),gb(e,t);if(e instanceof nb)return function(e,t){if(!cb(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=pb(s,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=eo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ld(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Fc.fromDate(e);return{timestampValue:Bf(t.serializer,n)}}if(e instanceof Fc){const n=new Fc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bf(t.serializer,n)}}if(e instanceof rb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eb)return{bytesValue:jf(t.serializer,e._byteString)};if(e instanceof Bv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:qf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof sb)return n=e,r=t,{mapValue:{fields:{[Yu]:{stringValue:th},[nh]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.wc("VectorValues must only contain numeric values.");return Rd(r.serializer,e)})}}}}};var n,r;throw t.wc(`Unsupported field value: ${Dc(e)}`)}(e,t)}function gb(e,t){const n={};return ku(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tu(e,(e,r)=>{const s=pb(r,t.Vc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function mb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fc||e instanceof rb||e instanceof eb||e instanceof Bv||e instanceof nb||e instanceof sb)}function yb(e,t,n){if(!mb(n)||!Ac(n)){const r=Dc(n);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function vb(e,t,n){if((t=eo(t))instanceof tb)return t._internalPath;if("string"==typeof t)return wb(e,t);throw xb("Field path arguments must be of type string or ",e,!1,void 0,n)}const bb=new RegExp("[~\\*/\\[\\]]");function wb(e,t,n){if(t.search(bb)>=0)throw xb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new tb(...t.split("."))._internalPath}catch(r){throw xb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function xb(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ec(Za.INVALID_ARGUMENT,a+e+c)}function Sb(e,t){return e.some(e=>e.isEqual(t))}class _b{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Eb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ib("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Eb extends _b{data(){return super.data()}}function Ib(e,t){return"string"==typeof t?wb(e,t):t instanceof tb?t._internalPath:t._delegate._internalPath}class Cb{}class Tb extends Cb{}function kb(e,t,...n){let r=[];t instanceof Cb&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Nb).length,n=e.filter(e=>e instanceof Ab).length;if(t>1||t>0&&n>0)throw new ec(Za.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class Ab extends Tb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ab(e,t,n)}_apply(e){const t=this._parse(e);return Fb(e._query,t),new Vv(e.firestore,e.converter,pd(e._query,t))}_parse(e){const t=hb(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ec(Za.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Rb(o,i);const t=[];for(const n of o)t.push(Mb(r,e,n));a={arrayValue:{values:t}}}else a=Mb(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Rb(o,i),a=function(e,t,n,r=!1){return pb(n,e.Dc(r?4:3,t))}(n,"where",o,"in"===i||"not-in"===i);return Fh.create(s,i,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Db(e,t,n){const r=t,s=Ib("where",e);return Ab._create(s,r,n)}class Nb extends Cb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nb(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Lh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)Fb(n,e),n=pd(n,e)}(e._query,t),new Vv(e.firestore,e.converter,pd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ob extends Tb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ob(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ec(Za.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ec(Za.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ph(t,n)}(e._query,this._field,this._direction);return new Vv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Pb(e,t="asc"){const n=t,r=Ib("orderBy",e);return Ob._create(r,n)}function Mb(e,t,n){if("string"==typeof(n=eo(n))){if(""===n)throw new ec(Za.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hd(t)&&-1!==n.indexOf("/"))throw new ec(Za.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(xc.fromString(n));if(!Ec.isDocumentKey(r))throw new ec(Za.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fh(e,new Ec(r))}if(n instanceof Bv)return fh(e,n._key);throw new ec(Za.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dc(n)}.`)}function Rb(e,t){if(!Array.isArray(e)||0===e.length)throw new ec(Za.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Fb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ec(Za.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ec(Za.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Lb{convertValue(e,t="none"){switch(sh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qa(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Tu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[nh].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Bu(e.doubleValue));return new sb(s)}convertGeoPoint(e){return new rb(Bu(e.latitude),Bu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Wu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const t=Vu(e);return new Fc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=xc.fromString(e);Xa(fp(n),9688,{name:e});const r=new Xu(n.get(1),n.get(3)),s=new Ec(n.popFirst(5));return r.isEqual(t)||Ka(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Ub{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vb extends _b{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Ib("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ec(Za.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vb._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Vb._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vb._jsonSchema={type:Oc("string",Vb._jsonSchemaVersion),bundleSource:Oc("string","DocumentSnapshot"),bundleName:Oc("string"),bundle:Oc("string")};class Bb extends Vb{data(e={}){return super.data(e)}}class jb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ub(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bb(this._firestore,this._userDataWriter,n.key,n,new Ub(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ec(Za.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ub(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ub(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:zb(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ec(Za.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qa(61501,{type:e})}}function $b(e){e=Nc(e,Bv);const t=Nc(e.firestore,Hv);return function(e,t,n={}){const r=new tc;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Sv({next:a=>{i.Ou(),t.enqueueAndForget(()=>Fy(e,o));const c=a.docs.has(n);!c&&a.fromCache?s.reject(new ec(Za.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?s.reject(new ec(Za.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new zy(ld(n.path),i,{includeMetadataChanges:!0,ka:!0});return Ry(e,o)}(await Nv(e),e.asyncQueue,t,n,r)),r.promise}(Xv(t),e._key).then(n=>Qb(t,e,n))}jb._jsonSchemaVersion="firestore/querySnapshot/1.0",jb._jsonSchema={type:Oc("string",jb._jsonSchemaVersion),bundleSource:Oc("string","QuerySnapshot"),bundleName:Oc("string"),bundle:Oc("string")};class qb extends Lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new eb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bv(this.firestore,null,t)}}function Gb(e,t,n){e=Nc(e,Bv);const r=Nc(e.firestore,Hv),s=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);return Hb(r,[db(hb(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Yd.none())])}function Kb(e,t,n,...r){e=Nc(e,Bv);const s=Nc(e.firestore,Hv),i=hb(s);let o;return o="string"==typeof(t=eo(t))||t instanceof tb?function(e,t,n,r,s,i){const o=e.Dc(1,t,n),a=[vb(t,r,n)],c=[s];if(i.length%2!=0)throw new ec(Za.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<i.length;e+=2)a.push(vb(t,i[e])),c.push(i[e+1]);const l=[],u=Th.empty();for(let e=a.length-1;e>=0;--e)if(!Sb(l,a[e])){const t=a[e];let n=c[e];n=eo(n);const r=o.gc(t);if(n instanceof fb)l.push(t);else{const e=pb(n,r);null!=e&&(l.push(t),u.set(t,e))}}const h=new Ru(l);return new ab(u,h,o.fieldTransforms)}(i,"updateDoc",e._key,t,n,r):function(e,t,n,r){const s=e.Dc(1,t,n);yb("Data must be an object, but it was:",s,r);const i=[],o=Th.empty();Tu(r,(e,r)=>{const a=wb(t,e,n);r=eo(r);const c=s.gc(a);if(r instanceof fb)i.push(a);else{const e=pb(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new Ru(i);return new ab(o,a,s.fieldTransforms)}(i,"updateDoc",e._key,t),Hb(s,[o.toMutation(e._key,Yd.exists(!0))])}function Wb(e,...t){var n,r,s;e=eo(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||Wv(t[o])||(i=t[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Wv(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,l,u;if(e instanceof Bv)l=Nc(e.firestore,Hv),u=ld(e._key.path),c={next:n=>{t[o]&&t[o](Qb(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Nc(e,Vv);l=Nc(n.firestore,Hv),u=n._query;const r=new qb(l);c={next:e=>{t[o]&&t[o](new jb(l,r,n,e))},error:t[o+1],complete:t[o+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ec(Za.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){const s=new Sv(r),i=new zy(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Ry(await Nv(e),i)),()=>{s.Ou(),e.asyncQueue.enqueueAndForget(async()=>Fy(await Nv(e),i))}}(Xv(l),u,a,c)}function Hb(e,t){return function(e,t){const n=new tc;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=yv(e);try{const e=await function(e,t){const n=Ya(e),r=Fc.now(),s=t.reduce((e,t)=>e.add(t.key),Pd());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ed(),c=Pd();return n.Os.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=sf(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new cf(e.key,t,kh(t.value.mapValue),Yd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Td(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ru[e.currentUser.toKey()];r||(r=new Au(fc)),r=r.insert(t,n),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,n),await fv(r,e.changes),await gy(r.remoteStore)}catch(e){const t=ky(e,"Failed to persist write");n.reject(t)}}(await function(e){return kv(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Xv(e),t)}function Qb(e,t,n){const r=n.docs.get(t._key),s=new qb(e);return new Vb(e,s,t._key,r,new Ub(n.hasPendingWrites,n.fromCache),t.converter)}class Jb{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Zb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Xb(e){return new Jb(e)}class Yb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=xv.provider,this._offlineComponentProvider={build:t=>new wv(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function Zb(e){return new Yb(void 0)}!function(e,t=!0){za="11.10.0",ha(new to("firestore",(e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),i=new Hv(new ic(e.getProvider("auth-internal")),new lc(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ec(Za.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i},"PUBLIC").setMultipleInstances(!0)),ma(Va,Ba,e),ma(Va,Ba,"esm2017")}();const ew=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Lb,Bytes:eb,CollectionReference:jv,DocumentReference:Bv,DocumentSnapshot:Vb,FieldPath:tb,FieldValue:nb,Firestore:Hv,FirestoreError:ec,GeoPoint:rb,Query:Vv,QueryCompositeFilterConstraint:Nb,QueryConstraint:Tb,QueryDocumentSnapshot:Bb,QueryFieldFilterConstraint:Ab,QueryOrderByConstraint:Ob,QuerySnapshot:jb,SnapshotMetadata:Ub,Timestamp:Fc,VectorValue:sb,_AutoId:dc,_ByteString:Lu,_DatabaseId:Xu,_DocumentKey:Ec,_EmptyAuthCredentialsProvider:rc,_FieldPath:_c,_cast:Nc,_logWarn:Wa,_validateIsNotUsedTogether:Cc,collection:zv,connectFirestoreEmulator:Uv,disableNetwork:Zv,doc:$v,enableNetwork:Yv,ensureFirestoreConfigured:Xv,executeWrite:Hb,getDoc:$b,getFirestore:Jv,initializeFirestore:Qv,onSnapshot:Wb,orderBy:Pb,persistentLocalCache:Xb,persistentSingleTabManager:Zb,query:kb,setDoc:Gb,updateDoc:Kb,where:Db},Symbol.toStringTag,{value:"Module"}));function tw(e){return new URLSearchParams(window.location.search).get(e)}function nw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}async function rw(e){const t=gw();if(void 0===Ti)return hw("FSUpdatesHandler - FileMaker not detected, skipping","warn"),{success:!1,message:"FileMaker not available"};if("passive"===t.device.deviceMode)return hw("FSUpdatesHandler - Device in passive mode, skipping","info"),{success:!0,message:"Passive mode - no processing needed"};const n=e.updates||[];if(!n.length)return hw("FSUpdatesHandler - No updates to process","info"),{success:!0,message:"No updates to process"};const r=[];return n.forEach(e=>{const t={id:e.id,_table:e._table,_tsModFireStore:e._tsModFireStore,_ts:{}};void 0===e._ts&&(e._ts={}),Object.keys(e._ts).forEach(n=>{("number"==typeof e._ts[n]||"object"==typeof e._ts[n])&&(t[n]=e[n],t._ts[n]=e._ts[n])}),(null==e?void 0:e.devicePendingContainer)&&(t.devicePendingContainer=e.devicePendingContainer),(null==e?void 0:e.batchTotalEdits)&&(t.batchTotalEdits=e.batchTotalEdits),(null==e?void 0:e.batchIdEdits)&&(t.batchIdEdits=e.batchIdEdits),r.push(t)}),t.updatesQueue.push(...r),t.updatesTotal+=r.length,hw(`Batched updates: ${r.length}, Total Updates: ${t.updatesQueue.length}`,"info"),t.isUpdatingFM?{success:!0,message:"Update process already running"}:await async function(e){const t=e.fmUpdatesBatchSize||10;let n=!1;e.isUpdatingFM=!0;try{for(;e.updatesQueue.length>0;){e.startProcessing();const r=e.updatesQueue.slice(0,t),s="API - Web Sync Inbound dispatcher {payload}",i={updates:r,remaining:e.updatesQueue.length-r.length};hw(`Sending updates: ${r.length}`,"info");const o=await Ti.performScript(s,JSON.stringify(i),1e4);if(!o.success){hw(`ERROR writing batch to database: ${JSON.stringify(o.error)}`,"error");break}hw(`${r.length} Updates successfully saved!`,"info"),e.updatesTotalCompleted+=r.length,sw(r,e)&&(n=!0),e.updatesQueue.splice(0,r.length);try{const t=window.localStorage.device;if(t&&n){const n=JSON.parse(t);n.tsModFireStoreLastUpdate=e.device.tsModFireStoreLastUpdate,window.localStorage.device=JSON.stringify(n)}}catch{hw("Error updating device object in localStorage","error")}}if(n)try{const t=$v(Jv(),"Organizations",e.organization.id,"Devices",e.device.id);await Kb(t,{tsModFireStoreLastUpdate:new Date(e.device.tsModFireStoreLastUpdate)})}catch(e){hw(`Error updating Firestore timestamp: ${e.message}`,"error")}return e.updatesTotal===e.updatesTotalCompleted&&(hw("Updates Completed!","info"),e.updatesTotal=0,e.updatesTotalCompleted=0),n&&(hw("Re-subscribing device with new timestamp","info"),ow("subscribeUpdatesDebounce")),{success:!0,message:"Updates processed successfully"}}catch(e){return hw(`Error in sendUpdatesToDatabase: ${e.message}`,"error"),{success:!1,error:e.message}}finally{e.isUpdatingFM=!1;try{e.endProcessing(),hw("sendUpdatesToDatabase - processing ended","info")}catch{}}}(t)}function sw(e,t){function n(e){return e&&e.toMillis?e.toMillis()+(e.nanoseconds||0)/1e6:Date.parse(e)}let r=!1;return e.forEach(e=>{if(e.batchIdEdits){s=e.batchIdEdits,i=e._tsModFireStore,Object.prototype.hasOwnProperty.call(t.updatesBatches,s)?n(i)>n(t.updatesBatches[s].latestTs)&&(t.updatesBatches[s].latestTs=i):t.updatesBatches[s]={latestTs:i};const o=t.updatesBatches[e.batchIdEdits],a=o.totalReceived||0;a+1===e.batchTotalEdits||1===e.batchTotalEdits?(t.device.tsModFireStoreLastUpdate=function(e){if(e&&e.toMillis){const t=e.toMillis()+(e.nanoseconds||0)/1e6;return new Date(t).toISOString()}return new Date(e).toISOString()}(o.latestTs),delete t.updatesBatches[e.batchIdEdits],r=!0):o.totalReceived=a+1}var s,i}),r}function iw(e,t){if(!e||e.empty)return void hw("processSnapshot - No updates in snapshot","info");const n=[],r=["devicePendingContainer","batchTotalEdits","batchIdEdits"];if(e.docChanges().forEach(async e=>{const s=e.doc.data();if("added"===e.type||"modified"===e.type){hw(`processSnapshot - Processing ${e.type} update: ${s.id||e.doc.id}`,"info"),ow("isProcessing");const i=62135596800,o=Date.parse(t.device.tsModFireStoreLastUpdate)/1e3;if(s.updatedKeys||(s.updatedKeys=[]),s._ts)for(const[e,t]of Object.entries(s._ts))t&&t.ts&&Math.round(t.ts/1e3)-i>o&&!s.updatedKeys.includes(e)&&s.updatedKeys.push(e);const a={_table:s._table,id:s.id||e.doc.id,_tsModFireStore:s._tsModFireStore,_ts:{}};s.updatedKeys.forEach(e=>{a[e]=s[e],r.includes(e)||(a._ts[e]=s._ts[e])}),s.batchTotalEdits&&(a.batchTotalEdits=s.batchTotalEdits),s.batchIdEdits&&(a.batchIdEdits=s.batchIdEdits),s.devicePendingContainer&&(a.devicePendingContainer=s.devicePendingContainer),n.push(a)}}),n.length>0){hw(`processSnapshot - Calling FSUpdatesHandler with ${n.length} updates`,"info");const e=n[n.length-1]._tsModFireStore;ow("FSUpdatesHandler",{updates:n,_tsModFireStoreLastUpdate:e instanceof Date?e:new Date(e)})}}function ow(e,t={}){const n=gw();let r;hw(`[DEBUG] namedAction called: ${e}`,"info"),hw(`[DEBUG] namedAction options: ${JSON.stringify(t,null,2)}`,"info"),hw(`[DEBUG] namedAction timestamp: ${(new Date).toISOString()}`,"info");try{switch(e){case"isProcessing":return hw("[DEBUG] Starting isProcessing action","info"),r=n.startProcessing(),hw(`[DEBUG] isProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"endProcessing":return hw("[DEBUG] Starting endProcessing action","info"),r=n.endProcessing(),hw(`[DEBUG] endProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"promptUserToConfigure":return hw("[DEBUG] Starting promptUserToConfigure action","info"),console.log("[namedAction] promptUserToConfigure called"),r=Promise.resolve({success:!0,message:"User prompted (mocked)"}),hw(`[DEBUG] promptUserToConfigure result: ${JSON.stringify(r,null,2)}`,"info"),r;case"getSignedURL":return hw("[DEBUG] Starting getSignedURL action","info"),console.log("[namedAction] getSignedURL called with options:",t),r=Promise.resolve(`https://mock-signed-url.com/${t.name}`),hw(`[DEBUG] getSignedURL result: ${JSON.stringify(r,null,2)}`,"info"),r;case"FSUpdatesHandler":return hw("[DEBUG] Starting FSUpdatesHandler action","info"),r=rw(t),hw(`[DEBUG] FSUpdatesHandler result: ${JSON.stringify(r,null,2)}`,"info"),r;case"editsUpdateStatus":return hw("[DEBUG] Starting editsUpdateStatus action","info"),r=async function(e){const t=gw();hw(`[DEBUG] handleEditsUpdateStatus called with options: ${JSON.stringify(e,null,2)}`,"info"),hw("[DEBUG] Current appConfig state before update:","info"),hw(`[DEBUG] - editsCurrentState: ${t.editsCurrentState}`,"info"),hw(`[DEBUG] - editsTotalPending: ${t.editsTotalPending}`,"info");try{if(e.currentState&&(hw(`[DEBUG] Updating editsCurrentState from ${t.editsCurrentState} to ${e.currentState}`,"info"),t.editsCurrentState=e.currentState),void 0!==e.pendingEdits&&(hw(`[DEBUG] Updating editsTotalPending from ${t.editsTotalPending} to ${e.pendingEdits}`,"info"),t.editsTotalPending=e.pendingEdits),hw("[DEBUG] Final appConfig state after update:","info"),hw(`[DEBUG] - editsCurrentState: ${t.editsCurrentState}`,"info"),hw(`[DEBUG] - editsTotalPending: ${t.editsTotalPending}`,"info"),void 0!==Ti){hw("[DEBUG] fmBridgit available, calling returnResult with status: ok","info");try{const e=await Ti.returnResult({status:"ok"});hw(`[DEBUG] fmBridgit.returnResult completed successfully: ${JSON.stringify(e)}`,"info")}catch(e){hw(`[WARN] fmBridgit.returnResult failed: ${e.message}`,"warn"),hw("[WARN] This is expected behavior - FileMaker may reject some acknowledgments","warn")}}else hw("[WARN] fmBridgit not available for returnResult","warn");const n={success:!0,message:"Edit status updated"};return hw(`[DEBUG] handleEditsUpdateStatus returning: ${JSON.stringify(n,null,2)}`,"info"),Promise.resolve(n)}catch(e){hw(`[ERROR] Error in handleEditsUpdateStatus: ${e.message}`,"error"),hw(`[ERROR] Error stack: ${e.stack}`,"error");const t={success:!1,error:e.message};return hw(`[DEBUG] handleEditsUpdateStatus returning error: ${JSON.stringify(t,null,2)}`,"info"),Promise.resolve(t)}}(t),hw(`[DEBUG] editsUpdateStatus result: ${JSON.stringify(r,null,2)}`,"info"),r;case"updatesContainerDownloads":return hw("[DEBUG] Starting updatesContainerDownloads action","info"),r=async function(e){var t,n;const r=gw();hw(`[DEBUG] handleUpdatesContainerDownloads called with options: ${JSON.stringify(e,null,2)}`,"info"),hw("[DEBUG] Current appConfig state before update:","info"),hw(`[DEBUG] - updateTotalContainers: ${r.updateTotalContainers}`,"info"),hw(`[DEBUG] - updateCompletedContainers: ${r.updateCompletedContainers}`,"info");try{if(void 0!==(null==(t=null==e?void 0:e.updates)?void 0:t.totalContainers)){const t=r.updateTotalContainers;r.updateTotalContainers+=e.updates.totalContainers,hw(`[DEBUG] Updated updateTotalContainers from ${t} to ${r.updateTotalContainers}`,"info")}if(void 0!==(null==(n=null==e?void 0:e.updates)?void 0:n.completedContainers)){const t=r.updateCompletedContainers;r.updateCompletedContainers+=e.updates.completedContainers,hw(`[DEBUG] Updated updateCompletedContainers from ${t} to ${r.updateCompletedContainers}`,"info")}if(r.updateCompletedContainers===r.updateTotalContainers&&(hw("[DEBUG] Container download complete, resetting counters","info"),r.updateCompletedContainers=0,r.updateTotalContainers=0),r.updateCompletedContainers>r.updateTotalContainers&&(hw("[WARN] Container overflow detected, resetting completed count","warn"),r.updateCompletedContainers=0),hw("[DEBUG] Final appConfig state after update:","info"),hw(`[DEBUG] - updateTotalContainers: ${r.updateTotalContainers}`,"info"),hw(`[DEBUG] - updateCompletedContainers: ${r.updateCompletedContainers}`,"info"),void 0!==Ti){hw("[DEBUG] fmBridgit available, calling returnResult with status: ok","info");try{const e=await Ti.returnResult({status:"ok"});hw(`[DEBUG] fmBridgit.returnResult completed successfully: ${JSON.stringify(e)}`,"info")}catch(e){hw(`[WARN] fmBridgit.returnResult failed: ${e.message}`,"warn"),hw("[WARN] This is expected behavior - FileMaker may reject some acknowledgments","warn")}}else hw("[WARN] fmBridgit not available for returnResult","warn");const s={success:!0,message:"Container downloads updated"};return hw(`[DEBUG] handleUpdatesContainerDownloads returning: ${JSON.stringify(s,null,2)}`,"info"),Promise.resolve(s)}catch(e){hw(`[ERROR] Error in handleUpdatesContainerDownloads: ${e.message}`,"error"),hw(`[ERROR] Error stack: ${e.stack}`,"error");const t={success:!1,error:e.message};return hw(`[DEBUG] handleUpdatesContainerDownloads returning error: ${JSON.stringify(t,null,2)}`,"info"),Promise.resolve(t)}}(t),hw(`[DEBUG] updatesContainerDownloads result: ${JSON.stringify(r,null,2)}`,"info"),r;case"webSyncReceivePayload":return hw("[DEBUG] Starting webSyncReceivePayload action","info"),r=async function(e){var t,n;const r=gw(),s=e.payload;if(hw("[DEBUG] webSyncReceivePayload called with options:","info"),hw(`[DEBUG] Options keys: ${Object.keys(e||{}).join(", ")}`,"info"),hw("[DEBUG] Payload type: "+typeof s,"info"),hw(`[DEBUG] Payload content: ${JSON.stringify(s,null,2)}`,"info"),!s)return hw("[ERROR] No payload provided to webSyncReceivePayload","error"),Promise.resolve({success:!1,message:"No payload provided"});if(s.status)return hw("[DEBUG] Status ping received, acknowledging","info"),void 0!==Ti&&Ti.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Status ping acknowledged"});if(s.edits&&Array.isArray(s.edits)){hw(`[DEBUG] Processing ${s.edits.length} edits from FileMaker`,"info"),hw(`[DEBUG] Edits array: ${JSON.stringify(s.edits,null,2)}`,"info");let e=0;const i=5;for(;e<i;)if(hw(`[DEBUG] Firebase readiness check attempt ${e+1}/${i}`,"info"),window.fsDeviceRef&&window.fsOrganizationRef){hw("[DEBUG] Firebase references available, proceeding with edit processing","info");try{for(const e of s.edits){hw(`[DEBUG] Processing edit: ${JSON.stringify(e,null,2)}`,"info");const s={...e,id:e.id||null,_table:e._table||e.table||"UnknownTable",_tsModFireStore:new Date,_ts:e._ts||{},_contexts:r.device.contexts||[]};hw(`[DEBUG] Prepared edit data for Firestore: ${JSON.stringify(s,null,2)}`,"info");try{const{doc:i,setDoc:o,getDoc:a,collection:c}=await Ci(async()=>{const{doc:e,setDoc:t,getDoc:n,collection:r}=await Promise.resolve().then(()=>ew);return{doc:e,setDoc:t,getDoc:n,collection:r}},void 0,import.meta.url),l=i(c(window.fsDeviceRef,"Edits"));hw(`[DEBUG] Creating Firestore document at: Organizations/${r.organization.id}/Devices/${r.device.id}/Edits/${s.id}`,"info"),await o(l,s);try{const e=await a(l);hw(`[DEBUG] Read-back after write  exists: ${e.exists()}, fromCache: ${null==(t=e.metadata)?void 0:t.fromCache}, hasPendingWrites: ${null==(n=e.metadata)?void 0:n.hasPendingWrites}`,"info")}catch(e){hw(`[WARN] Read-back check failed: ${(null==e?void 0:e.message)||e}`,"warn")}hw(`[DEBUG] Successfully created Firestore document for edit: ${s.id}`,"info"),"containerIsUploaded"===e.typeEdit&&(r.editsContainersComplete+=1,hw(`[DEBUG] Updated container completion count: ${r.editsContainersComplete}`,"info"))}catch(e){hw(`[ERROR] Failed to create Firestore document for edit ${s.id}: ${e.message}`,"error"),hw(`[ERROR] Firestore error details: ${JSON.stringify(e,null,2)}`,"error")}}r.editsCurrentState="4",hw(`[DEBUG] Updated edit state to: ${r.editsCurrentState}`,"info");try{r.endProcessing()}catch{}r.editsContainersComplete===r.editsContainersTotal&&(r.editsContainersComplete=0,r.editsContainersTotal=0,hw("[DEBUG] Reset container counters","info"));const e={payload:s.modificationTimestampUTCEnd?{modificationTimestampUTCEnd:s.modificationTimestampUTCEnd}:{}};return hw(`[DEBUG] Returning success response to FileMaker: ${JSON.stringify(e,null,2)}`,"info"),void 0!==Ti&&(Ti.returnResult(e),hw("[DEBUG] Result returned to FileMaker via fmBridgit","info")),Promise.resolve({success:!0,message:"Payload processed successfully"})}catch(e){return hw(`[ERROR] Error processing edits: ${e.message}`,"error"),hw(`[ERROR] Processing error details: ${JSON.stringify(e,null,2)}`,"error"),Promise.resolve({success:!1,message:`Processing error: ${e.message}`})}}else{if(e++,hw(`[WARN] Firebase not ready yet, attempt: ${e}/${i}`,"warn"),hw(`[DEBUG] fsDeviceRef available: ${!!window.fsDeviceRef}`,"info"),hw(`[DEBUG] fsOrganizationRef available: ${!!window.fsOrganizationRef}`,"info"),e>=i)return hw("[ERROR] webSync Timeout - Firebase not ready after maximum attempts","error"),Promise.resolve({success:!1,message:"Firebase timeout"});hw("[DEBUG] Waiting 1 second before retry...","info"),await new Promise(e=>setTimeout(e,1e3))}}else hw("[WARN] No edits array found in payload","warn"),hw(`[DEBUG] Payload keys: ${Object.keys(s).join(", ")}`,"info");return hw("[DEBUG] webSyncReceivePayload completed without processing edits","info"),Promise.resolve({success:!1,message:"No edits to process"})}(t),hw(`[DEBUG] webSyncReceivePayload result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdates":return hw("[DEBUG] Starting subscribeUpdates action","info"),r=function(){const e=gw();if("passive"===e.device.deviceMode)return hw("subscribeUpdates - Device in passive mode, skipping subscription","info"),Promise.resolve({success:!0,message:"Passive mode - no subscription needed"});try{const t=new Date,n=e.device.tsModFireStoreLastUpdate?new Date(e.device.tsModFireStoreLastUpdate):t;if(hw(`subscribeUpdates - Starting subscription from timestamp: ${n.toISOString()}`,"info"),n===t&&(e.device.tsModFireStoreLastUpdate=n,window.fsDeviceRef))try{Kb($v(Jv(),"Organizations",e.organization.id,"Devices",e.device.id),{tsModFireStoreLastUpdate:n}).catch(e=>{hw(`Error updating device timestamp: ${e.message}`,"error")})}catch(e){hw(`Error accessing Firestore for timestamp update: ${e.message}`,"error")}if(window.fsUpdatesRefUnsubscribe&&"function"==typeof window.fsUpdatesRefUnsubscribe&&(window.fsUpdatesRefUnsubscribe(),hw("subscribeUpdates - Cleaned up existing subscription","info")),!window.fsUpdatesRef)return hw("subscribeUpdates - Firestore updates reference not available, cannot subscribe","warn"),Promise.resolve({success:!1,message:"Firestore references not available"});const r=kb(window.fsUpdatesRef,Pb("_tsModFireStore","asc"),Db("_tsModFireStore",">",Fc.fromDate(n)),Db("_contexts","array-contains-any",e.device.contexts));return window.fsUpdatesRefUnsubscribe=Wb(r,{includeMetadataChanges:!1},t=>{iw(t,e)},e=>{hw(`subscribeUpdates - Snapshot listener error: ${e.message}`,"error")}),hw("subscribeUpdates - Firestore listener established successfully","info"),Promise.resolve({success:!0,message:"Updates subscription established"})}catch(e){return hw(`subscribeUpdates - Error setting up subscription: ${e.message}`,"error"),Promise.resolve({success:!1,error:e.message})}}(),hw(`[DEBUG] subscribeUpdates result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdatesDebounce":return hw("subscribeUpdatesDebounce called - would re-subscribe to updates","info"),Promise.resolve({success:!0,message:"Debounced subscription triggered"});default:return console.warn(`[namedAction] Unknown action: ${e}`),Promise.resolve({success:!1,message:`Unknown action: ${e}`})}}catch(t){return hw(`[ERROR] Error in namedAction ${e}: ${t.message}`,"error"),hw(`[ERROR] Error stack: ${t.stack}`,"error"),Promise.resolve({success:!1,error:t.message})}}function aw(){console.log("[BF] actionsClear called - clearing action queue (mocked)"),gw().endProcessing()}function cw(e,t){const n=gw();"isProcessing"===e?t?n.startProcessing():n.endProcessing():console.log(`[setGlobalVar] ${e} = ${t}`)}function lw(e){const t=gw();switch(e){case"isProcessing":return t.isProcessing;case"deviceId":return t.device.id;case"organizationId":return t.organization.id;default:return console.warn(`[getGlobalVar] Unknown variable: ${e}`),null}}function uw(e,t="Alert"){console.log(`[Alert] ${t}: ${e}`),alert(`${t}\n\n${e}`)}function hw(e,t="info"){const n=(new Date).toISOString(),r=`[BF-${t.toUpperCase()}] ${n}`;switch(t){case"error":console.error(r,e);break;case"warn":console.warn(r,e);break;case"debug":console.debug(r,e);break;default:console.log(r,e)}}async function dw(e){try{const t=JSON.parse(e),{name:n,options:r={}}=t;hw(`namedActionFM called: ${n}`,"info");const s=await Promise.resolve(ow(n,r));try{return JSON.stringify(s)}catch(e){return JSON.stringify({success:!1,error:`stringify_failed: ${String((null==e?void 0:e.message)||e)}`})}}catch(e){return hw(`Error in namedActionFM: ${e.message}`,"error"),JSON.stringify({success:!1,error:String((null==e?void 0:e.message)||e)})}}const fw={getQueryParam:tw,getUUID:nw,namedAction:ow,namedActionFM:dw,actionsClear:aw,setGlobalVar:cw,getGlobalVar:lw,showAlert:uw,log:hw};"undefined"!=typeof window&&(window.BF=fw,window.processSnapshot=iw);const pw=Object.freeze(Object.defineProperty({__proto__:null,BF:fw,actionsClear:aw,getGlobalVar:lw,getQueryParam:tw,getUUID:nw,log:hw,namedAction:ow,namedActionFM:dw,setGlobalVar:cw,showAlert:uw},Symbol.toStringTag,{value:"Module"})),gw=Ei("appConfig",{state:()=>({sessionId:nw(),activeJob:null,configx:{deviceMode:"passive",deviceType:"webApp",idContext:"CON_north",idDevice:null,idOrganization:null,tsModFireStoreLastUpdate:(new Date).toISOString(),autoPullEdits:!1},device:{id:"DEV_demo",deviceMode:"passive",deviceType:"webApp",tsModFireStoreLastUpdate:null,contexts:["defaultContext"],tables:[],recordID:null,lastSyncOutUTC:null,syncAppURL:null},editsContainersComplete:0,editsContainersTotal:0,editsTotalCompleted:0,editsTotal:0,editsCurrentState:"0",fmPendingEdits:0,editsLocalPendingWrites:0,lastFmStatusAt:null,fmStatusScriptName:"API - Web Sync Status",fmStatusPollingMs:15e3,editsStates:{0:"No New Edits",1:"Starting Sync",2:"Fetching New Edits",3:"Sending Data",4:"Updates Sent",5:"New Edits"},editsTotalPending:0,env:{logoURL:"https://ucarecdn.com/cbbbcd08-c49f-499d-8125-e1dbb2a4f262/"},fmUpdatesBatchSize:25,isOnline:!0,isProcessing:!1,isUpdatingFM:!1,localFSInSync:"-",log:"---",organization:{id:"ORG_demo"},payload:{},people:[],storageSize:0,updateCompletedContainers:0,updateTotalContainers:0,updatesBatches:{},updatesCurrentTS:{},updatesQueue:[],updatesTotal:0,updatesTotalCompleted:0,updatesTotalRecords:0,sessionUpload:{active:!1,total:0,baselineCompleted:0,startedAt:null,lastTotal:0,lastCompleted:0,endedAt:null}}),actions:{initializeConfigFromURLParams(){const e=e=>new URLSearchParams(window.location.search).get(e);console.log("@onAppLoad InitConfigs - Initial device state before URL params: ",JSON.parse(JSON.stringify(this.device)));const t=e("idOrganization");this.organization.id=t||this.organization.id||"ORG_demo",this.configx.idOrganization=this.organization.id;const n=e("idDevice");this.device.id=n||this.device.id||"DEV_demo",this.configx.idDevice=this.device.id,this.device.deviceMode=e("deviceMode")||this.device.deviceMode||"passive",this.configx.deviceMode=this.device.deviceMode,this.device.deviceType=e("deviceType")||this.device.deviceType||"webApp",this.configx.deviceType=this.device.deviceType;try{const e=window.localStorage.getItem("ws-auto-pull-edits"),t=window.localStorage.getItem("ws-auto-pull-fm-edits"),n=window.localStorage.getItem("ws-auto-push-edits");null!==e?this.configx.autoPullEdits="1"===e:null!==t?this.configx.autoPullEdits="1"===t:null!==n&&(this.configx.autoPullEdits="1"===n)}catch{}const r=e("autoPullEdits"),s=e("autoPullFmEdits"),i=e("autoPushEdits"),o=r??s??i;if(null!==o){const e=String(o).toLowerCase(),t="1"===e||"true"===e||"yes"===e;this.configx.autoPullEdits=t;try{window.localStorage.setItem("ws-auto-pull-edits",t?"1":"0")}catch{}}const a=e("contexts");if(a)try{const e=decodeURI(a).split(",");this.device.contexts=e.length>0?e:this.device.contexts}catch(e){console.error("Error decoding contexts from URL query parameter:",e)}console.log("Final appConfig store state after URL params:",JSON.parse(JSON.stringify(this.$state)))},startProcessing(){this.isProcessing=!0,console.log("isProcessing set to true")},endProcessing(){this.isProcessing=!1,console.log("isProcessing set to false")},setAutoPullEdits(e){const t=!!e;this.configx.autoPullEdits=t;try{window.localStorage.setItem("ws-auto-pull-edits",t?"1":"0")}catch{}},setAutoPullFmEdits(e){this.setAutoPullEdits(e)},setAutoPushEdits(e){this.setAutoPullEdits(e)},beginUploadSession(e=0,t=0){this.sessionUpload.active=!0,this.sessionUpload.total=Number.isFinite(e)?e:0,this.sessionUpload.baselineCompleted=Number.isFinite(t)?t:0,this.sessionUpload.startedAt=(new Date).toISOString(),this.sessionUpload.lastTotal=0,this.sessionUpload.lastCompleted=0,this.sessionUpload.endedAt=null},endUploadSession(){const e=Math.max(0,(this.editsTotalCompleted||0)-(this.sessionUpload.baselineCompleted||0));this.sessionUpload.lastTotal=this.sessionUpload.total||0,this.sessionUpload.lastCompleted=Math.min(this.sessionUpload.lastTotal,e),this.sessionUpload.endedAt=(new Date).toISOString(),this.sessionUpload.active=!1,this.sessionUpload.total=0,this.sessionUpload.baselineCompleted=0,this.sessionUpload.startedAt=null}}});ma("firebase","11.10.0","app");const mw={apiKey:"AIzaSyC7IAF_M-rtG-W-M-OxTstiEeS3oG3ctoY",appId:"1:415177867181:web:f0c952ea381ee04fe3ab24",authDomain:"bf-pwa.firebaseapp.com",measurementId:"G-RMDP2726CQ",messagingSenderId:"415177867181",projectId:"bf-pwa",storageBucket:"bf-pwa.appspot.com"};let yw=null,vw=null,bw=null,ww=null,xw=null,Sw=null,_w=null;async function Ew(){var e;const t=gw();if("passive"!==t.device.deviceMode)if(vw)console.log("Firebase already initialized.");else try{console.log("Initializing Firebase app..."),vw=ga(mw),yw=Qv(vw,{localCache:Xb()});try{console.log("Using Firebase project:",null==(e=null==vw?void 0:vw.options)?void 0:e.projectId)}catch{}if(console.log("Configured Firestore persistent local cache."),!t.organization.id||!t.device.id)return void console.error("Organization ID or Device ID not available from config store for Firebase refs initialization.");bw=$v(yw,"Organizations",t.organization.id),ww=$v(bw,"Devices",t.device.id),xw=zv(bw,"Updates"),Sw=zv(ww,"Edits"),console.log("Firestore document/collection references initialized."),console.log("Firebase services initialized."),await async function(){var e;console.log("Setting up Firestore listeners and initial checks..."),await async function(){const e=gw();if(e.organization.id&&e.device.id)try{console.log(`Ensuring Organization document exists: Organizations/${e.organization.id}`),await Gb(bw,{},{merge:!0}),console.log(`Ensuring Device document exists: Organizations/${e.organization.id}/Devices/${e.device.id}`),await Gb(ww,{deviceType:e.device.deviceType},{merge:!0}),console.log("Parent documents checked/created successfully.")}catch(e){console.error("Error in checkParentDocuments: ",e)}else console.error("Organization ID or Device ID is missing. Cannot check/create parent documents.")}(),"undefined"!=typeof window&&(window.fsOrganizationRef=bw,window.fsDeviceRef=ww,window.fsUpdatesRef=xw,window.fsUpdatesRefUnsubscribe=null,window.fsEditsRef=Sw,window.fsEditsRefUnsubscribe=_w,console.log("Firestore references exposed globally for BetterForms compatibility"));try{const t=gw();if(ww){const n=await $b(ww);if(n.exists()){const r=null==(e=n.data())?void 0:e.tsModFireStoreLastUpdate;if(r){const e="function"==typeof r.toDate?r.toDate().toISOString():new Date(r).toISOString();t.device.tsModFireStoreLastUpdate=e,console.log("Hydrated device timestamp from Firebase:",e)}else console.log("No tsModFireStoreLastUpdate field found in Firebase device document")}else console.log("Device document does not exist in Firebase yet")}}catch(e){console.warn("Failed to hydrate device timestamp:",e)}try{const{namedAction:e}=await Ci(async()=>{const{namedAction:e}=await Promise.resolve().then(()=>pw);return{namedAction:e}},void 0,import.meta.url),t=await e("subscribeUpdates");console.log("subscribeUpdates result:",t)}catch(e){console.error("Error setting up updates subscription:",e)}try{const e=gw();_w&&_w(),Sw&&(_w=Wb(Sw,{includeMetadataChanges:!0},t=>{let n=0;t.docs.forEach(e=>{e.metadata&&e.metadata.hasPendingWrites&&(n+=1)}),e.editsLocalPendingWrites=n},e=>{console.warn("Edits pending-writes listener error:",(null==e?void 0:e.message)||e)}),window.fsEditsRefUnsubscribe=_w,console.log("Edits pending-writes listener established"))}catch(e){console.warn("Failed to establish Edits pending-writes listener",e)}console.log("Firestore listeners and checks setup complete.")}()}catch(e){console.error("Error initializing Firebase: ",e)}else console.log("Device mode is passive. Skipping Firebase initialization.")}async function Iw(){yw&&(await Zv(yw),console.log("Firestore network disabled (offline mode)."))}const Cw={version:"0.1.3"},Tw={class:"min-h-screen w-full bg-gray-900 text-gray-100 overflow-x-auto"},kw={class:"w-full bg-gray-800 border-b border-gray-700 sticky top-0 z-30"},Aw={class:"px-0 py-3"},Dw={class:"flex items-center justify-between px-3 sm:px-4 max-w-screen-2xl mx-auto"},Nw={class:"flex items-center space-x-4"},Ow={class:"flex items-center space-x-3"},Pw={class:"p-2 bg-blue-600 rounded-lg"},Mw={class:"flex items-center space-x-6"},Rw={class:"flex items-center space-x-3"},Fw={class:"text-sm text-gray-300 font-medium"},Lw={key:0,class:"flex items-center space-x-3"},Uw={class:"text-sm text-gray-300 font-medium capitalize"},Vw={class:"w-full pb-4 px-2 sm:px-0"},Bw={class:"px-0 py-4"},jw={class:"grid grid-cols-1 lg:grid-cols-12 gap-4 px-2 sm:px-4 max-w-screen-2xl mx-auto"},zw={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-2"},$w={class:"space-y-2 text-xs"},qw={class:"flex items-center justify-between gap-2"},Gw={class:"text-white font-mono text-right break-all"},Kw={class:"flex items-center justify-between gap-2"},Ww={class:"px-2 py-0.5 bg-gray-700 rounded text-[10px] text-white font-medium shrink-0"},Hw={class:"flex items-center justify-between gap-2"},Qw={class:"text-white font-mono text-right break-all"},Jw={class:"flex items-center justify-between gap-2"},Xw={class:"text-white"},Yw={class:"flex items-center justify-between gap-2"},Zw={class:"text-white font-mono text-right"},ex={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-5"},tx={class:"mb-3"},nx={class:"text-sm text-gray-300"},rx={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs mb-2"},sx={class:"flex items-center justify-between gap-2 text-gray-400"},ix={class:"text-white font-medium"},ox={class:"flex items-center justify-between gap-2 text-gray-400"},ax={class:"text-white font-medium"},cx={class:"flex items-center justify-between gap-2 text-gray-400"},lx={class:"text-white font-medium"},ux={key:0,class:"space-y-4"},hx={key:0,class:"space-y-3"},dx={class:"flex justify-between items-center"},fx={class:"text-blue-400 font-bold text-sm"},px={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},gx={class:"flex justify-between text-xs text-gray-400"},mx={key:1,class:"border-t border-gray-700 pt-3 space-y-3"},yx={class:"flex justify-between items-center"},vx={class:"text-blue-400 font-bold text-sm"},bx={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},wx={class:"flex justify-between text-xs text-gray-400"},xx={key:1,class:"text-center py-4 text-gray-500"},Sx={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-5"},_x={class:"mb-3"},Ex={class:"text-sm text-gray-300"},Ix={key:0,class:"space-y-4"},Cx={class:"space-y-3"},Tx={class:"flex justify-between items-center"},kx={class:"text-green-400 font-bold text-sm"},Ax={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},Dx={class:"flex justify-between text-xs text-gray-400"},Nx={key:0,class:"border-t border-gray-700 pt-3 space-y-3"},Ox={class:"flex justify-between items-center"},Px={class:"text-green-400 font-bold text-sm"},Mx={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},Rx={class:"flex justify-between text-xs text-gray-400"},Fx={key:1,class:"text-center py-4"},Lx={key:2,class:"text-center py-4 text-gray-500"},Ux={class:"flex items-center justify-between mb-8"},Vx={class:"mb-8"},Bx={class:"flex items-center justify-between mb-4"},jx={class:"mb-8"},zx={class:"flex items-center justify-between"},$x={class:"inline-flex items-center gap-3"},qx=["checked"],Gx={class:"mb-8"},Kx={class:"space-y-4"},Wx={class:"flex items-center justify-between"},Hx={class:"flex items-center space-x-2"},Qx={class:"flex items-center justify-between"},Jx={class:"flex items-center space-x-2"},Xx={class:"flex items-center justify-between"},Yx={class:"flex items-center space-x-2"},Zx={class:"flex items-center justify-between"},eS={class:"flex items-center space-x-2"},tS=(e=>{const t=e.__vccOpts||e;for(const[e,n]of[["__scopeId","data-v-2b1665ef"]])t[e]=n;return t})({__name:"App",setup(e){const t=gw(),n=vt("Initializing..."),r=vt(!1),s=vt(navigator.onLine),i=vt(!1);let o=null;const a=null==Cw?void 0:Cw.version,c=vt(!0);let l=null;xr(xs(()=>t.updatesTotal>0||t.updateTotalContainers>0),e=>{l&&clearTimeout(l),e?c.value=!1:l=setTimeout(()=>{c.value=!0},1e3)},{immediate:!0});const u=xs(()=>t.editsContainersTotal?Math.round(t.editsContainersComplete/t.editsContainersTotal*100):0),h=xs(()=>t.updatesTotal?Math.round(t.updatesTotalCompleted/t.updatesTotal*100):0),d=xs(()=>t.updateTotalContainers?Math.round(t.updateCompletedContainers/t.updateTotalContainers*100):0),f=xs(()=>{var e;return(null==(e=t.sessionUpload)?void 0:e.active)&&t.sessionUpload.total>0?t.sessionUpload.total:t.editsTotal}),p=xs(()=>{var e;if(null==(e=t.sessionUpload)?void 0:e.active){const e=t.editsTotalCompleted-(t.sessionUpload.baselineCompleted||0);return Math.max(0,e)}return t.editsTotalCompleted}),g=xs(()=>{const e=f.value;return e?Math.round(p.value/e*100):0}),m=xs(()=>{var e;return(null==(e=t.sessionUpload)?void 0:e.lastCompleted)||0}),y=xs(()=>{var e;return(null==(e=t.sessionUpload)?void 0:e.lastTotal)||0}),v=xs(()=>f.value?p.value:m.value),b=xs(()=>f.value?f.value:y.value),w=xs(()=>!s.value||i.value?"offline":n.value.includes("successfully")?"connected":n.value.includes("error")?"error":"connecting"),S=xs(()=>t.isProcessing?"processing":t.updatesTotal>0||t.editsContainersTotal>0?"syncing":"idle"),_=async(e="watcher")=>{try{if(!t.configx.autoPullEdits)return;if(!(t.fmPendingEdits>0))return;Ti.performScript("Start Sync",JSON.stringify({source:"WebApp",mode:"auto",why:e}),{fireAndForget:!0})}catch{}};yn(async()=>{try{console.log("BetterForms utilities initialized:",void 0!==window.BF?"BF available globally":"BF not found"),console.log("FileMaker Bridge initialized:",Ti.isFileMakerEnvironment?"FileMaker detected":"Standalone mode"),t.initializeConfigFromURLParams(),await Ew(),n.value="Connected successfully"}catch(e){n.value=`Connection failed: ${e.message}`,console.error("Firebase initialization error:",e)}window.addEventListener("online",()=>{s.value=!0,console.log("Network: Online"),_("online")}),window.addEventListener("offline",()=>{s.value=!1,console.log("Network: Offline")});try{"1"===localStorage.getItem("ws-firestore-offline")&&(await Iw(),i.value=!0,console.log("Persisted Firestore offline mode applied."))}catch(e){console.warn("Could not apply persisted Firestore offline mode",e)}try{const e=t.fmStatusPollingMs||15e3,n=t.fmStatusScriptName||"API - Web Sync Status",r=async()=>{try{const e=await Ti.performScript(n,JSON.stringify({action:"status",what:"pendingEdits"}));let r=0;if("number"==typeof e)r=e;else if("string"==typeof e)try{const t=JSON.parse(e);r=Number((null==t?void 0:t.pendingEdits)??(null==t?void 0:t.count)??0)}catch{const t=parseInt(e,10);isNaN(t)||(r=t)}else"object"==typeof e&&e&&(r=Number(e.pendingEdits??e.count??0));(!Number.isFinite(r)||r<0)&&(r=0),t.fmPendingEdits=r,_("poll"),t.lastFmStatusAt=(new Date).toISOString()}catch{}};r(),o=setInterval(r,e)}catch{}}),xn(()=>{o&&(clearInterval(o),o=null)});const x=async()=>{try{await Iw(),i.value=!0,localStorage.setItem("ws-firestore-offline","1")}catch(e){console.error("Failed to disable Firestore network",e)}},E=async()=>{try{await async function(){yw&&(await Yv(yw),console.log("Firestore network enabled (online mode)."))}(),i.value=!1,localStorage.setItem("ws-firestore-offline","0")}catch(e){console.error("Failed to enable Firestore network",e)}},I=async()=>{console.log("Quick Action: Open WebSync Config");try{await Ti.performScript("Open WebSync Config",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("WebSync Config script error:",e)}},T=async()=>{console.log("Quick Action: Open WebSync Edits");try{await Ti.performScript("Open Edits",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("WebSync Edits script error:",e)}},C=async()=>{console.log("Quick Action: Run Sync Now");try{await Ti.performScript("Start Sync",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("Run Sync script error:",e)}};return(e,n)=>{const o=Cn("font-awesome-icon");return jr(),Gr("div",Tw,[Jr("nav",kw,[Jr("div",Aw,[Jr("div",Dw,[Jr("div",Nw,[Jr("div",Ow,[Jr("div",Pw,[Xr(o,{icon:["fas","arrows-rotate"],class:z([wt(t).isProcessing?"animate-spin":"","text-white text-lg"])},null,8,["class"])]),n[13]||(n[13]=Jr("div",null,[Jr("h1",{class:"text-lg font-bold text-white"},"WebSync"),Jr("p",{class:"text-xs text-gray-400"},"Dashboard")],-1))])]),Jr("div",Mw,[Jr("div",Rw,[Jr("div",{class:z([{"bg-green-500":"connected"===w.value,"bg-red-500":"error"===w.value||"offline"===w.value,"bg-yellow-500":"connecting"===w.value},"w-3 h-3 rounded-full"])},null,2),Jr("span",Fw,K("connected"===w.value?"Connected":"offline"===w.value?"Offline":"error"===w.value?"Error":"Connecting"),1)]),"idle"!==S.value?(jr(),Gr("div",Lw,[Jr("div",{class:z([{"bg-blue-500":"processing"===S.value,"bg-purple-500":"syncing"===S.value,"bg-gray-500":"idle"===S.value},"w-3 h-3 rounded-full"])},null,2),Jr("span",Uw,K(S.value),1)])):ts("",!0),Jr("div",{class:"hidden md:flex items-center space-x-2"},[Jr("button",{onClick:I,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Config",title:"Open WebSync Config"},[...n[14]||(n[14]=[Jr("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Jr("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Jr("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Jr("span",{class:"text-xs font-medium"},"webSync Config",-1)])]),Jr("button",{onClick:T,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Edits",title:"Open WebSync Edits"},[...n[15]||(n[15]=[es('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2b1665ef><path d="M8 6h13" data-v-2b1665ef></path><path d="M8 12h13" data-v-2b1665ef></path><path d="M8 18h13" data-v-2b1665ef></path><path d="M3 6h.01" data-v-2b1665ef></path><path d="M3 12h.01" data-v-2b1665ef></path><path d="M3 18h.01" data-v-2b1665ef></path></svg><span class="text-xs font-medium" data-v-2b1665ef>WebSync Edits</span>',2)])])]),Jr("button",{onClick:n[0]||(n[0]=e=>r.value=!r.value),class:"p-3 text-gray-400 hover:text-white hover:bg-gray-700 rounded-xl transition-colors",title:"Debug Controls"},[...n[16]||(n[16]=[Jr("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Jr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Jr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),Jr("button",{onClick:C,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Run Sync",title:"Run Sync"},[...n[17]||(n[17]=[Jr("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Jr("path",{d:"M21 12a9 9 0 10-6.219 8.56"}),Jr("path",{d:"M22 12l-3-3-3 3"})],-1),Jr("span",{class:"text-xs"},"Sync",-1)])])])])])]),Jr("div",Vw,[Jr("div",Bw,[Jr("div",jw,[Jr("div",zw,[n[23]||(n[23]=es('<div class="flex items-center justify-between mb-4" data-v-2b1665ef><div class="flex items-center space-x-2" data-v-2b1665ef><div class="p-2 bg-indigo-600 bg-opacity-20 rounded-lg" data-v-2b1665ef><svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b1665ef><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-2b1665ef></path></svg></div><div data-v-2b1665ef><h2 class="text-lg font-bold text-white" data-v-2b1665ef>Device</h2><p class="text-xs text-gray-400" data-v-2b1665ef>Configuration</p></div></div></div>',1)),Jr("div",$w,[Jr("div",qw,[n[18]||(n[18]=Jr("span",{class:"text-gray-400 shrink-0"},"Device:",-1)),Jr("span",Gw,K(wt(t).device.id),1)]),Jr("div",Kw,[n[19]||(n[19]=Jr("span",{class:"text-gray-400 shrink-0"},"Mode:",-1)),Jr("span",Ww,K(wt(t).device.deviceMode),1)]),Jr("div",Hw,[n[20]||(n[20]=Jr("span",{class:"text-gray-400 shrink-0"},"Org:",-1)),Jr("span",Qw,K(wt(t).organization.id),1)]),Jr("div",Jw,[n[21]||(n[21]=Jr("span",{class:"text-gray-400 shrink-0"},"Contexts:",-1)),Jr("span",Xw,K(wt(t).device.contexts.length),1)]),Jr("div",Yw,[n[22]||(n[22]=Jr("span",{class:"text-gray-400 shrink-0"},"Version:",-1)),Jr("span",Zw,K(wt(a)),1)])])]),Jr("div",ex,[n[30]||(n[30]=es('<div class="flex items-center justify-between mb-4" data-v-2b1665ef><div class="flex items-center space-x-3" data-v-2b1665ef><div class="p-2 bg-blue-600 bg-opacity-20 rounded-lg" data-v-2b1665ef><svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b1665ef><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-2b1665ef></path></svg></div><div data-v-2b1665ef><div class="flex items-center gap-2" data-v-2b1665ef><h2 class="text-lg font-bold text-white" data-v-2b1665ef>Data Uploads</h2><span class="px-2 py-1 bg-blue-600 bg-opacity-20 rounded-full text-xs font-semibold text-blue-400 uppercase tracking-wide" data-v-2b1665ef>EDITS</span></div><p class="text-xs text-gray-400" data-v-2b1665ef>Local to WebSync</p></div></div></div>',1)),Jr("div",tx,[Jr("p",nx,K(s.value?f.value?"Uploading Edits":wt(t).editsStates[wt(t).editsCurrentState]:"Waiting for connectivity  uploads will resume automatically"),1)]),Jr("div",rx,[Jr("div",sx,[n[24]||(n[24]=Jr("span",{class:"shrink-0"},"FM pending edits",-1)),Jr("span",ix,K(wt(t).fmPendingEdits),1)]),Jr("div",ox,[n[25]||(n[25]=Jr("span",{class:"shrink-0"},"Local unsynced",-1)),Jr("span",ax,K(wt(t).editsLocalPendingWrites),1)]),Jr("div",cx,[n[26]||(n[26]=Jr("span",{class:"shrink-0"},"Uploaded (session)",-1)),Jr("span",lx,K(v.value)+" / "+K(b.value),1)])]),wt(t).editsTotal||wt(t).editsContainersTotal?(jr(),Gr("div",ux,[f.value?(jr(),Gr("div",hx,[Jr("div",dx,[n[27]||(n[27]=Jr("span",{class:"text-gray-300 text-sm"},"Edits Upload Progress",-1)),Jr("span",fx,K(g.value)+"%",1)]),Jr("div",px,[Jr("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:L(`width: ${Math.min(g.value,100)}%`)},null,4)]),Jr("div",gx,[Jr("span",null,K(p.value)+" completed",1),Jr("span",null,K(f.value)+" total",1)])])):ts("",!0),wt(t).editsContainersTotal?(jr(),Gr("div",mx,[Jr("div",yx,[n[28]||(n[28]=Jr("span",{class:"text-gray-300 text-sm"},"Container Upload Progress",-1)),Jr("span",vx,K(u.value)+"%",1)]),Jr("div",bx,[Jr("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:L(`width: ${Math.min(u.value,100)}%`)},null,4)]),Jr("div",wx,[Jr("span",null,K(wt(t).editsContainersComplete)+" completed",1),Jr("span",null,K(wt(t).editsContainersTotal)+" total",1)])])):ts("",!0)])):(jr(),Gr("div",xx,[...n[29]||(n[29]=[Jr("svg",{class:"w-8 h-8 mx-auto mb-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Jr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Jr("p",{class:"text-sm"},"No pending uploads",-1),Jr("p",{class:"text-xs text-gray-400 invisible"},"placeholder",-1)])]))]),Jr("div",Sx,[n[35]||(n[35]=es('<div class="flex items-center justify-between mb-4" data-v-2b1665ef><div class="flex items-center space-x-3" data-v-2b1665ef><div class="p-2 bg-green-600 bg-opacity-20 rounded-lg" data-v-2b1665ef><svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2b1665ef><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b1665ef></path></svg></div><div data-v-2b1665ef><div class="flex items-center gap-2" data-v-2b1665ef><h2 class="text-lg font-bold text-white" data-v-2b1665ef>Data Downloads</h2><span class="px-2 py-1 bg-green-600 bg-opacity-20 rounded-full text-xs font-semibold text-green-400 uppercase tracking-wide" data-v-2b1665ef>UPDATES</span></div><p class="text-xs text-gray-400" data-v-2b1665ef>WebSync to Local</p></div></div></div>',1)),Jr("div",_x,[Jr("p",Ex,K(wt(t).updatesTotal?"Receiving Updates":"No New Updates"),1)]),n[36]||(n[36]=es('<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs mb-2" data-v-2b1665ef><div class="flex items-center justify-between gap-2 text-gray-400" data-v-2b1665ef><span class="shrink-0" data-v-2b1665ef>FM pending edits</span><span class="text-white font-medium" data-v-2b1665ef>0</span></div><div class="flex items-center justify-between gap-2 text-gray-400" data-v-2b1665ef><span class="shrink-0" data-v-2b1665ef>Local unsynced</span><span class="text-white font-medium" data-v-2b1665ef>0</span></div><div class="flex items-center justify-between gap-2 text-gray-400" data-v-2b1665ef><span class="shrink-0" data-v-2b1665ef>Uploaded (session)</span><span class="text-white font-medium" data-v-2b1665ef>0 / 0</span></div></div>',1)),wt(t).updatesTotal?(jr(),Gr("div",Ix,[Jr("div",Cx,[Jr("div",Tx,[n[31]||(n[31]=Jr("span",{class:"text-gray-300 text-sm"},"Download Progress",-1)),Jr("span",kx,K(h.value)+"%",1)]),Jr("div",Ax,[Jr("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:L(`width: ${Math.min(h.value,100)}%`)},null,4)]),Jr("div",Dx,[Jr("span",null,K(wt(t).updatesTotalCompleted)+" completed",1),Jr("span",null,K(wt(t).updatesTotal)+" total",1)])]),wt(t).updateTotalContainers?(jr(),Gr("div",Nx,[Jr("div",Ox,[n[32]||(n[32]=Jr("span",{class:"text-gray-300 text-sm"},"Container Downloads",-1)),Jr("span",Px,K(d.value)+"%",1)]),Jr("div",Mx,[Jr("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:L(`width: ${Math.min(d.value,100)}%`)},null,4)]),Jr("div",Rx,[Jr("span",null,K(wt(t).updateCompletedContainers)+" completed",1),Jr("span",null,K(wt(t).updateTotalContainers)+" total",1)])])):ts("",!0)])):c.value?(jr(),Gr("div",Fx,[...n[33]||(n[33]=[Jr("svg",{class:"w-8 h-8 mx-auto mb-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Jr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Jr("p",{class:"text-green-400 font-semibold text-sm"},"System Up to Date",-1),Jr("p",{class:"text-xs text-gray-400"},"All data synchronized",-1)])])):(jr(),Gr("div",Lx,[...n[34]||(n[34]=[Jr("p",{class:"text-xs invisible"},"placeholder",-1)])]))])])])]),r.value?(jr(),Gr("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:n[12]||(n[12]=e=>r.value=!1)},[Jr("div",{class:"bg-gray-800 border border-gray-700 rounded-2xl p-8 w-full max-w-lg my-8",onClick:n[11]||(n[11]=ni(()=>{},["stop"]))},[Jr("div",Ux,[n[38]||(n[38]=Jr("h3",{class:"text-xl font-bold text-white"},"Developer Debugging Controls",-1)),Jr("button",{onClick:n[1]||(n[1]=e=>r.value=!1),class:"text-gray-400 hover:text-white"},[...n[37]||(n[37]=[Jr("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Jr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),Jr("div",Vx,[n[40]||(n[40]=Jr("h4",{class:"text-sm font-semibold text-white mb-4"},"Firestore Network",-1)),Jr("div",Bx,[n[39]||(n[39]=Jr("span",{class:"text-gray-400"},"Mode:",-1)),Jr("span",{class:z([i.value?"text-red-400":"text-green-400","font-semibold"])},K(i.value?"Offline (network disabled)":"Online"),3)]),Jr("div",{class:"grid grid-cols-2 gap-4"},[Jr("button",{onClick:x,class:"bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Go Offline "),Jr("button",{onClick:E,class:"bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Go Online ")])]),Jr("div",jx,[n[43]||(n[43]=Jr("h4",{class:"text-sm font-semibold text-white mb-4"},"Upload Settings",-1)),Jr("div",zx,[n[42]||(n[42]=Jr("span",{class:"text-gray-400",title:"When enabled, new FileMaker edits are auto-imported to local Firestore when online; if offline, they import on reconnect."},"Auto pull edits to local",-1)),Jr("label",$x,[Jr("input",{type:"checkbox",checked:wt(t).configx.autoPullEdits,onChange:n[2]||(n[2]=e=>{wt(t).setAutoPullEdits(e.target.checked),e.target.checked&&_("toggle")}),class:"w-5 h-5 rounded border-gray-600 bg-gray-700"},null,40,qx),n[41]||(n[41]=Jr("span",{class:"text-xs text-gray-400"},"URL param overrides and is saved",-1))])])]),Jr("div",Gx,[n[52]||(n[52]=Jr("h4",{class:"text-sm font-semibold text-white mb-4"},"Simulate Progress",-1)),Jr("div",Kx,[Jr("div",Wx,[n[45]||(n[45]=Jr("label",{class:"text-gray-400 text-sm"},"Edits:",-1)),Jr("div",Hx,[Xt(Jr("input",{"onUpdate:modelValue":n[3]||(n[3]=e=>wt(t).editsTotalCompleted=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).editsTotalCompleted,void 0,{number:!0}]]),n[44]||(n[44]=Jr("span",{class:"text-gray-500"},"/",-1)),Xt(Jr("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>wt(t).editsTotal=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).editsTotal,void 0,{number:!0}]])])]),Jr("div",Qx,[n[47]||(n[47]=Jr("label",{class:"text-gray-400 text-sm"},"Upload Containers:",-1)),Jr("div",Jx,[Xt(Jr("input",{"onUpdate:modelValue":n[5]||(n[5]=e=>wt(t).editsContainersComplete=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).editsContainersComplete,void 0,{number:!0}]]),n[46]||(n[46]=Jr("span",{class:"text-gray-500"},"/",-1)),Xt(Jr("input",{"onUpdate:modelValue":n[6]||(n[6]=e=>wt(t).editsContainersTotal=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).editsContainersTotal,void 0,{number:!0}]])])]),Jr("div",Xx,[n[49]||(n[49]=Jr("label",{class:"text-gray-400 text-sm"},"Updates:",-1)),Jr("div",Yx,[Xt(Jr("input",{"onUpdate:modelValue":n[7]||(n[7]=e=>wt(t).updatesTotalCompleted=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).updatesTotalCompleted,void 0,{number:!0}]]),n[48]||(n[48]=Jr("span",{class:"text-gray-500"},"/",-1)),Xt(Jr("input",{"onUpdate:modelValue":n[8]||(n[8]=e=>wt(t).updatesTotal=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).updatesTotal,void 0,{number:!0}]])])]),Jr("div",Zx,[n[51]||(n[51]=Jr("label",{class:"text-gray-400 text-sm"},"Containers:",-1)),Jr("div",eS,[Xt(Jr("input",{"onUpdate:modelValue":n[9]||(n[9]=e=>wt(t).updateCompletedContainers=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).updateCompletedContainers,void 0,{number:!0}]]),n[50]||(n[50]=Jr("span",{class:"text-gray-500"},"/",-1)),Xt(Jr("input",{"onUpdate:modelValue":n[10]||(n[10]=e=>wt(t).updateTotalContainers=e),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[Zs,wt(t).updateTotalContainers,void 0,{number:!0}]])])])])])])])):ts("",!0)])}}});function nS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rS(Object(n),!0).forEach(function(t){nS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const iS=()=>{};let oS={},aS={},cS=null,lS={mark:iS,measure:iS};try{"undefined"!=typeof window&&(oS=window),"undefined"!=typeof document&&(aS=document),"undefined"!=typeof MutationObserver&&(cS=MutationObserver),"undefined"!=typeof performance&&(lS=performance)}catch(e){}const{userAgent:uS=""}=oS.navigator||{},hS=oS,dS=aS,fS=cS,pS=lS;hS.document;const gS=!!dS.documentElement&&!!dS.head&&"function"==typeof dS.addEventListener&&"function"==typeof dS.createElement,mS=~uS.indexOf("MSIE")||~uS.indexOf("Trident/");var yS={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},vS=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],bS="classic",wS="duotone",xS=[bS,wS,"sharp","sharp-duotone"],SS=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),_S=["fak","fa-kit","fakd","fa-kit-duotone"],ES={fak:"kit","fa-kit":"kit"},IS={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},CS=["fak","fakd"],TS={kit:"fak"},kS={"kit-duotone":"fakd"},AS={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},DS=["fak","fa-kit","fakd","fa-kit-duotone"],NS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},OS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],PS=[1,2,3,4,5,6,7,8,9,10],MS=PS.concat([11,12,13,14,15,16,17,18,19,20]),RS=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",AS.GROUP,AS.SWAP_OPACITY,AS.PRIMARY,AS.SECONDARY].concat(PS.map(e=>"".concat(e,"x"))).concat(MS.map(e=>"w-".concat(e)));const FS="___FONT_AWESOME___",LS=16,US="svg-inline--fa",VS="data-fa-i2svg",BS="data-fa-pseudo-element",jS="data-prefix",zS="data-icon",$S="fontawesome-i2svg",qS=["HTML","HEAD","STYLE","SCRIPT"],GS=(()=>{try{return!0}catch(e){return!1}})();function KS(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[bS]})}const WS=sS({},yS);WS[bS]=sS(sS(sS(sS({},{"fa-duotone":"duotone"}),yS[bS]),ES),IS);const HS=KS(WS),QS=sS({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});QS[bS]=sS(sS(sS(sS({},{duotone:"fad"}),QS[bS]),TS),kS);const JS=KS(QS),XS=sS({},NS);XS[bS]=sS(sS({},XS[bS]),{fak:"fa-kit"});const YS=KS(XS),ZS=sS({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});ZS[bS]=sS(sS({},ZS[bS]),{"fa-kit":"fak"}),KS(ZS);const e_=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,t_="fa-layers-text",n_=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i;KS(sS({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}}));const r_=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],s_={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},i_=["kit",...RS],o_=hS.FontAwesomeConfig||{};dS&&"function"==typeof dS.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=dS.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));null!=r&&(o_[n]=r)});const a_={styleDefault:"solid",familyDefault:bS,cssPrefix:"fa",replacementClass:US,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};o_.familyPrefix&&(o_.cssPrefix=o_.familyPrefix);const c_=sS(sS({},a_),o_);c_.autoReplaceSvg||(c_.observeMutations=!1);const l_={};Object.keys(a_).forEach(e=>{Object.defineProperty(l_,e,{enumerable:!0,set:function(t){c_[e]=t,u_.forEach(e=>e(l_))},get:function(){return c_[e]}})}),Object.defineProperty(l_,"familyPrefix",{enumerable:!0,set:function(e){c_.cssPrefix=e,u_.forEach(e=>e(l_))},get:function(){return c_.cssPrefix}}),hS.FontAwesomeConfig=l_;const u_=[],h_=LS,d_={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function f_(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function p_(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function g_(e){return e.classList?p_(e.classList):(e.getAttribute("class")||"").split(" ").filter(e=>e)}function m_(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function y_(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function v_(e){return e.size!==d_.size||e.x!==d_.x||e.y!==d_.y||e.rotate!==d_.rotate||e.flipX||e.flipY}function b_(){const e="fa",t=US,n=l_.cssPrefix,r=l_.replacementClass;let s=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||r!==t){const i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");s=s.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return s}let w_=!1;function x_(){l_.autoAddCss&&!w_&&(function(e){if(!e||!gS)return;const t=dS.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=dS.head.childNodes;let r=null;for(let e=n.length-1;e>-1;e--){const t=n[e],s=(t.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=t)}dS.head.insertBefore(t,r)}(b_()),w_=!0)}var S_={mixout:()=>({dom:{css:b_,insertCss:x_}}),hooks:()=>({beforeDOMElementCreation(){x_()},beforeI2svg(){x_()}})};const __=hS||{};__[FS]||(__[FS]={}),__[FS].styles||(__[FS].styles={}),__[FS].hooks||(__[FS].hooks={}),__[FS].shims||(__[FS].shims=[]);var E_=__[FS];const I_=[],C_=function(){dS.removeEventListener("DOMContentLoaded",C_),T_=1,I_.map(e=>e())};let T_=!1;function k_(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"==typeof e?m_(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(m_(e[n]),'" '),"").trim()}(n),">").concat(r.map(k_).join(""),"</").concat(t,">")}function A_(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}gS&&(T_=(dS.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(dS.readyState),T_||dS.addEventListener("DOMContentLoaded",C_));var D_=function(e,t,n,r){var s,i,o,a=Object.keys(e),c=a.length,l=t;for(void 0===n?(s=1,o=e[a[0]]):(s=0,o=n);s<c;s++)o=l(o,e[i=a[s]],i,e);return o};function N_(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t}(e);return 1===t.length?t[0].toString(16):null}function O_(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function P_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,s=O_(t);"function"!=typeof E_.hooks.addPack||r?E_.styles[e]=sS(sS({},E_.styles[e]||{}),s):E_.hooks.addPack(e,O_(t)),"fas"===e&&P_("fa",t)}const{styles:M_,shims:R_}=E_,F_=Object.keys(YS),L_=F_.reduce((e,t)=>(e[t]=Object.keys(YS[t]),e),{});let U_=null,V_={},B_={},j_={},z_={},$_={};function q_(e,t){const n=t.split("-"),r=n[0],s=n.slice(1).join("-");return r!==e||""===s||(i=s,~i_.indexOf(i))?null:s;var i}const G_=()=>{const e=e=>D_(M_,(t,n,r)=>(t[r]=D_(n,e,{}),t),{});V_=e((e,t,n)=>(t[3]&&(e[t[3]]=n),t[2]&&t[2].filter(e=>"number"==typeof e).forEach(t=>{e[t.toString(16)]=n}),e)),B_=e((e,t,n)=>(e[n]=n,t[2]&&t[2].filter(e=>"string"==typeof e).forEach(t=>{e[t]=n}),e)),$_=e((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach(t=>{e[t]=n}),e});const t="far"in M_||l_.autoFetchSvg,n=D_(R_,(e,n)=>{const r=n[0];let s=n[1];const i=n[2];return"far"!==s||t||(s="fas"),"string"==typeof r&&(e.names[r]={prefix:s,iconName:i}),"number"==typeof r&&(e.unicodes[r.toString(16)]={prefix:s,iconName:i}),e},{names:{},unicodes:{}});j_=n.names,z_=n.unicodes,U_=X_(l_.styleDefault,{family:l_.familyDefault})};var K_;function W_(e,t){return(V_[e]||{})[t]}function H_(e,t){return($_[e]||{})[t]}function Q_(e){return j_[e]||{prefix:null,iconName:null}}function J_(){return U_}function X_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=bS}=t,r=HS[n][e];if(n===wS&&!e)return"fad";const s=JS[n][e]||JS[n][r],i=e in E_.styles?e:null;return s||i||null}function Y_(e){return e.sort().filter((e,t,n)=>n.indexOf(e)===t)}function Z_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const s=OS.concat(DS),i=Y_(e.filter(e=>s.includes(e))),o=Y_(e.filter(e=>!OS.includes(e))),a=i.filter(e=>(r=e,!vS.includes(e))),[c=null]=a,l=function(e){let t=bS;const n=F_.reduce((e,t)=>(e[t]="".concat(l_.cssPrefix,"-").concat(t),e),{});return xS.forEach(r=>{(e.includes(n[r])||e.some(e=>L_[r].includes(e)))&&(t=r)}),t}(i),u=sS(sS({},function(e){let t=[],n=null;return e.forEach(e=>{const r=q_(l_.cssPrefix,e);r?n=r:e&&t.push(e)}),{iconName:n,rest:t}}(o)),{},{prefix:X_(c,{family:l})});return sS(sS(sS({},u),function(e){const{values:t,family:n,canonical:r,givenPrefix:s="",styles:i={},config:o={}}=e,a=n===wS,c=t.includes("fa-duotone")||t.includes("fad"),l="duotone"===o.familyDefault,u="fad"===r.prefix||"fa-duotone"===r.prefix;if(!a&&(c||l||u)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&eE.includes(n)&&(Object.keys(i).find(e=>tE.includes(e))||o.autoFetchSvg)){const e=SS.get(n).defaultShortPrefixId;r.prefix=e,r.iconName=H_(r.prefix,r.iconName)||r.iconName}return"fa"!==r.prefix&&"fa"!==s||(r.prefix=J_()||"fas"),r}({values:e,family:l,styles:M_,config:l_,canonical:u,givenPrefix:r})),function(e,t,n){let{prefix:r,iconName:s}=n;if(e||!r||!s)return{prefix:r,iconName:s};const i="fa"===t?Q_(s):{},o=H_(r,s);return s=i.iconName||o||s,r=i.prefix||r,"far"!==r||M_.far||!M_.fas||l_.autoFetchSvg||(r="fas"),{prefix:r,iconName:s}}(n,r,u))}K_=e=>{U_=X_(e.styleDefault,{family:l_.familyDefault})},u_.push(K_),G_();const eE=xS.filter(e=>e!==bS||e!==wS),tE=Object.keys(NS).filter(e=>e!==bS).map(e=>Object.keys(NS[e])).flat();let nE=[],rE={};const sE={},iE=Object.keys(sE);function oE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(rE[e]||[]).forEach(e=>{t=e.apply(null,[t,...r])}),t}function aE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(rE[e]||[]).forEach(e=>{e.apply(null,n)})}function cE(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return sE[e]?sE[e].apply(null,t):void 0}function lE(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||J_();if(t)return t=H_(n,t)||t,A_(uE.definitions,n,t)||A_(E_.styles,n,t)}const uE=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach(e=>{this.definitions[e]=sS(sS({},this.definitions[e]||{}),r[e]),P_(e,r[e]);const t=YS[bS][e];t&&P_(t,r[e]),G_()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(t=>{const{prefix:r,iconName:s,icon:i}=n[t],o=i[2];e[r]||(e[r]={}),o.length>0&&o.forEach(t=>{"string"==typeof t&&(e[r][t]=i)}),e[r][s]=i}),e}},hE={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gS?(aE("beforeI2svg",e),cE("pseudoElements2svg",e),cE("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===l_.autoReplaceSvg&&(l_.autoReplaceSvg=!0),l_.observeMutations=!0,n=()=>{fE({autoReplaceSvgRoot:t}),aE("watch",e)},gS&&(T_?setTimeout(n,0):I_.push(n))}},dE={noAuto:()=>{l_.autoReplaceSvg=!1,l_.observeMutations=!1,aE("noAuto")},config:l_,dom:hE,parse:{icon:e=>{if(null===e)return null;if("object"==typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:H_(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=X_(e[0]);return{prefix:n,iconName:H_(n,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(l_.cssPrefix,"-"))>-1||e.match(e_))){const t=Z_(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||J_(),iconName:H_(t.prefix,t.iconName)||t.iconName}}if("string"==typeof e){const t=J_();return{prefix:t,iconName:H_(t,e)||e}}}},library:uE,findIconDefinition:lE,toHtml:k_},fE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=dS}=e;(Object.keys(E_.styles).length>0||l_.autoFetchSvg)&&gS&&l_.autoReplaceSvg&&dE.dom.i2svg({node:t})};function pE(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(e=>k_(e))}}),Object.defineProperty(e,"node",{get:function(){if(!gS)return;const t=dS.createElement("div");return t.innerHTML=e.html,t.children}}),e}function gE(e){const{icons:{main:t,mask:n},prefix:r,iconName:s,transform:i,symbol:o,title:a,maskId:c,titleId:l,extra:u,watchable:h=!1}=e,{width:d,height:f}=n.found?n:t,p=CS.includes(r),g=[l_.replacementClass,s?"".concat(l_.cssPrefix,"-").concat(s):""].filter(e=>-1===u.classes.indexOf(e)).filter(e=>""!==e||!!e).concat(u.classes).join(" ");let m={children:[],attributes:sS(sS({},u.attributes),{},{"data-prefix":r,"data-icon":s,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(f)})};const y=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(d/f*16*.0625,"em")}:{};h&&(m.attributes[VS]=""),a&&(m.children.push({tag:"title",attributes:{id:m.attributes["aria-labelledby"]||"title-".concat(l||f_())},children:[a]}),delete m.attributes.title);const v=sS(sS({},m),{},{prefix:r,iconName:s,main:t,mask:n,maskId:c,transform:i,symbol:o,styles:sS(sS({},y),u.styles)}),{children:b,attributes:w}=n.found&&t.found?cE("generateAbstractMask",v)||{children:[],attributes:{}}:cE("generateAbstractIcon",v)||{children:[],attributes:{}};return v.children=b,v.attributes=w,o?function(e){let{prefix:t,iconName:n,children:r,attributes:s,symbol:i}=e;const o=!0===i?"".concat(t,"-").concat(l_.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:sS(sS({},s),{},{id:o}),children:r}]}]}(v):function(e){let{children:t,main:n,mask:r,attributes:s,styles:i,transform:o}=e;if(v_(o)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};s.style=y_(sS(sS({},i),{},{"transform-origin":"".concat(r.x+o.x/16,"em ").concat(r.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}(v)}function mE(e){const{content:t,width:n,height:r,transform:s,title:i,extra:o,watchable:a=!1}=e,c=sS(sS(sS({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});a&&(c[VS]="");const l=sS({},o.styles);v_(s)&&(l.transform=function(e){let{transform:t,width:n=LS,height:r=LS,startCentered:s=!1}=e,i="";return i+=s&&mS?"translate(".concat(t.x/h_-n/2,"em, ").concat(t.y/h_-r/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/h_,"em), calc(-50% + ").concat(t.y/h_,"em)) "):"translate(".concat(t.x/h_,"em, ").concat(t.y/h_,"em) "),i+="scale(".concat(t.size/h_*(t.flipX?-1:1),", ").concat(t.size/h_*(t.flipY?-1:1),") "),i+="rotate(".concat(t.rotate,"deg) "),i}({transform:s,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);const u=y_(l);u.length>0&&(c.style=u);const h=[];return h.push({tag:"span",attributes:c,children:[t]}),i&&h.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),h}const{styles:yE}=E_;function vE(e){const t=e[0],n=e[1],[r]=e.slice(4);let s=null;return s=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(l_.cssPrefix,"-").concat(s_.GROUP)},children:[{tag:"path",attributes:{class:"".concat(l_.cssPrefix,"-").concat(s_.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(l_.cssPrefix,"-").concat(s_.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:s}}const bE={found:!1,width:512,height:512};function wE(e,t){let n=t;return"fa"===t&&null!==l_.styleDefault&&(t=J_()),new Promise((r,s)=>{if("fa"===n){const n=Q_(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&yE[t]&&yE[t][e])return r(vE(yE[t][e]));!function(e,t){GS||l_.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(sS(sS({},bE),{},{icon:l_.showMissingIcons&&e&&cE("missingIconAbstract")||{}}))})}const xE=()=>{},SE=l_.measurePerformance&&pS&&pS.mark&&pS.measure?pS:{mark:xE,measure:xE},_E='FA "6.7.2"',EE=e=>{SE.mark("".concat(_E," ").concat(e," ends")),SE.measure("".concat(_E," ").concat(e),"".concat(_E," ").concat(e," begins"),"".concat(_E," ").concat(e," ends"))};var IE=e=>(SE.mark("".concat(_E," ").concat(e," begins")),()=>EE(e));const CE=()=>{};function TE(e){return"string"==typeof(e.getAttribute?e.getAttribute(VS):null)}function kE(e){return dS.createElementNS("http://www.w3.org/2000/svg",e)}function AE(e){return dS.createElement(e)}function DE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?kE:AE)}=t;if("string"==typeof e)return dS.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(t){r.setAttribute(t,e.attributes[t])}),(e.children||[]).forEach(function(e){r.appendChild(DE(e,{ceFn:n}))}),r}const NE={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(e=>{t.parentNode.insertBefore(DE(e),t)}),null===t.getAttribute(VS)&&l_.keepOriginalSource){let e=dS.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~g_(t).indexOf(l_.replacementClass))return NE.replace(e);const r=new RegExp("".concat(l_.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce((e,t)=>(t===l_.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const s=n.map(e=>k_(e)).join("\n");t.setAttribute(VS,""),t.innerHTML=s}};function OE(e){e()}function PE(e,t){const n="function"==typeof t?t:CE;if(0===e.length)n();else{let t=OE;"async"===l_.mutateApproach&&(t=hS.requestAnimationFrame||OE),t(()=>{const t=!0===l_.autoReplaceSvg?NE.replace:NE[l_.autoReplaceSvg]||NE.replace,r=IE("mutate");e.map(t),r(),n()})}}let ME=!1;function RE(){ME=!0}function FE(){ME=!1}let LE=null;function UE(e){if(!fS)return;if(!l_.observeMutations)return;const{treeCallback:t=CE,nodeCallback:n=CE,pseudoElementsCallback:r=CE,observeMutationsRoot:s=dS}=e;LE=new fS(e=>{if(ME)return;const s=J_();p_(e).forEach(e=>{if("childList"===e.type&&e.addedNodes.length>0&&!TE(e.addedNodes[0])&&(l_.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&l_.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&TE(e.target)&&~r_.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(jS):null,n=e.getAttribute?e.getAttribute(zS):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=Z_(g_(e.target));e.target.setAttribute(jS,t||s),n&&e.target.setAttribute(zS,n)}else(i=e.target)&&i.classList&&i.classList.contains&&i.classList.contains(l_.replacementClass)&&n(e.target);var i})}),gS&&LE.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function VE(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let s=Z_(g_(e));return s.prefix||(s.prefix=J_()),t&&n&&(s.prefix=t,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=(i=s.prefix,o=e.innerText,(B_[i]||{})[o]||W_(s.prefix,N_(e.innerText)))),!s.iconName&&l_.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=e.firstChild.data)),s;var i,o}function BE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=VE(e),i=function(e){const t=p_(e.attributes).reduce((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return l_.autoA11y&&(n?t["aria-labelledby"]="".concat(l_.replacementClass,"-title-").concat(r||f_()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),o=oE("parseNodeAttributes",{},e);let a=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((e,t)=>{const n=t.split(":"),r=n[0],s=n.slice(1);return r&&s.length>0&&(e[r]=s.join(":").trim()),e},{})),n}(e):[];return sS({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:d_,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:a,attributes:i}},o)}const{styles:jE}=E_;function zE(e){const t="nest"===l_.autoReplaceSvg?BE(e,{styleParser:!1}):BE(e);return~t.extra.classes.indexOf(t_)?cE("generateLayersText",e,t):cE("generateSvgReplacementMutation",e,t)}function $E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!gS)return Promise.resolve();const n=dS.documentElement.classList,r=e=>n.add("".concat($S,"-").concat(e)),s=e=>n.remove("".concat($S,"-").concat(e)),i=l_.autoFetchSvg?[..._S,...OS]:vS.concat(Object.keys(jE));i.includes("fa")||i.push("fa");const o=[".".concat(t_,":not([").concat(VS,"])")].concat(i.map(e=>".".concat(e,":not([").concat(VS,"])"))).join(", ");if(0===o.length)return Promise.resolve();let a=[];try{a=p_(e.querySelectorAll(o))}catch(e){}if(!(a.length>0))return Promise.resolve();r("pending"),s("complete");const c=IE("onTree"),l=a.reduce((e,t)=>{try{const n=zE(t);n&&e.push(n)}catch(e){GS||"MissingIcon"===e.name&&console.error(e)}return e},[]);return new Promise((e,n)=>{Promise.all(l).then(n=>{PE(n,()=>{r("active"),r("complete"),s("pending"),"function"==typeof t&&t(),c(),e()})}).catch(e=>{c(),n(e)})})}function qE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;zE(e).then(e=>{e&&PE([e],t)})}const GE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=d_,symbol:r=!1,mask:s=null,maskId:i=null,title:o=null,titleId:a=null,classes:c=[],attributes:l={},styles:u={}}=t;if(!e)return;const{prefix:h,iconName:d,icon:f}=e;return pE(sS({type:"icon"},e),()=>(aE("beforeDOMElementCreation",{iconDefinition:e,params:t}),l_.autoA11y&&(o?l["aria-labelledby"]="".concat(l_.replacementClass,"-title-").concat(a||f_()):(l["aria-hidden"]="true",l.focusable="false")),gE({icons:{main:vE(f),mask:s?vE(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:d,transform:sS(sS({},d_),n),symbol:r,title:o,maskId:i,titleId:a,extra:{attributes:l,styles:u,classes:c}})))};var KE={mixout(){return{icon:(e=GE,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:lE(t||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:lE(s||{})),e(r,sS(sS({},n),{},{mask:s}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=$E,e.nodeCallback=qE,e)}),provides(e){e.i2svg=function(e){const{node:t=dS,callback:n=()=>{}}=e;return $E(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:s,prefix:i,transform:o,symbol:a,mask:c,maskId:l,extra:u}=t;return new Promise((t,h)=>{Promise.all([wE(n,i),c.iconName?wE(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(c=>{let[h,d]=c;t([e,gE({icons:{main:h,mask:d},prefix:i,iconName:n,transform:o,symbol:a,maskId:l,title:r,titleId:s,extra:u,watchable:!0})])}).catch(h)})},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:s,styles:i}=e;const o=y_(i);let a;return o.length>0&&(n.style=o),v_(s)&&(a=cE("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),t.push(a||r.icon),{children:t,attributes:n}}}},WE={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return pE({type:"layer"},()=>{aE("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(e=>{Array.isArray(e)?e.map(e=>{r=r.concat(e.abstract)}):r=r.concat(e.abstract)}),[{tag:"span",attributes:{class:["".concat(l_.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}})},HE={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:i={}}=t;return pE({type:"counter",content:e},()=>(aE("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,s=sS(sS(sS({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),i=y_(r.styles);i.length>0&&(s.style=i);const o=[];return o.push({tag:"span",attributes:s,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:n,extra:{attributes:s,styles:i,classes:["".concat(l_.cssPrefix,"-layers-counter"),...r]}})))}})},QE={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=d_,title:r=null,classes:s=[],attributes:i={},styles:o={}}=t;return pE({type:"text",content:e},()=>(aE("beforeDOMElementCreation",{content:e,params:t}),mE({content:e,transform:sS(sS({},d_),n),title:r,extra:{attributes:i,styles:o,classes:["".concat(l_.cssPrefix,"-layers-text"),...s]}})))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:s}=t;let i=null,o=null;if(mS){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();i=n.width/t,o=n.height/t}return l_.autoA11y&&!n&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,mE({content:e.innerHTML,width:i,height:o,transform:r,title:n,extra:s,watchable:!0})])}}};const JE=new RegExp('"',"ug"),XE=[1105920,1112319],YE=sS(sS(sS(sS({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),ZE=Object.keys(YE).reduce((e,t)=>(e[t.toLowerCase()]=YE[t],e),{}),eI=Object.keys(ZE).reduce((e,t)=>{const n=ZE[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function tI(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((r,s)=>{if(null!==e.getAttribute(n))return r();const i=p_(e.children).filter(e=>e.getAttribute(BS)===t)[0],o=hS.getComputedStyle(e,t),a=o.getPropertyValue("font-family"),c=a.match(n_),l=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(i&&!c)return e.removeChild(i),r();if(c&&"none"!==u&&""!==u){const u=o.getPropertyValue("content");let h=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(ZE[n]||{})[s]||eI[n]}(a,l);const{value:d,isSecondary:f}=function(e){const t=e.replace(JE,""),n=function(e){const t=e.length;let n,r=e.charCodeAt(0);return r>=55296&&r<=56319&&t>1&&(n=e.charCodeAt(1),n>=56320&&n<=57343)?1024*(r-55296)+n-56320+65536:r}(t),r=n>=XE[0]&&n<=XE[1],s=2===t.length&&t[0]===t[1];return{value:N_(s?t[0]:t),isSecondary:r||s}}(u),p=c[0].startsWith("FontAwesome");let g=W_(h,d),m=g;if(p){const e=function(e){const t=z_[e],n=W_("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);e.iconName&&e.prefix&&(g=e.iconName,h=e.prefix)}if(!g||f||i&&i.getAttribute(jS)===h&&i.getAttribute(zS)===m)r();else{e.setAttribute(n,m),i&&e.removeChild(i);const o={iconName:null,title:null,titleId:null,prefix:null,transform:d_,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:a}=o;a.attributes[BS]=t,wE(g,h).then(s=>{const i=gE(sS(sS({},o),{},{icons:{main:s,mask:{prefix:null,iconName:null,rest:[]}},prefix:h,iconName:m,extra:a,watchable:!0})),c=dS.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(c,e.firstChild):e.appendChild(c),c.outerHTML=i.map(e=>k_(e)).join("\n"),e.removeAttribute(n),r()}).catch(s)}}else r()})}function nI(e){return Promise.all([tI(e,"::before"),tI(e,"::after")])}function rI(e){return!(e.parentNode===document.head||~qS.indexOf(e.tagName.toUpperCase())||e.getAttribute(BS)||e.parentNode&&"svg"===e.parentNode.tagName)}function sI(e){if(gS)return new Promise((t,n)=>{const r=p_(e.querySelectorAll("*")).filter(rI).map(nI),s=IE("searchPseudoElements");RE(),Promise.all(r).then(()=>{s(),FE(),t()}).catch(()=>{s(),FE(),n()})})}let iI=!1;const oI=e=>e.toLowerCase().split(" ").reduce((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let s=n.slice(1).join("-");if(r&&"h"===s)return e.flipX=!0,e;if(r&&"v"===s)return e.flipY=!0,e;if(s=parseFloat(s),isNaN(s))return e;switch(r){case"grow":e.size=e.size+s;break;case"shrink":e.size=e.size-s;break;case"left":e.x=e.x-s;break;case"right":e.x=e.x+s;break;case"up":e.y=e.y-s;break;case"down":e.y=e.y+s;break;case"rotate":e.rotate=e.rotate+s}return e},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0}),aI={x:0,y:0,width:"100%",height:"100%"};function cI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}!function(e,t){let{mixoutsTo:n}=t;nE=e,rE={},Object.keys(sE).forEach(e=>{-1===iE.indexOf(e)&&delete sE[e]}),nE.forEach(e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach(e=>{"function"==typeof t[e]&&(n[e]=t[e]),"object"==typeof t[e]&&Object.keys(t[e]).forEach(r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]})}),e.hooks){const t=e.hooks();Object.keys(t).forEach(e=>{rE[e]||(rE[e]=[]),rE[e].push(t[e])})}e.provides&&e.provides(sE)})}([S_,KE,WE,HE,QE,{hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=sI,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=dS}=e;l_.searchPseudoElements&&sI(t)}}},{mixout:()=>({dom:{unwatch(){RE(),iI=!0}}}),hooks:()=>({bootstrap(){UE(oE("mutationObserverCallbacks",{}))},noAuto(){LE&&LE.disconnect()},watch(e){const{observeMutationsRoot:t}=e;iI?FE():UE(oE("mutationObserverCallbacks",{observeMutationsRoot:t}))}})},{mixout:()=>({parse:{transform:e=>oI(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=oI(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:s}=e;const i={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),l={outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(c)},path:{transform:"translate(".concat(s/2*-1," -256)")}};return{tag:"g",attributes:sS({},l.outer),children:[{tag:"g",attributes:sS({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:sS(sS({},t.icon.attributes),l.path)}]}]}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?Z_(n.split(" ").map(e=>e.trim())):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=J_()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:s,maskId:i,transform:o}=e;const{width:a,icon:c}=r,{width:l,icon:u}=s,h=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const s={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:s,inner:{transform:"".concat(i," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:o,containerWidth:l,iconWidth:a}),d={tag:"rect",attributes:sS(sS({},aI),{},{fill:"white"})},f=c.children?{children:c.children.map(cI)}:{},p={tag:"g",attributes:sS({},h.inner),children:[cI(sS({tag:c.tag,attributes:sS(sS({},c.attributes),h.path)},f))]},g={tag:"g",attributes:sS({},h.outer),children:[p]},m="mask-".concat(i||f_()),y="clip-".concat(i||f_()),v={tag:"mask",attributes:sS(sS({},aI),{},{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(w=u,"g"===w.tag?w.children:[w])},v]};var w;return t.push(b,{tag:"rect",attributes:sS({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(m,")")},aI)}),{children:t,attributes:n}}}},{provides(e){let t=!1;hS.matchMedia&&(t=hS.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:sS(sS({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=sS(sS({},r),{},{attributeName:"opacity"}),i={tag:"circle",attributes:sS(sS({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||i.children.push({tag:"animate",attributes:sS(sS({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:sS(sS({},s),{},{values:"1;0;1;1;0;1;"})}),e.push(i),e.push({tag:"path",attributes:sS(sS({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:sS(sS({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:sS(sS({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:sS(sS({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})}],{mixoutsTo:dE});const lI=dE.library,uI=dE.parse,hI=dE.icon;function dI(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(t){dI(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gI(e){return(gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mI(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?dI({},e,t):{}}var yI,vI,bI,wI,xI,SI,_I,EI,II,CI,TI,kI,AI,DI,NI,OI,PI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},MI={exports:{}};yI=MI,vI=PI,bI=function(e,t,n){if(!II(t)||TI(t)||kI(t)||AI(t)||EI(t))return t;var r,s=0,i=0;if(CI(t))for(r=[],i=t.length;s<i;s++)r.push(bI(e,t[s],n));else for(var o in r={},t)Object.prototype.hasOwnProperty.call(t,o)&&(r[e(o,n)]=bI(e,t[o],n));return r},wI=function(e){return DI(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1)},xI=function(e){var t=wI(e);return t.substr(0,1).toUpperCase()+t.substr(1)},SI=function(e,t){return function(e,t){var n=(t=t||{}).separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)}(e,t).toLowerCase()},_I=Object.prototype.toString,EI=function(e){return"function"==typeof e},II=function(e){return e===Object(e)},CI=function(e){return"[object Array]"==_I.call(e)},TI=function(e){return"[object Date]"==_I.call(e)},kI=function(e){return"[object RegExp]"==_I.call(e)},AI=function(e){return"[object Boolean]"==_I.call(e)},DI=function(e){return(e-=0)==e},NI=function(e,t){var n=t&&"process"in t?t.process:t;return"function"!=typeof n?e:function(t,r){return n(t,e,r)}},OI={camelize:wI,decamelize:SI,pascalize:xI,depascalize:SI,camelizeKeys:function(e,t){return bI(NI(wI,t),e)},decamelizeKeys:function(e,t){return bI(NI(SI,t),e,t)},pascalizeKeys:function(e,t){return bI(NI(xI,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},yI.exports?yI.exports=OI:vI.humps=OI;var RI=MI.exports,FI=["class","style"];function LI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e)return e;var r=(e.children||[]).map(function(e){return LI(e)}),s=Object.keys(e.attributes||{}).reduce(function(t,n){var r=e.attributes[n];switch(n){case"class":t.class=r.split(/\s+/).reduce(function(e,t){return e[t]=!0,e},{});break;case"style":t.style=r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),r=RI.camelize(t.slice(0,n)),s=t.slice(n+1).trim();return e[r]=s,e},{});break;default:t.attrs[n]=r}return t},{attrs:{},class:{},style:{}});n.class;var i=n.style,o=void 0===i?{}:i,a=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,FI);return function(e,t,n){const r=(e,t,n)=>{$r(-1);try{return Xr(e,t,n)}finally{$r(1)}},s=arguments.length;return 2===s?y(t)&&!h(t)?Kr(t)?r(e,null,[t]):r(e,t):r(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):3===s&&Kr(n)&&(n=[n]),r(e,t,n))}(e.tag,pI(pI(pI({},t),{},{class:s.class,style:pI(pI({},s.style),o)},s.attrs),a),r)}var UI=!1;try{UI=!0}catch(e){}function VI(e){return e&&"object"===gI(e)&&e.prefix&&e.iconName&&e.icon?e:uI.icon?uI.icon(e):null===e?null:"object"===gI(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}var BI=nn({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},rotateBy:{type:Boolean,default:!1},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1},widthAuto:{type:Boolean,default:!1}},setup:function(e,t){var n=t.attrs,r=xs(function(){return VI(e.icon)}),s=xs(function(){return mI("classes",function(e){var t,n=(dI(dI(dI(dI(dI(dI(dI(dI(dI(dI(t={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":!0===e.flip,"fa-flip-horizontal":"horizontal"===e.flip||"both"===e.flip,"fa-flip-vertical":"vertical"===e.flip||"both"===e.flip},"fa-".concat(e.size),null!==e.size),"fa-rotate-".concat(e.rotation),null!==e.rotation),"fa-rotate-by",e.rotateBy),"fa-pull-".concat(e.pull),null!==e.pull),"fa-swap-opacity",e.swapOpacity),"fa-bounce",e.bounce),"fa-shake",e.shake),"fa-beat",e.beat),"fa-fade",e.fade),"fa-beat-fade",e.beatFade),dI(dI(dI(dI(t,"fa-flash",e.flash),"fa-spin-pulse",e.spinPulse),"fa-spin-reverse",e.spinReverse),"fa-width-auto",e.widthAuto));return Object.keys(n).map(function(e){return n[e]?e:null}).filter(function(e){return e})}(e))}),i=xs(function(){return mI("transform","string"==typeof e.transform?uI.transform(e.transform):e.transform)}),o=xs(function(){return mI("mask",VI(e.mask))}),a=xs(function(){var t=pI(pI(pI(pI({},s.value),i.value),o.value),{},{symbol:e.symbol,maskId:e.maskId});return t.title=e.title,t.titleId=e.titleId,hI(r.value,t)});xr(a,function(e){if(!e)return function(){var e;!UI&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find one or more icon(s)",r.value,o.value)},{immediate:!0});var c=xs(function(){return a.value?LI(a.value.abstract[0],{},n):null});return function(){return c.value}}});lI.add({prefix:"fas",iconName:"arrows-spin",icon:[512,512,[],"e4bb","M256 96c38.4 0 73.7 13.5 101.3 36.1l-32.6 32.6c-4.6 4.6-5.9 11.5-3.5 17.4s8.3 9.9 14.8 9.9l112 0c8.8 0 16-7.2 16-16l0-112c0-6.5-3.9-12.3-9.9-14.8s-12.9-1.1-17.4 3.5l-34 34C363.4 52.6 312.1 32 256 32c-10.9 0-21.5 .8-32 2.3l0 64.9c10.3-2.1 21-3.2 32-3.2zM132.1 154.7l32.6 32.6c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-112c0-8.8-7.2-16-16-16L64 48c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l34 34C52.6 148.6 32 199.9 32 256c0 10.9 .8 21.5 2.3 32l64.9 0c-2.1-10.3-3.2-21-3.2-32c0-38.4 13.5-73.7 36.1-101.3zM477.7 224l-64.9 0c2.1 10.3 3.2 21 3.2 32c0 38.4-13.5 73.7-36.1 101.3l-32.6-32.6c-4.6-4.6-11.5-5.9-17.4-3.5s-9.9 8.3-9.9 14.8l0 112c0 8.8 7.2 16 16 16l112 0c6.5 0 12.3-3.9 14.8-9.9s1.1-12.9-3.5-17.4l-34-34C459.4 363.4 480 312.1 480 256c0-10.9-.8-21.5-2.3-32zM256 416c-38.4 0-73.7-13.5-101.3-36.1l32.6-32.6c4.6-4.6 5.9-11.5 3.5-17.4s-8.3-9.9-14.8-9.9L64 320c-8.8 0-16 7.2-16 16l0 112c0 6.5 3.9 12.3 9.9 14.8s12.9 1.1 17.4-3.5l34-34C148.6 459.4 199.9 480 256 480c10.9 0 21.5-.8 32-2.3l0-64.9c-10.3 2.1-21 3.2-32 3.2z"]},{prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]});const jI=((...e)=>{const t=(si||(si=fr(ri))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){return g(e)?document.querySelector(e):e}(e);if(!r)return;const s=t._component;p(s)||s.render||s.template||(s.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const i=n(r,!1,function(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t})(tS);jI.use(function(){const e=Y(!0),t=e.run(()=>vt({}));let n=[],r=[];const s=pt({install(e){oi(s),s._a=e,e.provide(ai,s),e.config.globalProperties.$pinia=s,r.forEach(e=>n.push(e)),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}()),jI.component("font-awesome-icon",BI),jI.mount("#app"),"serviceWorker"in navigator?"https:"!==window.location.protocol||"localhost"===window.location.hostname?(navigator.serviceWorker.getRegistrations().then(e=>e.forEach(e=>e.unregister())),window.caches&&"function"==typeof window.caches.keys&&window.caches.keys().then(e=>{e.forEach(e=>{e&&e.startsWith("websync-")&&window.caches.delete(e)})}),console.log("[App] Service Worker disabled for dev/non-HTTPS context; caches cleared")):window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[App] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[App] New service worker available - reload to update")})})}).catch(e=>{console.log("[App] Service Worker registration failed:",e.message)})}):console.log("[App] Service Worker not supported in this context (FileMaker WebViewer mode)")</script><style crossorigin rel="stylesheet">/*! tailwindcss v4.1.13 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-font-weight:initial;--tw-tracking:initial;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000}}}@layer theme{:host,:root{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-teal-600:oklch(60% .118 184.704);--color-teal-700:oklch(51.1% .096 186.391);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--breakpoint-2xl:96rem;--container-lg:32rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--animate-spin:spin 1s linear infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,::backdrop,:after,:before{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}:host,html{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,optgroup,select,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.invisible{visibility:hidden}.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.z-30{z-index:30}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-auto{margin-inline:auto}.my-8{margin-block:calc(var(--spacing)*8)}.mt-4{margin-top:calc(var(--spacing)*4)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline-flex{display:inline-flex}.table{display:table}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-20{width:calc(var(--spacing)*20)}.w-full{width:100%}.max-w-lg{max-width:var(--container-lg)}.max-w-screen-2xl{max-width:var(--breakpoint-2xl)}.min-w-0{min-width:calc(var(--spacing)*0)}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.rotate-270{rotate:270deg}.transform{transform:var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,)}.animate-spin{animation:var(--animate-spin)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-gray-700\/70{border-color:#364153b3}@supports (color:color-mix(in lab,red,red)){.border-gray-700\/70{border-color:color-mix(in oklab,var(--color-gray-700)70%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-teal-600{background-color:var(--color-teal-600)}.bg-transparent{background-color:#0000}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-500{--tw-gradient-from:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-400{--tw-gradient-to:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-400{--tw-gradient-to:var(--color-green-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-8{padding:calc(var(--spacing)*8)}.px-0{padding-inline:calc(var(--spacing)*0)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-6{padding-top:calc(var(--spacing)*6)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[10px\]{font-size:10px}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.break-all{word-break:break-all}.text-blue-400{color:var(--color-blue-400)}.text-gray-100{color:var(--color-gray-100)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-indigo-400{color:var(--color-indigo-400)}.text-purple-400{color:var(--color-purple-400)}.text-red-400{color:var(--color-red-400)}.text-white{color:var(--color-white)}.text-yellow-400{color:var(--color-yellow-400)}.capitalize{text-transform:capitalize}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.filter{filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-700{--tw-duration:.7s;transition-duration:.7s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}@media (hover:hover){.hover\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-gray-700\/40:hover{background-color:#36415366}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-700\/40:hover{background-color:color-mix(in oklab,var(--color-gray-700)40%,transparent)}}.hover\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:text-white:hover{color:var(--color-white)}}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\:ring-2:focus-visible{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-visible\:ring-blue-500:focus-visible{--tw-ring-color:var(--color-blue-500)}.focus-visible\:ring-gray-500:focus-visible{--tw-ring-color:var(--color-gray-500)}@media (min-width:40rem){.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\:p-4{padding:calc(var(--spacing)*4)}.sm\:px-0{padding-inline:calc(var(--spacing)*0)}.sm\:px-4{padding-inline:calc(var(--spacing)*4)}}@media (min-width:48rem){.md\:flex{display:flex}}@media (min-width:64rem){.lg\:col-span-2{grid-column:span 2/span 2}.lg\:col-span-5{grid-column:span 5/span 5}.lg\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}}}body,html{overscroll-behavior:none;-webkit-overflow-scrolling:touch;width:100%;max-width:100%;height:100%;margin:0;padding:0;overflow-x:auto}body{position:static;overflow-y:auto}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@keyframes spin{to{transform:rotate(360deg)}}[data-v-2b1665ef]::-webkit-scrollbar{width:6px}[data-v-2b1665ef]::-webkit-scrollbar-track{background:#374151}[data-v-2b1665ef]::-webkit-scrollbar-thumb{background:#6b7280;border-radius:3px}[data-v-2b1665ef]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style></head><body><div id="app"></div></body></html>