<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="./favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ju(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ce={},xs=[],on=()=>{},yb=()=>!1,ll=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Xu=n=>n.startsWith("onUpdate:"),dt=Object.assign,Zu=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},_b=Object.prototype.hasOwnProperty,Ae=(n,e)=>_b.call(n,e),he=Array.isArray,Ss=n=>cl(n)==="[object Map]",rg=n=>cl(n)==="[object Set]",pe=n=>typeof n=="function",We=n=>typeof n=="string",lr=n=>typeof n=="symbol",Ue=n=>n!==null&&typeof n=="object",sg=n=>(Ue(n)||pe(n))&&pe(n.then)&&pe(n.catch),ig=Object.prototype.toString,cl=n=>ig.call(n),vb=n=>cl(n).slice(8,-1),og=n=>cl(n)==="[object Object]",eh=n=>We(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Pi=Ju(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ul=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},bb=/-(\w)/g,$t=ul(n=>n.replace(bb,(e,t)=>t?t.toUpperCase():"")),Eb=/\B([A-Z])/g,Xr=ul(n=>n.replace(Eb,"-$1").toLowerCase()),hl=ul(n=>n.charAt(0).toUpperCase()+n.slice(1)),dc=ul(n=>n?`on${hl(n)}`:""),Hn=(n,e)=>!Object.is(n,e),fa=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},ag=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},jc=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let dd;const fl=()=>dd||(dd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ps(n){if(he(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=We(r)?Ab(r):Ps(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(n)||Ue(n))return n}const wb=/;(?![^(]*\))/g,Tb=/:([^]+)/,Ib=/\/\*[^]*?\*\//g;function Ab(n){const e={};return n.replace(Ib,"").split(wb).forEach(t=>{if(t){const r=t.split(Tb);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function gn(n){let e="";if(We(n))e=n;else if(he(n))for(let t=0;t<n.length;t++){const r=gn(n[t]);r&&(e+=r+" ")}else if(Ue(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const xb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sb=Ju(xb);function lg(n){return!!n||n===""}const cg=n=>!!(n&&n.__v_isRef===!0),De=n=>We(n)?n:n==null?"":he(n)||Ue(n)&&(n.toString===ig||!pe(n.toString))?cg(n)?De(n.value):JSON.stringify(n,ug,2):String(n),ug=(n,e)=>cg(e)?ug(n,e.value):Ss(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[pc(r,i)+" =>"]=s,t),{})}:rg(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>pc(t))}:lr(e)?pc(e):Ue(e)&&!he(e)&&!og(e)?String(e):e,pc=(n,e="")=>{var t;return lr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _t;class hg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_t,!e&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=_t;try{return _t=this,e()}finally{_t=t}}}on(){_t=this}off(){_t=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function fg(n){return new hg(n)}function dg(){return _t}function Pb(n,e=!1){_t&&_t.cleanups.push(n)}let Ve;const mc=new WeakSet;class pg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_t&&_t.active&&_t.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mc.has(this)&&(mc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,pd(this),yg(this);const e=Ve,t=Ht;Ve=this,Ht=!0;try{return this.fn()}finally{_g(this),Ve=e,Ht=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)rh(e);this.deps=this.depsTail=void 0,pd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$c(this)&&this.run()}get dirty(){return $c(this)}}let mg=0,Ri,Ci;function gg(n,e=!1){if(n.flags|=8,e){n.next=Ci,Ci=n;return}n.next=Ri,Ri=n}function th(){mg++}function nh(){if(--mg>0)return;if(Ci){let e=Ci;for(Ci=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ri;){let e=Ri;for(Ri=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function yg(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _g(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),rh(r),Rb(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function $c(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function vg(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ji))return;n.globalVersion=Ji;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!$c(n)){n.flags&=-3;return}const t=Ve,r=Ht;Ve=n,Ht=!0;try{yg(n);const s=n.fn(n._value);(e.version===0||Hn(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ve=t,Ht=r,_g(n),n.flags&=-3}}function rh(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)rh(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Rb(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Ht=!0;const bg=[];function cr(){bg.push(Ht),Ht=!1}function ur(){const n=bg.pop();Ht=n===void 0?!0:n}function pd(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ve;Ve=void 0;try{e()}finally{Ve=t}}}let Ji=0;class Cb{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ve||!Ht||Ve===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ve)t=this.activeLink=new Cb(Ve,this),Ve.deps?(t.prevDep=Ve.depsTail,Ve.depsTail.nextDep=t,Ve.depsTail=t):Ve.deps=Ve.depsTail=t,Eg(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Ve.depsTail,t.nextDep=void 0,Ve.depsTail.nextDep=t,Ve.depsTail=t,Ve.deps===t&&(Ve.deps=r)}return t}trigger(e){this.version++,Ji++,this.notify(e)}notify(e){th();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{nh()}}}function Eg(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Eg(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Ra=new WeakMap,Nr=Symbol(""),zc=Symbol(""),Xi=Symbol("");function ut(n,e,t){if(Ht&&Ve){let r=Ra.get(n);r||Ra.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new sh),s.map=r,s.key=t),s.track()}}function _n(n,e,t,r,s,i){const o=Ra.get(n);if(!o){Ji++;return}const l=c=>{c&&c.trigger()};if(th(),e==="clear")o.forEach(l);else{const c=he(n),u=c&&eh(t);if(c&&t==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===Xi||!lr(m)&&m>=f)&&l(p)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),u&&l(o.get(Xi)),e){case"add":c?u&&l(o.get("length")):(l(o.get(Nr)),Ss(n)&&l(o.get(zc)));break;case"delete":c||(l(o.get(Nr)),Ss(n)&&l(o.get(zc)));break;case"set":Ss(n)&&l(o.get(Nr));break}}nh()}function Db(n,e){const t=Ra.get(n);return t&&t.get(e)}function is(n){const e=Ie(n);return e===n?e:(ut(e,"iterate",Xi),Wt(n)?e:e.map(vt))}function ih(n){return ut(n=Ie(n),"iterate",Xi),n}const Vb={__proto__:null,[Symbol.iterator](){return gc(this,Symbol.iterator,vt)},concat(...n){return is(this).concat(...n.map(e=>he(e)?is(e):e))},entries(){return gc(this,"entries",n=>(n[1]=vt(n[1]),n))},every(n,e){return pn(this,"every",n,e,void 0,arguments)},filter(n,e){return pn(this,"filter",n,e,t=>t.map(vt),arguments)},find(n,e){return pn(this,"find",n,e,vt,arguments)},findIndex(n,e){return pn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return pn(this,"findLast",n,e,vt,arguments)},findLastIndex(n,e){return pn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return pn(this,"forEach",n,e,void 0,arguments)},includes(...n){return yc(this,"includes",n)},indexOf(...n){return yc(this,"indexOf",n)},join(n){return is(this).join(n)},lastIndexOf(...n){return yc(this,"lastIndexOf",n)},map(n,e){return pn(this,"map",n,e,void 0,arguments)},pop(){return mi(this,"pop")},push(...n){return mi(this,"push",n)},reduce(n,...e){return md(this,"reduce",n,e)},reduceRight(n,...e){return md(this,"reduceRight",n,e)},shift(){return mi(this,"shift")},some(n,e){return pn(this,"some",n,e,void 0,arguments)},splice(...n){return mi(this,"splice",n)},toReversed(){return is(this).toReversed()},toSorted(n){return is(this).toSorted(n)},toSpliced(...n){return is(this).toSpliced(...n)},unshift(...n){return mi(this,"unshift",n)},values(){return gc(this,"values",vt)}};function gc(n,e,t){const r=ih(n),s=r[e]();return r!==n&&!Wt(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const kb=Array.prototype;function pn(n,e,t,r,s,i){const o=ih(n),l=o!==n&&!Wt(n),c=o[e];if(c!==kb[e]){const p=c.apply(n,i);return l?vt(p):p}let u=t;o!==n&&(l?u=function(p,m){return t.call(this,vt(p),m,n)}:t.length>2&&(u=function(p,m){return t.call(this,p,m,n)}));const f=c.call(o,u,r);return l&&s?s(f):f}function md(n,e,t,r){const s=ih(n);let i=t;return s!==n&&(Wt(n)?t.length>3&&(i=function(o,l,c){return t.call(this,o,l,c,n)}):i=function(o,l,c){return t.call(this,o,vt(l),c,n)}),s[e](i,...r)}function yc(n,e,t){const r=Ie(n);ut(r,"iterate",Xi);const s=r[e](...t);return(s===-1||s===!1)&&lh(t[0])?(t[0]=Ie(t[0]),r[e](...t)):s}function mi(n,e,t=[]){cr(),th();const r=Ie(n)[e].apply(n,t);return nh(),ur(),r}const Ob=Ju("__proto__,__v_isRef,__isVue"),wg=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(lr));function Nb(n){lr(n)||(n=String(n));const e=Ie(this);return ut(e,"has",n),e.hasOwnProperty(n)}class Tg{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?Gb:Sg:i?xg:Ag).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=he(e);if(!s){let c;if(o&&(c=Vb[t]))return c;if(t==="hasOwnProperty")return Nb}const l=Reflect.get(e,t,ze(e)?e:r);return(lr(t)?wg.has(t):Ob(t))||(s||ut(e,"get",t),i)?l:ze(l)?o&&eh(t)?l:l.value:Ue(l)?s?Pg(l):dl(l):l}}class Ig extends Tg{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const c=jr(i);if(!Wt(r)&&!jr(r)&&(i=Ie(i),r=Ie(r)),!he(e)&&ze(i)&&!ze(r))return c?!1:(i.value=r,!0)}const o=he(e)&&eh(t)?Number(t)<e.length:Ae(e,t),l=Reflect.set(e,t,r,ze(e)?e:s);return e===Ie(s)&&(o?Hn(r,i)&&_n(e,"set",t,r):_n(e,"add",t,r)),l}deleteProperty(e,t){const r=Ae(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&_n(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!lr(t)||!wg.has(t))&&ut(e,"has",t),r}ownKeys(e){return ut(e,"iterate",he(e)?"length":Nr),Reflect.ownKeys(e)}}class Mb extends Tg{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Fb=new Ig,Lb=new Mb,Bb=new Ig(!0);const qc=n=>n,ea=n=>Reflect.getPrototypeOf(n);function Ub(n,e,t){return function(...r){const s=this.__v_raw,i=Ie(s),o=Ss(i),l=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=s[n](...r),f=t?qc:e?Gc:vt;return!e&&ut(i,"iterate",c?zc:Nr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function ta(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function jb(n,e){const t={get(s){const i=this.__v_raw,o=Ie(i),l=Ie(s);n||(Hn(s,l)&&ut(o,"get",s),ut(o,"get",l));const{has:c}=ea(o),u=e?qc:n?Gc:vt;if(c.call(o,s))return u(i.get(s));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&ut(Ie(s),"iterate",Nr),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Ie(i),l=Ie(s);return n||(Hn(s,l)&&ut(o,"has",s),ut(o,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const o=this,l=o.__v_raw,c=Ie(l),u=e?qc:n?Gc:vt;return!n&&ut(c,"iterate",Nr),l.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return dt(t,n?{add:ta("add"),set:ta("set"),delete:ta("delete"),clear:ta("clear")}:{add(s){!e&&!Wt(s)&&!jr(s)&&(s=Ie(s));const i=Ie(this);return ea(i).has.call(i,s)||(i.add(s),_n(i,"add",s,s)),this},set(s,i){!e&&!Wt(i)&&!jr(i)&&(i=Ie(i));const o=Ie(this),{has:l,get:c}=ea(o);let u=l.call(o,s);u||(s=Ie(s),u=l.call(o,s));const f=c.call(o,s);return o.set(s,i),u?Hn(i,f)&&_n(o,"set",s,i):_n(o,"add",s,i),this},delete(s){const i=Ie(this),{has:o,get:l}=ea(i);let c=o.call(i,s);c||(s=Ie(s),c=o.call(i,s)),l&&l.call(i,s);const u=i.delete(s);return c&&_n(i,"delete",s,void 0),u},clear(){const s=Ie(this),i=s.size!==0,o=s.clear();return i&&_n(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Ub(s,n,e)}),t}function oh(n,e){const t=jb(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(Ae(t,s)&&s in r?t:r,s,i)}const $b={get:oh(!1,!1)},zb={get:oh(!1,!0)},qb={get:oh(!0,!1)};const Ag=new WeakMap,xg=new WeakMap,Sg=new WeakMap,Gb=new WeakMap;function Kb(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hb(n){return n.__v_skip||!Object.isExtensible(n)?0:Kb(vb(n))}function dl(n){return jr(n)?n:ah(n,!1,Fb,$b,Ag)}function Wb(n){return ah(n,!1,Bb,zb,xg)}function Pg(n){return ah(n,!0,Lb,qb,Sg)}function ah(n,e,t,r,s){if(!Ue(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const o=Hb(n);if(o===0)return n;const l=new Proxy(n,o===2?r:t);return s.set(n,l),l}function Mr(n){return jr(n)?Mr(n.__v_raw):!!(n&&n.__v_isReactive)}function jr(n){return!!(n&&n.__v_isReadonly)}function Wt(n){return!!(n&&n.__v_isShallow)}function lh(n){return n?!!n.__v_raw:!1}function Ie(n){const e=n&&n.__v_raw;return e?Ie(e):n}function ch(n){return!Ae(n,"__v_skip")&&Object.isExtensible(n)&&ag(n,"__v_skip",!0),n}const vt=n=>Ue(n)?dl(n):n,Gc=n=>Ue(n)?Pg(n):n;function ze(n){return n?n.__v_isRef===!0:!1}function Di(n){return Qb(n,!1)}function Qb(n,e){return ze(n)?n:new Yb(n,e)}class Yb{constructor(e,t){this.dep=new sh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ie(e),this._value=t?e:vt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Wt(e)||jr(e);e=r?e:Ie(e),Hn(e,t)&&(this._rawValue=e,this._value=r?e:vt(e),this.dep.trigger())}}function de(n){return ze(n)?n.value:n}const Jb={get:(n,e,t)=>e==="__v_raw"?n:de(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return ze(s)&&!ze(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function Rg(n){return Mr(n)?n:new Proxy(n,Jb)}function Xb(n){const e=he(n)?new Array(n.length):{};for(const t in n)e[t]=e1(n,t);return e}class Zb{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Db(Ie(this._object),this._key)}}function e1(n,e,t){const r=n[e];return ze(r)?r:new Zb(n,e,t)}class t1{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new sh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ji-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ve!==this)return gg(this,!0),!0}get value(){const e=this.dep.track();return vg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function n1(n,e,t=!1){let r,s;return pe(n)?r=n:(r=n.get,s=n.set),new t1(r,s,t)}const na={},Ca=new WeakMap;let Ar;function r1(n,e=!1,t=Ar){if(t){let r=Ca.get(t);r||Ca.set(t,r=[]),r.push(n)}}function s1(n,e,t=Ce){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:l,call:c}=t,u=I=>s?I:Wt(I)||s===!1||s===0?vn(I,1):vn(I);let f,p,m,v,R=!1,V=!1;if(ze(n)?(p=()=>n.value,R=Wt(n)):Mr(n)?(p=()=>u(n),R=!0):he(n)?(V=!0,R=n.some(I=>Mr(I)||Wt(I)),p=()=>n.map(I=>{if(ze(I))return I.value;if(Mr(I))return u(I);if(pe(I))return c?c(I,2):I()})):pe(n)?e?p=c?()=>c(n,2):n:p=()=>{if(m){cr();try{m()}finally{ur()}}const I=Ar;Ar=f;try{return c?c(n,3,[v]):n(v)}finally{Ar=I}}:p=on,e&&s){const I=p,X=s===!0?1/0:s;p=()=>vn(I(),X)}const k=dg(),F=()=>{f.stop(),k&&k.active&&Zu(k.effects,f)};if(i&&e){const I=e;e=(...X)=>{I(...X),F()}}let N=V?new Array(n.length).fill(na):na;const M=I=>{if(!(!(f.flags&1)||!f.dirty&&!I))if(e){const X=f.run();if(s||R||(V?X.some((te,w)=>Hn(te,N[w])):Hn(X,N))){m&&m();const te=Ar;Ar=f;try{const w=[X,N===na?void 0:V&&N[0]===na?[]:N,v];c?c(e,3,w):e(...w),N=X}finally{Ar=te}}}else f.run()};return l&&l(M),f=new pg(p),f.scheduler=o?()=>o(M,!1):M,v=I=>r1(I,!1,f),m=f.onStop=()=>{const I=Ca.get(f);if(I){if(c)c(I,4);else for(const X of I)X();Ca.delete(f)}},e?r?M(!0):N=f.run():o?o(M.bind(null,!0),!0):f.run(),F.pause=f.pause.bind(f),F.resume=f.resume.bind(f),F.stop=F,F}function vn(n,e=1/0,t){if(e<=0||!Ue(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,ze(n))vn(n.value,e,t);else if(he(n))for(let r=0;r<n.length;r++)vn(n[r],e,t);else if(rg(n)||Ss(n))n.forEach(r=>{vn(r,e,t)});else if(og(n)){for(const r in n)vn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&vn(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wo(n,e,t,r){try{return r?n(...r):n()}catch(s){pl(s,e,t)}}function an(n,e,t,r){if(pe(n)){const s=wo(n,e,t,r);return s&&sg(s)&&s.catch(i=>{pl(i,e,t)}),s}if(he(n)){const s=[];for(let i=0;i<n.length;i++)s.push(an(n[i],e,t,r));return s}}function pl(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ce;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](n,c,u)===!1)return}l=l.parent}if(i){cr(),wo(i,null,10,[n,c,u]),ur();return}}i1(n,t,s,r,o)}function i1(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const bt=[];let Xt=-1;const Rs=[];let zn=null,ys=0;const Cg=Promise.resolve();let Da=null;function Dg(n){const e=Da||Cg;return n?e.then(this?n.bind(this):n):e}function o1(n){let e=Xt+1,t=bt.length;for(;e<t;){const r=e+t>>>1,s=bt[r],i=Zi(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function uh(n){if(!(n.flags&1)){const e=Zi(n),t=bt[bt.length-1];!t||!(n.flags&2)&&e>=Zi(t)?bt.push(n):bt.splice(o1(e),0,n),n.flags|=1,Vg()}}function Vg(){Da||(Da=Cg.then(Og))}function a1(n){he(n)?Rs.push(...n):zn&&n.id===-1?zn.splice(ys+1,0,n):n.flags&1||(Rs.push(n),n.flags|=1),Vg()}function gd(n,e,t=Xt+1){for(;t<bt.length;t++){const r=bt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;bt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function kg(n){if(Rs.length){const e=[...new Set(Rs)].sort((t,r)=>Zi(t)-Zi(r));if(Rs.length=0,zn){zn.push(...e);return}for(zn=e,ys=0;ys<zn.length;ys++){const t=zn[ys];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}zn=null,ys=0}}const Zi=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Og(n){try{for(Xt=0;Xt<bt.length;Xt++){const e=bt[Xt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),wo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Xt<bt.length;Xt++){const e=bt[Xt];e&&(e.flags&=-2)}Xt=-1,bt.length=0,kg(),Da=null,(bt.length||Rs.length)&&Og()}}let xt=null,Ng=null;function Va(n){const e=xt;return xt=n,Ng=n&&n.type.__scopeId||null,e}function l1(n,e=xt,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&xd(-1);const i=Va(e);let o;try{o=n(...s)}finally{Va(i),r._d&&xd(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function os(n,e){if(xt===null)return n;const t=_l(xt),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,l,c=Ce]=e[s];i&&(pe(i)&&(i={mounted:i,updated:i}),i.deep&&vn(o),r.push({dir:i,instance:t,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function Er(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let c=l.dir[r];c&&(cr(),an(c,t,8,[n.el,l,n,e]),ur())}}const c1=Symbol("_vte"),u1=n=>n.__isTeleport;function hh(n,e){n.shapeFlag&6&&n.component?(n.transition=e,hh(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function h1(n,e){return pe(n)?dt({name:n.name},e,{setup:n}):n}function Mg(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function ka(n,e,t,r,s=!1){if(he(n)){n.forEach((R,V)=>ka(R,e&&(he(e)?e[V]:e),t,r,s));return}if(Vi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ka(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?_l(r.component):r.el,o=s?null:i,{i:l,r:c}=n,u=e&&e.r,f=l.refs===Ce?l.refs={}:l.refs,p=l.setupState,m=Ie(p),v=p===Ce?()=>!1:R=>Ae(m,R);if(u!=null&&u!==c&&(We(u)?(f[u]=null,v(u)&&(p[u]=null)):ze(u)&&(u.value=null)),pe(c))wo(c,l,12,[o,f]);else{const R=We(c),V=ze(c);if(R||V){const k=()=>{if(n.f){const F=R?v(c)?p[c]:f[c]:c.value;s?he(F)&&Zu(F,i):he(F)?F.includes(i)||F.push(i):R?(f[c]=[i],v(c)&&(p[c]=f[c])):(c.value=[i],n.k&&(f[n.k]=c.value))}else R?(f[c]=o,v(c)&&(p[c]=o)):V&&(c.value=o,n.k&&(f[n.k]=o))};o?(k.id=-1,Ct(k,t)):k()}}}fl().requestIdleCallback;fl().cancelIdleCallback;const Vi=n=>!!n.type.__asyncLoader,Fg=n=>n.type.__isKeepAlive;function f1(n,e){Lg(n,"a",e)}function d1(n,e){Lg(n,"da",e)}function Lg(n,e,t=nt){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(ml(e,r,t),t){let s=t.parent;for(;s&&s.parent;)Fg(s.parent.vnode)&&p1(r,e,t,s),s=s.parent}}function p1(n,e,t,r){const s=ml(e,n,r,!0);Ug(()=>{Zu(r[e],s)},t)}function ml(n,e,t=nt,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{cr();const l=To(t),c=an(e,t,n,o);return l(),ur(),c});return r?s.unshift(i):s.push(i),i}}const Rn=n=>(e,t=nt)=>{(!to||n==="sp")&&ml(n,(...r)=>e(...r),t)},m1=Rn("bm"),Bg=Rn("m"),g1=Rn("bu"),y1=Rn("u"),_1=Rn("bum"),Ug=Rn("um"),v1=Rn("sp"),b1=Rn("rtg"),E1=Rn("rtc");function w1(n,e=nt){ml("ec",n,e)}const T1="components";function I1(n,e){return x1(T1,n,!0,e)||n}const A1=Symbol.for("v-ndc");function x1(n,e,t=!0,r=!1){const s=xt||nt;if(s){const i=s.type;{const l=gE(i,!1);if(l&&(l===e||l===$t(e)||l===hl($t(e))))return i}const o=yd(s[n]||i[n],e)||yd(s.appContext[n],e);return!o&&r?i:o}}function yd(n,e){return n&&(n[e]||n[$t(e)]||n[hl($t(e))])}const Kc=n=>n?ay(n)?_l(n):Kc(n.parent):null,ki=dt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Kc(n.parent),$root:n=>Kc(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>$g(n),$forceUpdate:n=>n.f||(n.f=()=>{uh(n.update)}),$nextTick:n=>n.n||(n.n=Dg.bind(n.proxy)),$watch:n=>Q1.bind(n)}),_c=(n,e)=>n!==Ce&&!n.__isScriptSetup&&Ae(n,e),S1={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:c}=n;let u;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(_c(r,e))return o[e]=1,r[e];if(s!==Ce&&Ae(s,e))return o[e]=2,s[e];if((u=n.propsOptions[0])&&Ae(u,e))return o[e]=3,i[e];if(t!==Ce&&Ae(t,e))return o[e]=4,t[e];Hc&&(o[e]=0)}}const f=ki[e];let p,m;if(f)return e==="$attrs"&&ut(n.attrs,"get",""),f(n);if((p=l.__cssModules)&&(p=p[e]))return p;if(t!==Ce&&Ae(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,Ae(m,e))return m[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return _c(s,e)?(s[e]=t,!0):r!==Ce&&Ae(r,e)?(r[e]=t,!0):Ae(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!t[o]||n!==Ce&&Ae(n,o)||_c(e,o)||(l=i[0])&&Ae(l,o)||Ae(r,o)||Ae(ki,o)||Ae(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ae(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function _d(n){return he(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Hc=!0;function P1(n){const e=$g(n),t=n.proxy,r=n.ctx;Hc=!1,e.beforeCreate&&vd(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:l,provide:c,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:v,updated:R,activated:V,deactivated:k,beforeDestroy:F,beforeUnmount:N,destroyed:M,unmounted:I,render:X,renderTracked:te,renderTriggered:w,errorCaptured:y,serverPrefetch:_,expose:T,inheritAttrs:x,components:S,directives:b,filters:mt}=e;if(u&&R1(u,r,null),o)for(const me in o){const we=o[me];pe(we)&&(r[me]=we.bind(t))}if(s){const me=s.call(t,t);Ue(me)&&(n.data=dl(me))}if(Hc=!0,i)for(const me in i){const we=i[me],qt=pe(we)?we.bind(t,t):pe(we.get)?we.get.bind(t,t):on,pr=!pe(we)&&pe(we.set)?we.set.bind(t):on,un=Vt({get:qt,set:pr});Object.defineProperty(r,me,{enumerable:!0,configurable:!0,get:()=>un.value,set:Ke=>un.value=Ke})}if(l)for(const me in l)jg(l[me],r,t,me);if(c){const me=pe(c)?c.call(t):c;Reflect.ownKeys(me).forEach(we=>{N1(we,me[we])})}f&&vd(f,n,"c");function Be(me,we){he(we)?we.forEach(qt=>me(qt.bind(t))):we&&me(we.bind(t))}if(Be(m1,p),Be(Bg,m),Be(g1,v),Be(y1,R),Be(f1,V),Be(d1,k),Be(w1,y),Be(E1,te),Be(b1,w),Be(_1,N),Be(Ug,I),Be(v1,_),he(T))if(T.length){const me=n.exposed||(n.exposed={});T.forEach(we=>{Object.defineProperty(me,we,{get:()=>t[we],set:qt=>t[we]=qt})})}else n.exposed||(n.exposed={});X&&n.render===on&&(n.render=X),x!=null&&(n.inheritAttrs=x),S&&(n.components=S),b&&(n.directives=b),_&&Mg(n)}function R1(n,e,t=on){he(n)&&(n=Wc(n));for(const r in n){const s=n[r];let i;Ue(s)?"default"in s?i=Oi(s.from||r,s.default,!0):i=Oi(s.from||r):i=Oi(s),ze(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function vd(n,e,t){an(he(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function jg(n,e,t,r){let s=r.includes(".")?ny(t,r):()=>t[r];if(We(n)){const i=e[n];pe(i)&&Ni(s,i)}else if(pe(n))Ni(s,n.bind(t));else if(Ue(n))if(he(n))n.forEach(i=>jg(i,e,t,r));else{const i=pe(n.handler)?n.handler.bind(t):e[n.handler];pe(i)&&Ni(s,i,n)}}function $g(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,l=i.get(e);let c;return l?c=l:!s.length&&!t&&!r?c=e:(c={},s.length&&s.forEach(u=>Oa(c,u,o,!0)),Oa(c,e,o)),Ue(e)&&i.set(e,c),c}function Oa(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&Oa(n,i,t,!0),s&&s.forEach(o=>Oa(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const l=C1[o]||t&&t[o];n[o]=l?l(n[o],e[o]):e[o]}return n}const C1={data:bd,props:Ed,emits:Ed,methods:wi,computed:wi,beforeCreate:yt,created:yt,beforeMount:yt,mounted:yt,beforeUpdate:yt,updated:yt,beforeDestroy:yt,beforeUnmount:yt,destroyed:yt,unmounted:yt,activated:yt,deactivated:yt,errorCaptured:yt,serverPrefetch:yt,components:wi,directives:wi,watch:V1,provide:bd,inject:D1};function bd(n,e){return e?n?function(){return dt(pe(n)?n.call(this,this):n,pe(e)?e.call(this,this):e)}:e:n}function D1(n,e){return wi(Wc(n),Wc(e))}function Wc(n){if(he(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function yt(n,e){return n?[...new Set([].concat(n,e))]:e}function wi(n,e){return n?dt(Object.create(null),n,e):e}function Ed(n,e){return n?he(n)&&he(e)?[...new Set([...n,...e])]:dt(Object.create(null),_d(n),_d(e??{})):e}function V1(n,e){if(!n)return e;if(!e)return n;const t=dt(Object.create(null),n);for(const r in e)t[r]=yt(n[r],e[r]);return t}function zg(){return{app:null,config:{isNativeTag:yb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let k1=0;function O1(n,e){return function(r,s=null){pe(r)||(r=dt({},r)),s!=null&&!Ue(s)&&(s=null);const i=zg(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:k1++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:vE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&pe(f.install)?(o.add(f),f.install(u,...p)):pe(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!c){const v=u._ceVNode||wt(r,s);return v.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(v,f,m),c=!0,u._container=f,f.__vue_app__=u,_l(v.component)}},onUnmount(f){l.push(f)},unmount(){c&&(an(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=Fr;Fr=u;try{return f()}finally{Fr=p}}};return u}}let Fr=null;function N1(n,e){if(nt){let t=nt.provides;const r=nt.parent&&nt.parent.provides;r===t&&(t=nt.provides=Object.create(r)),t[n]=e}}function Oi(n,e,t=!1){const r=nt||xt;if(r||Fr){const s=Fr?Fr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&pe(e)?e.call(r&&r.proxy):e}}function M1(){return!!(nt||xt||Fr)}const qg={},Gg=()=>Object.create(qg),Kg=n=>Object.getPrototypeOf(n)===qg;function F1(n,e,t,r=!1){const s={},i=Gg();n.propsDefaults=Object.create(null),Hg(n,e,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=r?s:Wb(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function L1(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,l=Ie(s),[c]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=n.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(gl(n.emitsOptions,m))continue;const v=e[m];if(c)if(Ae(i,m))v!==i[m]&&(i[m]=v,u=!0);else{const R=$t(m);s[R]=Qc(c,l,R,v,n,!1)}else v!==i[m]&&(i[m]=v,u=!0)}}}else{Hg(n,e,s,i)&&(u=!0);let f;for(const p in l)(!e||!Ae(e,p)&&((f=Xr(p))===p||!Ae(e,f)))&&(c?t&&(t[p]!==void 0||t[f]!==void 0)&&(s[p]=Qc(c,l,p,void 0,n,!0)):delete s[p]);if(i!==l)for(const p in i)(!e||!Ae(e,p))&&(delete i[p],u=!0)}u&&_n(n.attrs,"set","")}function Hg(n,e,t,r){const[s,i]=n.propsOptions;let o=!1,l;if(e)for(let c in e){if(Pi(c))continue;const u=e[c];let f;s&&Ae(s,f=$t(c))?!i||!i.includes(f)?t[f]=u:(l||(l={}))[f]=u:gl(n.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=Ie(t),u=l||Ce;for(let f=0;f<i.length;f++){const p=i[f];t[p]=Qc(s,c,p,u[p],n,!Ae(u,p))}}return o}function Qc(n,e,t,r,s,i){const o=n[t];if(o!=null){const l=Ae(o,"default");if(l&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&pe(c)){const{propsDefaults:u}=s;if(t in u)r=u[t];else{const f=To(s);r=u[t]=c.call(null,e),f()}}else r=c;s.ce&&s.ce._setProp(t,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===Xr(t))&&(r=!0))}return r}const B1=new WeakMap;function Wg(n,e,t=!1){const r=t?B1:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},l=[];let c=!1;if(!pe(n)){const f=p=>{c=!0;const[m,v]=Wg(p,e,!0);dt(o,m),v&&l.push(...v)};!t&&e.mixins.length&&e.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!i&&!c)return Ue(n)&&r.set(n,xs),xs;if(he(i))for(let f=0;f<i.length;f++){const p=$t(i[f]);wd(p)&&(o[p]=Ce)}else if(i)for(const f in i){const p=$t(f);if(wd(p)){const m=i[f],v=o[p]=he(m)||pe(m)?{type:m}:dt({},m),R=v.type;let V=!1,k=!0;if(he(R))for(let F=0;F<R.length;++F){const N=R[F],M=pe(N)&&N.name;if(M==="Boolean"){V=!0;break}else M==="String"&&(k=!1)}else V=pe(R)&&R.name==="Boolean";v[0]=V,v[1]=k,(V||Ae(v,"default"))&&l.push(p)}}const u=[o,l];return Ue(n)&&r.set(n,u),u}function wd(n){return n[0]!=="$"&&!Pi(n)}const Qg=n=>n[0]==="_"||n==="$stable",fh=n=>he(n)?n.map(en):[en(n)],U1=(n,e,t)=>{if(e._n)return e;const r=l1((...s)=>fh(e(...s)),t);return r._c=!1,r},Yg=(n,e,t)=>{const r=n._ctx;for(const s in n){if(Qg(s))continue;const i=n[s];if(pe(i))e[s]=U1(s,i,r);else if(i!=null){const o=fh(i);e[s]=()=>o}}},Jg=(n,e)=>{const t=fh(e);n.slots.default=()=>t},Xg=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},j1=(n,e,t)=>{const r=n.slots=Gg();if(n.vnode.shapeFlag&32){const s=e._;s?(Xg(r,e,t),t&&ag(r,"_",s,!0)):Yg(e,r)}else e&&Jg(n,e)},$1=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,o=Ce;if(r.shapeFlag&32){const l=e._;l?t&&l===1?i=!1:Xg(s,e,t):(i=!e.$stable,Yg(e,s)),o=e}else e&&(Jg(n,e),o={default:1});if(i)for(const l in s)!Qg(l)&&o[l]==null&&delete s[l]},Ct=nE;function z1(n){return q1(n)}function q1(n,e){const t=fl();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:v=on,insertStaticContent:R}=n,V=(E,A,L,$=null,j=null,z=null,Z=void 0,W=null,H=!!A.dynamicChildren)=>{if(E===A)return;E&&!gi(E,A)&&($=hn(E),Ke(E,j,z,!0),E=null),A.patchFlag===-2&&(H=!1,A.dynamicChildren=null);const{type:q,ref:ae,shapeFlag:ee}=A;switch(q){case yl:k(E,A,L,$);break;case $r:F(E,A,L,$);break;case da:E==null&&N(A,L,$,Z);break;case yn:S(E,A,L,$,j,z,Z,W,H);break;default:ee&1?X(E,A,L,$,j,z,Z,W,H):ee&6?b(E,A,L,$,j,z,Z,W,H):(ee&64||ee&128)&&q.process(E,A,L,$,j,z,Z,W,H,Yt)}ae!=null&&j&&ka(ae,E&&E.ref,z,A||E,!A)},k=(E,A,L,$)=>{if(E==null)r(A.el=l(A.children),L,$);else{const j=A.el=E.el;A.children!==E.children&&u(j,A.children)}},F=(E,A,L,$)=>{E==null?r(A.el=c(A.children||""),L,$):A.el=E.el},N=(E,A,L,$)=>{[E.el,E.anchor]=R(E.children,A,L,$,E.el,E.anchor)},M=({el:E,anchor:A},L,$)=>{let j;for(;E&&E!==A;)j=m(E),r(E,L,$),E=j;r(A,L,$)},I=({el:E,anchor:A})=>{let L;for(;E&&E!==A;)L=m(E),s(E),E=L;s(A)},X=(E,A,L,$,j,z,Z,W,H)=>{A.type==="svg"?Z="svg":A.type==="math"&&(Z="mathml"),E==null?te(A,L,$,j,z,Z,W,H):_(E,A,j,z,Z,W,H)},te=(E,A,L,$,j,z,Z,W)=>{let H,q;const{props:ae,shapeFlag:ee,transition:ie,dirs:ce}=E;if(H=E.el=o(E.type,z,ae&&ae.is,ae),ee&8?f(H,E.children):ee&16&&y(E.children,H,null,$,j,vc(E,z),Z,W),ce&&Er(E,null,$,"created"),w(H,E,E.scopeId,Z,$),ae){for(const ge in ae)ge!=="value"&&!Pi(ge)&&i(H,ge,null,ae[ge],z,$);"value"in ae&&i(H,"value",null,ae.value,z),(q=ae.onVnodeBeforeMount)&&Jt(q,$,E)}ce&&Er(E,null,$,"beforeMount");const le=G1(j,ie);le&&ie.beforeEnter(H),r(H,A,L),((q=ae&&ae.onVnodeMounted)||le||ce)&&Ct(()=>{q&&Jt(q,$,E),le&&ie.enter(H),ce&&Er(E,null,$,"mounted")},j)},w=(E,A,L,$,j)=>{if(L&&v(E,L),$)for(let z=0;z<$.length;z++)v(E,$[z]);if(j){let z=j.subTree;if(A===z||sy(z.type)&&(z.ssContent===A||z.ssFallback===A)){const Z=j.vnode;w(E,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},y=(E,A,L,$,j,z,Z,W,H=0)=>{for(let q=H;q<E.length;q++){const ae=E[q]=W?qn(E[q]):en(E[q]);V(null,ae,A,L,$,j,z,Z,W)}},_=(E,A,L,$,j,z,Z)=>{const W=A.el=E.el;let{patchFlag:H,dynamicChildren:q,dirs:ae}=A;H|=E.patchFlag&16;const ee=E.props||Ce,ie=A.props||Ce;let ce;if(L&&wr(L,!1),(ce=ie.onVnodeBeforeUpdate)&&Jt(ce,L,A,E),ae&&Er(A,E,L,"beforeUpdate"),L&&wr(L,!0),(ee.innerHTML&&ie.innerHTML==null||ee.textContent&&ie.textContent==null)&&f(W,""),q?T(E.dynamicChildren,q,W,L,$,vc(A,j),z):Z||we(E,A,W,null,L,$,vc(A,j),z,!1),H>0){if(H&16)x(W,ee,ie,L,j);else if(H&2&&ee.class!==ie.class&&i(W,"class",null,ie.class,j),H&4&&i(W,"style",ee.style,ie.style,j),H&8){const le=A.dynamicProps;for(let ge=0;ge<le.length;ge++){const ve=le[ge],st=ee[ve],Je=ie[ve];(Je!==st||ve==="value")&&i(W,ve,st,Je,j,L)}}H&1&&E.children!==A.children&&f(W,A.children)}else!Z&&q==null&&x(W,ee,ie,L,j);((ce=ie.onVnodeUpdated)||ae)&&Ct(()=>{ce&&Jt(ce,L,A,E),ae&&Er(A,E,L,"updated")},$)},T=(E,A,L,$,j,z,Z)=>{for(let W=0;W<A.length;W++){const H=E[W],q=A[W],ae=H.el&&(H.type===yn||!gi(H,q)||H.shapeFlag&70)?p(H.el):L;V(H,q,ae,null,$,j,z,Z,!0)}},x=(E,A,L,$,j)=>{if(A!==L){if(A!==Ce)for(const z in A)!Pi(z)&&!(z in L)&&i(E,z,A[z],null,j,$);for(const z in L){if(Pi(z))continue;const Z=L[z],W=A[z];Z!==W&&z!=="value"&&i(E,z,W,Z,j,$)}"value"in L&&i(E,"value",A.value,L.value,j)}},S=(E,A,L,$,j,z,Z,W,H)=>{const q=A.el=E?E.el:l(""),ae=A.anchor=E?E.anchor:l("");let{patchFlag:ee,dynamicChildren:ie,slotScopeIds:ce}=A;ce&&(W=W?W.concat(ce):ce),E==null?(r(q,L,$),r(ae,L,$),y(A.children||[],L,ae,j,z,Z,W,H)):ee>0&&ee&64&&ie&&E.dynamicChildren?(T(E.dynamicChildren,ie,L,j,z,Z,W),(A.key!=null||j&&A===j.subTree)&&Zg(E,A,!0)):we(E,A,L,ae,j,z,Z,W,H)},b=(E,A,L,$,j,z,Z,W,H)=>{A.slotScopeIds=W,E==null?A.shapeFlag&512?j.ctx.activate(A,L,$,Z,H):mt(A,L,$,j,z,Z,H):Qt(E,A,H)},mt=(E,A,L,$,j,z,Z)=>{const W=E.component=hE(E,$,j);if(Fg(E)&&(W.ctx.renderer=Yt),fE(W,!1,Z),W.asyncDep){if(j&&j.registerDep(W,Be,Z),!E.el){const H=W.subTree=wt($r);F(null,H,A,L)}}else Be(W,E,A,L,j,z,Z)},Qt=(E,A,L)=>{const $=A.component=E.component;if(eE(E,A,L))if($.asyncDep&&!$.asyncResolved){me($,A,L);return}else $.next=A,$.update();else A.el=E.el,$.vnode=A},Be=(E,A,L,$,j,z,Z)=>{const W=()=>{if(E.isMounted){let{next:ee,bu:ie,u:ce,parent:le,vnode:ge}=E;{const it=ey(E);if(it){ee&&(ee.el=ge.el,me(E,ee,Z)),it.asyncDep.then(()=>{E.isUnmounted||W()});return}}let ve=ee,st;wr(E,!1),ee?(ee.el=ge.el,me(E,ee,Z)):ee=ge,ie&&fa(ie),(st=ee.props&&ee.props.onVnodeBeforeUpdate)&&Jt(st,le,ee,ge),wr(E,!0);const Je=Id(E),Ft=E.subTree;E.subTree=Je,V(Ft,Je,p(Ft.el),hn(Ft),E,j,z),ee.el=Je.el,ve===null&&tE(E,Je.el),ce&&Ct(ce,j),(st=ee.props&&ee.props.onVnodeUpdated)&&Ct(()=>Jt(st,le,ee,ge),j)}else{let ee;const{el:ie,props:ce}=A,{bm:le,m:ge,parent:ve,root:st,type:Je}=E,Ft=Vi(A);wr(E,!1),le&&fa(le),!Ft&&(ee=ce&&ce.onVnodeBeforeMount)&&Jt(ee,ve,A),wr(E,!0);{st.ce&&st.ce._injectChildStyle(Je);const it=E.subTree=Id(E);V(null,it,L,$,E,j,z),A.el=it.el}if(ge&&Ct(ge,j),!Ft&&(ee=ce&&ce.onVnodeMounted)){const it=A;Ct(()=>Jt(ee,ve,it),j)}(A.shapeFlag&256||ve&&Vi(ve.vnode)&&ve.vnode.shapeFlag&256)&&E.a&&Ct(E.a,j),E.isMounted=!0,A=L=$=null}};E.scope.on();const H=E.effect=new pg(W);E.scope.off();const q=E.update=H.run.bind(H),ae=E.job=H.runIfDirty.bind(H);ae.i=E,ae.id=E.uid,H.scheduler=()=>uh(ae),wr(E,!0),q()},me=(E,A,L)=>{A.component=E;const $=E.vnode.props;E.vnode=A,E.next=null,L1(E,A.props,$,L),$1(E,A.children,L),cr(),gd(E),ur()},we=(E,A,L,$,j,z,Z,W,H=!1)=>{const q=E&&E.children,ae=E?E.shapeFlag:0,ee=A.children,{patchFlag:ie,shapeFlag:ce}=A;if(ie>0){if(ie&128){pr(q,ee,L,$,j,z,Z,W,H);return}else if(ie&256){qt(q,ee,L,$,j,z,Z,W,H);return}}ce&8?(ae&16&&gr(q,j,z),ee!==q&&f(L,ee)):ae&16?ce&16?pr(q,ee,L,$,j,z,Z,W,H):gr(q,j,z,!0):(ae&8&&f(L,""),ce&16&&y(ee,L,$,j,z,Z,W,H))},qt=(E,A,L,$,j,z,Z,W,H)=>{E=E||xs,A=A||xs;const q=E.length,ae=A.length,ee=Math.min(q,ae);let ie;for(ie=0;ie<ee;ie++){const ce=A[ie]=H?qn(A[ie]):en(A[ie]);V(E[ie],ce,L,null,j,z,Z,W,H)}q>ae?gr(E,j,z,!0,!1,ee):y(A,L,$,j,z,Z,W,H,ee)},pr=(E,A,L,$,j,z,Z,W,H)=>{let q=0;const ae=A.length;let ee=E.length-1,ie=ae-1;for(;q<=ee&&q<=ie;){const ce=E[q],le=A[q]=H?qn(A[q]):en(A[q]);if(gi(ce,le))V(ce,le,L,null,j,z,Z,W,H);else break;q++}for(;q<=ee&&q<=ie;){const ce=E[ee],le=A[ie]=H?qn(A[ie]):en(A[ie]);if(gi(ce,le))V(ce,le,L,null,j,z,Z,W,H);else break;ee--,ie--}if(q>ee){if(q<=ie){const ce=ie+1,le=ce<ae?A[ce].el:$;for(;q<=ie;)V(null,A[q]=H?qn(A[q]):en(A[q]),L,le,j,z,Z,W,H),q++}}else if(q>ie)for(;q<=ee;)Ke(E[q],j,z,!0),q++;else{const ce=q,le=q,ge=new Map;for(q=le;q<=ie;q++){const Xe=A[q]=H?qn(A[q]):en(A[q]);Xe.key!=null&&ge.set(Xe.key,q)}let ve,st=0;const Je=ie-le+1;let Ft=!1,it=0;const kn=new Array(Je);for(q=0;q<Je;q++)kn[q]=0;for(q=ce;q<=ee;q++){const Xe=E[q];if(st>=Je){Ke(Xe,j,z,!0);continue}let Lt;if(Xe.key!=null)Lt=ge.get(Xe.key);else for(ve=le;ve<=ie;ve++)if(kn[ve-le]===0&&gi(Xe,A[ve])){Lt=ve;break}Lt===void 0?Ke(Xe,j,z,!0):(kn[Lt-le]=q+1,Lt>=it?it=Lt:Ft=!0,V(Xe,A[Lt],L,null,j,z,Z,W,H),st++)}const ni=Ft?K1(kn):xs;for(ve=ni.length-1,q=Je-1;q>=0;q--){const Xe=le+q,Lt=A[Xe],Lo=Xe+1<ae?A[Xe+1].el:$;kn[q]===0?V(null,Lt,L,Lo,j,z,Z,W,H):Ft&&(ve<0||q!==ni[ve]?un(Lt,L,Lo,2):ve--)}}},un=(E,A,L,$,j=null)=>{const{el:z,type:Z,transition:W,children:H,shapeFlag:q}=E;if(q&6){un(E.component.subTree,A,L,$);return}if(q&128){E.suspense.move(A,L,$);return}if(q&64){Z.move(E,A,L,Yt);return}if(Z===yn){r(z,A,L);for(let ee=0;ee<H.length;ee++)un(H[ee],A,L,$);r(E.anchor,A,L);return}if(Z===da){M(E,A,L);return}if($!==2&&q&1&&W)if($===0)W.beforeEnter(z),r(z,A,L),Ct(()=>W.enter(z),j);else{const{leave:ee,delayLeave:ie,afterLeave:ce}=W,le=()=>r(z,A,L),ge=()=>{ee(z,()=>{le(),ce&&ce()})};ie?ie(z,le,ge):ge()}else r(z,A,L)},Ke=(E,A,L,$=!1,j=!1)=>{const{type:z,props:Z,ref:W,children:H,dynamicChildren:q,shapeFlag:ae,patchFlag:ee,dirs:ie,cacheIndex:ce}=E;if(ee===-2&&(j=!1),W!=null&&ka(W,null,L,E,!0),ce!=null&&(A.renderCache[ce]=void 0),ae&256){A.ctx.deactivate(E);return}const le=ae&1&&ie,ge=!Vi(E);let ve;if(ge&&(ve=Z&&Z.onVnodeBeforeUnmount)&&Jt(ve,A,E),ae&6)mr(E.component,L,$);else{if(ae&128){E.suspense.unmount(L,$);return}le&&Er(E,null,A,"beforeUnmount"),ae&64?E.type.remove(E,A,L,Yt,$):q&&!q.hasOnce&&(z!==yn||ee>0&&ee&64)?gr(q,A,L,!1,!0):(z===yn&&ee&384||!j&&ae&16)&&gr(H,A,L),$&&He(E)}(ge&&(ve=Z&&Z.onVnodeUnmounted)||le)&&Ct(()=>{ve&&Jt(ve,A,E),le&&Er(E,null,A,"unmounted")},L)},He=E=>{const{type:A,el:L,anchor:$,transition:j}=E;if(A===yn){Jl(L,$);return}if(A===da){I(E);return}const z=()=>{s(L),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(E.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:W}=j,H=()=>Z(L,z);W?W(E.el,z,H):H()}else z()},Jl=(E,A)=>{let L;for(;E!==A;)L=m(E),s(E),E=L;s(A)},mr=(E,A,L)=>{const{bum:$,scope:j,job:z,subTree:Z,um:W,m:H,a:q}=E;Td(H),Td(q),$&&fa($),j.stop(),z&&(z.flags|=8,Ke(Z,E,A,L)),W&&Ct(W,A),Ct(()=>{E.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},gr=(E,A,L,$=!1,j=!1,z=0)=>{for(let Z=z;Z<E.length;Z++)Ke(E[Z],A,L,$,j)},hn=E=>{if(E.shapeFlag&6)return hn(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=m(E.anchor||E.el),L=A&&A[c1];return L?m(L):A};let ei=!1;const Fo=(E,A,L)=>{E==null?A._vnode&&Ke(A._vnode,null,null,!0):V(A._vnode||null,E,A,null,null,null,L),A._vnode=E,ei||(ei=!0,gd(),kg(),ei=!1)},Yt={p:V,um:Ke,m:un,r:He,mt,mc:y,pc:we,pbc:T,n:hn,o:n};return{render:Fo,hydrate:void 0,createApp:O1(Fo)}}function vc({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function wr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function G1(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Zg(n,e,t=!1){const r=n.children,s=e.children;if(he(r)&&he(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=qn(s[i]),l.el=o.el),!t&&l.patchFlag!==-2&&Zg(o,l)),l.type===yl&&(l.el=o.el)}}function K1(n){const e=n.slice(),t=[0];let r,s,i,o,l;const c=n.length;for(r=0;r<c;r++){const u=n[r];if(u!==0){if(s=t[t.length-1],n[s]<u){e[r]=s,t.push(r);continue}for(i=0,o=t.length-1;i<o;)l=i+o>>1,n[t[l]]<u?i=l+1:o=l;u<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function ey(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ey(e)}function Td(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const H1=Symbol.for("v-scx"),W1=()=>Oi(H1);function Ni(n,e,t){return ty(n,e,t)}function ty(n,e,t=Ce){const{immediate:r,deep:s,flush:i,once:o}=t,l=dt({},t),c=e&&r||!e&&i!=="post";let u;if(to){if(i==="sync"){const v=W1();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=on,v.resume=on,v.pause=on,v}}const f=nt;l.call=(v,R,V)=>an(v,f,R,V);let p=!1;i==="post"?l.scheduler=v=>{Ct(v,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(v,R)=>{R?v():uh(v)}),l.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const m=s1(n,e,l);return to&&(u?u.push(m):c&&m()),m}function Q1(n,e,t){const r=this.proxy,s=We(n)?n.includes(".")?ny(r,n):()=>r[n]:n.bind(r,r);let i;pe(e)?i=e:(i=e.handler,t=e);const o=To(this),l=ty(s,i.bind(r),t);return o(),l}function ny(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const Y1=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${$t(e)}Modifiers`]||n[`${Xr(e)}Modifiers`];function J1(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Ce;let s=t;const i=e.startsWith("update:"),o=i&&Y1(r,e.slice(7));o&&(o.trim&&(s=t.map(f=>We(f)?f.trim():f)),o.number&&(s=t.map(jc)));let l,c=r[l=dc(e)]||r[l=dc($t(e))];!c&&i&&(c=r[l=dc(Xr(e))]),c&&an(c,n,6,s);const u=r[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,an(u,n,6,s)}}function ry(n,e,t=!1){const r=e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},l=!1;if(!pe(n)){const c=u=>{const f=ry(u,e,!0);f&&(l=!0,dt(o,f))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!l?(Ue(n)&&r.set(n,null),null):(he(i)?i.forEach(c=>o[c]=null):dt(o,i),Ue(n)&&r.set(n,o),o)}function gl(n,e){return!n||!ll(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ae(n,e[0].toLowerCase()+e.slice(1))||Ae(n,Xr(e))||Ae(n,e))}function Id(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:f,props:p,data:m,setupState:v,ctx:R,inheritAttrs:V}=n,k=Va(n);let F,N;try{if(t.shapeFlag&4){const I=s||r,X=I;F=en(u.call(X,I,f,p,v,m,R)),N=l}else{const I=e;F=en(I.length>1?I(p,{attrs:l,slots:o,emit:c}):I(p,null)),N=e.props?l:X1(l)}}catch(I){Mi.length=0,pl(I,n,1),F=wt($r)}let M=F;if(N&&V!==!1){const I=Object.keys(N),{shapeFlag:X}=M;I.length&&X&7&&(i&&I.some(Xu)&&(N=Z1(N,i)),M=ks(M,N,!1,!0))}return t.dirs&&(M=ks(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&hh(M,t.transition),F=M,Va(k),F}const X1=n=>{let e;for(const t in n)(t==="class"||t==="style"||ll(t))&&((e||(e={}))[t]=n[t]);return e},Z1=(n,e)=>{const t={};for(const r in n)(!Xu(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function eE(n,e,t){const{props:r,children:s,component:i}=n,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return r?Ad(r,o,u):!!o;if(c&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!gl(u,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?Ad(r,o,u):!0:!!o;return!1}function Ad(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!gl(t,i))return!0}return!1}function tE({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const sy=n=>n.__isSuspense;function nE(n,e){e&&e.pendingBranch?he(n)?e.effects.push(...n):e.effects.push(n):a1(n)}const yn=Symbol.for("v-fgt"),yl=Symbol.for("v-txt"),$r=Symbol.for("v-cmt"),da=Symbol.for("v-stc"),Mi=[];let kt=null;function jn(n=!1){Mi.push(kt=n?null:[])}function rE(){Mi.pop(),kt=Mi[Mi.length-1]||null}let eo=1;function xd(n,e=!1){eo+=n,n<0&&kt&&e&&(kt.hasOnce=!0)}function iy(n){return n.dynamicChildren=eo>0?kt||xs:null,rE(),eo>0&&kt&&kt.push(n),n}function Tr(n,e,t,r,s,i){return iy(D(n,e,t,r,s,i,!0))}function sE(n,e,t,r,s){return iy(wt(n,e,t,r,s,!0))}function Na(n){return n?n.__v_isVNode===!0:!1}function gi(n,e){return n.type===e.type&&n.key===e.key}const oy=({key:n})=>n??null,pa=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?We(n)||ze(n)||pe(n)?{i:xt,r:n,k:e,f:!!t}:n:null);function D(n,e=null,t=null,r=0,s=null,i=n===yn?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&oy(e),ref:e&&pa(e),scopeId:Ng,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:xt};return l?(dh(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=We(t)?8:16),eo>0&&!o&&kt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&kt.push(c),c}const wt=iE;function iE(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===A1)&&(n=$r),Na(n)){const l=ks(n,e,!0);return t&&dh(l,t),eo>0&&!i&&kt&&(l.shapeFlag&6?kt[kt.indexOf(n)]=l:kt.push(l)),l.patchFlag=-2,l}if(yE(n)&&(n=n.__vccOpts),e){e=oE(e);let{class:l,style:c}=e;l&&!We(l)&&(e.class=gn(l)),Ue(c)&&(lh(c)&&!he(c)&&(c=dt({},c)),e.style=Ps(c))}const o=We(n)?1:sy(n)?128:u1(n)?64:Ue(n)?4:pe(n)?2:0;return D(n,e,t,r,s,o,i,!0)}function oE(n){return n?lh(n)||Kg(n)?dt({},n):n:null}function ks(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:l,transition:c}=n,u=e?lE(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&oy(u),ref:e&&e.ref?t&&i?he(i)?i.concat(pa(e)):[i,pa(e)]:pa(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==yn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ks(n.ssContent),ssFallback:n.ssFallback&&ks(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&r&&hh(f,c.clone(f)),f}function aE(n=" ",e=0){return wt(yl,null,n,e)}function as(n,e){const t=wt(da,null,n);return t.staticCount=e,t}function Sd(n="",e=!1){return e?(jn(),sE($r,null,n)):wt($r,null,n)}function en(n){return n==null||typeof n=="boolean"?wt($r):he(n)?wt(yn,null,n.slice()):Na(n)?qn(n):wt(yl,null,String(n))}function qn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ks(n)}function dh(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(he(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),dh(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!Kg(e)?e._ctx=xt:s===3&&xt&&(xt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:xt},t=32):(e=String(e),r&64?(t=16,e=[aE(e)]):t=8);n.children=e,n.shapeFlag|=t}function lE(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=gn([e.class,r.class]));else if(s==="style")e.style=Ps([e.style,r.style]);else if(ll(s)){const i=e[s],o=r[s];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Jt(n,e,t,r=null){an(n,e,7,[t,r])}const cE=zg();let uE=0;function hE(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||cE,i={uid:uE++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wg(r,s),emitsOptions:ry(r,s),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:r.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=J1.bind(null,i),n.ce&&n.ce(i),i}let nt=null,Ma,Yc;{const n=fl(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ma=e("__VUE_INSTANCE_SETTERS__",t=>nt=t),Yc=e("__VUE_SSR_SETTERS__",t=>to=t)}const To=n=>{const e=nt;return Ma(n),n.scope.on(),()=>{n.scope.off(),Ma(e)}},Pd=()=>{nt&&nt.scope.off(),Ma(null)};function ay(n){return n.vnode.shapeFlag&4}let to=!1;function fE(n,e=!1,t=!1){e&&Yc(e);const{props:r,children:s}=n.vnode,i=ay(n);F1(n,r,i,e),j1(n,s,t);const o=i?dE(n,e):void 0;return e&&Yc(!1),o}function dE(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,S1);const{setup:r}=t;if(r){cr();const s=n.setupContext=r.length>1?mE(n):null,i=To(n),o=wo(r,n,0,[n.props,s]),l=sg(o);if(ur(),i(),(l||n.sp)&&!Vi(n)&&Mg(n),l){if(o.then(Pd,Pd),e)return o.then(c=>{Rd(n,c)}).catch(c=>{pl(c,n,0)});n.asyncDep=o}else Rd(n,o)}else ly(n)}function Rd(n,e,t){pe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ue(e)&&(n.setupState=Rg(e)),ly(n)}function ly(n,e,t){const r=n.type;n.render||(n.render=r.render||on);{const s=To(n);cr();try{P1(n)}finally{ur(),s()}}}const pE={get(n,e){return ut(n,"get",""),n[e]}};function mE(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,pE),slots:n.slots,emit:n.emit,expose:e}}function _l(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Rg(ch(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ki)return ki[t](n)},has(e,t){return t in e||t in ki}})):n.proxy}function gE(n,e=!0){return pe(n)?n.displayName||n.name:n.name||e&&n.__name}function yE(n){return pe(n)&&"__vccOpts"in n}const Vt=(n,e)=>n1(n,e,to);function _E(n,e,t){const r=arguments.length;return r===2?Ue(e)&&!he(e)?Na(e)?wt(n,null,[e]):wt(n,e):wt(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Na(t)&&(t=[t]),wt(n,e,t))}const vE="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jc;const Cd=typeof window<"u"&&window.trustedTypes;if(Cd)try{Jc=Cd.createPolicy("vue",{createHTML:n=>n})}catch{}const cy=Jc?n=>Jc.createHTML(n):n=>n,bE="http://www.w3.org/2000/svg",EE="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,Dd=mn&&mn.createElement("template"),wE={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?mn.createElementNS(bE,n):e==="mathml"?mn.createElementNS(EE,n):t?mn.createElement(n,{is:t}):mn.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>mn.createTextNode(n),createComment:n=>mn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>mn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{Dd.innerHTML=cy(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=Dd.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TE=Symbol("_vtc");function IE(n,e,t){const r=n[TE];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Vd=Symbol("_vod"),AE=Symbol("_vsh"),xE=Symbol(""),SE=/(^|;)\s*display\s*:/;function PE(n,e,t){const r=n.style,s=We(t);let i=!1;if(t&&!s){if(e)if(We(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&ma(r,l,"")}else for(const o in e)t[o]==null&&ma(r,o,"");for(const o in t)o==="display"&&(i=!0),ma(r,o,t[o])}else if(s){if(e!==t){const o=r[xE];o&&(t+=";"+o),r.cssText=t,i=SE.test(t)}}else e&&n.removeAttribute("style");Vd in n&&(n[Vd]=i?r.display:"",n[AE]&&(r.display="none"))}const kd=/\s*!important$/;function ma(n,e,t){if(he(t))t.forEach(r=>ma(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=RE(n,e);kd.test(t)?n.setProperty(Xr(r),t.replace(kd,""),"important"):n[r]=t}}const Od=["Webkit","Moz","ms"],bc={};function RE(n,e){const t=bc[e];if(t)return t;let r=$t(e);if(r!=="filter"&&r in n)return bc[e]=r;r=hl(r);for(let s=0;s<Od.length;s++){const i=Od[s]+r;if(i in n)return bc[e]=i}return e}const Nd="http://www.w3.org/1999/xlink";function Md(n,e,t,r,s,i=Sb(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Nd,e.slice(6,e.length)):n.setAttributeNS(Nd,e,t):t==null||i&&!lg(t)?n.removeAttribute(e):n.setAttribute(e,i?"":lr(t)?String(t):t)}function Fd(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?cy(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(l!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=lg(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function _s(n,e,t,r){n.addEventListener(e,t,r)}function CE(n,e,t,r){n.removeEventListener(e,t,r)}const Ld=Symbol("_vei");function DE(n,e,t,r,s=null){const i=n[Ld]||(n[Ld]={}),o=i[e];if(r&&o)o.value=r;else{const[l,c]=VE(e);if(r){const u=i[e]=NE(r,s);_s(n,l,u,c)}else o&&(CE(n,l,o,c),i[e]=void 0)}}const Bd=/(?:Once|Passive|Capture)$/;function VE(n){let e;if(Bd.test(n)){e={};let r;for(;r=n.match(Bd);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Xr(n.slice(2)),e]}let Ec=0;const kE=Promise.resolve(),OE=()=>Ec||(kE.then(()=>Ec=0),Ec=Date.now());function NE(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;an(ME(r,t.value),e,5,[r])};return t.value=n,t.attached=OE(),t}function ME(n,e){if(he(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Ud=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,FE=(n,e,t,r,s,i)=>{const o=s==="svg";e==="class"?IE(n,r,o):e==="style"?PE(n,t,r):ll(e)?Xu(e)||DE(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LE(n,e,r,o))?(Fd(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Md(n,e,r,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!We(r))?Fd(n,$t(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Md(n,e,r,o))};function LE(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Ud(e)&&pe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ud(e)&&We(t)?!1:e in n}const jd=n=>{const e=n.props["onUpdate:modelValue"]||!1;return he(e)?t=>fa(e,t):e};function BE(n){n.target.composing=!0}function $d(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const wc=Symbol("_assign"),ls={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[wc]=jd(s);const i=r||s.props&&s.props.type==="number";_s(n,e?"change":"input",o=>{if(o.target.composing)return;let l=n.value;t&&(l=l.trim()),i&&(l=jc(l)),n[wc](l)}),t&&_s(n,"change",()=>{n.value=n.value.trim()}),e||(_s(n,"compositionstart",BE),_s(n,"compositionend",$d),_s(n,"change",$d))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[wc]=jd(o),n.composing)return;const l=(i||n.type==="number")&&!/^0\d/.test(n.value)?jc(n.value):n.value,c=e??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===c)||(n.value=c))}},UE=["ctrl","shift","alt","meta"],jE={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>UE.some(t=>n[`${t}Key`]&&!e.includes(t))},$E=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const l=jE[e[o]];if(l&&l(s,e))return}return n(s,...i)})},zE=dt({patchProp:FE},wE);let zd;function qE(){return zd||(zd=z1(zE))}const GE=(...n)=>{const e=qE().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=HE(r);if(!s)return;const i=e._component;!pe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,KE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function KE(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function HE(n){return We(n)?document.querySelector(n):n}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let uy;const vl=n=>uy=n,hy=Symbol();function Xc(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Fi;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Fi||(Fi={}));function WE(){const n=fg(!0),e=n.run(()=>Di({}));let t=[],r=[];const s=ch({install(i){vl(s),s._a=i,i.provide(hy,s),i.config.globalProperties.$pinia=s,r.forEach(o=>t.push(o)),r=[]},use(i){return this._a?t.push(i):r.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return s}const fy=()=>{};function qd(n,e,t,r=fy){n.push(e);const s=()=>{const i=n.indexOf(e);i>-1&&(n.splice(i,1),r())};return!t&&dg()&&Pb(s),s}function cs(n,...e){n.slice().forEach(t=>{t(...e)})}const QE=n=>n(),Gd=Symbol(),Tc=Symbol();function Zc(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],s=n[t];Xc(s)&&Xc(r)&&n.hasOwnProperty(t)&&!ze(r)&&!Mr(r)?n[t]=Zc(s,r):n[t]=r}return n}const YE=Symbol();function JE(n){return!Xc(n)||!Object.prototype.hasOwnProperty.call(n,YE)}const{assign:$n}=Object;function XE(n){return!!(ze(n)&&n.effect)}function ZE(n,e,t,r){const{state:s,actions:i,getters:o}=e,l=t.state.value[n];let c;function u(){l||(t.state.value[n]=s?s():{});const f=Xb(t.state.value[n]);return $n(f,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=ch(Vt(()=>{vl(t);const v=t._s.get(n);return o[m].call(v,v)})),p),{}))}return c=dy(n,u,e,t,r,!0),c}function dy(n,e,t={},r,s,i){let o;const l=$n({actions:{}},t),c={deep:!0};let u,f,p=[],m=[],v;const R=r.state.value[n];!i&&!R&&(r.state.value[n]={}),Di({});let V;function k(y){let _;u=f=!1,typeof y=="function"?(y(r.state.value[n]),_={type:Fi.patchFunction,storeId:n,events:v}):(Zc(r.state.value[n],y),_={type:Fi.patchObject,payload:y,storeId:n,events:v});const T=V=Symbol();Dg().then(()=>{V===T&&(u=!0)}),f=!0,cs(p,_,r.state.value[n])}const F=i?function(){const{state:_}=t,T=_?_():{};this.$patch(x=>{$n(x,T)})}:fy;function N(){o.stop(),p=[],m=[],r._s.delete(n)}const M=(y,_="")=>{if(Gd in y)return y[Tc]=_,y;const T=function(){vl(r);const x=Array.from(arguments),S=[],b=[];function mt(me){S.push(me)}function Qt(me){b.push(me)}cs(m,{args:x,name:T[Tc],store:X,after:mt,onError:Qt});let Be;try{Be=y.apply(this&&this.$id===n?this:X,x)}catch(me){throw cs(b,me),me}return Be instanceof Promise?Be.then(me=>(cs(S,me),me)).catch(me=>(cs(b,me),Promise.reject(me))):(cs(S,Be),Be)};return T[Gd]=!0,T[Tc]=_,T},I={_p:r,$id:n,$onAction:qd.bind(null,m),$patch:k,$reset:F,$subscribe(y,_={}){const T=qd(p,y,_.detached,()=>x()),x=o.run(()=>Ni(()=>r.state.value[n],S=>{(_.flush==="sync"?f:u)&&y({storeId:n,type:Fi.direct,events:v},S)},$n({},c,_)));return T},$dispose:N},X=dl(I);r._s.set(n,X);const w=(r._a&&r._a.runWithContext||QE)(()=>r._e.run(()=>(o=fg()).run(()=>e({action:M}))));for(const y in w){const _=w[y];if(ze(_)&&!XE(_)||Mr(_))i||(R&&JE(_)&&(ze(_)?_.value=R[y]:Zc(_,R[y])),r.state.value[n][y]=_);else if(typeof _=="function"){const T=M(_,y);w[y]=T,l.actions[y]=_}}return $n(X,w),$n(Ie(X),w),Object.defineProperty(X,"$state",{get:()=>r.state.value[n],set:y=>{k(_=>{$n(_,y)})}}),r._p.forEach(y=>{$n(X,o.run(()=>y({store:X,app:r._a,pinia:r,options:l})))}),R&&i&&t.hydrate&&t.hydrate(X.$state,R),u=!0,f=!0,X}/*! #__NO_SIDE_EFFECTS__ */function ew(n,e,t){let r;const s=typeof e=="function";r=s?t:e;function i(o,l){const c=M1();return o=o||(c?Oi(hy,null):null),o&&vl(o),o=uy,o._s.has(n)||(s?dy(n,e,r,o):ZE(n,r,o)),o._s.get(n)}return i.$id=n,i}const tw="modulepreload",nw=function(n,e){return new URL(n,e).href},Kd={},py=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(t.map(f=>{if(f=nw(f,r),f in Kd)return;Kd[f]=!0;const p=f.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(!!r)for(let V=l.length-1;V>=0;V--){const k=l[V];if(k.href===f&&(!p||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${m}`))return;const R=document.createElement("link");if(R.rel=p?"stylesheet":tw,p||(R.as="script"),R.crossOrigin="",R.href=f,u&&R.setAttribute("nonce",u),document.head.appendChild(R),p)return new Promise((V,k)=>{R.addEventListener("load",V),R.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class rw{constructor(){this._q={},this._counter=0,this._fireAndForgetIds=new Set,typeof window<"u"&&window.addEventListener("unhandledrejection",e=>{console.warn(`[FileMaker Bridge] Unhandled Promise Rejection: ${e.reason}`),console.warn("[FileMaker Bridge] This is likely a FileMaker callback error that we're now handling gracefully"),e.preventDefault()})}get isFileMakerEnvironment(){return typeof window<"u"&&typeof window.FileMaker<"u"}async performScript(e,t="",r={}){var i,o,l;if(typeof window<"u"){let c=0;const u=20;for(;typeof window.FileMaker>"u"&&c<u;)c+=1,await this._sleep(100);if(typeof window.FileMaker<"u"){const f=this._counter++,p={id:f,scriptParameter:t,scriptName:e};console.log(`[FileMaker Bridge] Creating FileMaker operation with ID: ${f}`),console.log(`[FileMaker Bridge] Script: ${e}`),console.log("[FileMaker Bridge] Parameter:",t),r&&r.fireAndForget&&(console.log(`[FileMaker Bridge] Marking operation ${f} as fire-and-forget`),this._fireAndForgetIds.add(String(f)));try{typeof window.FileMaker.PerformScriptWithOption=="function"?(console.log("[FileMaker Bridge] Using PerformScriptWithOption"),window.FileMaker.PerformScriptWithOption("_fmBridgit.webhook",JSON.stringify(p),"0")):typeof window.FileMaker.PerformScriptWithOptions=="function"?(console.log("[FileMaker Bridge] Using PerformScriptWithOptions"),window.FileMaker.PerformScriptWithOptions("_fmBridgit.webhook",JSON.stringify(p),"0")):(console.log("[FileMaker Bridge] Using legacy PerformScript"),window.FileMaker.PerformScript("_fmBridgit.webhook",JSON.stringify(p)));const m=this._registerPromise(f);return console.log(`[FileMaker Bridge] FileMaker operation ${f} initiated, promise created`),m}catch(m){throw console.error("Error performing FileMaker script:",m),m}}else console.error(`[FileMaker Bridge] FileMaker not available after 2 seconds. Falling back to mock for script: ${e}`)}console.log(`[FileMaker Mock] Script: ${e}`);let s=t;try{typeof t=="string"&&t.startsWith("{")&&(s=JSON.parse(t))}catch{}switch(e){case"API - Web Sync Inbound dispatcher {payload}":return console.log(`[FileMaker Mock] Processing ${((i=s==null?void 0:s.updates)==null?void 0:i.length)||0} updates, ${(s==null?void 0:s.remaining)||0} remaining`),{success:!0,message:`Processed ${((o=s==null?void 0:s.updates)==null?void 0:o.length)||0} updates successfully (mocked)`,data:{recordsProcessed:((l=s==null?void 0:s.updates)==null?void 0:l.length)||0}};case"API - Upload Complete Callback":return{success:!0,message:"Upload completed (mocked)"};case"_fmBridgit.webhook":return{success:!0,message:"Webhook received (mocked)"};case"_fmBridgit.returnResult":return{success:!0,data:t};default:return console.log(`[FileMaker Mock] Unknown script: ${e}`),{success:!0,message:`Script ${e} executed (mocked)`}}}callback(e){console.log("[FileMaker Bridge] Callback received:",e);try{const t=JSON.parse(e);console.log("[FileMaker Bridge] Parsed callback data:",t),console.log("[FileMaker Bridge] Looking for promise with ID:",t.id),console.log("[FileMaker Bridge] Active promises:",Object.keys(this._q)),t.error?(console.error(`[FileMaker Bridge] ERROR CALLBACK for ID ${t.id}:`,t.error),console.error(`[FileMaker Bridge] Error type: ${typeof t.error}`),console.error(`[FileMaker Bridge] Error value: ${t.error}`),t.error_message&&console.error(`[FileMaker Bridge] Error message: ${t.error_message}`),console.error("[FileMaker Bridge] Full callback data:",t)):t.success?(console.log(`[FileMaker Bridge] SUCCESS CALLBACK for ID ${t.id}:`,t.success),console.log(`[FileMaker Bridge] Success type: ${typeof t.success}`),console.log("[FileMaker Bridge] Success value:",t.success)):(console.warn(`[FileMaker Bridge] NEUTRAL CALLBACK for ID ${t.id} - no success or error`),console.warn("[FileMaker Bridge] Full callback data:",t));let r=null;if(t.error)if(typeof t.error=="object")r={code:t.error.code??t.error.error??"1",message:t.error.message??t.error.error_message,raw:t.error};else if(typeof t.error=="string"){let s=null;const i=t.error!=null?String(t.error).trim():"";if(i.startsWith("{")||i.startsWith("["))try{s=JSON.parse(i)}catch(o){console.warn("[FileMaker Bridge] Failed to parse error JSON:",o)}s&&typeof s=="object"?r={code:s.code??s.error??t.error,message:s.message??s.error_message,raw:s}:r={code:t.error,message:t.error_message}}else r={code:String(t.error),message:t.error_message};this._applyPromise(t.id,t.success,r)}catch(t){console.error("[FileMaker Bridge] Error in callback:",t),console.error("[FileMaker Bridge] Raw param was:",e)}}returnResult(e){console.log("[FileMaker Bridge] returnResult called with:",e);const t=this.performScript("_fmBridgit.returnResult",JSON.stringify(e),{fireAndForget:!0});return console.log("[FileMaker Bridge] returnResult result:",t),t}_registerPromise(e){return console.log(`[FileMaker Bridge] Creating promise with ID: ${e}`),console.log("[FileMaker Bridge] Current promise queue:",Object.keys(this._q)),new Promise((t,r)=>{this._q[e]={resolve:t,reject:r},console.log(`[FileMaker Bridge] Promise ${e} registered, total promises:`,Object.keys(this._q).length)})}_applyPromise(e,t,r){console.log(`[FileMaker Bridge] Applying promise for ID: ${e}`),console.log(`[FileMaker Bridge] Success value: ${JSON.stringify(t)}`),console.log(`[FileMaker Bridge] Error value: ${JSON.stringify(r)}`);const s=this._q[e];s?(console.log(`[FileMaker Bridge] Found promise for ID: ${e}, processing...`),t?(console.log(`[FileMaker Bridge] Resolving promise ${e} with success:`,t),s.resolve(t)):r?this._fireAndForgetIds.has(String(e))?(console.warn(`[FileMaker Bridge] Fire-and-forget promise ${e} received error '${r}', resolving true`),this._fireAndForgetIds.delete(String(e)),s.resolve(!0)):(console.error(`[FileMaker Bridge] Rejecting promise ${e} with error:`,r),console.error(`[FileMaker Bridge] Error type: ${typeof r}`),s.reject(r)):(console.log(`[FileMaker Bridge] Resolving promise ${e} with default true (no success/error)`),s.resolve(!0)),delete this._q[e],console.log(`[FileMaker Bridge] Promise ${e} processed and removed from queue`),console.log(`[FileMaker Bridge] Remaining promises: ${Object.keys(this._q)}`)):(console.warn(`[FileMaker Bridge] No promise found for ID: ${e}`),console.warn(`[FileMaker Bridge] Available IDs: ${Object.keys(this._q)}`))}_sleep(e){return new Promise(t=>setTimeout(t,e))}testCallback(e,t=!0,r=null){console.log("[FileMaker Bridge] Testing callback for ID:",e);const s={id:e,success:t?r||{message:"Test callback successful"}:null,error:t?null:r||"Test error"};this.callback(JSON.stringify(s))}}const Tt=new rw;typeof window<"u"&&(window.fmBridgit=Tt);const sw=()=>{};var Hd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},iw=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],l=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,l=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(t[f],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(my(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||l==null||u==null||p==null)throw new ow;const m=i<<2|l>>4;if(r.push(m),u!==64){const v=l<<4&240|u>>2;if(r.push(v),p!==64){const R=u<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ow extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aw=function(n){const e=my(n);return gy.encodeByteArray(e,!0)},Fa=function(n){return aw(n).replace(/\./g,"")},lw=function(n){try{return gy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=()=>yy().__FIREBASE_DEFAULTS__,uw=()=>{if(typeof process>"u"||typeof Hd>"u")return;const n=Hd.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},hw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lw(n[1]);return e&&JSON.parse(e)},ph=()=>{try{return sw()||cw()||uw()||hw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fw=n=>{var e,t;return(t=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},dw=n=>{const e=fw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},_y=()=>{var n;return(n=ph())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n){return n.endsWith(".cloudworkstations.dev")}async function mw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fa(JSON.stringify(t)),Fa(JSON.stringify(o)),""].join(".")}const Li={};function yw(){const n={prod:[],emulator:[]};for(const e of Object.keys(Li))Li[e]?n.emulator.push(e):n.prod.push(e);return n}function _w(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wd=!1;function vy(n,e){if(typeof window>"u"||typeof document>"u"||!mh(window.location.host)||Li[n]===e||Li[n]||Wd)return;Li[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=yw().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Wd=!0,o()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=_w(r),v=t("text"),R=document.getElementById(v)||document.createElement("span"),V=t("learnmore"),k=document.getElementById(V)||document.createElement("a"),F=t("preprendIcon"),N=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const M=m.element;l(M),f(k,V);const I=u();c(N,F),M.append(N,R,k,I),document.body.appendChild(M)}i?(R.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function by(){var n;const e=(n=ph())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ey(){return!by()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wy(){return!by()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ty(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="FirebaseError";class Ws extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=bw,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iy.prototype.create)}}class Iy{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ew(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ws(s,l,r)}}function Ew(n,e){return n.replace(ww,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ww=/\{\$([^}]+)}/g;function Ba(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(Qd(i)&&Qd(o)){if(!Ba(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Qd(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){return n&&n._delegate?n._delegate:n}class no{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pw;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Aw(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Iw(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Iw(n){return n===xr?void 0:n}function Aw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ee||(Ee={}));const Sw={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Pw=Ee.INFO,Rw={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Cw=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Rw[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ay{constructor(e){this.name=e,this._logLevel=Pw,this._logHandler=Cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const Dw=(n,e)=>e.some(t=>n instanceof t);let Yd,Jd;function Vw(){return Yd||(Yd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return Jd||(Jd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xy=new WeakMap,eu=new WeakMap,Sy=new WeakMap,Ic=new WeakMap,gh=new WeakMap;function Ow(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Wn(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&xy.set(t,n)}).catch(()=>{}),gh.set(e,n),e}function Nw(n){if(eu.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});eu.set(n,e)}let tu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Mw(n){tu=n(tu)}function Fw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ac(this),e,...t);return Sy.set(r,e.sort?e.sort():[e]),Wn(r)}:kw().includes(n)?function(...e){return n.apply(Ac(this),e),Wn(xy.get(this))}:function(...e){return Wn(n.apply(Ac(this),e))}}function Lw(n){return typeof n=="function"?Fw(n):(n instanceof IDBTransaction&&Nw(n),Dw(n,Vw())?new Proxy(n,tu):n)}function Wn(n){if(n instanceof IDBRequest)return Ow(n);if(Ic.has(n))return Ic.get(n);const e=Lw(n);return e!==n&&(Ic.set(n,e),gh.set(e,n)),e}const Ac=n=>gh.get(n);function Bw(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),l=Wn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Wn(o.result),c.oldVersion,c.newVersion,Wn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Uw=["get","getKey","getAll","getAllKeys","count"],jw=["put","add","delete","clear"],xc=new Map;function Xd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xc.get(e))return xc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=jw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Uw.includes(t)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),s&&c.done]))[0]};return xc.set(e,i),i}Mw(n=>({...n,get:(e,t,r)=>Xd(e,t)||n.get(e,t,r),has:(e,t)=>!!Xd(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zw(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zw(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nu="@firebase/app",Zd="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Ay("@firebase/app"),qw="@firebase/app-compat",Gw="@firebase/analytics-compat",Kw="@firebase/analytics",Hw="@firebase/app-check-compat",Ww="@firebase/app-check",Qw="@firebase/auth",Yw="@firebase/auth-compat",Jw="@firebase/database",Xw="@firebase/data-connect",Zw="@firebase/database-compat",eT="@firebase/functions",tT="@firebase/functions-compat",nT="@firebase/installations",rT="@firebase/installations-compat",sT="@firebase/messaging",iT="@firebase/messaging-compat",oT="@firebase/performance",aT="@firebase/performance-compat",lT="@firebase/remote-config",cT="@firebase/remote-config-compat",uT="@firebase/storage",hT="@firebase/storage-compat",fT="@firebase/firestore",dT="@firebase/ai",pT="@firebase/firestore-compat",mT="firebase",gT="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="[DEFAULT]",yT={[nu]:"fire-core",[qw]:"fire-core-compat",[Kw]:"fire-analytics",[Gw]:"fire-analytics-compat",[Ww]:"fire-app-check",[Hw]:"fire-app-check-compat",[Qw]:"fire-auth",[Yw]:"fire-auth-compat",[Jw]:"fire-rtdb",[Xw]:"fire-data-connect",[Zw]:"fire-rtdb-compat",[eT]:"fire-fn",[tT]:"fire-fn-compat",[nT]:"fire-iid",[rT]:"fire-iid-compat",[sT]:"fire-fcm",[iT]:"fire-fcm-compat",[oT]:"fire-perf",[aT]:"fire-perf-compat",[lT]:"fire-rc",[cT]:"fire-rc-compat",[uT]:"fire-gcs",[hT]:"fire-gcs-compat",[fT]:"fire-fst",[pT]:"fire-fst-compat",[dT]:"fire-vertex","fire-js":"fire-js",[mT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Map,_T=new Map,su=new Map;function ep(n,e){try{n.container.addComponent(e)}catch(t){In.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ja(n){const e=n.name;if(su.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;su.set(e,n);for(const t of Ua.values())ep(t,n);for(const t of _T.values())ep(t,n);return!0}function vT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bT(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new Iy("app","Firebase",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=gT;function Py(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ru,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(t||(t=_y()),!t)throw Qn.create("no-options");const i=Ua.get(s);if(i){if(Ba(t,i.options)&&Ba(r,i.config))return i;throw Qn.create("duplicate-app",{appName:s})}const o=new xw(s);for(const c of su.values())o.addComponent(c);const l=new wT(t,r,o);return Ua.set(s,l),l}function IT(n=ru){const e=Ua.get(n);if(!e&&n===ru&&_y())return Py();if(!e)throw Qn.create("no-app",{appName:n});return e}function Cs(n,e,t){var r;let s=(r=yT[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(l.join(" "));return}ja(new no(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebase-heartbeat-database",xT=1,ro="firebase-heartbeat-store";let Sc=null;function Ry(){return Sc||(Sc=Bw(AT,xT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ro)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qn.create("idb-open",{originalErrorMessage:n.message})})),Sc}async function ST(n){try{const t=(await Ry()).transaction(ro),r=await t.objectStore(ro).get(Cy(n));return await t.done,r}catch(e){if(e instanceof Ws)In.warn(e.message);else{const t=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});In.warn(t.message)}}}async function tp(n,e){try{const r=(await Ry()).transaction(ro,"readwrite");await r.objectStore(ro).put(e,Cy(n)),await r.done}catch(t){if(t instanceof Ws)In.warn(t.message);else{const r=Qn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});In.warn(r.message)}}}function Cy(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=1024,RT=30;class CT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=np();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>RT){const o=kT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){In.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=np(),{heartbeatsToSend:r,unsentEntries:s}=DT(this._heartbeatsCache.heartbeats),i=Fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return In.warn(t),""}}}function np(){return new Date().toISOString().substring(0,10)}function DT(n,e=PT){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rp(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rp(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class VT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ty()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ST(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rp(n){return Fa(JSON.stringify({version:2,heartbeats:n})).length}function kT(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n){ja(new no("platform-logger",e=>new $w(e),"PRIVATE")),ja(new no("heartbeat",e=>new CT(e),"PRIVATE")),Cs(nu,Zd,n),Cs(nu,Zd,"esm2017"),Cs("fire-js","")}OT("");var sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yn,Dy;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,y){function _(){}_.prototype=y.prototype,w.D=y.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(T,x,S){for(var b=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)b[mt-2]=arguments[mt];return y.prototype[x].apply(T,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,y,_){_||(_=0);var T=Array(16);if(typeof y=="string")for(var x=0;16>x;++x)T[x]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(x=0;16>x;++x)T[x]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=w.g[0],_=w.g[1],x=w.g[2];var S=w.g[3],b=y+(S^_&(x^S))+T[0]+3614090360&4294967295;y=_+(b<<7&4294967295|b>>>25),b=S+(x^y&(_^x))+T[1]+3905402710&4294967295,S=y+(b<<12&4294967295|b>>>20),b=x+(_^S&(y^_))+T[2]+606105819&4294967295,x=S+(b<<17&4294967295|b>>>15),b=_+(y^x&(S^y))+T[3]+3250441966&4294967295,_=x+(b<<22&4294967295|b>>>10),b=y+(S^_&(x^S))+T[4]+4118548399&4294967295,y=_+(b<<7&4294967295|b>>>25),b=S+(x^y&(_^x))+T[5]+1200080426&4294967295,S=y+(b<<12&4294967295|b>>>20),b=x+(_^S&(y^_))+T[6]+2821735955&4294967295,x=S+(b<<17&4294967295|b>>>15),b=_+(y^x&(S^y))+T[7]+4249261313&4294967295,_=x+(b<<22&4294967295|b>>>10),b=y+(S^_&(x^S))+T[8]+1770035416&4294967295,y=_+(b<<7&4294967295|b>>>25),b=S+(x^y&(_^x))+T[9]+2336552879&4294967295,S=y+(b<<12&4294967295|b>>>20),b=x+(_^S&(y^_))+T[10]+4294925233&4294967295,x=S+(b<<17&4294967295|b>>>15),b=_+(y^x&(S^y))+T[11]+2304563134&4294967295,_=x+(b<<22&4294967295|b>>>10),b=y+(S^_&(x^S))+T[12]+1804603682&4294967295,y=_+(b<<7&4294967295|b>>>25),b=S+(x^y&(_^x))+T[13]+4254626195&4294967295,S=y+(b<<12&4294967295|b>>>20),b=x+(_^S&(y^_))+T[14]+2792965006&4294967295,x=S+(b<<17&4294967295|b>>>15),b=_+(y^x&(S^y))+T[15]+1236535329&4294967295,_=x+(b<<22&4294967295|b>>>10),b=y+(x^S&(_^x))+T[1]+4129170786&4294967295,y=_+(b<<5&4294967295|b>>>27),b=S+(_^x&(y^_))+T[6]+3225465664&4294967295,S=y+(b<<9&4294967295|b>>>23),b=x+(y^_&(S^y))+T[11]+643717713&4294967295,x=S+(b<<14&4294967295|b>>>18),b=_+(S^y&(x^S))+T[0]+3921069994&4294967295,_=x+(b<<20&4294967295|b>>>12),b=y+(x^S&(_^x))+T[5]+3593408605&4294967295,y=_+(b<<5&4294967295|b>>>27),b=S+(_^x&(y^_))+T[10]+38016083&4294967295,S=y+(b<<9&4294967295|b>>>23),b=x+(y^_&(S^y))+T[15]+3634488961&4294967295,x=S+(b<<14&4294967295|b>>>18),b=_+(S^y&(x^S))+T[4]+3889429448&4294967295,_=x+(b<<20&4294967295|b>>>12),b=y+(x^S&(_^x))+T[9]+568446438&4294967295,y=_+(b<<5&4294967295|b>>>27),b=S+(_^x&(y^_))+T[14]+3275163606&4294967295,S=y+(b<<9&4294967295|b>>>23),b=x+(y^_&(S^y))+T[3]+4107603335&4294967295,x=S+(b<<14&4294967295|b>>>18),b=_+(S^y&(x^S))+T[8]+1163531501&4294967295,_=x+(b<<20&4294967295|b>>>12),b=y+(x^S&(_^x))+T[13]+2850285829&4294967295,y=_+(b<<5&4294967295|b>>>27),b=S+(_^x&(y^_))+T[2]+4243563512&4294967295,S=y+(b<<9&4294967295|b>>>23),b=x+(y^_&(S^y))+T[7]+1735328473&4294967295,x=S+(b<<14&4294967295|b>>>18),b=_+(S^y&(x^S))+T[12]+2368359562&4294967295,_=x+(b<<20&4294967295|b>>>12),b=y+(_^x^S)+T[5]+4294588738&4294967295,y=_+(b<<4&4294967295|b>>>28),b=S+(y^_^x)+T[8]+2272392833&4294967295,S=y+(b<<11&4294967295|b>>>21),b=x+(S^y^_)+T[11]+1839030562&4294967295,x=S+(b<<16&4294967295|b>>>16),b=_+(x^S^y)+T[14]+4259657740&4294967295,_=x+(b<<23&4294967295|b>>>9),b=y+(_^x^S)+T[1]+2763975236&4294967295,y=_+(b<<4&4294967295|b>>>28),b=S+(y^_^x)+T[4]+1272893353&4294967295,S=y+(b<<11&4294967295|b>>>21),b=x+(S^y^_)+T[7]+4139469664&4294967295,x=S+(b<<16&4294967295|b>>>16),b=_+(x^S^y)+T[10]+3200236656&4294967295,_=x+(b<<23&4294967295|b>>>9),b=y+(_^x^S)+T[13]+681279174&4294967295,y=_+(b<<4&4294967295|b>>>28),b=S+(y^_^x)+T[0]+3936430074&4294967295,S=y+(b<<11&4294967295|b>>>21),b=x+(S^y^_)+T[3]+3572445317&4294967295,x=S+(b<<16&4294967295|b>>>16),b=_+(x^S^y)+T[6]+76029189&4294967295,_=x+(b<<23&4294967295|b>>>9),b=y+(_^x^S)+T[9]+3654602809&4294967295,y=_+(b<<4&4294967295|b>>>28),b=S+(y^_^x)+T[12]+3873151461&4294967295,S=y+(b<<11&4294967295|b>>>21),b=x+(S^y^_)+T[15]+530742520&4294967295,x=S+(b<<16&4294967295|b>>>16),b=_+(x^S^y)+T[2]+3299628645&4294967295,_=x+(b<<23&4294967295|b>>>9),b=y+(x^(_|~S))+T[0]+4096336452&4294967295,y=_+(b<<6&4294967295|b>>>26),b=S+(_^(y|~x))+T[7]+1126891415&4294967295,S=y+(b<<10&4294967295|b>>>22),b=x+(y^(S|~_))+T[14]+2878612391&4294967295,x=S+(b<<15&4294967295|b>>>17),b=_+(S^(x|~y))+T[5]+4237533241&4294967295,_=x+(b<<21&4294967295|b>>>11),b=y+(x^(_|~S))+T[12]+1700485571&4294967295,y=_+(b<<6&4294967295|b>>>26),b=S+(_^(y|~x))+T[3]+2399980690&4294967295,S=y+(b<<10&4294967295|b>>>22),b=x+(y^(S|~_))+T[10]+4293915773&4294967295,x=S+(b<<15&4294967295|b>>>17),b=_+(S^(x|~y))+T[1]+2240044497&4294967295,_=x+(b<<21&4294967295|b>>>11),b=y+(x^(_|~S))+T[8]+1873313359&4294967295,y=_+(b<<6&4294967295|b>>>26),b=S+(_^(y|~x))+T[15]+4264355552&4294967295,S=y+(b<<10&4294967295|b>>>22),b=x+(y^(S|~_))+T[6]+2734768916&4294967295,x=S+(b<<15&4294967295|b>>>17),b=_+(S^(x|~y))+T[13]+1309151649&4294967295,_=x+(b<<21&4294967295|b>>>11),b=y+(x^(_|~S))+T[4]+4149444226&4294967295,y=_+(b<<6&4294967295|b>>>26),b=S+(_^(y|~x))+T[11]+3174756917&4294967295,S=y+(b<<10&4294967295|b>>>22),b=x+(y^(S|~_))+T[2]+718787259&4294967295,x=S+(b<<15&4294967295|b>>>17),b=_+(S^(x|~y))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+x&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var _=y-this.blockSize,T=this.B,x=this.h,S=0;S<y;){if(x==0)for(;S<=_;)s(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<y;)if(T[x++]=w.charCodeAt(S++),x==this.blockSize){s(this,T),x=0;break}}else for(;S<y;)if(T[x++]=w[S++],x==this.blockSize){s(this,T),x=0;break}}this.h=x,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var _=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=_&255,_/=256;for(this.u(w),w=Array(16),y=_=0;4>y;++y)for(var T=0;32>T;T+=8)w[_++]=this.g[y]>>>T&255;return w};function i(w,y){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=y(w)}function o(w,y){this.h=y;for(var _=[],T=!0,x=w.length-1;0<=x;x--){var S=w[x]|0;T&&S==y||(_[x]=S,T=!1)}this.g=_}var l={};function c(w){return-128<=w&&128>w?i(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return k(u(-w));for(var y=[],_=1,T=0;w>=_;T++)y[T]=w/_|0,_*=4294967296;return new o(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return k(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(y,8)),T=p,x=0;x<w.length;x+=8){var S=Math.min(8,w.length-x),b=parseInt(w.substring(x,x+S),y);8>S?(S=u(Math.pow(y,S)),T=T.j(S).add(u(b))):(T=T.j(_),T=T.add(u(b)))}return T}var p=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(V(this))return-k(this).m();for(var w=0,y=1,_=0;_<this.g.length;_++){var T=this.i(_);w+=(0<=T?T:4294967296+T)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(V(this))return"-"+k(this).toString(w);for(var y=u(Math.pow(w,6)),_=this,T="";;){var x=I(_,y).g;_=F(_,x.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=x,R(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function V(w){return w.h==-1}n.l=function(w){return w=F(this,w),V(w)?-1:R(w)?0:1};function k(w){for(var y=w.g.length,_=[],T=0;T<y;T++)_[T]=~w.g[T];return new o(_,~w.h).add(m)}n.abs=function(){return V(this)?k(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0,x=0;x<=y;x++){var S=T+(this.i(x)&65535)+(w.i(x)&65535),b=(S>>>16)+(this.i(x)>>>16)+(w.i(x)>>>16);T=b>>>16,S&=65535,b&=65535,_[x]=b<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function F(w,y){return w.add(k(y))}n.j=function(w){if(R(this)||R(w))return p;if(V(this))return V(w)?k(this).j(k(w)):k(k(this).j(w));if(V(w))return k(this.j(k(w)));if(0>this.l(v)&&0>w.l(v))return u(this.m()*w.m());for(var y=this.g.length+w.g.length,_=[],T=0;T<2*y;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<w.g.length;x++){var S=this.i(T)>>>16,b=this.i(T)&65535,mt=w.i(x)>>>16,Qt=w.i(x)&65535;_[2*T+2*x]+=b*Qt,N(_,2*T+2*x),_[2*T+2*x+1]+=S*Qt,N(_,2*T+2*x+1),_[2*T+2*x+1]+=b*mt,N(_,2*T+2*x+1),_[2*T+2*x+2]+=S*mt,N(_,2*T+2*x+2)}for(T=0;T<y;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=y;T<2*y;T++)_[T]=0;return new o(_,0)};function N(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function M(w,y){this.g=w,this.h=y}function I(w,y){if(R(y))throw Error("division by zero");if(R(w))return new M(p,p);if(V(w))return y=I(k(w),y),new M(k(y.g),k(y.h));if(V(y))return y=I(w,k(y)),new M(k(y.g),y.h);if(30<w.g.length){if(V(w)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,T=y;0>=T.l(w);)_=X(_),T=X(T);var x=te(_,1),S=te(T,1);for(T=te(T,2),_=te(_,2);!R(T);){var b=S.add(T);0>=b.l(w)&&(x=x.add(_),S=b),T=te(T,1),_=te(_,1)}return y=F(w,x.j(y)),new M(x,y)}for(x=p;0<=w.l(y);){for(_=Math.max(1,Math.floor(w.m()/y.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=u(_),b=S.j(y);V(b)||0<b.l(w);)_-=T,S=u(_),b=S.j(y);R(S)&&(S=m),x=x.add(S),w=F(w,b)}return new M(x,w)}n.A=function(w){return I(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)&w.i(T);return new o(_,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)|w.i(T);return new o(_,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)^w.i(T);return new o(_,this.h^w.h)};function X(w){for(var y=w.g.length+1,_=[],T=0;T<y;T++)_[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(_,w.h)}function te(w,y){var _=y>>5;y%=32;for(var T=w.g.length-_,x=[],S=0;S<T;S++)x[S]=0<y?w.i(S+_)>>>y|w.i(S+_+1)<<32-y:w.i(S+_);return new o(x,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Yn=o}).apply(typeof sp<"u"?sp:typeof self<"u"?self:typeof window<"u"?window:{});var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vy,Ti,ky,ga,iu,Oy,Ny,My;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,d){return a==Array.prototype||a==Object.prototype||(a[h]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ra=="object"&&ra];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in d))break e;d=d[C]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var d=0,g=!1,C={next:function(){if(!g&&d<a.length){var O=d++;return{value:h(O,a[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,d){return a.call.apply(a.bind,arguments)}function p(a,h,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function m(a,h,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function v(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function R(a,h){function d(){}d.prototype=h.prototype,a.aa=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,C,O){for(var Q=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)Q[Re-2]=arguments[Re];return h.prototype[C].apply(g,Q)}}function V(a){const h=a.length;if(0<h){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function k(a,h){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(c(g)){const C=a.length||0,O=g.length||0;a.length=C+O;for(let Q=0;Q<O;Q++)a[C+Q]=g[Q]}else a.push(g)}}class F{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(a){return/^[\s\xa0]*$/.test(a)}function M(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function I(a){return I[" "](a),a}I[" "]=function(){};var X=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function te(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function w(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function y(a){const h={};for(const d in a)h[d]=a[d];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)a[d]=g[d];for(let O=0;O<_.length;O++)d=_[O],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function x(a){var h=1;a=a.split(":");const d=[];for(;0<h&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function S(a){l.setTimeout(()=>{throw a},0)}function b(){var a=qt;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class mt{constructor(){this.h=this.g=null}add(h,d){const g=Qt.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Qt=new F(()=>new Be,a=>a.reset());class Be{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let me,we=!1,qt=new mt,pr=()=>{const a=l.Promise.resolve(void 0);me=()=>{a.then(un)}};var un=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(d){S(d)}var h=Qt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}we=!1};function Ke(){this.s=this.s,this.C=this.C}Ke.prototype.s=!1,Ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var Jl=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return a}();function mr(a,h){if(He.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(X){e:{try{I(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:gr[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&mr.aa.h.call(this)}}R(mr,He);var gr={2:"touch",3:"pen",4:"mouse"};mr.prototype.h=function(){mr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),ei=0;function Fo(a,h,d,g,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=C,this.key=++ei,this.da=this.fa=!1}function Yt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ti(a){this.src=a,this.g={},this.h=0}ti.prototype.add=function(a,h,d,g,C){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var Q=A(a,h,g,C);return-1<Q?(h=a[Q],d||(h.fa=!1)):(h=new Fo(h,this.src,O,!!g,C),h.fa=d,a.push(h)),h};function E(a,h){var d=h.type;if(d in a.g){var g=a.g[d],C=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=C)&&Array.prototype.splice.call(g,C,1),O&&(Yt(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function A(a,h,d,g){for(var C=0;C<a.length;++C){var O=a[C];if(!O.da&&O.listener==h&&O.capture==!!d&&O.ha==g)return C}return-1}var L="closure_lm_"+(1e6*Math.random()|0),$={};function j(a,h,d,g,C){if(Array.isArray(h)){for(var O=0;O<h.length;O++)j(a,h[O],d,g,C);return null}return d=ce(d),a&&a[hn]?a.K(h,d,u(g)?!!g.capture:!1,C):z(a,h,d,!1,g,C)}function z(a,h,d,g,C,O){if(!h)throw Error("Invalid event type");var Q=u(C)?!!C.capture:!!C,Re=ee(a);if(Re||(a[L]=Re=new ti(a)),d=Re.add(h,d,g,Q,O),d.proxy)return d;if(g=Z(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)Jl||(C=Q),C===void 0&&(C=!1),a.addEventListener(h.toString(),g,C);else if(a.attachEvent)a.attachEvent(q(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Z(){function a(d){return h.call(a.src,a.listener,d)}const h=ae;return a}function W(a,h,d,g,C){if(Array.isArray(h))for(var O=0;O<h.length;O++)W(a,h[O],d,g,C);else g=u(g)?!!g.capture:!!g,d=ce(d),a&&a[hn]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],d=A(O,d,g,C),-1<d&&(Yt(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=ee(a))&&(h=a.g[h.toString()],a=-1,h&&(a=A(h,d,g,C)),(d=-1<a?h[a]:null)&&H(d))}function H(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[hn])E(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(q(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=ee(h))?(E(d,a),d.h==0&&(d.src=null,h[L]=null)):Yt(a)}}}function q(a){return a in $?$[a]:$[a]="on"+a}function ae(a,h){if(a.da)a=!0;else{h=new mr(h,this);var d=a.listener,g=a.ha||a.src;a.fa&&H(a),a=d.call(g,h)}return a}function ee(a){return a=a[L],a instanceof ti?a:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(a){return typeof a=="function"?a:(a[ie]||(a[ie]=function(h){return a.handleEvent(h)}),a[ie])}function le(){Ke.call(this),this.i=new ti(this),this.M=this,this.F=null}R(le,Ke),le.prototype[hn]=!0,le.prototype.removeEventListener=function(a,h,d,g){W(this,a,h,d,g)};function ge(a,h){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new He(h,a);else if(h instanceof He)h.target=h.target||a;else{var C=h;h=new He(g,a),T(h,C)}if(C=!0,d)for(var O=d.length-1;0<=O;O--){var Q=h.g=d[O];C=ve(Q,g,!0,h)&&C}if(Q=h.g=a,C=ve(Q,g,!0,h)&&C,C=ve(Q,g,!1,h)&&C,d)for(O=0;O<d.length;O++)Q=h.g=d[O],C=ve(Q,g,!1,h)&&C}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var d=a.g[h],g=0;g<d.length;g++)Yt(d[g]);delete a.g[h],a.h--}}this.F=null},le.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},le.prototype.L=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function ve(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,O=0;O<h.length;++O){var Q=h[O];if(Q&&!Q.da&&Q.capture==d){var Re=Q.listener,Ze=Q.ha||Q.src;Q.fa&&E(a.i,Q),C=Re.call(Ze,g)!==!1&&C}}return C&&!g.defaultPrevented}function st(a,h,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Je(a){a.g=st(()=>{a.g=null,a.i&&(a.i=!1,Je(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Ft extends Ke{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(a){Ke.call(this),this.h=a,this.g={}}R(it,Ke);var kn=[];function ni(a){te(a.g,function(h,d){this.g.hasOwnProperty(d)&&H(h)},a),a.g={}}it.prototype.N=function(){it.aa.N.call(this),ni(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=l.JSON.stringify,Lt=l.JSON.parse,Lo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Xl(){}Xl.prototype.h=null;function wf(a){return a.h||(a.h=a.i())}function Tf(){}var ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zl(){He.call(this,"d")}R(Zl,He);function ec(){He.call(this,"c")}R(ec,He);var yr={},If=null;function Bo(){return If=If||new le}yr.La="serverreachability";function Af(a){He.call(this,yr.La,a)}R(Af,He);function si(a){const h=Bo();ge(h,new Af(h))}yr.STAT_EVENT="statevent";function xf(a,h){He.call(this,yr.STAT_EVENT,a),this.stat=h}R(xf,He);function gt(a){const h=Bo();ge(h,new xf(h,a))}yr.Ma="timingevent";function Sf(a,h){He.call(this,yr.Ma,a),this.size=h}R(Sf,He);function ii(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function oi(){this.g=!0}oi.prototype.xa=function(){this.g=!1};function W0(a,h,d,g,C,O){a.info(function(){if(a.g)if(O)for(var Q="",Re=O.split("&"),Ze=0;Ze<Re.length;Ze++){var Te=Re[Ze].split("=");if(1<Te.length){var ot=Te[0];Te=Te[1];var at=ot.split("_");Q=2<=at.length&&at[1]=="type"?Q+(ot+"="+Te+"&"):Q+(ot+"=redacted&")}}else Q=null;else Q=O;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+h+`
`+d+`
`+Q})}function Q0(a,h,d,g,C,O,Q){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+h+`
`+d+`
`+O+" "+Q})}function ts(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+J0(a,d)+(g?" "+g:"")})}function Y0(a,h){a.info(function(){return"TIMEOUT: "+h})}oi.prototype.info=function(){};function J0(a,h){if(!a.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(var Q=1;Q<C.length;Q++)C[Q]=""}}}}return Xe(d)}catch{return h}}var Uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tc;function jo(){}R(jo,Xl),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},tc=new jo;function On(a,h,d,g){this.j=a,this.i=h,this.l=d,this.R=g||1,this.U=new it(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rf}function Rf(){this.i=null,this.g="",this.h=!1}var Cf={},nc={};function rc(a,h,d){a.L=1,a.v=Go(fn(h)),a.m=d,a.P=!0,Df(a,null)}function Df(a,h){a.F=Date.now(),$o(a),a.A=fn(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Gf(d.i,"t",g),a.C=0,d=a.j.J,a.h=new Rf,a.g=cd(a.j,d?h:null,!a.m),0<a.O&&(a.M=new Ft(m(a.Y,a,a.g),a.O)),h=a.U,d=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(kn[0]=C.toString()),C=kn);for(var O=0;O<C.length;O++){var Q=j(d,C[O],g||h.handleEvent,!1,h.h||h);if(!Q)break;h.g[Q.key]=Q}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),si(),W0(a.i,a.u,a.A,a.l,a.R,a.m)}On.prototype.ca=function(a){a=a.target;const h=this.M;h&&dn(a)==3?h.j():this.Y(a)},On.prototype.Y=function(a){try{if(a==this.g)e:{const at=dn(this.g);var h=this.g.Ba();const ss=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Xf(this.g)))){this.J||at!=4||h==7||(h==8||0>=ss?si(3):si(2)),sc(this);var d=this.g.Z();this.X=d;t:if(Vf(this)){var g=Xf(this.g);a="";var C=g.length,O=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),ai(this);var Q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(g[h],{stream:!(O&&h==C-1)});g.length=0,this.h.g+=a,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=d==200,Q0(this.i,this.u,this.A,this.l,this.R,at,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,Ze=this.g;if((Re=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Re)){var Te=Re;break t}}Te=null}if(d=Te)ts(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ic(this,d);else{this.o=!1,this.s=3,gt(12),_r(this),ai(this);break e}}if(this.P){d=!0;let Gt;for(;!this.J&&this.C<Q.length;)if(Gt=X0(this,Q),Gt==nc){at==4&&(this.s=4,gt(14),d=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==Cf){this.s=4,gt(15),ts(this.i,this.l,Q,"[Invalid Chunk]"),d=!1;break}else ts(this.i,this.l,Gt,null),ic(this,Gt);if(Vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||Q.length!=0||this.h.h||(this.s=1,gt(16),d=!1),this.o=this.o&&d,!d)ts(this.i,this.l,Q,"[Invalid Chunked Response]"),_r(this),ai(this);else if(0<Q.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),hc(ot),ot.M=!0,gt(11))}}else ts(this.i,this.l,Q,null),ic(this,Q);at==4&&_r(this),this.o&&!this.J&&(at==4?id(this.j,this):(this.o=!1,$o(this)))}else mb(this.g),d==400&&0<Q.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),_r(this),ai(this)}}}catch{}finally{}};function Vf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function X0(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?nc:(d=Number(h.substring(d,g)),isNaN(d)?Cf:(g+=1,g+d>h.length?nc:(h=h.slice(g,g+d),a.C=g+d,h)))}On.prototype.cancel=function(){this.J=!0,_r(this)};function $o(a){a.S=Date.now()+a.I,kf(a,a.I)}function kf(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ii(m(a.ba,a),h)}function sc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}On.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Y0(this.i,this.A),this.L!=2&&(si(),gt(17)),_r(this),this.s=2,ai(this)):kf(this,this.S-a)};function ai(a){a.j.G==0||a.J||id(a.j,a)}function _r(a){sc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ni(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ic(a,h){try{var d=a.j;if(d.G!=0&&(d.g==a||oc(d.h,a))){if(!a.K&&oc(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Jo(d),Qo(d);else break e;uc(d),gt(18)}}else d.za=C[1],0<d.za-d.T&&37500>C[2]&&d.F&&d.v==0&&!d.C&&(d.C=ii(m(d.Za,d),6e3));if(1>=Mf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else br(d,11)}else if((a.K||d.g==a)&&Jo(d),!N(h))for(C=d.Da.g.parse(h),h=0;h<C.length;h++){let Te=C[h];if(d.T=Te[0],Te=Te[1],d.G==2)if(Te[0]=="c"){d.K=Te[1],d.ia=Te[2];const ot=Te[3];ot!=null&&(d.la=ot,d.j.info("VER="+d.la));const at=Te[4];at!=null&&(d.Aa=at,d.j.info("SVER="+d.Aa));const ss=Te[5];ss!=null&&typeof ss=="number"&&0<ss&&(g=1.5*ss,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Gt=a.g;if(Gt){const Zo=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zo){var O=g.h;O.g||Zo.indexOf("spdy")==-1&&Zo.indexOf("quic")==-1&&Zo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ac(O,O.h),O.h=null))}if(g.D){const fc=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;fc&&(g.ya=fc,ke(g.I,g.D,fc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var Q=a;if(g.qa=ld(g,g.J?g.ia:null,g.W),Q.K){Ff(g.h,Q);var Re=Q,Ze=g.L;Ze&&(Re.I=Ze),Re.B&&(sc(Re),$o(Re)),g.g=Q}else rd(g);0<d.i.length&&Yo(d)}else Te[0]!="stop"&&Te[0]!="close"||br(d,7);else d.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?br(d,7):cc(d):Te[0]!="noop"&&d.l&&d.l.ta(Te),d.v=0)}}si(4)}catch{}}var Z0=class{constructor(a,h){this.g=a,this.map=h}};function Of(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mf(a){return a.h?1:a.g?a.g.size:0}function oc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ac(a,h){a.g?a.g.add(h):a.h=h}function Ff(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Of.prototype.cancel=function(){if(this.i=Lf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Lf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.D);return h}return V(a.i)}function eb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],d=a.length,g=0;g<d;g++)h.push(a[g]);return h}h=[],d=0;for(g in a)h[d++]=a[g];return h}function tb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var d=0;d<a;d++)h.push(d);return h}h=[],d=0;for(const g in a)h[d++]=g;return h}}}function Bf(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var d=tb(a),g=eb(a),C=g.length,O=0;O<C;O++)h.call(void 0,g[O],d&&d[O],a)}var Uf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nb(a,h){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),C=null;if(0<=g){var O=a[d].substring(0,g);C=a[d].substring(g+1)}else O=a[d];h(O,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function vr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof vr){this.h=a.h,zo(this,a.j),this.o=a.o,this.g=a.g,qo(this,a.s),this.l=a.l;var h=a.i,d=new ui;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),jf(this,d),this.m=a.m}else a&&(h=String(a).match(Uf))?(this.h=!1,zo(this,h[1]||"",!0),this.o=li(h[2]||""),this.g=li(h[3]||"",!0),qo(this,h[4]),this.l=li(h[5]||"",!0),jf(this,h[6]||"",!0),this.m=li(h[7]||"")):(this.h=!1,this.i=new ui(null,this.h))}vr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(ci(h,$f,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ci(h,$f,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ci(d,d.charAt(0)=="/"?ib:sb,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ci(d,ab)),a.join("")};function fn(a){return new vr(a)}function zo(a,h,d){a.j=d?li(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function qo(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function jf(a,h,d){h instanceof ui?(a.i=h,lb(a.i,a.h)):(d||(h=ci(h,ob)),a.i=new ui(h,a.h))}function ke(a,h,d){a.i.set(h,d)}function Go(a){return ke(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function li(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ci(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,rb),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function rb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $f=/[#\/\?@]/g,sb=/[#\?:]/g,ib=/[#\?]/g,ob=/[#\?@]/g,ab=/#/g;function ui(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Nn(a){a.g||(a.g=new Map,a.h=0,a.i&&nb(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}n=ui.prototype,n.add=function(a,h){Nn(this),this.i=null,a=ns(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function zf(a,h){Nn(a),h=ns(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function qf(a,h){return Nn(a),h=ns(a,h),a.g.has(h)}n.forEach=function(a,h){Nn(this),this.g.forEach(function(d,g){d.forEach(function(C){a.call(h,C,g,this)},this)},this)},n.na=function(){Nn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let g=0;g<h.length;g++){const C=a[g];for(let O=0;O<C.length;O++)d.push(h[g])}return d},n.V=function(a){Nn(this);let h=[];if(typeof a=="string")qf(this,a)&&(h=h.concat(this.g.get(ns(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)h=h.concat(a[d])}return h},n.set=function(a,h){return Nn(this),this.i=null,a=ns(this,a),qf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Gf(a,h,d){zf(a,h),0<d.length&&(a.i=null,a.g.set(ns(a,h),V(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var g=h[d];const O=encodeURIComponent(String(g)),Q=this.V(g);for(g=0;g<Q.length;g++){var C=O;Q[g]!==""&&(C+="="+encodeURIComponent(String(Q[g]))),a.push(C)}}return this.i=a.join("&")};function ns(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function lb(a,h){h&&!a.j&&(Nn(a),a.i=null,a.g.forEach(function(d,g){var C=g.toLowerCase();g!=C&&(zf(this,g),Gf(this,C,d))},a)),a.j=h}function cb(a,h){const d=new oi;if(l.Image){const g=new Image;g.onload=v(Mn,d,"TestLoadImage: loaded",!0,h,g),g.onerror=v(Mn,d,"TestLoadImage: error",!1,h,g),g.onabort=v(Mn,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(Mn,d,"TestLoadImage: timeout",!1,h,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function ub(a,h){const d=new oi,g=new AbortController,C=setTimeout(()=>{g.abort(),Mn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(O=>{clearTimeout(C),O.ok?Mn(d,"TestPingServer: ok",!0,h):Mn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Mn(d,"TestPingServer: error",!1,h)})}function Mn(a,h,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function hb(){this.g=new Lo}function fb(a,h,d){const g=d||"";try{Bf(a,function(C,O){let Q=C;u(C)&&(Q=Xe(C)),h.push(g+O+"="+encodeURIComponent(Q))})}catch(C){throw h.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ko(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Ko,Xl),Ko.prototype.g=function(){return new Ho(this.l,this.j)},Ko.prototype.i=function(a){return function(){return a}}({});function Ho(a,h){le.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Ho,le),n=Ho.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,fi(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?hi(this):fi(this),this.readyState==3&&Kf(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,hi(this))},n.Qa=function(a){this.g&&(this.response=a,hi(this))},n.ga=function(){this.g&&hi(this)};function hi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,fi(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hf(a){let h="";return te(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function lc(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Hf(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):ke(a,h,d))}function je(a){le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(je,le);var db=/^https?$/i,pb=["POST","PUT"];n=je.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tc.g(),this.v=this.o?wf(this.o):wf(tc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Wf(this,O);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())d.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),C=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(pb,h,void 0))||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,Q]of d)this.g.setRequestHeader(O,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jf(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Wf(this,O)}};function Wf(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Qf(a),Wo(a)}function Qf(a){a.A||(a.A=!0,ge(a,"complete"),ge(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ge(this,"complete"),ge(this,"abort"),Wo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wo(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yf(this):this.bb())},n.bb=function(){Yf(this)};function Yf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||dn(a)!=4||a.Z()!=2)){if(a.u&&dn(a)==4)st(a.Ea,0,a);else if(ge(a,"readystatechange"),dn(a)==4){a.h=!1;try{const Q=a.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=Q===0){var C=String(a.D).match(Uf)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),g=!db.test(C?C.toLowerCase():"")}d=g}if(d)ge(a,"complete"),ge(a,"success");else{a.m=6;try{var O=2<dn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Qf(a)}}finally{Wo(a)}}}}function Wo(a,h){if(a.g){Jf(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ge(a,"ready");try{d.onreadystatechange=g}catch{}}}function Jf(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function dn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Lt(h)}};function Xf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function mb(a){const h={};a=(a.g&&2<=dn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(N(a[g]))continue;var d=x(a[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=h[C]||[];h[C]=O,O.push(d)}w(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Zf(a){this.Aa=0,this.i=[],this.j=new oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=di("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=di("baseRetryDelayMs",5e3,a),this.cb=di("retryDelaySeedMs",1e4,a),this.Wa=di("forwardChannelMaxRetries",2,a),this.wa=di("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Of(a&&a.concurrentRequestLimit),this.Da=new hb,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Zf.prototype,n.la=8,n.G=1,n.connect=function(a,h,d,g){gt(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=ld(this,null,this.W),Yo(this)};function cc(a){if(ed(a),a.G==3){var h=a.U++,d=fn(a.I);if(ke(d,"SID",a.K),ke(d,"RID",h),ke(d,"TYPE","terminate"),pi(a,d),h=new On(a,a.j,h),h.L=2,h.v=Go(fn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=cd(h.j,null),h.g.ea(h.v)),h.F=Date.now(),$o(h)}ad(a)}function Qo(a){a.g&&(hc(a),a.g.cancel(),a.g=null)}function ed(a){Qo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Jo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Yo(a){if(!Nf(a.h)&&!a.s){a.s=!0;var h=a.Ga;me||pr(),we||(me(),we=!0),qt.add(h,a),a.B=0}}function gb(a,h){return Mf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ii(m(a.Ga,a,h),od(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new On(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(C.H=O,O=null),this.P)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=nd(this,C,h),d=fn(this.I),ke(d,"RID",a),ke(d,"CVER",22),this.D&&ke(d,"X-HTTP-Session-Id",this.D),pi(this,d),O&&(this.O?h="headers="+encodeURIComponent(String(Hf(O)))+"&"+h:this.m&&lc(d,this.m,O)),ac(this.h,C),this.Ua&&ke(d,"TYPE","init"),this.P?(ke(d,"$req",h),ke(d,"SID","null"),C.T=!0,rc(C,d,null)):rc(C,d,h),this.G=2}}else this.G==3&&(a?td(this,a):this.i.length==0||Nf(this.h)||td(this))};function td(a,h){var d;h?d=h.l:d=a.U++;const g=fn(a.I);ke(g,"SID",a.K),ke(g,"RID",d),ke(g,"AID",a.T),pi(a,g),a.m&&a.o&&lc(g,a.m,a.o),d=new On(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),h&&(a.i=h.D.concat(a.i)),h=nd(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ac(a.h,d),rc(d,g,h)}function pi(a,h){a.H&&te(a.H,function(d,g){ke(h,g,d)}),a.l&&Bf({},function(d,g){ke(h,g,d)})}function nd(a,h,d){d=Math.min(a.i.length,d);var g=a.l?m(a.l.Na,a.l,a):null;e:{var C=a.i;let O=-1;for(;;){const Q=["count="+d];O==-1?0<d?(O=C[0].g,Q.push("ofs="+O)):O=0:Q.push("ofs="+O);let Re=!0;for(let Ze=0;Ze<d;Ze++){let Te=C[Ze].g;const ot=C[Ze].map;if(Te-=O,0>Te)O=Math.max(0,C[Ze].g-100),Re=!1;else try{fb(ot,Q,"req"+Te+"_")}catch{g&&g(ot)}}if(Re){g=Q.join("&");break e}}}return a=a.i.splice(0,d),h.D=a,g}function rd(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;me||pr(),we||(me(),we=!0),qt.add(h,a),a.v=0}}function uc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ii(m(a.Fa,a),od(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,sd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ii(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Qo(this),sd(this))};function hc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function sd(a){a.g=new On(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=fn(a.qa);ke(h,"RID","rpc"),ke(h,"SID",a.K),ke(h,"AID",a.T),ke(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ke(h,"TO",a.ja),ke(h,"TYPE","xmlhttp"),pi(a,h),a.m&&a.o&&lc(h,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Go(fn(h)),d.m=null,d.P=!0,Df(d,a)}n.Za=function(){this.C!=null&&(this.C=null,Qo(this),uc(this),gt(19))};function Jo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function id(a,h){var d=null;if(a.g==h){Jo(a),hc(a),a.g=null;var g=2}else if(oc(a.h,h))d=h.D,Ff(a.h,h),g=1;else return;if(a.G!=0){if(h.o)if(g==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;g=Bo(),ge(g,new Sf(g,d)),Yo(a)}else rd(a);else if(C=h.s,C==3||C==0&&0<h.X||!(g==1&&gb(a,h)||g==2&&uc(a)))switch(d&&0<d.length&&(h=a.h,h.i=h.i.concat(d)),C){case 1:br(a,5);break;case 4:br(a,10);break;case 3:br(a,6);break;default:br(a,2)}}}function od(a,h){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*h}function br(a,h){if(a.j.info("Error code "+h),h==2){var d=m(a.fb,a),g=a.Xa;const C=!g;g=new vr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||zo(g,"https"),Go(g),C?cb(g.toString(),d):ub(g.toString(),d)}else gt(2);a.G=0,a.l&&a.l.sa(h),ad(a),ed(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ad(a){if(a.G=0,a.ka=[],a.l){const h=Lf(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,V(a.i),a.i.length=0),a.l.ra()}}function ld(a,h,d){var g=d instanceof vr?fn(d):new vr(d);if(g.g!="")h&&(g.g=h+"."+g.g),qo(g,g.s);else{var C=l.location;g=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var O=new vr(null);g&&zo(O,g),h&&(O.g=h),C&&qo(O,C),d&&(O.l=d),g=O}return d=a.D,h=a.ya,d&&h&&ke(g,d,h),ke(g,"VER",a.la),pi(a,g),g}function cd(a,h,d){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new je(new Ko({eb:d})):new je(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ud(){}n=ud.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xo(){}Xo.prototype.g=function(a,h){return new Rt(a,h)};function Rt(a,h){le.call(this),this.g=new Zf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!N(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new rs(this)}R(Rt,le),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){cc(this.g)},Rt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Xe(a),a=d);h.i.push(new Z0(h.Ya++,a)),h.G==3&&Yo(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Rt.aa.N.call(this)};function hd(a){Zl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}R(hd,Zl);function fd(){ec.call(this),this.status=1}R(fd,ec);function rs(a){this.g=a}R(rs,ud),rs.prototype.ua=function(){ge(this.g,"a")},rs.prototype.ta=function(a){ge(this.g,new hd(a))},rs.prototype.sa=function(a){ge(this.g,new fd)},rs.prototype.ra=function(){ge(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,My=function(){return new Xo},Ny=function(){return Bo()},Oy=yr,iu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uo.NO_ERROR=0,Uo.TIMEOUT=8,Uo.HTTP_ERROR=6,ga=Uo,Pf.COMPLETE="complete",ky=Pf,Tf.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",le.prototype.listen=le.prototype.K,Ti=Tf,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Vy=je}).apply(typeof ra<"u"?ra:typeof self<"u"?self:typeof window<"u"?window:{});const ip="@firebase/firestore",op="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Ay("@firebase/firestore");function vs(){return zr.logLevel}function G(n,...e){if(zr.logLevel<=Ee.DEBUG){const t=e.map(yh);zr.debug(`Firestore (${Qs}): ${n}`,...t)}}function Et(n,...e){if(zr.logLevel<=Ee.ERROR){const t=e.map(yh);zr.error(`Firestore (${Qs}): ${n}`,...t)}}function Xn(n,...e){if(zr.logLevel<=Ee.WARN){const t=e.map(yh);zr.warn(`Firestore (${Qs}): ${n}`,...t)}}function yh(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Fy(n,r,t)}function Fy(n,e,t){let r=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Et(r),new Error(r)}function re(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Fy(e,s,r)}function fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Ws{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class By{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}}class NT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MT{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){re(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string",31837,{l:r}),new Ly(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string",2055,{h:e}),new et(e)}}class FT{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LT{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new FT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ap{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){re(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ap(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ap(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=UT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ue(n,e){return n<e?-1:n>e?1:0}function ou(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ue(r,s);{const i=Uy(),o=jT(i.encode(lp(n,t)),i.encode(lp(e,t)));return o!==0?o:ue(r,s)}}t+=r>65535?2:1}return ue(n.length,e.length)}function lp(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function jT(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ue(n[t],e[t]);return ue(n.length,e.length)}function Os(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function jy(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-62135596800,up=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*up);return new Ne(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cp)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/up}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-cp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Ne(0,0))}static max(){return new oe(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="__name__";class Zt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Zt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Zt.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ue(e.length,t.length)}static compareSegments(e,t){const r=Zt.isNumericId(e),s=Zt.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Zt.extractNumericId(e).compare(Zt.extractNumericId(t)):ou(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class xe extends Zt{construct(e,t,r){return new xe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new xe(t)}static emptyPath(){return new xe([])}}const $T=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends Zt{construct(e,t,r){return new Fe(e,t,r)}static isValidIdentifier(e){return $T.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hp}static keyField(){return new Fe([hp])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(t)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(xe.fromString(e))}static fromName(e){return new J(xe.fromString(e).popFirst(5))}static empty(){return new J(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=-1;class $a{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function au(n){return n.fields.find(e=>e.kind===2)}function Sr(n){return n.fields.filter(e=>e.kind!==2)}$a.UNKNOWN_ID=-1;class ya{constructor(e,t){this.fieldPath=e,this.kind=t}}class io{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new io(0,Nt.min())}}function zT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Ne(t+1,0):new Ne(t,r));return new Nt(s,J.empty(),e)}function $y(n){return new Nt(n.readTime,n.key,so)}class Nt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Nt(oe.min(),J.empty(),so)}static max(){return new Nt(oe.max(),J.empty(),so)}}function vh(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==zy)throw n;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new P((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof P?t:P.resolve(t)}catch(t){return P.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):P.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):P.reject(t)}static resolve(e){return new P((t,r)=>{t(e)})}static reject(e){return new P((t,r)=>{r(e)})}static waitFor(e){return new P((t,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=P.resolve(!1);for(const r of e)t=t.next(s=>s?P.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new P((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(f=>{o[u]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,t){return new P((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="SimpleDb";class bl{static open(e,t,r,s){try{return new bl(t,e.transaction(s,r))}catch(i){throw new Bi(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new wn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Bi(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=bh(r.target.error);this.S.reject(new Bi(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(G(Dt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GT(t)}}class Jn{static delete(e){return G(Dt,"Removing database:",e),Rr(yy().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Ty())return!1;if(Jn.F())return!0;const e=La(),t=Jn.M(e),r=0<t&&t<10,s=Gy(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Jn.M(La())===12.2&&Et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(G(Dt,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Bi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new Y(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Bi(e,o))},s.onupgradeneeded=i=>{G(Dt,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,s.transaction,i.oldVersion,this.version).next(()=>{G(Dt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const l=bl.open(this.db,e,i?"readonly":"readwrite",r),c=s(l).next(u=>(l.v(),u)).catch(u=>(l.abort(u),P.reject(u))).toPromise();return c.catch(()=>{}),await l.D,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(G(Dt,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Gy(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class qT{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return Rr(this.K.delete())}}class Bi extends Y{constructor(e,t){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hr(n){return n.name==="IndexedDbTransactionError"}class GT{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(G(Dt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(G(Dt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rr(r)}add(e){return G(Dt,"ADD",this.store.name,e,e),Rr(this.store.add(e))}get(e){return Rr(this.store.get(e)).next(t=>(t===void 0&&(t=null),G(Dt,"GET",this.store.name,e,t),t))}delete(e){return G(Dt,"DELETE",this.store.name,e),Rr(this.store.delete(e))}count(){return G(Dt,"COUNT",this.store.name),Rr(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new P((o,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.Y(i,(l,c)=>{o.push(c)}).next(()=>o)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new P((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}X(e,t){G(Dt,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const s=this.cursor(r);return this.Y(s,(i,o,l)=>l.delete())}te(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Y(s,t)}ne(e){const t=this.cursor({});return new P((r,s)=>{t.onerror=i=>{const o=bh(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}Y(e,t){const r=[];return new P((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const c=new qT(l),u=t(l.primaryKey,l.value,c);if(u instanceof P){const f=u.catch(p=>(c.done(),P.reject(p)));r.push(f)}c.isDone?s():c.j===null?l.continue():l.continue(c.j)}}).next(()=>P.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rr(n){return new P((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=bh(r.target.error);t(s)}})}let fp=!1;function bh(n){const e=Jn.M(La());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fp||(fp=!0,setTimeout(()=>{throw r},0)),r}}return n}const Ui="IndexBackfiller";class KT{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){G(Ui,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();G(Ui,`Documents written: ${t}`)}catch(t){hr(t)?G(Ui,"Ignoring IndexedDB error during index backfill: ",t):await Zr(t)}await this.ie(6e4)})}}class HT{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let s=t,i=!0;return P.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G(Ui,`Processing collection: ${o}`),this._e(e,o,s).next(l=>{s-=l,r.add(o)});i=!1})).next(()=>t-s)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ae(s,i)).next(l=>(G(Ui,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>o.size)}))}ae(e,t){let r=e;return t.changes.forEach((s,i)=>{const o=$y(i);vh(o,r)>0&&(r=o)}),new Nt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bt.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=-1;function El(n){return n==null}function oo(n){return n===0&&1/n==-1/0}function WT(n){return typeof n=="number"&&Number.isInteger(n)&&!oo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="";function ft(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dp(e)),e=QT(n.get(t),e);return dp(e)}function QT(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case za:t+="";break;default:t+=i}}return t}function dp(n){return n+za+""}function tn(n){const e=n.length;if(re(e>=2,64408,{path:n}),e===2)return re(n.charAt(0)===za&&n.charAt(1)==="",56145,{path:n}),xe.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(za,i);switch((o<0||o>t)&&ne(50515,{path:n}),n.charAt(o+1)){case"":const l=n.substring(i,o);let c;s.length===0?c=l:(s+=l,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:ne(61167,{path:n})}i=o+2}return new xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="remoteDocuments",Io="owner",us="owner",ao="mutationQueues",YT="userId",Kt="mutations",pp="batchId",kr="userMutationsIndex",mp=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(n,e){return[n,ft(e)]}function Ky(n,e,t){return[n,ft(e),t]}const JT={},Ns="documentMutations",qa="remoteDocumentsV14",XT=["prefixPath","collectionGroup","readTime","documentId"],va="documentKeyIndex",ZT=["prefixPath","collectionGroup","documentId"],Hy="collectionGroupIndex",eI=["collectionGroup","readTime","prefixPath","documentId"],lo="remoteDocumentGlobal",lu="remoteDocumentGlobalKey",Ms="targets",Wy="queryTargetsIndex",tI=["canonicalId","targetId"],Fs="targetDocuments",nI=["targetId","path"],Eh="documentTargetsIndex",rI=["path","targetId"],Ga="targetGlobalKey",Br="targetGlobal",co="collectionParents",sI=["collectionId","parent"],Ls="clientMetadata",iI="clientId",wl="bundles",oI="bundleId",Tl="namedQueries",aI="name",wh="indexConfiguration",lI="indexId",cu="collectionGroupIndex",cI="collectionGroup",ji="indexState",uI=["indexId","uid"],Qy="sequenceNumberIndex",hI=["uid","sequenceNumber"],$i="indexEntries",fI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yy="documentKeyIndex",dI=["indexId","uid","orderedDocumentKey"],Il="documentOverlays",pI=["userId","collectionPath","documentId"],uu="collectionPathOverlayIndex",mI=["userId","collectionPath","largestBatchId"],Jy="collectionGroupOverlayIndex",gI=["userId","collectionGroup","largestBatchId"],Th="globals",yI="name",Xy=[ao,Kt,Ns,Pr,Ms,Io,Br,Fs,Ls,lo,co,wl,Tl],_I=[...Xy,Il],Zy=[ao,Kt,Ns,qa,Ms,Io,Br,Fs,Ls,lo,co,wl,Tl,Il],e_=Zy,Ih=[...e_,wh,ji,$i],vI=Ih,t_=[...Ih,Th],bI=t_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends qy{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Qe(n,e){const t=fe(n);return Jn.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function n_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,t){this.comparator=e,this.root=t||tt.EMPTY}insert(e,t){return new Le(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new tt(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new tt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yp(this.data.getIterator())}getIteratorFrom(e){return new yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pe(this.comparator);return t.data=e,t}}class yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hs(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new St([])}unionWith(e){let t=new Pe(Fe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new St(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new r_("Invalid base64 string: "+i):i}}(e);return new qe(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qe(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const EI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function An(n){if(re(!!n,39018),typeof n=="string"){let e=0;const t=EI.exec(n);if(re(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(n.seconds),nanos:Me(n.nanos)}}function Me(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xn(n){return typeof n=="string"?qe.fromBase64String(n):qe.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="server_timestamp",i_="__type__",o_="__previous_value__",a_="__local_write_time__";function Ah(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[i_])===null||t===void 0?void 0:t.stringValue)===s_}function Al(n){const e=n.mapValue.fields[o_];return Ah(e)?Al(e):e}function uo(n){const e=An(n.mapValue.fields[a_].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t,r,s,i,o,l,c,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const Ka="(default)";class Zn{constructor(e,t){this.projectId=e,this.database=t||Ka}static empty(){return new Zn("","")}get isDefaultDatabase(){return this.database===Ka}isEqual(e){return e instanceof Zn&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="__type__",l_="__max__",Kn={mapValue:{fields:{__type__:{stringValue:l_}}}},Sh="__vector__",Bs="value",ba={nullValue:"NULL_VALUE"};function er(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ah(n)?4:c_(n)?9007199254740991:xl(n)?10:11:ne(28295,{value:n})}function cn(n,e){if(n===e)return!0;const t=er(n);if(t!==er(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uo(n).isEqual(uo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=An(s.timestampValue),l=An(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return xn(s.bytesValue).isEqual(xn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),l=Me(i.doubleValue);return o===l?oo(o)===oo(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Os(n.arrayValue.values||[],e.arrayValue.values||[],cn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(gp(o)!==gp(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!cn(o[c],l[c])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function ho(n,e){return(n.values||[]).find(t=>cn(t,e))!==void 0}function tr(n,e){if(n===e)return 0;const t=er(n),r=er(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Me(i.integerValue||i.doubleValue),c=Me(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return _p(n.timestampValue,e.timestampValue);case 4:return _p(uo(n),uo(e));case 5:return ou(n.stringValue,e.stringValue);case 6:return function(i,o){const l=xn(i),c=xn(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const f=ue(l[u],c[u]);if(f!==0)return f}return ue(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ue(Me(i.latitude),Me(o.latitude));return l!==0?l:ue(Me(i.longitude),Me(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vp(n.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,f;const p=i.fields||{},m=o.fields||{},v=(l=p[Bs])===null||l===void 0?void 0:l.arrayValue,R=(c=m[Bs])===null||c===void 0?void 0:c.arrayValue,V=ue(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((f=R==null?void 0:R.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:vp(v,R)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Kn.mapValue&&o===Kn.mapValue)return 0;if(i===Kn.mapValue)return 1;if(o===Kn.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const m=ou(c[p],f[p]);if(m!==0)return m;const v=tr(l[c[p]],u[f[p]]);if(v!==0)return v}return ue(c.length,f.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{Pe:t})}}function _p(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);const t=An(n),r=An(e),s=ue(t.seconds,r.seconds);return s!==0?s:ue(t.nanos,r.nanos)}function vp(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=tr(t[s],r[s]);if(i)return i}return ue(t.length,r.length)}function Us(n){return fu(n)}function fu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=An(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=fu(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fu(t.fields[o])}`;return s+"}"}(n.mapValue):ne(61005,{value:n})}function Ea(n){switch(er(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Al(n);return e?16+Ea(e):16;case 5:return 2*n.stringValue.length;case 6:return xn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ea(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return fr(r.fields,(i,o)=>{s+=i.length+Ea(o)}),s}(n.mapValue);default:throw ne(13486,{value:n})}}function fo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function du(n){return!!n&&"integerValue"in n}function po(n){return!!n&&"arrayValue"in n}function bp(n){return!!n&&"nullValue"in n}function Ep(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wa(n){return!!n&&"mapValue"in n}function xl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[xh])===null||t===void 0?void 0:t.stringValue)===Sh}function zi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zi(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===l_}const u_={mapValue:{fields:{[xh]:{stringValue:Sh},[Bs]:{arrayValue:{}}}}};function TI(n){return"nullValue"in n?ba:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fo(Zn.empty(),J.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?xl(n)?u_:{mapValue:{}}:ne(35942,{value:n})}function II(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fo(Zn.empty(),J.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?u_:"mapValue"in n?xl(n)?{mapValue:{}}:Kn:ne(61959,{value:n})}function wp(n,e){const t=tr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Tp(n,e){const t=tr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.value=e}static empty(){return new ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zi(t)}setAll(e){let t=Fe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=l.popLast()}o?r[l.lastSegment()]=zi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());wa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];wa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){fr(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ht(zi(this.value))}}function h_(n){const e=[];return fr(n.fields,(t,r)=>{const s=new Fe([t]);if(wa(r)){const i=h_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,t,r,s,i,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new $e(e,0,oe.min(),oe.min(),oe.min(),ht.empty(),0)}static newFoundDocument(e,t,r,s){return new $e(e,1,t,oe.min(),r,s,0)}static newNoDocument(e,t){return new $e(e,2,t,oe.min(),oe.min(),ht.empty(),0)}static newUnknownDocument(e,t){return new $e(e,3,t,oe.min(),oe.min(),ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t){this.position=e,this.inclusive=t}}function Ip(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),t.key):r=tr(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ap(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cn(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t="asc"){this.field=e,this.dir=t}}function AI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{}class _e extends f_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xI(e,t,r):t==="array-contains"?new RI(e,r):t==="in"?new __(e,r):t==="not-in"?new CI(e,r):t==="array-contains-any"?new DI(e,r):new _e(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SI(e,r):new PI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tr(t,this.value)):t!==null&&er(this.value)===er(t)&&this.matchesComparison(tr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends f_{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Se(e,t)}matches(e){return $s(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function $s(n){return n.op==="and"}function pu(n){return n.op==="or"}function Ph(n){return d_(n)&&$s(n)}function d_(n){for(const e of n.filters)if(e instanceof Se)return!1;return!0}function mu(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+Us(n.value);if(Ph(n))return n.filters.map(e=>mu(e)).join(",");{const e=n.filters.map(t=>mu(t)).join(",");return`${n.op}(${e})`}}function p_(n,e){return n instanceof _e?function(r,s){return s instanceof _e&&r.op===s.op&&r.field.isEqual(s.field)&&cn(r.value,s.value)}(n,e):n instanceof Se?function(r,s){return s instanceof Se&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&p_(o,s.filters[l]),!0):!1}(n,e):void ne(19439)}function m_(n,e){const t=n.filters.concat(e);return Se.create(t,n.op)}function g_(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${Us(t.value)}`}(n):n instanceof Se?function(t){return t.op.toString()+" {"+t.getFilters().map(g_).join(" ,")+"}"}(n):"Filter"}class xI extends _e{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){const t=J.comparator(e.key,this.key);return this.matchesComparison(t)}}class SI extends _e{constructor(e,t){super(e,"in",t),this.keys=y_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PI extends _e{constructor(e,t){super(e,"not-in",t),this.keys=y_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function y_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}class RI extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return po(t)&&ho(t.arrayValue,this.value)}}class __ extends _e{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ho(this.value.arrayValue,t)}}class CI extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ho(this.value.arrayValue,t)}}class DI extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!po(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function gu(n,e=null,t=[],r=[],s=null,i=null,o=null){return new VI(n,e,t,r,s,i,o)}function qr(n){const e=fe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mu(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),El(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Us(r)).join(",")),e.Ie=t}return e.Ie}function Ao(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!p_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ap(n.startAt,e.startAt)&&Ap(n.endAt,e.endAt)}function Ha(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wa(n,e){return n.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function xp(n,e,t){let r=ba,s=!0;for(const i of Wa(n,e)){let o=ba,l=!0;switch(i.op){case"<":case"<=":o=TI(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,l=!1;break;case"!=":case"not-in":o=ba}wp({value:r,inclusive:s},{value:o,inclusive:l})<0&&(r=o,s=l)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];wp({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function Sp(n,e,t){let r=Kn,s=!0;for(const i of Wa(n,e)){let o=Kn,l=!0;switch(i.op){case">=":case">":o=II(i.value),l=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,l=!1;break;case"!=":case"not-in":o=Kn}Tp({value:r,inclusive:s},{value:o,inclusive:l})>0&&(r=o,s=l)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];Tp({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function kI(n,e,t,r,s,i,o,l){return new Ys(n,e,t,r,s,i,o,l)}function xo(n){return new Ys(n)}function Pp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function v_(n){return n.collectionGroup!==null}function qi(n){const e=fe(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Pe(Fe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new mo(i,r))}),t.has(Fe.keyField().canonicalString())||e.Ee.push(new mo(Fe.keyField(),r))}return e.Ee}function Ut(n){const e=fe(n);return e.de||(e.de=OI(e,qi(n))),e.de}function OI(n,e){if(n.limitType==="F")return gu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mo(s.field,i)});const t=n.endAt?new js(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new js(n.startAt.position,n.startAt.inclusive):null;return gu(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yu(n,e){const t=n.filters.concat([e]);return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _u(n,e,t){return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sl(n,e){return Ao(Ut(n),Ut(e))&&n.limitType===e.limitType}function b_(n){return`${qr(Ut(n))}|lt:${n.limitType}`}function bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>g_(s)).join(", ")}]`),El(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Us(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Us(s)).join(",")),`Target(${r})`}(Ut(n))}; limitType=${n.limitType})`}function So(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of qi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=Ip(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,qi(r),s)||r.endAt&&!function(o,l,c){const u=Ip(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,qi(r),s))}(n,e)}function NI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function E_(n){return(e,t)=>{let r=!1;for(const s of qi(n)){const i=MI(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function MI(n,e,t){const r=n.field.isKeyField()?J.comparator(e.key,t.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?tr(c,u):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return n_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Le(J.comparator);function Ot(){return FI}const w_=new Le(J.comparator);function Ii(...n){let e=w_;for(const t of n)e=e.insert(t.key,t);return e}function T_(n){let e=w_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nn(){return Gi()}function I_(){return Gi()}function Gi(){return new Cn(n=>n.toString(),(n,e)=>n.isEqual(e))}const LI=new Le(J.comparator),BI=new Pe(J.comparator);function ye(...n){let e=BI;for(const t of n)e=e.add(t);return e}const UI=new Pe(ue);function jI(){return UI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(e)?"-0":e}}function A_(n){return{integerValue:""+n}}function $I(n,e){return WT(e)?A_(e):Rh(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this._=void 0}}function zI(n,e,t){return n instanceof go?function(s,i){const o={fields:{[i_]:{stringValue:s_},[a_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ah(i)&&(i=Al(i)),i&&(o.fields[o_]=i),{mapValue:o}}(t,e):n instanceof zs?S_(n,e):n instanceof qs?P_(n,e):function(s,i){const o=x_(s,i),l=Rp(o)+Rp(s.Re);return du(o)&&du(s.Re)?A_(l):Rh(s.serializer,l)}(n,e)}function qI(n,e,t){return n instanceof zs?S_(n,e):n instanceof qs?P_(n,e):t}function x_(n,e){return n instanceof yo?function(r){return du(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class go extends Pl{}class zs extends Pl{constructor(e){super(),this.elements=e}}function S_(n,e){const t=R_(e);for(const r of n.elements)t.some(s=>cn(s,r))||t.push(r);return{arrayValue:{values:t}}}class qs extends Pl{constructor(e){super(),this.elements=e}}function P_(n,e){let t=R_(e);for(const r of n.elements)t=t.filter(s=>!cn(s,r));return{arrayValue:{values:t}}}class yo extends Pl{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Rp(n){return Me(n.integerValue||n.doubleValue)}function R_(n){return po(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.field=e,this.transform=t}}function KI(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof zs&&s instanceof zs||r instanceof qs&&s instanceof qs?Os(r.elements,s.elements,cn):r instanceof yo&&s instanceof yo?cn(r.Re,s.Re):r instanceof go&&s instanceof go}(n.transform,e.transform)}class HI{constructor(e,t){this.version=e,this.transformResults=t}}class Pt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pt}static exists(e){return new Pt(void 0,e)}static updateTime(e){return new Pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ta(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rl{}function C_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ch(n.key,Pt.none()):new Js(n.key,n.data,Pt.none());{const t=n.data,r=ht.empty();let s=new Pe(Fe.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dn(n.key,r,new St(s.toArray()),Pt.none())}}function WI(n,e,t){n instanceof Js?function(s,i,o){const l=s.value.clone(),c=Dp(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Dn?function(s,i,o){if(!Ta(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Dp(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(D_(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ki(n,e,t,r){return n instanceof Js?function(i,o,l,c){if(!Ta(i.precondition,o))return l;const u=i.value.clone(),f=Vp(i.fieldTransforms,c,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Dn?function(i,o,l,c){if(!Ta(i.precondition,o))return l;const u=Vp(i.fieldTransforms,c,o),f=o.data;return f.setAll(D_(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(i,o,l){return Ta(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function QI(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=x_(r.transform,s||null);i!=null&&(t===null&&(t=ht.empty()),t.set(r.field,i))}return t||null}function Cp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Os(r,s,(i,o)=>KI(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Js extends Rl{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dn extends Rl{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function D_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Dp(n,e,t){const r=new Map;re(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,qI(o,l,t[s]))}return r}function Vp(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,zI(i,o,e))}return r}class Ch extends Rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V_ extends Rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WI(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ki(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ki(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=I_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=t.has(s.key)?null:l;const c=C_(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ye())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(t,r)=>Cp(t,r))&&Os(this.baseMutations,e.baseMutations,(t,r)=>Cp(t,r))}}class Vh{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){re(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return LI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vh(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,be;function JI(n){switch(n){case U.OK:return ne(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function k_(n){if(n===void 0)return Et("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ge.OK:return U.OK;case Ge.CANCELLED:return U.CANCELLED;case Ge.UNKNOWN:return U.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return U.INTERNAL;case Ge.UNAVAILABLE:return U.UNAVAILABLE;case Ge.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ge.NOT_FOUND:return U.NOT_FOUND;case Ge.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ge.ABORTED:return U.ABORTED;case Ge.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ge.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:n})}}(be=Ge||(Ge={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new Yn([4294967295,4294967295],0);function kp(n){const e=Uy().encode(n),t=new Dy;return t.update(e),new Uint8Array(t.digest())}function Op(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Yn([t,r],0),new Yn([s,i],0)]}class Oh{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ai(`Invalid padding: ${t}`);if(r<0)throw new Ai(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ai(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ai(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Yn.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(Yn.fromNumber(r)));return s.compare(XI)===1&&(s=new Yn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=kp(e),[r,s]=Op(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.Se(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Oh(i,s,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const t=kp(e),[r,s]=Op(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.be(o)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ai extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cl(oe.min(),s,new Le(ue),Ot(),ye())}}class Po{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Po(r,t,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class O_{constructor(e,t){this.targetId=e,this.Ce=t}}class N_{constructor(e,t,r=qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Np{constructor(){this.Fe=0,this.Me=Mp(),this.xe=qe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ye(),t=ye(),r=ye();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new Po(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Mp()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,re(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ZI{constructor(e){this.ze=e,this.je=new Map,this.He=Ot(),this.Je=ia(),this.Ye=ia(),this.Ze=new Le(ue)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const i=s.target;if(Ha(i))if(r===0){const o=new J(i.path);this.tt(t,o,$e.newNoDocument(o,oe.min()))}else re(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,l;try{o=xn(r).toUint8Array()}catch(c){if(c instanceof r_)return Xn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Oh(o,s,i)}catch(c){return Xn(c instanceof Ai?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,i,null),s++)}),s}It(e){const t=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Ha(l.target)){const c=new J(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,$e.newNoDocument(c,e))}i.Le&&(t.set(o,i.qe()),i.Qe())}});let r=ye();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Cl(e,t,this.Ze,this.He,r);return this.He=Ot(),this.Je=ia(),this.Ye=ia(),this.Ze=new Le(ue),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Np,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Pe(ue),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Pe(ue),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Np),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ia(){return new Le(J.comparator)}function Mp(){return new Le(J.comparator)}const eA={asc:"ASCENDING",desc:"DESCENDING"},tA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nA={and:"AND",or:"OR"};class rA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vu(n,e){return n.useProto3Json||El(e)?e:{value:e}}function Gs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sA(n,e){return Gs(n,e.toTimestamp())}function It(n){return re(!!n,49232),oe.fromTimestamp(function(t){const r=An(t);return new Ne(r.seconds,r.nanos)}(n))}function Nh(n,e){return bu(n,e).canonicalString()}function bu(n,e){const t=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function F_(n){const e=xe.fromString(n);return re(K_(e),10190,{key:e.toString()}),e}function Qa(n,e){return Nh(n.databaseId,e.path)}function Ur(n,e){const t=F_(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(U_(t))}function L_(n,e){return Nh(n.databaseId,e)}function B_(n){const e=F_(n);return e.length===4?xe.emptyPath():U_(e)}function Eu(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U_(n){return re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fp(n,e,t){return{name:Qa(n,e),fields:t.value.mapValue.fields}}function iA(n,e,t){const r=Ur(n,e.name),s=It(e.updateTime),i=e.createTime?It(e.createTime):oe.min(),o=new ht({mapValue:{fields:e.fields}}),l=$e.newFoundDocument(r,s,i,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function oA(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(re(f===void 0||typeof f=="string",58123),qe.fromBase64String(f||"")):(re(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),qe.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const f=u.code===void 0?U.UNKNOWN:k_(u.code);return new Y(f,u.message||"")}(o);t=new N_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ur(n,r.document.name),i=It(r.document.updateTime),o=r.document.createTime?It(r.document.createTime):oe.min(),l=new ht({mapValue:{fields:r.document.fields}}),c=$e.newFoundDocument(s,i,o,l),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Ia(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ur(n,r.document),i=r.readTime?It(r.readTime):oe.min(),o=$e.newNoDocument(s,i),l=r.removedTargetIds||[];t=new Ia([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ur(n,r.document),i=r.removedTargetIds||[];t=new Ia([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new YI(s,i),l=r.targetId;t=new O_(l,o)}}return t}function Ya(n,e){let t;if(e instanceof Js)t={update:Fp(n,e.key,e.value)};else if(e instanceof Ch)t={delete:Qa(n,e.key)};else if(e instanceof Dn)t={update:Fp(n,e.key,e.data),updateMask:fA(e.fieldMask)};else{if(!(e instanceof V_))return ne(16599,{ft:e.type});t={verify:Qa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof qs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yo)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:sA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(n,e.precondition)),t}function wu(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?Pt.updateTime(It(i.updateTime)):i.exists!==void 0?Pt.exists(i.exists):Pt.none()}(e.currentDocument):Pt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,l){let c=null;if("setToServerValue"in l)re(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new go;else if("appendMissingElements"in l){const f=l.appendMissingElements.values||[];c=new zs(f)}else if("removeAllFromArray"in l){const f=l.removeAllFromArray.values||[];c=new qs(f)}else"increment"in l?c=new yo(o,l.increment):ne(16584,{proto:l});const u=Fe.fromServerFormat(l.fieldPath);return new GI(u,c)}(n,s)):[];if(e.update){e.update.name;const s=Ur(n,e.update.name),i=new ht({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new St(u.map(f=>Fe.fromServerFormat(f)))}(e.updateMask);return new Dn(s,i,o,t,r)}return new Js(s,i,t,r)}if(e.delete){const s=Ur(n,e.delete);return new Ch(s,t)}if(e.verify){const s=Ur(n,e.verify);return new V_(s,t)}return ne(1463,{proto:e})}function aA(n,e){return n&&n.length>0?(re(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?It(s.updateTime):It(i);return o.isEqual(oe.min())&&(o=It(i)),new HI(o,s.transformResults||[])}(t,e))):[]}function j_(n,e){return{documents:[L_(n,e.path)]}}function $_(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=L_(n,s);const i=function(u){if(u.length!==0)return G_(Se.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(m){return{field:Es(m.field),direction:cA(m.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=vu(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:s}}function z_(n){let e=B_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){re(r===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=function(p){const m=q_(p);return m instanceof Se&&Ph(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(R){return new mo(ws(R.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(t.orderBy));let l=null;t.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,El(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new js(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(p){const m=!p.before,v=p.values||[];return new js(v,m)}(t.endAt)),kI(e,s,o,i,l,"F",c,u)}function lA(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function q_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ws(t.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ws(t.unaryFilter.field);return _e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ws(t.unaryFilter.field);return _e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ws(t.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return _e.create(ws(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Se.create(t.compositeFilter.filters.map(r=>q_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function cA(n){return eA[n]}function uA(n){return tA[n]}function hA(n){return nA[n]}function Es(n){return{fieldPath:n.canonicalString()}}function ws(n){return Fe.fromServerFormat(n.fieldPath)}function G_(n){return n instanceof _e?function(t){if(t.op==="=="){if(Ep(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NAN"}};if(bp(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ep(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NOT_NAN"}};if(bp(t.value))return{unaryFilter:{field:Es(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(t.field),op:uA(t.op),value:t.value}}}(n):n instanceof Se?function(t){const r=t.getFilters().map(s=>G_(s));return r.length===1?r[0]:{compositeFilter:{op:hA(t.op),filters:r}}}(n):ne(54877,{filter:n})}function fA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t,r,s,i=oe.min(),o=oe.min(),l=qe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new En(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.wt=e}}function dA(n,e){let t;if(e.document)t=iA(n.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Kr(e.noDocument.readTime);t=$e.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne(56709);{const r=J.fromSegments(e.unknownDocument.path),s=Kr(e.unknownDocument.version);t=$e.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const i=new Ne(s[0],s[1]);return oe.fromTimestamp(i)}(e.readTime)),t}function Lp(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ja(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Qa(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Gs(i,o.version.toTimestamp()),createTime:Gs(i,o.createTime.toTimestamp())}}(n.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gr(e.version)};else{if(!e.isUnknownDocument())return ne(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Gr(e.version)}}return r}function Ja(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gr(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kr(n){const e=new Ne(n.seconds,n.nanoseconds);return oe.fromTimestamp(e)}function Cr(n,e){const t=(e.baseMutations||[]).map(i=>wu(n.wt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const l=e.mutations[i+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>wu(n.wt,i)),s=Ne.fromMillis(e.localWriteTimeMs);return new Dh(e.batchId,s,t,r)}function xi(n){const e=Kr(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Kr(n.lastLimboFreeSnapshotVersion):oe.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const o=i.documents.length;return re(o===1,1966,{count:o}),Ut(xo(B_(i.documents[0])))}(n.query):function(i){return Ut(z_(i))}(n.query),new En(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qe.fromBase64String(n.resumeToken))}function W_(n,e){const t=Gr(e.snapshotVersion),r=Gr(e.lastLimboFreeSnapshotVersion);let s;s=Ha(e.target)?j_(n.wt,e.target):$_(n.wt,e.target).gt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qr(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Q_(n){const e=z_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_u(e,e.limit,"L"):e}function Pc(n,e){return new kh(e.largestBatchId,wu(n.wt,e.overlayMutation))}function Bp(n,e){const t=e.path.lastSegment();return[n,ft(e.path.popLast()),t]}function Up(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Gr(r.readTime),documentKey:ft(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{getBundleMetadata(e,t){return jp(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Kr(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return jp(e).put(function(s){return{bundleId:s.id,createTime:Gr(It(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return $p(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:Q_(i.bundledQuery),readTime:Kr(i.readTime)}}(r)})}saveNamedQuery(e,t){return $p(e).put(function(s){return{name:s.name,readTime:Gr(It(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function jp(n){return Qe(n,wl)}function $p(n){return Qe(n,Tl)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const r=t.uid||"";return new Dl(e,r)}getOverlay(e,t){return yi(e).get(Bp(this.userId,t)).next(r=>r?Pc(this.serializer,r):null)}getOverlays(e,t){const r=nn();return P.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((i,o)=>{const l=new kh(t,o);s.push(this.bt(e,l))}),P.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(o=>s.add(ft(o.getCollectionPath())));const i=[];return s.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(yi(e).X(uu,l))}),P.waitFor(i)}getOverlaysForCollection(e,t,r){const s=nn(),i=ft(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return yi(e).J(uu,o).next(l=>{for(const c of l){const u=Pc(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const i=nn();let o;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yi(e).te({index:Jy,range:l},(c,u,f)=>{const p=Pc(this.serializer,u);i.size()<s||p.largestBatchId===o?(i.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>i)}bt(e,t){return yi(e).put(function(s,i,o){const[l,c,u]=Bp(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ya(s.wt,o.mutation)}}(this.serializer,this.userId,t))}}function yi(n){return Qe(n,Il)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{Dt(e){return Qe(e,Th)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?qe.fromUint8Array(r):qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Me(e.integerValue));else if("doubleValue"in e){const r=Me(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),oo(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=An(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(xn(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?c_(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):xl(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ne(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const s of Object.keys(r))this.Nt(s,t),this.Ct(r[s],t)}qt(e,t){var r,s;const i=e.fields||{};this.Mt(t,53);const o=Bs,l=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Mt(t,15),t.xt(Me(l)),this.Nt(o,t),this.Ct(i[o],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const s of r)this.Ct(s,t)}kt(e,t){this.Mt(t,37),J.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Dr.Wt=new Dr;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=255;function gA(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function zp(n){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=gA(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(e/8)}class yA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const s=t.codePointAt(0);this.zt(240|s>>>18),this.zt(128|63&s>>>12),this.zt(128|63&s>>>6),this.zt(128|63&s)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Yt()}en(e){const t=this.tn(e),r=zp(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}rn(e){const t=this.tn(e),r=zp(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}sn(){this._n(fs),this._n(255)}an(){this.un(fs),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===fs?(this._n(fs),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===fs?(this.un(fs),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class _A{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class vA{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class _i{constructor(){this.ln=new yA,this.hn=new _A(this.ln),this.Pn=new vA(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,t,r,s){this.In=e,this.En=t,this.dn=r,this.An=s}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new Vr(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:Aa(this.dn),directionalValue:Aa(this.An),orderedDocumentKey:Aa(t),documentKey:r.path.toArray()}}mn(e,t,r){const s=this.Vn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Fn(n,e){let t=n.In-e.In;return t!==0?t:(t=qp(n.dn,e.dn),t!==0?t:(t=qp(n.An,e.An),t!==0?t:J.comparator(n.En,e.En)))}function qp(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Aa(n){return wy()?function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r}(n):n}function Gp(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(n)}class Kp{constructor(e){this.fn=new Pe((t,r)=>Fe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(re(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=au(e);if(t!==void 0&&!this.Sn(t))return!1;const r=Sr(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.Sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.fn.size>0){const l=this.fn.getIterator().getNext();if(!s.has(l.field.canonicalString())){const c=r[i];if(!this.bn(l,c)||!this.Dn(this.gn[o++],c))return!1}++i}for(;i<r.length;++i){const l=r[i];if(o>=this.gn.length||!this.Dn(this.gn[o++],l))return!1}return!0}vn(){if(this.yn)return null;let e=new Pe(Fe.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ya(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ya(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ya(r.field,r.dir==="asc"?0:1)));return new $a($a.UNKNOWN_ID,this.collectionId,t,io.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n){var e,t;if(re(n instanceof _e||n instanceof Se,20012),n instanceof _e){if(n instanceof __){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(i=>_e.create(n.field,"==",i)))||[];return Se.create(s,"or")}return n}const r=n.filters.map(s=>Y_(s));return Se.create(r,n.op)}function bA(n){if(n.getFilters().length===0)return[];const e=Au(Y_(n));return re(J_(e),7391),Tu(e)||Iu(e)?[e]:e.getFilters()}function Tu(n){return n instanceof _e}function Iu(n){return n instanceof Se&&Ph(n)}function J_(n){return Tu(n)||Iu(n)||function(t){if(t instanceof Se&&pu(t)){for(const r of t.getFilters())if(!Tu(r)&&!Iu(r))return!1;return!0}return!1}(n)}function Au(n){if(re(n instanceof _e||n instanceof Se,34018),n instanceof _e)return n;if(n.filters.length===1)return Au(n.filters[0]);const e=n.filters.map(r=>Au(r));let t=Se.create(e,n.op);return t=Xa(t),J_(t)?t:(re(t instanceof Se,64498),re($s(t),40251),re(t.filters.length>1,57927),t.filters.reduce((r,s)=>Mh(r,s)))}function Mh(n,e){let t;return re(n instanceof _e||n instanceof Se,38388),re(e instanceof _e||e instanceof Se,25473),t=n instanceof _e?e instanceof _e?function(s,i){return Se.create([s,i],"and")}(n,e):Hp(n,e):e instanceof _e?Hp(e,n):function(s,i){if(re(s.filters.length>0&&i.filters.length>0,48005),$s(s)&&$s(i))return m_(s,i.getFilters());const o=pu(s)?s:i,l=pu(s)?i:s,c=o.filters.map(u=>Mh(u,l));return Se.create(c,"or")}(n,e),Xa(t)}function Hp(n,e){if($s(e))return m_(e,n.getFilters());{const t=e.filters.map(r=>Mh(n,r));return Se.create(t,"or")}}function Xa(n){if(re(n instanceof _e||n instanceof Se,11850),n instanceof _e)return n;const e=n.getFilters();if(e.length===1)return Xa(e[0]);if(d_(n))return n;const t=e.map(s=>Xa(s)),r=[];return t.forEach(s=>{s instanceof _e?r.push(s):s instanceof Se&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Se.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.Cn=new Fh}addToCollectionParentIndex(e,t){return this.Cn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Nt.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Nt.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}}class Fh{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Pe(xe.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Pe(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="IndexedDbIndexManager",oa=new Uint8Array(0);class wA{constructor(e,t){this.databaseId=t,this.Fn=new Fh,this.Mn=new Cn(r=>qr(r),(r,s)=>Ao(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const i={collectionId:r,parent:ft(s)};return Qp(e).put(i)}return P.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[jy(t),""],!1,!0);return Qp(e).J(s).next(i=>{for(const o of i){if(o.collectionId!==t)break;r.push(tn(o.parent))}return r})}addFieldIndex(e,t){const r=vi(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=ps(e);return i.next(l=>{o.put(Up(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=vi(e),s=ps(e),i=ds(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=vi(e),r=ds(e),s=ps(e);return t.X().next(()=>r.X()).next(()=>s.X())}createTargetIndexes(e,t){return P.forEach(this.xn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Kp(r).vn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const r=ds(e);let s=!0;const i=new Map;return P.forEach(this.xn(t),o=>this.On(e,o).next(l=>{s&&(s=!!l),i.set(o,l)})).next(()=>{if(s){let o=ye();const l=[];return P.forEach(i,(c,u)=>{G(Wp,`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(c)} to execute ${qr(t)}`);const f=function(M,I){const X=au(I);if(X===void 0)return null;for(const te of Wa(M,X.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(u,c),p=function(M,I){const X=new Map;for(const te of Sr(I))for(const w of Wa(M,te.fieldPath))switch(w.op){case"==":case"in":X.set(te.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return X.set(te.fieldPath.canonicalString(),w.value),Array.from(X.values())}return null}(u,c),m=function(M,I){const X=[];let te=!0;for(const w of Sr(I)){const y=w.kind===0?xp(M,w.fieldPath,M.startAt):Sp(M,w.fieldPath,M.startAt);X.push(y.value),te&&(te=y.inclusive)}return new js(X,te)}(u,c),v=function(M,I){const X=[];let te=!0;for(const w of Sr(I)){const y=w.kind===0?Sp(M,w.fieldPath,M.endAt):xp(M,w.fieldPath,M.endAt);X.push(y.value),te&&(te=y.inclusive)}return new js(X,te)}(u,c),R=this.Nn(c,u,m),V=this.Nn(c,u,v),k=this.Bn(c,u,p),F=this.Ln(c.indexId,f,R,m.inclusive,V,v.inclusive,k);return P.forEach(F,N=>r.Z(N,t.limit).next(M=>{M.forEach(I=>{const X=J.fromSegments(I.documentKey);o.has(X)||(o=o.add(X),l.push(X))})}))}).next(()=>l)}return P.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=bA(Se.create(e.filters,"and")).map(r=>gu(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,s,i,o,l){const c=(t!=null?t.length:1)*Math.max(r.length,i.length),u=c/(t!=null?t.length:1),f=[];for(let p=0;p<c;++p){const m=t?this.kn(t[p/u]):oa,v=this.qn(e,m,r[p%u],s),R=this.Qn(e,m,i[p%u],o),V=l.map(k=>this.qn(e,m,k,!0));f.push(...this.createRange(v,R,V))}return f}qn(e,t,r,s){const i=new Vr(e,J.empty(),t,r);return s?i:i.Rn()}Qn(e,t,r,s){const i=new Vr(e,J.empty(),t,r);return s?i.Rn():i}On(e,t){const r=new Kp(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const l of i)r.wn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,t){let r=2;const s=this.xn(t);return P.forEach(s,i=>this.On(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Pe(Fe.comparator),f=!1;for(const p of c.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:u=u.add(m.field));for(const p of c.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&r===2?1:r)}$n(e,t){const r=new _i;for(const s of Sr(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Tn(s.kind);Dr.Wt.vt(i,o)}return r.cn()}kn(e){const t=new _i;return Dr.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new _i;return Dr.Wt.vt(fo(this.databaseId,t),r.Tn(function(i){const o=Sr(i);return o.length===0?0:o[o.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let s=[];s.push(new _i);let i=0;for(const o of Sr(e)){const l=r[i++];for(const c of s)if(this.Kn(t,o.fieldPath)&&po(l))s=this.Wn(s,o,l);else{const u=c.Tn(o.kind);Dr.Wt.vt(l,u)}}return this.Gn(s)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const l of s){const c=new _i;c.seed(l.cn()),Dr.Wt.vt(o,c.Tn(t.kind)),i.push(c)}return i}Kn(e,t){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=vi(e),s=ps(e);return(t?r.J(cu,IDBKeyRange.bound(t,t)):r.J()).next(i=>{const o=[];return P.forEach(i,l=>s.get([l.indexId,this.uid]).next(c=>{o.push(function(f,p){const m=p?new io(p.sequenceNumber,new Nt(Kr(p.readTime),new J(tn(p.documentKey)),p.largestBatchId)):io.empty(),v=f.fields.map(([R,V])=>new ya(Fe.fromServerFormat(R),V));return new $a(f.indexId,f.collectionGroup,v,m)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ue(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=vi(e),i=ps(e);return this.zn(e).next(o=>s.J(cu,IDBKeyRange.bound(t,t)).next(l=>P.forEach(l,c=>i.put(Up(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return P.forEach(t,(s,i)=>{const o=r.get(s.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(r.set(s.collectionGroup,l),P.forEach(l,c=>this.jn(e,s,c).next(u=>{const f=this.Hn(i,c);return u.isEqual(f)?P.resolve():this.Jn(e,i,c,u,f)}))))})}Yn(e,t,r,s){return ds(e).put(s.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,s){return ds(e).delete(s.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const s=ds(e);let i=new Pe(Fn);return s.te({index:Yy,range:IDBKeyRange.only([r.indexId,this.uid,Aa(this.Un(r,t))])},(o,l)=>{i=i.add(new Vr(r.indexId,t,Gp(l.arrayValue),Gp(l.directionalValue)))}).next(()=>i)}Hn(e,t){let r=new Pe(Fn);const s=this.$n(t,e);if(s==null)return r;const i=au(t);if(i!=null){const o=e.data.field(i.fieldPath);if(po(o))for(const l of o.arrayValue.values||[])r=r.add(new Vr(t.indexId,e.key,this.kn(l),s))}else r=r.add(new Vr(t.indexId,e.key,oa,s));return r}Jn(e,t,r,s,i){G(Wp,"Updating index entries for document '%s'",t.key);const o=[];return function(c,u,f,p,m){const v=c.getIterator(),R=u.getIterator();let V=hs(v),k=hs(R);for(;V||k;){let F=!1,N=!1;if(V&&k){const M=f(V,k);M<0?N=!0:M>0&&(F=!0)}else V!=null?N=!0:F=!0;F?(p(k),k=hs(R)):N?(m(V),V=hs(v)):(V=hs(v),k=hs(R))}}(s,i,Fn,l=>{o.push(this.Yn(e,t,r,l))},l=>{o.push(this.Zn(e,t,r,l))}),P.waitFor(o)}zn(e){let t=1;return ps(e).te({index:Qy,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,l)=>Fn(o,l)).filter((o,l,c)=>!l||Fn(o,c[l-1])!==0);const s=[];s.push(e);for(const o of r){const l=Fn(o,e),c=Fn(o,t);if(l===0)s[0]=e.Rn();else if(l>0&&c<0)s.push(o),s.push(o.Rn());else if(c>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Xn(s[o],s[o+1]))return[];const l=s[o].mn(this.uid,oa,J.empty()),c=s[o+1].mn(this.uid,oa,J.empty());i.push(IDBKeyRange.bound(l,c))}return i}Xn(e,t){return Fn(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yp)}getMinOffset(e,t){return P.mapArray(this.xn(t),r=>this.On(e,r).next(s=>s||ne(44426))).next(Yp)}}function Qp(n){return Qe(n,co)}function ds(n){return Qe(n,$i)}function vi(n){return Qe(n,wh)}function ps(n){return Qe(n,ji)}function Yp(n){re(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;vh(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Nt(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X_=41943040;class ct{static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(n,e,t){const r=n.store(Kt),s=n.store(Ns),i=[],o=IDBKeyRange.only(t.batchId);let l=0;const c=r.te({range:o},(f,p,m)=>(l++,m.delete()));i.push(c.next(()=>{re(l===1,47070,{batchId:t.batchId})}));const u=[];for(const f of t.mutations){const p=Ky(e,f.key.path,t.batchId);i.push(s.delete(p)),u.push(f.key)}return P.waitFor(i).next(()=>u)}function Za(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ne(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(X_,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);class Vl{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.er={}}static St(e,t,r,s){re(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Vl(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ln(e).te({index:kr,range:r},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const i=Ts(e),o=Ln(e);return o.add({}).next(l=>{re(typeof l=="number",49019);const c=new Dh(l,t,r,s),u=function(v,R,V){const k=V.baseMutations.map(N=>Ya(v.wt,N)),F=V.mutations.map(N=>Ya(v.wt,N));return{userId:R,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:k,mutations:F}}(this.serializer,this.userId,c),f=[];let p=new Pe((m,v)=>ue(m.canonicalString(),v.canonicalString()));for(const m of s){const v=Ky(this.userId,m.key.path,l);p=p.add(m.key.path.popLast()),f.push(o.put(u)),f.push(i.put(v,JT))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.er[l]=c.keys()}),P.waitFor(f).next(()=>c)})}lookupMutationBatch(e,t){return Ln(e).get(t).next(r=>r?(re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Cr(this.serializer,r)):null)}tr(e,t){return this.er[t]?P.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.er[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Ln(e).te({index:kr,range:s},(o,l,c)=>{l.userId===this.userId&&(re(l.batchId>=r,47524,{nr:r}),i=Cr(this.serializer,l)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Lr;return Ln(e).te({index:kr,range:t,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Lr],[this.userId,Number.POSITIVE_INFINITY]);return Ln(e).J(kr,t).next(r=>r.map(s=>Cr(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_a(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Ts(e).te({range:s},(o,l,c)=>{const[u,f,p]=o,m=tn(f);if(u===this.userId&&t.path.isEqual(m))return Ln(e).get(p).next(v=>{if(!v)throw ne(61480,{rr:o,batchId:p});re(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:p}),i.push(Cr(this.serializer,v))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(ue);const s=[];return t.forEach(i=>{const o=_a(this.userId,i.path),l=IDBKeyRange.lowerBound(o),c=Ts(e).te({range:l},(u,f,p)=>{const[m,v,R]=u,V=tn(v);m===this.userId&&i.path.isEqual(V)?r=r.add(R):p.done()});s.push(c)}),P.waitFor(s).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=_a(this.userId,r),o=IDBKeyRange.lowerBound(i);let l=new Pe(ue);return Ts(e).te({range:o},(c,u,f)=>{const[p,m,v]=c,R=tn(m);p===this.userId&&r.isPrefixOf(R)?R.length===s&&(l=l.add(v)):f.done()}).next(()=>this.ir(e,l))}ir(e,t){const r=[],s=[];return t.forEach(i=>{s.push(Ln(e).get(i).next(o=>{if(o===null)throw ne(35274,{batchId:i});re(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Cr(this.serializer,o))}))}),P.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Z_(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),P.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return P.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Ts(e).te({range:r},(i,o,l)=>{if(i[0]===this.userId){const c=tn(i[1]);s.push(c)}else l.done()}).next(()=>{re(s.length===0,56720,{_r:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return ev(e,this.userId,t)}ar(e){return tv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Lr,lastStreamToken:""})}}function ev(n,e,t){const r=_a(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Ts(n).te({range:i,ee:!0},(l,c,u)=>{const[f,p,m]=l;f===e&&p===s&&(o=!0),u.done()}).next(()=>o)}function Ln(n){return Qe(n,Kt)}function Ts(n){return Qe(n,Ns)}function tv(n){return Qe(n,ao)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Hr(0)}static lr(){return new Hr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new Hr(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>oe.fromTimestamp(new Ne(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Pr(e,s)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ms(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(re(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let s=0;const i=[];return ms(e).te((o,l)=>{const c=xi(l);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>P.waitFor(i)).next(()=>s)}forEachTarget(e,t){return ms(e).te((r,s)=>{const i=xi(s);t(i)})}hr(e){return Xp(e).get(Ga).next(t=>(re(t!==null,2888),t))}Pr(e,t){return Xp(e).put(Ga,t)}Tr(e,t){return ms(e).put(W_(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qr(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ms(e).te({range:s,index:Wy},(o,l,c)=>{const u=xi(l);Ao(t,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,t,r){const s=[],i=Gn(e);return t.forEach(o=>{const l=ft(o.path);s.push(i.put({targetId:r,path:l})),s.push(this.referenceDelegate.addReference(e,r,o))}),P.waitFor(s)}removeMatchingKeys(e,t,r){const s=Gn(e);return P.forEach(t,i=>{const o=ft(i.path);return P.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=Gn(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Gn(e);let i=ye();return s.te({range:r,ee:!0},(o,l,c)=>{const u=tn(o[1]),f=new J(u);i=i.add(f)}).next(()=>i)}containsKey(e,t){const r=ft(t.path),s=IDBKeyRange.bound([r],[jy(r)],!1,!0);let i=0;return Gn(e).te({index:Eh,ee:!0,range:s},([o,l],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}Rt(e,t){return ms(e).get(t).next(r=>r?xi(r):null)}}function ms(n){return Qe(n,Ms)}function Xp(n){return Qe(n,Br)}function Gn(n){return Qe(n,Fs)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LruGarbageCollector",IA=1048576;function em([n,e],[t,r]){const s=ue(n,t);return s===0?ue(e,r):s}class AA{constructor(e){this.Er=e,this.buffer=new Pe(em),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();em(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){G(Zp,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hr(t)?G(Zp,"Ignoring IndexedDB error during garbage collection: ",t):await Zr(t)}await this.mr(3e5)})}}class xA{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(Bt.le);const r=new AA(t);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(Jp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jp):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,s,i,o,l,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,t))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),vs()<=Ee.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function rv(n,e){return new xA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.db=e,this.garbageCollector=rv(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,(r,s)=>t(s))}addReference(e,t,r){return aa(e,r)}removeReference(e,t,r){return aa(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aa(e,t)}Dr(e,t){return function(s,i){let o=!1;return tv(s).ne(l=>ev(s,l,i).next(c=>(c&&(o=!0),P.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.br(e,(o,l)=>{if(l<=t){const c=this.Dr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,oe.min()),Gn(e).delete(function(p){return[0,ft(p.path)]}(o))))});s.push(c)}}).next(()=>P.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aa(e,t)}br(e,t){const r=Gn(e);let s,i=Bt.le;return r.te({index:Eh},([o,l],{path:c,sequenceNumber:u})=>{o===0?(i!==Bt.le&&t(new J(tn(s)),i),i=u,s=c):i=Bt.le}).next(()=>{i!==Bt.le&&t(new J(tn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aa(n,e){return Gn(n).put(function(r,s){return{targetId:0,path:ft(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.changes=new Cn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ir(e).put(r)}removeEntry(e,t,r){return Ir(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ja(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=$e.newInvalidDocument(t);return Ir(e).te({index:va,range:IDBKeyRange.only(bi(t))},(s,i)=>{r=this.Cr(t,i)}).next(()=>r)}Fr(e,t){let r={size:0,document:$e.newInvalidDocument(t)};return Ir(e).te({index:va,range:IDBKeyRange.only(bi(t))},(s,i)=>{r={document:this.Cr(t,i),size:Za(i)}}).next(()=>r)}getEntries(e,t){let r=Ot();return this.Mr(e,t,(s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)}).next(()=>r)}Or(e,t){let r=Ot(),s=new Le(J.comparator);return this.Mr(e,t,(i,o)=>{const l=this.Cr(i,o);r=r.insert(i,l),s=s.insert(i,Za(o))}).next(()=>({documents:r,Nr:s}))}Mr(e,t,r){if(t.isEmpty())return P.resolve();let s=new Pe(rm);t.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(bi(s.first()),bi(s.last())),o=s.getIterator();let l=o.getNext();return Ir(e).te({index:va,range:i},(c,u,f)=>{const p=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&rm(l,p)<0;)r(l,null),l=o.getNext();l&&l.isEqual(p)&&(r(l,u),l=o.hasNext()?o.getNext():null),l?f.H(bi(l)):f.done()}).next(()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,l=[o.popLast().toArray(),o.lastSegment(),Ja(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ir(e).J(IDBKeyRange.bound(l,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let f=Ot();for(const p of u){const m=this.Cr(J.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(So(t,m)||s.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,s){let i=Ot();const o=nm(t,r),l=nm(t,Nt.max());return Ir(e).te({index:Hy,range:IDBKeyRange.bound(o,l,!0)},(c,u,f)=>{const p=this.Cr(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(p.key,p),i.size===s&&f.done()}).next(()=>i)}newChangeBuffer(e){return new RA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tm(e).get(lu).next(t=>(re(!!t,20021),t))}vr(e,t){return tm(e).put(lu,t)}Cr(e,t){if(t){const r=dA(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return $e.newInvalidDocument(e)}}function iv(n){return new PA(n)}class RA extends sv{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Cn(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Pe((i,o)=>ue(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const l=this.Lr.get(i);if(t.push(this.Br.removeEntry(e,i,l.readTime)),o.isValidDocument()){const c=Lp(this.Br.serializer,o);s=s.add(i.path.popLast());const u=Za(c);r+=u-l.size,t.push(this.Br.addEntry(e,i,c))}else if(r-=l.size,this.trackRemovals){const c=Lp(this.Br.serializer,o.convertToNoDocument(oe.min()));t.push(this.Br.addEntry(e,i,c))}}),s.forEach(i=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Br.updateMetadata(e,r)),P.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:s})=>(s.forEach((i,o)=>{this.Lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function tm(n){return Qe(n,lo)}function Ir(n){return Qe(n,qa)}function bi(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nm(n,e){const t=e.documentKey.path.toArray();return[n,Ja(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rm(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=ue(t[i],r[i]),s)return s;return s=ue(t.length,r.length),s||(s=ue(t[t.length-2],r[r.length-2]),s||ue(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Ki(r.mutation,s,St.empty(),Ne.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ye()){const s=nn();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Ii();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ye()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,s){let i=Ot();const o=Gi(),l=function(){return Gi()}();return t.forEach((c,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Dn)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ki(f.mutation,u,f.mutation.getFieldMask(),Ne.now())):o.set(u.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,f)=>o.set(u,f)),t.forEach((u,f)=>{var p;return l.set(u,new CA(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Gi();let s=new Le((o,l)=>o-l),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let f=r.get(c)||St.empty();f=l.applyToLocalView(u,f),r.set(c,f);const p=(s.get(l.batchId)||ye()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,f=c.value,p=I_();f.forEach(m=>{if(!i.has(m)){const v=C_(t.get(m),r.get(m));v!==null&&p.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):P.resolve(nn());let l=so,c=i;return o.next(u=>P.forEach(u,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ye())).next(f=>({batchId:l,changes:T_(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let s=Ii();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Ii();return this.indexManager.getCollectionParents(e,i).next(l=>P.forEach(l,c=>{const u=function(p,m){return new Ys(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,$e.newInvalidDocument(f)))});let l=Ii();return o.forEach((c,u)=>{const f=i.get(c);f!==void 0&&Ki(f.mutation,u,St.empty(),Ne.now()),So(t,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return P.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:It(s.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(s){return{name:s.name,query:Q_(s.bundledQuery),readTime:It(s.readTime)}}(t)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.overlays=new Le(J.comparator),this.Qr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nn();return P.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.bt(e,t,i)}),P.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){const s=nn(),i=t.length+1,o=new J(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return P.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Le((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=nn(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const l=nn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>l.set(u,f)),!(l.size()>=s)););return P.resolve(l)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kh(t,r));let i=this.Qr.get(t);i===void 0&&(i=ye(),this.Qr.set(t,i)),this.Qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.$r=new Pe(Ye.Ur),this.Kr=new Pe(Ye.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ye(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ye(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new J(new xe([])),r=new Ye(t,e),s=new Ye(t,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new J(new xe([])),r=new Ye(t,e),s=new Ye(t,e+1);let i=ye();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Ye(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return J.comparator(e.key,t.key)||ue(e.Zr,t.Zr)}static Wr(e,t){return ue(e.Zr,t.Zr)||J.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Pe(Ye.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dh(i,t,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Ye(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ti(r),i=s<0?0:s;return P.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?Lr:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ye(t,0),s=new Ye(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),P.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(ue);return t.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new J(i),0);let l=new Pe(ue);return this.Xr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Zr)),!0)},o),P.resolve(this.ni(l))}ni(e){const t=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){re(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(t.mutations,s=>{const i=new Ye(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ye(t,0),s=this.Xr.firstAfterOrEqual(r);return P.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.ii=e,this.docs=function(){return new Le(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(t))}getEntries(e,t){let r=Ot();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$e.newInvalidDocument(s))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Ot();const o=t.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vh($y(f),r)<=0||(s.has(f.key)||So(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return P.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ne(9500)}si(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new MA(this)}getSize(e){return P.resolve(this.size)}}class MA extends sv{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.persistence=e,this.oi=new Cn(t=>qr(t),Ao),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this._i=0,this.ai=new Lh,this.targetCount=0,this.ui=Hr.cr()}forEachTarget(e,t){return this.oi.forEach((r,s)=>t(s)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),P.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Hr(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Tr(t),P.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),P.waitFor(i).next(()=>s)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),P.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),P.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t){this.ci={},this.overlays={},this.li=new Bt(0),this.hi=!1,this.hi=!0,this.Pi=new kA,this.referenceDelegate=e(this),this.Ti=new FA(this),this.indexManager=new EA,this.remoteDocumentCache=function(s){return new NA(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new H_(t),this.Ei=new DA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new OA(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);const s=new LA(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,t){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class LA extends qy{constructor(e){super(),this.currentSequenceNumber=e}}class kl{constructor(e){this.persistence=e,this.Vi=new Lh,this.mi=null}static fi(e){return new kl(e)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||t.removeEntry(s,oe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return P.or([()=>P.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class el{constructor(e,t){this.persistence=e,this.yi=new Cn(r=>ft(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=rv(this,t)}static fi(e,t){return new el(e,t)}di(){}Ai(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return P.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?P.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,t).next(l=>{l||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),P.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ea(e.data.value)),t}Dr(e,t,r){return P.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.yi.get(t);return P.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.serializer=e}q(e,t,r,s){const i=new bl("createOrUpgrade",t);r<1&&s>=1&&(function(c){c.createObjectStore(Io)}(e),function(c){c.createObjectStore(ao,{keyPath:YT}),c.createObjectStore(Kt,{keyPath:pp,autoIncrement:!0}).createIndex(kr,mp,{unique:!0}),c.createObjectStore(Ns)}(e),sm(e),function(c){c.createObjectStore(Pr)}(e));let o=P.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore(Fs),c.deleteObjectStore(Ms),c.deleteObjectStore(Br)}(e),sm(e)),o=o.next(()=>function(c){const u=c.store(Br),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put(Ga,f)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(Kt).J().next(p=>{c.deleteObjectStore(Kt),c.createObjectStore(Kt,{keyPath:pp,autoIncrement:!0}).createIndex(kr,mp,{unique:!0});const m=u.store(Kt),v=p.map(R=>m.put(R));return P.waitFor(v)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Ls,{keyPath:iI})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.wi(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore(lo)}(e),this.Si(i)))),r<7&&s>=7&&(o=o.next(()=>this.bi(i))),r<8&&s>=8&&(o=o.next(()=>this.Di(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.Ci(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(wl,{keyPath:oI})})(e),function(c){c.createObjectStore(Tl,{keyPath:aI})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(Il,{keyPath:pI});u.createIndex(uu,mI,{unique:!1}),u.createIndex(Jy,gI,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(qa,{keyPath:XT});u.createIndex(va,ZT),u.createIndex(Hy,eI)}(e)).next(()=>this.Fi(e,i)).next(()=>e.deleteObjectStore(Pr))),r<14&&s>=14&&(o=o.next(()=>this.Mi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore(wh,{keyPath:lI,autoIncrement:!0}).createIndex(cu,cI,{unique:!1}),c.createObjectStore(ji,{keyPath:uI}).createIndex(Qy,hI,{unique:!1}),c.createObjectStore($i,{keyPath:fI}).createIndex(Yy,dI,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{t.objectStore(ji).clear()}).next(()=>{t.objectStore($i).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Th,{keyPath:yI})})(e)})),r<18&&s>=18&&wy()&&(o=o.next(()=>{t.objectStore(ji).clear()}).next(()=>{t.objectStore($i).clear()})),o}Si(e){let t=0;return e.store(Pr).te((r,s)=>{t+=Za(s)}).next(()=>{const r={byteSize:t};return e.store(lo).put(lu,r)})}wi(e){const t=e.store(ao),r=e.store(Kt);return t.J().next(s=>P.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Lr],[i.userId,i.lastAcknowledgedBatchId]);return r.J(kr,o).next(l=>P.forEach(l,c=>{re(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Cr(this.serializer,c);return Z_(e,i.userId,u).next(()=>{})}))}))}bi(e){const t=e.store(Fs),r=e.store(Pr);return e.store(Br).get(Ga).next(s=>{const i=[];return r.te((o,l)=>{const c=new xe(o),u=function(p){return[0,ft(p)]}(c);i.push(t.get(u).next(f=>f?P.resolve():(p=>t.put({targetId:0,path:ft(p),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>P.waitFor(i))})}Di(e,t){e.createObjectStore(co,{keyPath:sI});const r=t.store(co),s=new Fh,i=o=>{if(s.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:ft(c)})}};return t.store(Pr).te({ee:!0},(o,l)=>{const c=new xe(o);return i(c.popLast())}).next(()=>t.store(Ns).te({ee:!0},([o,l,c],u)=>{const f=tn(l);return i(f.popLast())}))}Ci(e){const t=e.store(Ms);return t.te((r,s)=>{const i=xi(s),o=W_(this.serializer,i);return t.put(o)})}Fi(e,t){const r=t.store(Pr),s=[];return r.te((i,o)=>{const l=t.store(qa),c=function(p){return p.document?new J(xe.fromString(p.document.name).popFirst(5)):p.noDocument?J.fromSegments(p.noDocument.path):p.unknownDocument?J.fromSegments(p.unknownDocument.path):ne(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(l.put(u))}).next(()=>P.waitFor(s))}Mi(e,t){const r=t.store(Kt),s=iv(this.serializer),i=new Bh(kl.fi,this.serializer.wt);return r.J().next(o=>{const l=new Map;return o.forEach(c=>{var u;let f=(u=l.get(c.userId))!==null&&u!==void 0?u:ye();Cr(this.serializer,c).keys().forEach(p=>f=f.add(p)),l.set(c.userId,f)}),P.forEach(l,(c,u)=>{const f=new et(u),p=Dl.St(this.serializer,f),m=i.getIndexManager(f),v=Vl.St(f,this.serializer,m,i.referenceDelegate);return new ov(s,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new hu(t,Bt.le),c).next()})})}}function sm(n){n.createObjectStore(Fs,{keyPath:nI}).createIndex(Eh,rI,{unique:!0}),n.createObjectStore(Ms,{keyPath:"targetId"}).createIndex(Wy,tI,{unique:!0}),n.createObjectStore(Br)}const Bn="IndexedDbPersistence",Rc=18e5,Cc=5e3,Dc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UA="main";class Uh{constructor(e,t,r,s,i,o,l,c,u,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=i,this.window=o,this.document=l,this.Oi=u,this.Ni=f,this.Bi=p,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=m=>Promise.resolve(),!Uh.C())throw new Y(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SA(this,s),this.Ui=t+UA,this.serializer=new H_(c),this.Ki=new Jn(this.Ui,this.Bi,new BA(this.serializer)),this.Pi=new mA,this.Ti=new TA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iv(this.serializer),this.Ei=new pA,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,f===!1&&Et(Bn,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Dc);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Bt(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>la(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(hr(e))return G(Bn,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(Bn,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Ei(e).get(us).next(t=>P.resolve(this.ts(t)))}ns(e){return la(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Rc)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Qe(t,Ls);return r.J().next(s=>{const i=this._s(s,Rc),o=s.filter(l=>i.indexOf(l)===-1);return P.forEach(o,l=>r.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?P.resolve(!0):Ei(e).get(us).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Cc)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Y(U.FAILED_PRECONDITION,Dc);return!1}}return!(!this.networkEnabled||!this.inForeground)||la(e).J().next(r=>this._s(r,Cc).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(i||o&&l)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&G(Bn,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Io,Ls],e=>{const t=new hu(e,Bt.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>la(e).J().next(t=>this._s(t,Rc).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Vl.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wA(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Dl.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){G(Bn,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(c){return c===18?bI:c===17?t_:c===16?vI:c===15?Ih:c===14?e_:c===13?Zy:c===12?_I:c===11?Xy:void ne(60245)}(this.Bi);let o;return this.Ki.runTransaction(e,s,i,l=>(o=new hu(l,this.li?this.li.next():Bt.le),t==="readwrite-primary"?this.Yi(o).next(c=>!!c||this.Zi(o)).next(c=>{if(!c)throw Et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Y(U.FAILED_PRECONDITION,zy);return r(o)}).next(c=>this.es(o).next(()=>c)):this.Es(o).next(()=>r(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Es(e){return Ei(e).get(us).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Cc)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Y(U.FAILED_PRECONDITION,Dc)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ei(e).put(us,t)}static C(){return Jn.C()}Xi(e){const t=Ei(e);return t.get(us).next(r=>this.ts(r)?(G(Bn,"Releasing primary lease."),t.delete(us)):P.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;Ey()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return G(Bn,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Et(Bn,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Et("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ei(n){return Qe(n,Io)}function la(n){return Qe(n,Ls)}function jA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ds=r,this.As=s}static Rs(e,t){let r=ye(),s=ye();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jh(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Ey()?8:Gy(La())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ws(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $A;return this.bs(e,t,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,t,o,l.size)})}).next(()=>i.result)}Ds(e,t,r,s){return r.documentReadCount<this.gs?(vs()<=Ee.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(vs()<=Ee.DEBUG&&G("QueryEngine","Query:",bs(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(vs()<=Ee.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):P.resolve())}ws(e,t){if(Pp(t))return P.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=_u(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.vs(t,l);return this.Cs(t,u,o,c.readTime)?this.ws(e,_u(t,null,"F")):this.Fs(e,u,t,c)}))})))}Ss(e,t,r,s){return Pp(t)||s.isEqual(oe.min())?P.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(t,i);return this.Cs(t,o,r,s)?P.resolve(null):(vs()<=Ee.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bs(t)),this.Fs(e,o,t,zT(s,so)).next(l=>l))})}vs(e,t){let r=new Pe(E_(e));return t.forEach((s,i)=>{So(e,i)&&(r=r.add(i))}),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}bs(e,t,r){return vs()<=Ee.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",bs(t)),this.ys.getDocumentsMatchingQuery(e,t,Nt.min(),r)}Fs(e,t,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="LocalStore",zA=3e8;class qA{constructor(e,t,r,s){this.persistence=e,this.Ms=t,this.serializer=s,this.xs=new Le(ue),this.Os=new Cn(i=>qr(i),Ao),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ov(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function lv(n,e,t,r){return new qA(n,e,t,r)}async function cv(n,e){const t=fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ye();for(const u of s){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of i){l.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:l}))})})}function GA(n,e){const t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,f){const p=u.batch,m=p.keys();let v=P.resolve();return m.forEach(R=>{v=v.next(()=>f.getEntry(c,R)).next(V=>{const k=u.docVersions.get(R);re(k!==null,48541),V.version.compareTo(k)<0&&(p.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),f.addEntry(V)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ye();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function uv(n){const e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function KA(n,e){const t=fe(n),r=e.snapshotVersion;let s=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.xs;const l=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;l.push(t.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>t.Ti.addMatchingKeys(i,f.addedDocuments,p)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(qe.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(p,v),function(V,k,F){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=zA?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,v,f)&&l.push(t.Ti.updateTargetData(i,v))});let c=Ot(),u=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(HA(i,o,e.documentUpdates).next(f=>{c=f.qs,u=f.Qs})),!r.isEqual(oe.min())){const f=t.Ti.getLastRemoteSnapshotVersion(i).next(p=>t.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return P.waitFor(l).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.xs=s,i))}function HA(n,e,t){let r=ye(),s=ye();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Ot();return t.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G($h,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function WA(n,e){const t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Lr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QA(n,e){const t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ti.getTargetData(r,e).next(i=>i?(s=i,P.resolve(s)):t.Ti.allocateTargetId(r).next(o=>(s=new En(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function xu(n,e,t){const r=fe(n),s=r.xs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!hr(o))throw o;G($h,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function im(n,e,t){const r=fe(n);let s=oe.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,f){const p=fe(c),m=p.Os.get(f);return m!==void 0?P.resolve(p.xs.get(m)):p.Ti.getTargetData(u,f)}(r,o,Ut(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?s:oe.min(),t?i:ye())).next(l=>(YA(r,NI(e),l),{documents:l,$s:i})))}function YA(n,e,t){let r=n.Ns.get(e)||oe.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Ns.set(e,r)}class om{constructor(){this.activeTargetIds=jI()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hv{constructor(){this.xo=new om,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new om,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="ConnectivityMonitor";class lm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(am,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){G(am,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca=null;function Su(){return ca===null?ca=function(){return 268435456+Math.round(2147483648*Math.random())}():ca++,"0x"+ca.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc="RestConnection",XA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZA{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Ka?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,t,r,s,i){const o=Su(),l=this.jo(e,t.toUriEncodedString());G(Vc,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:u}=new URL(l),f=mh(u);return this.Jo(e,l,c,r,f).then(p=>(G(Vc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Xn(Vc,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Yo(e,t,r,s,i,o){return this.zo(e,t,r,s,i)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,t){const r=XA[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class tx extends ZA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=Su();return new Promise((l,c)=>{const u=new Vy;u.setWithCredentials(!0),u.listenOnce(ky.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ga.NO_ERROR:const p=u.getResponseJson();G(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ga.TIMEOUT:G(lt,`RPC '${e}' ${o} timed out`),c(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:const m=u.getStatus();if(G(lt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const R=v==null?void 0:v.error;if(R&&R.status&&R.message){const V=function(F){const N=F.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(N)>=0?N:U.UNKNOWN}(R.status);c(new Y(V,R.message))}else c(new Y(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{G(lt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);G(lt,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",f,r,15)})}T_(e,t,r){const s=Su(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=My(),l=Ny(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=i.join("");G(lt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const p=o.createWebChannel(f,c);let m=!1,v=!1;const R=new ex({Zo:k=>{v?G(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(G(lt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),G(lt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Xo:()=>p.close()}),V=(k,F,N)=>{k.listen(F,M=>{try{N(M)}catch(I){setTimeout(()=>{throw I},0)}})};return V(p,Ti.EventType.OPEN,()=>{v||(G(lt,`RPC '${e}' stream ${s} transport opened.`),R.__())}),V(p,Ti.EventType.CLOSE,()=>{v||(v=!0,G(lt,`RPC '${e}' stream ${s} transport closed`),R.u_())}),V(p,Ti.EventType.ERROR,k=>{v||(v=!0,Xn(lt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),R.u_(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),V(p,Ti.EventType.MESSAGE,k=>{var F;if(!v){const N=k.data[0];re(!!N,16349);const M=N,I=(M==null?void 0:M.error)||((F=M[0])===null||F===void 0?void 0:F.error);if(I){G(lt,`RPC '${e}' stream ${s} received error:`,I);const X=I.status;let te=function(_){const T=Ge[_];if(T!==void 0)return k_(T)}(X),w=I.message;te===void 0&&(te=U.INTERNAL,w="Unknown error status: "+X+" with message "+I.message),v=!0,R.u_(new Y(te,w)),p.close()}else G(lt,`RPC '${e}' stream ${s} received:`,N),R.c_(N)}}),V(l,Oy.STAT_EVENT,k=>{k.stat===iu.PROXY?G(lt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===iu.NOPROXY&&G(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.a_()},0),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return typeof window<"u"?window:null}function xa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){return new rA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=s,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,t-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="PersistentStream";class dv{constructor(e,t,r,s,i,o,l,c){this.xi=e,this.y_=r,this.w_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new fv(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Et(t.toString()),Et("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===t&&this.K_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return G(cm,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(G(cm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rx extends dv{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=oA(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?It(o.readTime):oe.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=Eu(this.serializer),t.addTarget=function(i,o){let l;const c=o.target;if(l=Ha(c)?{documents:j_(i,c)}:{query:$_(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M_(i,o.resumeToken);const u=vu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){l.readTime=Gs(i,o.snapshotVersion.toTimestamp());const u=vu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=lA(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=Eu(this.serializer),t.removeTarget=e,this.L_(t)}}class sx extends dv{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=aA(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=Eu(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ya(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{}class ox extends ix{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,bu(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Yo(e,t,r,s,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,bu(t,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class ax{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Et(t),this.oa=!1):G("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class lx{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{r.enqueueAndForget(async()=>{es(this)&&(G(Wr,"Restarting streams for network reachability change."),await async function(c){const u=fe(c);u.Ta.add(4),await Ro(u),u.da.set("Unknown"),u.Ta.delete(4),await Nl(u)}(this))})}),this.da=new ax(r,s)}}async function Nl(n){if(es(n))for(const e of n.Ia)await e(!0)}async function Ro(n){for(const e of n.Ia)await e(!1)}function pv(n,e){const t=fe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Kh(t)?Gh(t):Xs(t).M_()&&qh(t,e))}function zh(n,e){const t=fe(n),r=Xs(t);t.Pa.delete(e),r.M_()&&mv(t,e),t.Pa.size===0&&(r.M_()?r.N_():es(t)&&t.da.set("Unknown"))}function qh(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xs(n).H_(e)}function mv(n,e){n.Aa.Ke(e),Xs(n).J_(e)}function Gh(n){n.Aa=new ZI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Xs(n).start(),n.da._a()}function Kh(n){return es(n)&&!Xs(n).F_()&&n.Pa.size>0}function es(n){return fe(n).Ta.size===0}function gv(n){n.Aa=void 0}async function cx(n){n.da.set("Online")}async function ux(n){n.Pa.forEach((e,t)=>{qh(n,e)})}async function hx(n,e){gv(n),Kh(n)?(n.da.ca(e),Gh(n)):n.da.set("Unknown")}async function fx(n,e,t){if(n.da.set("Online"),e instanceof N_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Pa.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Pa.delete(l),s.Aa.removeTarget(l))}(n,e)}catch(r){G(Wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tl(n,r)}else if(e instanceof Ia?n.Aa.Xe(e):e instanceof O_?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(oe.min()))try{const r=await uv(n.localStore);t.compareTo(r)>=0&&await function(i,o){const l=i.Aa.It(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.Pa.get(u);f&&i.Pa.set(u,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const f=i.Pa.get(c);if(!f)return;i.Pa.set(c,f.withResumeToken(qe.EMPTY_BYTE_STRING,f.snapshotVersion)),mv(i,c);const p=new En(f.target,c,u,f.sequenceNumber);qh(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){G(Wr,"Failed to raise snapshot:",r),await tl(n,r)}}async function tl(n,e,t){if(!hr(e))throw e;n.Ta.add(1),await Ro(n),n.da.set("Offline"),t||(t=()=>uv(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{G(Wr,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Nl(n)})}function yv(n,e){return e().catch(t=>tl(n,t,e))}async function Co(n){const e=fe(n),t=nr(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:Lr;for(;dx(e);)try{const s=await WA(e.localStore,r);if(s===null){e.ha.length===0&&t.N_();break}r=s.batchId,px(e,s)}catch(s){await tl(e,s)}_v(e)&&vv(e)}function dx(n){return es(n)&&n.ha.length<10}function px(n,e){n.ha.push(e);const t=nr(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function _v(n){return es(n)&&!nr(n).F_()&&n.ha.length>0}function vv(n){nr(n).start()}async function mx(n){nr(n).ta()}async function gx(n){const e=nr(n);for(const t of n.ha)e.Z_(t.mutations)}async function yx(n,e,t){const r=n.ha.shift(),s=Vh.from(r,e,t);await yv(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Co(n)}async function _x(n,e){e&&nr(n).Y_&&await async function(r,s){if(function(o){return JI(o)&&o!==U.ABORTED}(s.code)){const i=r.ha.shift();nr(r).O_(),await yv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Co(r)}}(n,e),_v(n)&&vv(n)}async function um(n,e){const t=fe(n);t.asyncQueue.verifyOperationInProgress(),G(Wr,"RemoteStore received new credentials");const r=es(t);t.Ta.add(3),await Ro(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Nl(t)}async function vx(n,e){const t=fe(n);e?(t.Ta.delete(2),await Nl(t)):e||(t.Ta.add(2),await Ro(t),t.da.set("Unknown"))}function Xs(n){return n.Ra||(n.Ra=function(t,r,s){const i=fe(t);return i.ra(),new rx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:cx.bind(null,n),n_:ux.bind(null,n),i_:hx.bind(null,n),j_:fx.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),Kh(n)?Gh(n):n.da.set("Unknown")):(await n.Ra.stop(),gv(n))})),n.Ra}function nr(n){return n.Va||(n.Va=function(t,r,s){const i=fe(t);return i.ra(),new sx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:mx.bind(null,n),i_:_x.bind(null,n),X_:gx.bind(null,n),ea:yx.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Co(n)):(await n.Va.stop(),n.ha.length>0&&(G(Wr,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,l=new Hh(e,t,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wh(n,e){if(Et("AsyncQueue",`${e}: ${n}`),hr(n))return new Y(U.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{static emptySet(e){return new Ds(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=Ii(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.ma=new Le(J.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):ne(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ks{constructor(e,t,r,s,i,o,l,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Ks(e,t,Ds.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class Ex{constructor(){this.queries=fm(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const s=fe(t),i=s.queries;s.queries=fm(),i.forEach((o,l)=>{for(const c of l.ya)c.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function fm(){return new Cn(n=>b_(n),Sl)}async function bv(n,e){const t=fe(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.wa()&&e.Sa()&&(r=2):(i=new bx,r=e.Sa()?0:1);try{switch(r){case 0:i.pa=await t.onListen(s,!0);break;case 1:i.pa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const l=Wh(o,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,i),i.ya.push(e),e.Da(t.onlineState),i.pa&&e.va(i.pa)&&Qh(t)}async function Ev(n,e){const t=fe(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?s=e.Sa()?0:1:!i.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wx(n,e){const t=fe(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const l of o.ya)l.va(s)&&(r=!0);o.pa=s}}r&&Qh(t)}function Tx(n,e,t){const r=fe(n),s=r.queries.get(e);if(s)for(const i of s.ya)i.onError(t);r.queries.delete(e)}function Qh(n){n.ba.forEach(e=>{e.next()})}var Pu,dm;(dm=Pu||(Pu={})).Ca="default",dm.Cache="cache";class wv{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ks(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Pu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.key=e}}class Iv{constructor(e){this.key=e}}class Ix{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ye(),this.mutatedKeys=ye(),this.Ha=E_(e),this.Ja=new Ds(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new hm,s=t?t.Ja:this.Ja;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),v=So(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),V=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;m&&v?m.data.isEqual(v.data)?R!==V&&(r.track({type:3,doc:v}),k=!0):this.eu(m,v)||(r.track({type:2,doc:v}),k=!0,(c&&this.Ha(v,c)>0||u&&this.Ha(v,u)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),k=!0):m&&!v&&(r.track({type:1,doc:m}),k=!0,(c||u)&&(l=!0)),k&&(v?(o=o.add(v),i=V?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ja:o,Xa:r,Cs:l,mutatedKeys:i}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((f,p)=>function(v,R){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:k})}};return V(v)-V(R)}(f.type,p.type)||this.Ha(f.doc,p.doc)),this.tu(r),s=s!=null&&s;const l=t&&!s?this.nu():[],c=this.ja.size===0&&this.current&&!s?1:0,u=c!==this.za;return this.za=c,o.length!==0||u?{snapshot:new Ks(this.query,e.Ja,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:l}:{ru:l}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new hm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=ye(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new Iv(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new Tv(r))}),t}su(e){this.Ga=e.$s,this.ja=ye();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return Ks.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Yh="SyncEngine";class Ax{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xx{constructor(e){this.key=e,this._u=!1}}class Sx{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Cn(l=>b_(l),Sl),this.cu=new Map,this.lu=new Set,this.hu=new Le(J.comparator),this.Pu=new Map,this.Tu=new Lh,this.Iu={},this.Eu=new Map,this.du=Hr.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function Px(n,e,t=!0){const r=Cv(n);let s;const i=r.uu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await Av(r,e,t,!0),s}async function Rx(n,e){const t=Cv(n);await Av(t,e,!0,!1)}async function Av(n,e,t,r){const s=await QA(n.localStore,Ut(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let l;return r&&(l=await Cx(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&pv(n.remoteStore,s),l}async function Cx(n,e,t,r,s){n.Ru=(p,m,v)=>async function(V,k,F,N){let M=k.view.Za(F);M.Cs&&(M=await im(V.localStore,k.query,!1).then(({documents:w})=>k.view.Za(w,M)));const I=N&&N.targetChanges.get(k.targetId),X=N&&N.targetMismatches.get(k.targetId)!=null,te=k.view.applyChanges(M,V.isPrimaryClient,I,X);return mm(V,k.targetId,te.ru),te.snapshot}(n,p,m,v);const i=await im(n.localStore,e,!0),o=new Ix(e,i.$s),l=o.Za(i.documents),c=Po.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(l,n.isPrimaryClient,c);mm(n,t,u.ru);const f=new Ax(e,t,o);return n.uu.set(e,f),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),u.snapshot}async function Dx(n,e,t){const r=fe(n),s=r.uu.get(e),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(o=>!Sl(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xu(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&zh(r.remoteStore,s.targetId),Ru(r,s.targetId)}).catch(Zr)):(Ru(r,s.targetId),await xu(r.localStore,s.targetId,!0))}async function Vx(n,e){const t=fe(n),r=t.uu.get(e),s=t.cu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zh(t.remoteStore,r.targetId))}async function kx(n,e,t){const r=Dv(n);try{const s=await function(o,l){const c=fe(o),u=Ne.now(),f=l.reduce((v,R)=>v.add(R.key),ye());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let R=Ot(),V=ye();return c.Bs.getEntries(v,f).next(k=>{R=k,R.forEach((F,N)=>{N.isValidDocument()||(V=V.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,R)).next(k=>{p=k;const F=[];for(const N of l){const M=QI(N,p.get(N.key).overlayedDocument);M!=null&&F.push(new Dn(N.key,M,h_(M.value.mapValue),Pt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,F,l)}).next(k=>{m=k;const F=k.applyToLocalDocumentSet(p,V);return c.documentOverlayCache.saveOverlays(v,k.batchId,F)})}).then(()=>({batchId:m.batchId,changes:T_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Iu[o.currentUser.toKey()];u||(u=new Le(ue)),u=u.insert(l,c),o.Iu[o.currentUser.toKey()]=u}(r,s.batchId,t),await Do(r,s.changes),await Co(r.remoteStore)}catch(s){const i=Wh(s,"Failed to persist write");t.reject(i)}}async function xv(n,e){const t=fe(n);try{const r=await KA(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Pu.get(i);o&&(re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o._u=!0:s.modifiedDocuments.size>0?re(o._u,14607):s.removedDocuments.size>0&&(re(o._u,42227),o._u=!1))}),await Do(t,r,e)}catch(r){await Zr(r)}}function pm(n,e,t){const r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.uu.forEach((i,o)=>{const l=o.view.Da(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let u=!1;c.queries.forEach((f,p)=>{for(const m of p.ya)m.Da(l)&&(u=!0)}),u&&Qh(c)}(r.eventManager,e),s.length&&r.au.j_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ox(n,e,t){const r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Pu.get(e),i=s&&s.key;if(i){let o=new Le(J.comparator);o=o.insert(i,$e.newNoDocument(i,oe.min()));const l=ye().add(i),c=new Cl(oe.min(),new Map,new Le(ue),o,l);await xv(r,c),r.hu=r.hu.remove(i),r.Pu.delete(e),Jh(r)}else await xu(r.localStore,e,!1).then(()=>Ru(r,e,t)).catch(Zr)}async function Nx(n,e){const t=fe(n),r=e.batch.batchId;try{const s=await GA(t.localStore,e);Pv(t,r,null),Sv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Do(t,s)}catch(s){await Zr(s)}}async function Mx(n,e,t){const r=fe(n);try{const s=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(re(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})}(r.localStore,e);Pv(r,e,t),Sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Do(r,s)}catch(s){await Zr(s)}}function Sv(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function Pv(n,e,t){const r=fe(n);let s=r.Iu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Iu[r.currentUser.toKey()]=s}}function Ru(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.cu.get(e))n.uu.delete(r),t&&n.au.Vu(r,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(r=>{n.Tu.containsKey(r)||Rv(n,r)})}function Rv(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(zh(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),Jh(n))}function mm(n,e,t){for(const r of t)r instanceof Tv?(n.Tu.addReference(r.key,e),Fx(n,r)):r instanceof Iv?(G(Yh,"Document no longer in limbo: "+r.key),n.Tu.removeReference(r.key,e),n.Tu.containsKey(r.key)||Rv(n,r.key)):ne(19791,{mu:r})}function Fx(n,e){const t=e.key,r=t.path.canonicalString();n.hu.get(t)||n.lu.has(r)||(G(Yh,"New document in limbo: "+t),n.lu.add(r),Jh(n))}function Jh(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new J(xe.fromString(e)),r=n.du.next();n.Pu.set(r,new xx(t)),n.hu=n.hu.insert(t,r),pv(n.remoteStore,new En(Ut(xo(t.path)),r,"TargetPurposeLimboResolution",Bt.le))}}async function Do(n,e,t){const r=fe(n),s=[],i=[],o=[];r.uu.isEmpty()||(r.uu.forEach((l,c)=>{o.push(r.Ru(c,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=jh.Rs(c.targetId,u);i.push(p)}}))}),await Promise.all(o),r.au.j_(s),await async function(c,u){const f=fe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(u,m=>P.forEach(m.ds,v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>P.forEach(m.As,v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!hr(p))throw p;G($h,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const v=f.xs.get(m),R=v.snapshotVersion,V=v.withLastLimboFreeSnapshotVersion(R);f.xs=f.xs.insert(m,V)}}}(r.localStore,i))}async function Lx(n,e){const t=fe(n);if(!t.currentUser.isEqual(e)){G(Yh,"User change. New user:",e.toKey());const r=await cv(t.localStore,e);t.currentUser=e,function(i,o){i.Eu.forEach(l=>{l.forEach(c=>{c.reject(new Y(U.CANCELLED,o))})}),i.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(t,r.ks)}}function Bx(n,e){const t=fe(n),r=t.Pu.get(e);if(r&&r._u)return ye().add(r.key);{let s=ye();const i=t.cu.get(e);if(!i)return s;for(const o of i){const l=t.uu.get(o);s=s.unionWith(l.view.Ya)}return s}}function Cv(n){const e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ox.bind(null,e),e.au.j_=wx.bind(null,e.eventManager),e.au.Vu=Tx.bind(null,e.eventManager),e}function Dv(n){const e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class _o{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ol(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return lv(this.persistence,new av,e.initialUser,this.serializer)}yu(e){return new Bh(kl.fi,this.serializer)}pu(e){return new hv}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_o.provider={build:()=>new _o};class Ux extends _o{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){re(this.persistence.referenceDelegate instanceof el,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new nv(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new Bh(r=>el.fi(r,t),this.serializer)}}class jx extends _o{constructor(e,t,r){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await Dv(this.Du.syncEngine),await Co(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(e){return lv(this.persistence,new av,e.initialUser,this.serializer)}Su(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new nv(r,e.asyncQueue,t)}bu(e,t){const r=new HT(t,this.persistence);return new KT(e.asyncQueue,r)}yu(e){const t=jA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new Uh(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nx(),xa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new hv}}class nl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lx.bind(null,this.syncEngine),await vx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ex}()}createDatastore(e){const t=Ol(e.databaseInfo.databaseId),r=function(i){return new tx(i)}(e.databaseInfo);return function(i,o,l,c){return new ox(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,l){return new lx(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>pm(this.syncEngine,t,0),function(){return lm.C()?new lm:new JA}())}createSyncEngine(e,t){return function(s,i,o,l,c,u,f){const p=new Sx(s,i,o,l,c,u);return f&&(p.Au=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=fe(s);G(Wr,"RemoteStore shutting down."),i.Ta.add(5),await Ro(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}nl.provider={build:()=>new nl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Et("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="FirestoreClient";class $x{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=et.UNAUTHENTICATED,this.clientId=_h.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(rr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(rr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wh(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kc(n,e){n.asyncQueue.verifyOperationInProgress(),G(rr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function gm(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zx(n);G(rr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>um(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>um(e.remoteStore,s)),n._onlineComponents=e}async function zx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(rr,"Using user provided OfflineComponentProvider");try{await kc(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Xn("Error using user provided cache. Falling back to memory cache: "+t),await kc(n,new _o)}}else G(rr,"Using default OfflineComponentProvider"),await kc(n,new Ux(void 0));return n._offlineComponents}async function kv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(rr,"Using user provided OnlineComponentProvider"),await gm(n,n._uninitializedComponentsProvider._online)):(G(rr,"Using default OnlineComponentProvider"),await gm(n,new nl))),n._onlineComponents}function qx(n){return kv(n).then(e=>e.syncEngine)}async function Cu(n){const e=await kv(n),t=e.eventManager;return t.onListen=Px.bind(null,e.syncEngine),t.onUnlisten=Dx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Rx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vx.bind(null,e.syncEngine),t}function Gx(n,e,t={}){const r=new wn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const f=new Vv({next:m=>{f.Cu(),o.enqueueAndForget(()=>Ev(i,p));const v=m.docs.has(l);!v&&m.fromCache?u.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?u.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new wv(xo(l.path),f,{includeMetadataChanges:!0,La:!0});return bv(i,p)}(await Cu(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n,e,t){if(!t)throw new Y(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mv(n,e,t,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _m(n){if(!J.isDocumentKey(n))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vm(n){if(J.isDocumentKey(n))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ml(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ml(n);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firestore.googleapis.com",bm=!0;class Em{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fv,this.ssl=bm}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IA)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ov((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fl{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Em({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Em(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new By;switch(r.type){case"firstParty":return new LT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,vy("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ym.get(t);r&&(G("ComponentProvider","Removing Datastore"),ym.delete(t),r.terminate())}(this),Promise.resolve()}}function Lv(n,e,t,r={}){var s;n=jt(n,Fl);const i=mh(e),o=n._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o.host!==Fv&&o.host!==c&&Xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Ba(u,l)&&(n._setSettings(u),i&&(mw(`https://${c}`),vy("Firestore",!0)),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=et.MOCK_USER;else{f=gw(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new et(m)}n._authCredentials=new NT(new Ly(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dr(this.firestore,e,this._query)}}class rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}}class Tn extends dr{constructor(e,t,r){super(e,t,xo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new J(e))}withConverter(e){return new Tn(this.firestore,e,this._path)}}function Bv(n,e,...t){if(n=ln(n),Nv("collection","path",e),n instanceof Fl){const r=xe.fromString(e,...t);return vm(r),new Tn(n,null,r)}{if(!(n instanceof rt||n instanceof Tn))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return vm(r),new Tn(n.firestore,null,r)}}function rl(n,e,...t){if(n=ln(n),arguments.length===1&&(e=_h.newId()),Nv("doc","path",e),n instanceof Fl){const r=xe.fromString(e,...t);return _m(r),new rt(n,null,new J(r))}{if(!(n instanceof rt||n instanceof Tn))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xe.fromString(e,...t));return _m(r),new rt(n.firestore,n instanceof Tn?n.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="AsyncQueue";class Tm{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new fv(this,"async_queue_retry"),this.ec=()=>{const r=xa();r&&G(wm,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=xa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=xa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new wn;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!hr(e))throw e;G(wm,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Et("INTERNAL UNHANDLED ERROR: ",Im(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const s=Hh.createAndSchedule(this,e,t,r,i=>this.oc(i));return this.Hu.push(s),s}nc(){this.Ju&&ne(47125,{_c:Im(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Im(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(n,["next","error","complete"])}class sr extends Fl{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Tm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tm(e),this._firestoreClient=void 0,await e}}}function Xh(n,e){const t=typeof n=="object"?n:IT(),r=typeof n=="string"?n:Ka,s=vT(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dw("firestore");i&&Lv(s,...i)}return s}function Ll(n){if(n._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Uv(n),n._firestoreClient}function Uv(n){var e,t,r;const s=n._freezeSettings(),i=function(l,c,u,f){return new wI(l,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Ov(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new $x(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}function jv(n,e){Xn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Kx(n,nl.provider,{build:r=>new jx(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function Kx(n,e,t){if((n=jt(n,sr))._firestoreClient||n._terminated)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Y(U.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Uv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(qe.fromBase64String(e))}catch(t){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qr(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=/^__.*__$/;class Wx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Js(e,this.data,t,this.fieldTransforms)}}class $v{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Dn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{hc:n})}}class Zh{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Zh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:r,Ec:!1});return s.dc(e),s}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return sl(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(zv(this.hc)&&Hx.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class Qx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ol(e)}gc(e,t,r,s=!1){return new Zh({hc:e,methodName:t,fc:r,path:Fe.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ef(n){const e=n._freezeSettings(),t=Ol(n._databaseId);return new Qx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yx(n,e,t,r,s,i={}){const o=n.gc(i.merge||i.mergeFields?2:0,e,t,s);tf("Data must be an object, but it was:",o,r);const l=qv(r,o);let c,u;if(i.merge)c=new St(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=Du(e,p,t);if(!o.contains(m))throw new Y(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Kv(f,m)||f.push(m)}c=new St(f),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new Wx(new ht(l),c,u)}class $l extends Bl{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $l}}function Jx(n,e,t,r){const s=n.gc(1,e,t);tf("Data must be an object, but it was:",s,r);const i=[],o=ht.empty();fr(r,(c,u)=>{const f=nf(e,c,t);u=ln(u);const p=s.Ac(f);if(u instanceof $l)i.push(f);else{const m=ko(u,p);m!=null&&(i.push(f),o.set(f,m))}});const l=new St(i);return new $v(o,l,s.fieldTransforms)}function Xx(n,e,t,r,s,i){const o=n.gc(1,e,t),l=[Du(e,r,t)],c=[s];if(i.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Du(e,i[m])),c.push(i[m+1]);const u=[],f=ht.empty();for(let m=l.length-1;m>=0;--m)if(!Kv(u,l[m])){const v=l[m];let R=c[m];R=ln(R);const V=o.Ac(v);if(R instanceof $l)u.push(v);else{const k=ko(R,V);k!=null&&(u.push(v),f.set(v,k))}}const p=new St(u);return new $v(f,p,o.fieldTransforms)}function Zx(n,e,t,r=!1){return ko(t,n.gc(r?4:3,e))}function ko(n,e){if(Gv(n=ln(n)))return tf("Unsupported field value:",e,n),qv(n,e);if(n instanceof Bl)return function(r,s){if(!zv(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ko(l,s.Rc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $I(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:Gs(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gs(s.serializer,i)}}if(r instanceof Ul)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:M_(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jl)return function(o,l){return{mapValue:{fields:{[xh]:{stringValue:Sh},[Bs]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Vc("VectorValues must only contain numeric values.");return Rh(l.serializer,u)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${Ml(r)}`)}(n,e)}function qv(n,e){const t={};return n_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fr(n,(r,s)=>{const i=ko(s,e.Ic(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function Gv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ne||n instanceof Ul||n instanceof Qr||n instanceof rt||n instanceof Bl||n instanceof jl)}function tf(n,e,t){if(!Gv(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Ml(t);throw r==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+r)}}function Du(n,e,t){if((e=ln(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return nf(n,e);throw sl("Field path arguments must be of type string or ",n,!1,void 0,t)}const eS=new RegExp("[~\\*/\\[\\]]");function nf(n,e,t){if(e.search(eS)>=0)throw sl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch{throw sl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sl(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(U.INVALID_ARGUMENT,l+n+c)}function Kv(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tS extends Hv{data(){return super.data()}}function zl(n,e){return typeof e=="string"?nf(n,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rf{}class sf extends rf{}function Wv(n,e,...t){let r=[];e instanceof rf&&r.push(e),r=r.concat(t),function(i){const o=i.filter(c=>c instanceof ql).length,l=i.filter(c=>c instanceof Oo).length;if(o>1||o>0&&l>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Oo extends sf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Oo(e,t,r)}_apply(e){const t=this._parse(e);return Yv(e._query,t),new dr(e.firestore,e.converter,yu(e._query,t))}_parse(e){const t=ef(e.firestore);return function(i,o,l,c,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Sm(p,f);const R=[];for(const V of p)R.push(xm(c,i,V));m={arrayValue:{values:R}}}else m=xm(c,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Sm(p,f),m=Zx(l,o,p,f==="in"||f==="not-in");return _e.create(u,f,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vu(n,e,t){const r=e,s=zl("where",n);return Oo._create(s,r,t)}class ql extends rf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ql(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Se.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Yv(o,c),o=yu(o,c)}(e._query,t),new dr(e.firestore,e.converter,yu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gl extends sf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gl(e,t)}_apply(e){const t=function(s,i,o){if(s.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(i,o)}(e._query,this._field,this._direction);return new dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ys(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Qv(n,e="asc"){const t=e,r=zl("orderBy",n);return Gl._create(r,t)}function xm(n,e,t){if(typeof(t=ln(t))=="string"){if(t==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v_(e)&&t.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xe.fromString(t));if(!J.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fo(n,new J(r))}if(t instanceof rt)return fo(n,t._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ml(t)}.`)}function Sm(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yv(n,e){const t=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Jv{convertValue(e,t="none"){switch(er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return fr(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Bs].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Me(o.doubleValue));return new jl(i)}convertGeoPoint(e){return new Ul(Me(e.latitude),Me(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Al(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uo(e));default:return null}}convertTimestamp(e){const t=An(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xe.fromString(e);re(K_(r),9688,{name:e});const s=new Zn(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(t)||Et(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class of extends Hv{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Hi extends of{data(e={}){return super.data(e)}}class Xv{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Is(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hi(this._firestore,this._userDataWriter,r.key,r,new Is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Hi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Is(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Hi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Is(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:sS(l.type),doc:c,oldIndex:u,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(n){n=jt(n,rt);const e=jt(n.firestore,sr);return Gx(Ll(e),n._key).then(t=>n0(e,n,t))}class Zv extends Jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,t)}}function ku(n,e,t){n=jt(n,rt);const r=jt(n.firestore,sr),s=rS(n.converter,e,t);return af(r,[Yx(ef(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Pt.none())])}function e0(n,e,t,...r){n=jt(n,rt);const s=jt(n.firestore,sr),i=ef(s);let o;return o=typeof(e=ln(e))=="string"||e instanceof Vo?Xx(i,"updateDoc",n._key,e,t,r):Jx(i,"updateDoc",n._key,e),af(s,[o.toMutation(n._key,Pt.exists(!0))])}function t0(n,...e){var t,r,s;n=ln(n);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Am(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Am(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,u,f;if(n instanceof rt)u=jt(n.firestore,sr),f=xo(n._key.path),c={next:p=>{e[o]&&e[o](n0(u,n,p))},error:e[o+1],complete:e[o+2]};else{const p=jt(n,dr);u=jt(p.firestore,sr),f=p._query;const m=new Zv(u);c={next:v=>{e[o]&&e[o](new Xv(u,m,p,v))},error:e[o+1],complete:e[o+2]},nS(n._query)}return function(m,v,R,V){const k=new Vv(V),F=new wv(v,k,R);return m.asyncQueue.enqueueAndForget(async()=>bv(await Cu(m),F)),()=>{k.Cu(),m.asyncQueue.enqueueAndForget(async()=>Ev(await Cu(m),F))}}(Ll(u),f,l,c)}function af(n,e){return function(r,s){const i=new wn;return r.asyncQueue.enqueueAndForget(async()=>kx(await qx(r),s,i)),i.promise}(Ll(n),e)}function n0(n,e,t){const r=t.docs.get(e._key),s=new Zv(n);return new of(n,s,e._key,r,new Is(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Qs=s})(TT),ja(new no("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new sr(new MT(r.getProvider("auth-internal")),new BT(o,r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zn(u.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Cs(ip,op,e),Cs(ip,op,"esm2017")})();const oS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Jv,Bytes:Qr,CollectionReference:Tn,DocumentReference:rt,DocumentSnapshot:of,FieldPath:Vo,FieldValue:Bl,Firestore:sr,FirestoreError:Y,GeoPoint:Ul,Query:dr,QueryCompositeFilterConstraint:ql,QueryConstraint:sf,QueryDocumentSnapshot:Hi,QueryFieldFilterConstraint:Oo,QueryOrderByConstraint:Gl,QuerySnapshot:Xv,SnapshotMetadata:Is,Timestamp:Ne,VectorValue:jl,_AutoId:_h,_ByteString:qe,_DatabaseId:Zn,_DocumentKey:J,_EmptyAuthCredentialsProvider:By,_FieldPath:Fe,_cast:jt,_logWarn:Xn,_validateIsNotUsedTogether:Mv,collection:Bv,connectFirestoreEmulator:Lv,doc:rl,enableIndexedDbPersistence:jv,ensureFirestoreConfigured:Ll,executeWrite:af,getDoc:iS,getFirestore:Xh,onSnapshot:t0,orderBy:Qv,query:Wv,setDoc:ku,updateDoc:e0,where:Vu},Symbol.toStringTag,{value:"Module"}));function r0(n){return new URLSearchParams(window.location.search).get(n)}function lf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}async function aS(n){const e=zt();if(typeof Tt>"u")return B("FSUpdatesHandler - FileMaker not detected, skipping","warn"),{success:!1,message:"FileMaker not available"};if(e.device.deviceMode==="passive")return B("FSUpdatesHandler - Device in passive mode, skipping","info"),{success:!0,message:"Passive mode - no processing needed"};const t=n.updates||[];if(!t.length)return B("FSUpdatesHandler - No updates to process","info"),{success:!0,message:"No updates to process"};const r=[];return t.forEach(s=>{const i={id:s.id,_table:s._table,_tsModFireStore:s._tsModFireStore,_ts:{}};typeof s._ts>"u"&&(s._ts={}),Object.keys(s._ts).forEach(o=>{(typeof s._ts[o]=="number"||typeof s._ts[o]=="object")&&(i[o]=s[o],i._ts[o]=s._ts[o])}),s!=null&&s.devicePendingContainer&&(i.devicePendingContainer=s.devicePendingContainer),s!=null&&s.batchTotalEdits&&(i.batchTotalEdits=s.batchTotalEdits),s!=null&&s.batchIdEdits&&(i.batchIdEdits=s.batchIdEdits),r.push(i)}),e.updatesQueue.push(...r),e.updatesTotal+=r.length,B(`Batched updates: ${r.length}, Total Updates: ${e.updatesQueue.length}`,"info"),e.isUpdatingFM?{success:!0,message:"Update process already running"}:await lS(e)}async function lS(n){const e=n.fmUpdatesBatchSize||10;let t=!1;n.isUpdatingFM=!0;try{for(;n.updatesQueue.length>0;){n.startProcessing();const r=n.updatesQueue.slice(0,e),s="API - Web Sync Inbound dispatcher {payload}",i={updates:r,remaining:n.updatesQueue.length-r.length};B(`Sending updates: ${r.length}`,"info");const o=await Tt.performScript(s,JSON.stringify(i),1e4);if(o.success){B(`${r.length} Updates successfully saved!`,"info"),n.updatesTotalCompleted+=r.length,cS(r,n),n.updatesQueue.splice(0,r.length);try{const l=window.localStorage.device}catch{B("Error updating device object in localStorage","error")}}else{B(`ERROR writing batch to database: ${JSON.stringify(o.error)}`,"error");break}}return n.updatesTotal===n.updatesTotalCompleted&&(B("Updates Completed!","info"),n.updatesTotal=0,n.updatesTotalCompleted=0),{success:!0,message:"Updates processed successfully"}}catch(r){return B(`Error in sendUpdatesToDatabase: ${r.message}`,"error"),{success:!1,error:r.message}}finally{n.isUpdatingFM=!1;try{n.endProcessing(),B("sendUpdatesToDatabase - processing ended","info")}catch{}}}function cS(n,e){function t(i){return i&&i.toMillis?i.toMillis()+(i.nanoseconds||0)/1e6:Date.parse(i)}function r(i){if(i&&i.toMillis){const l=i.toMillis()+(i.nanoseconds||0)/1e6;return new Date(l).toISOString()}return new Date(i).toISOString()}function s(i,o){Object.prototype.hasOwnProperty.call(e.updatesBatches,i)?t(o)>t(e.updatesBatches[i].latestTs)&&(e.updatesBatches[i].latestTs=o):e.updatesBatches[i]={latestTs:o}}return n.forEach(i=>{if(i.batchIdEdits){s(i.batchIdEdits,i._tsModFireStore);const o=e.updatesBatches[i.batchIdEdits],l=o.totalReceived||0;if(l+1===i.batchTotalEdits||i.batchTotalEdits===1)return e.device.tsModFireStoreLastUpdate=r(o.latestTs),delete e.updatesBatches[i.batchIdEdits],!0;o.totalReceived=l+1}}),!1}async function uS(n){const e=zt();B(`[DEBUG] handleEditsUpdateStatus called with options: ${JSON.stringify(n,null,2)}`,"info"),B("[DEBUG] Current appConfig state before update:","info"),B(`[DEBUG] - editsCurrentState: ${e.editsCurrentState}`,"info"),B(`[DEBUG] - editsTotalPending: ${e.editsTotalPending}`,"info");try{if(n.currentState&&(B(`[DEBUG] Updating editsCurrentState from ${e.editsCurrentState} to ${n.currentState}`,"info"),e.editsCurrentState=n.currentState),typeof n.pendingEdits<"u"&&(B(`[DEBUG] Updating editsTotalPending from ${e.editsTotalPending} to ${n.pendingEdits}`,"info"),e.editsTotalPending=n.pendingEdits),B("[DEBUG] Final appConfig state after update:","info"),B(`[DEBUG] - editsCurrentState: ${e.editsCurrentState}`,"info"),B(`[DEBUG] - editsTotalPending: ${e.editsTotalPending}`,"info"),typeof Tt<"u"){B("[DEBUG] fmBridgit available, calling returnResult with status: ok","info");try{const r=await Tt.returnResult({status:"ok"});B(`[DEBUG] fmBridgit.returnResult completed successfully: ${JSON.stringify(r)}`,"info")}catch(r){B(`[WARN] fmBridgit.returnResult failed: ${r.message}`,"warn"),B("[WARN] This is expected behavior - FileMaker may reject some acknowledgments","warn")}}else B("[WARN] fmBridgit not available for returnResult","warn");const t={success:!0,message:"Edit status updated"};return B(`[DEBUG] handleEditsUpdateStatus returning: ${JSON.stringify(t,null,2)}`,"info"),Promise.resolve(t)}catch(t){B(`[ERROR] Error in handleEditsUpdateStatus: ${t.message}`,"error"),B(`[ERROR] Error stack: ${t.stack}`,"error");const r={success:!1,error:t.message};return B(`[DEBUG] handleEditsUpdateStatus returning error: ${JSON.stringify(r,null,2)}`,"info"),Promise.resolve(r)}}async function hS(n){var t,r;const e=zt();B(`[DEBUG] handleUpdatesContainerDownloads called with options: ${JSON.stringify(n,null,2)}`,"info"),B("[DEBUG] Current appConfig state before update:","info"),B(`[DEBUG] - updateTotalContainers: ${e.updateTotalContainers}`,"info"),B(`[DEBUG] - updateCompletedContainers: ${e.updateCompletedContainers}`,"info");try{if(typeof((t=n==null?void 0:n.updates)==null?void 0:t.totalContainers)<"u"){const i=e.updateTotalContainers;e.updateTotalContainers+=n.updates.totalContainers,B(`[DEBUG] Updated updateTotalContainers from ${i} to ${e.updateTotalContainers}`,"info")}if(typeof((r=n==null?void 0:n.updates)==null?void 0:r.completedContainers)<"u"){const i=e.updateCompletedContainers;e.updateCompletedContainers+=n.updates.completedContainers,B(`[DEBUG] Updated updateCompletedContainers from ${i} to ${e.updateCompletedContainers}`,"info")}if(e.updateCompletedContainers===e.updateTotalContainers&&(B("[DEBUG] Container download complete, resetting counters","info"),e.updateCompletedContainers=0,e.updateTotalContainers=0),e.updateCompletedContainers>e.updateTotalContainers&&(B("[WARN] Container overflow detected, resetting completed count","warn"),e.updateCompletedContainers=0),B("[DEBUG] Final appConfig state after update:","info"),B(`[DEBUG] - updateTotalContainers: ${e.updateTotalContainers}`,"info"),B(`[DEBUG] - updateCompletedContainers: ${e.updateCompletedContainers}`,"info"),typeof Tt<"u"){B("[DEBUG] fmBridgit available, calling returnResult with status: ok","info");try{const i=await Tt.returnResult({status:"ok"});B(`[DEBUG] fmBridgit.returnResult completed successfully: ${JSON.stringify(i)}`,"info")}catch(i){B(`[WARN] fmBridgit.returnResult failed: ${i.message}`,"warn"),B("[WARN] This is expected behavior - FileMaker may reject some acknowledgments","warn")}}else B("[WARN] fmBridgit not available for returnResult","warn");const s={success:!0,message:"Container downloads updated"};return B(`[DEBUG] handleUpdatesContainerDownloads returning: ${JSON.stringify(s,null,2)}`,"info"),Promise.resolve(s)}catch(s){B(`[ERROR] Error in handleUpdatesContainerDownloads: ${s.message}`,"error"),B(`[ERROR] Error stack: ${s.stack}`,"error");const i={success:!1,error:s.message};return B(`[DEBUG] handleUpdatesContainerDownloads returning error: ${JSON.stringify(i,null,2)}`,"info"),Promise.resolve(i)}}async function fS(n){var r,s;const e=zt(),t=n.payload;if(B("[DEBUG] webSyncReceivePayload called with options:","info"),B(`[DEBUG] Options keys: ${Object.keys(n||{}).join(", ")}`,"info"),B(`[DEBUG] Payload type: ${typeof t}`,"info"),B(`[DEBUG] Payload content: ${JSON.stringify(t,null,2)}`,"info"),!t)return B("[ERROR] No payload provided to webSyncReceivePayload","error"),Promise.resolve({success:!1,message:"No payload provided"});if(t.status)return B("[DEBUG] Status ping received, acknowledging","info"),typeof Tt<"u"&&Tt.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Status ping acknowledged"});if(t.edits&&Array.isArray(t.edits)){B(`[DEBUG] Processing ${t.edits.length} edits from FileMaker`,"info"),B(`[DEBUG] Edits array: ${JSON.stringify(t.edits,null,2)}`,"info");let i=0;const o=5;for(;i<o;)if(B(`[DEBUG] Firebase readiness check attempt ${i+1}/${o}`,"info"),window.fsDeviceRef&&window.fsOrganizationRef){B("[DEBUG] Firebase references available, proceeding with edit processing","info");try{for(const c of t.edits){B(`[DEBUG] Processing edit: ${JSON.stringify(c,null,2)}`,"info");const u={...c,id:c.id||null,_table:c._table||c.table||"UnknownTable",_tsModFireStore:new Date,_ts:c._ts||{},_contexts:e.device.contexts||[]};B(`[DEBUG] Prepared edit data for Firestore: ${JSON.stringify(u,null,2)}`,"info");try{const{doc:f,setDoc:p,getDoc:m,collection:v}=await py(async()=>{const{doc:k,setDoc:F,getDoc:N,collection:M}=await Promise.resolve().then(()=>oS);return{doc:k,setDoc:F,getDoc:N,collection:M}},void 0,import.meta.url),R=v(window.fsDeviceRef,"Edits"),V=f(R);B(`[DEBUG] Creating Firestore document at: Organizations/${e.organization.id}/Devices/${e.device.id}/Edits/${u.id}`,"info"),await p(V,u);try{const k=await m(V);B(`[DEBUG] Read-back after write  exists: ${k.exists()}, fromCache: ${(r=k.metadata)==null?void 0:r.fromCache}, hasPendingWrites: ${(s=k.metadata)==null?void 0:s.hasPendingWrites}`,"info")}catch(k){B(`[WARN] Read-back check failed: ${(k==null?void 0:k.message)||k}`,"warn")}B(`[DEBUG] Successfully created Firestore document for edit: ${u.id}`,"info"),c.typeEdit==="containerIsUploaded"&&(e.editsContainersComplete+=1,B(`[DEBUG] Updated container completion count: ${e.editsContainersComplete}`,"info"))}catch(f){B(`[ERROR] Failed to create Firestore document for edit ${u.id}: ${f.message}`,"error"),B(`[ERROR] Firestore error details: ${JSON.stringify(f,null,2)}`,"error")}}e.editsCurrentState="4",B(`[DEBUG] Updated edit state to: ${e.editsCurrentState}`,"info");try{e.endProcessing()}catch{}e.editsContainersComplete===e.editsContainersTotal&&(e.editsContainersComplete=0,e.editsContainersTotal=0,B("[DEBUG] Reset container counters","info"));const l={payload:t.modificationTimestampUTCEnd?{modificationTimestampUTCEnd:t.modificationTimestampUTCEnd}:{}};return B(`[DEBUG] Returning success response to FileMaker: ${JSON.stringify(l,null,2)}`,"info"),typeof Tt<"u"&&(Tt.returnResult(l),B("[DEBUG] Result returned to FileMaker via fmBridgit","info")),Promise.resolve({success:!0,message:"Payload processed successfully"})}catch(l){return B(`[ERROR] Error processing edits: ${l.message}`,"error"),B(`[ERROR] Processing error details: ${JSON.stringify(l,null,2)}`,"error"),Promise.resolve({success:!1,message:`Processing error: ${l.message}`})}}else{if(i++,B(`[WARN] Firebase not ready yet, attempt: ${i}/${o}`,"warn"),B(`[DEBUG] fsDeviceRef available: ${!!window.fsDeviceRef}`,"info"),B(`[DEBUG] fsOrganizationRef available: ${!!window.fsOrganizationRef}`,"info"),i>=o)return B("[ERROR] webSync Timeout - Firebase not ready after maximum attempts","error"),Promise.resolve({success:!1,message:"Firebase timeout"});B("[DEBUG] Waiting 1 second before retry...","info"),await new Promise(l=>setTimeout(l,1e3))}}else B("[WARN] No edits array found in payload","warn"),B(`[DEBUG] Payload keys: ${Object.keys(t).join(", ")}`,"info");return B("[DEBUG] webSyncReceivePayload completed without processing edits","info"),Promise.resolve({success:!1,message:"No edits to process"})}function dS(){const n=zt();if(n.device.deviceMode==="passive")return B("subscribeUpdates - Device in passive mode, skipping subscription","info"),Promise.resolve({success:!0,message:"Passive mode - no subscription needed"});try{const e=new Date,t=n.device.tsModFireStoreLastUpdate?new Date(n.device.tsModFireStoreLastUpdate):e;if(B(`subscribeUpdates - Starting subscription from timestamp: ${t.toISOString()}`,"info"),t===e&&(n.device.tsModFireStoreLastUpdate=t,window.fsDeviceRef))try{const s=Xh(),i=rl(s,"Organizations",n.organization.id,"Devices",n.device.id);e0(i,{tsModFireStoreLastUpdate:t}).catch(o=>{B(`Error updating device timestamp: ${o.message}`,"error")})}catch(s){B(`Error accessing Firestore for timestamp update: ${s.message}`,"error")}if(window.fsUpdatesRefUnsubscribe&&typeof window.fsUpdatesRefUnsubscribe=="function"&&(window.fsUpdatesRefUnsubscribe(),B("subscribeUpdates - Cleaned up existing subscription","info")),!window.fsUpdatesRef)return B("subscribeUpdates - Firestore updates reference not available, cannot subscribe","warn"),Promise.resolve({success:!1,message:"Firestore references not available"});const r=Wv(window.fsUpdatesRef,Qv("_tsModFireStore","asc"),Vu("_tsModFireStore",">",Ne.fromDate(t)),Vu("_contexts","array-contains-any",n.device.contexts));return window.fsUpdatesRefUnsubscribe=t0(r,{includeMetadataChanges:!1},s=>{s0(s,n)},s=>{B(`subscribeUpdates - Snapshot listener error: ${s.message}`,"error")}),B("subscribeUpdates - Firestore listener established successfully","info"),Promise.resolve({success:!0,message:"Updates subscription established"})}catch(e){return B(`subscribeUpdates - Error setting up subscription: ${e.message}`,"error"),Promise.resolve({success:!1,error:e.message})}}function s0(n,e){if(!n||n.empty){B("processSnapshot - No updates in snapshot","info");return}const t=[],r=["devicePendingContainer","batchTotalEdits","batchIdEdits"];if(n.docChanges().forEach(async s=>{const i=s.doc.data();if(s.type==="added"||s.type==="modified"){B(`processSnapshot - Processing ${s.type} update: ${i.id||s.doc.id}`,"info"),vo("isProcessing");const o=62135596800,l=Date.parse(e.device.tsModFireStoreLastUpdate)/1e3;if(i.updatedKeys||(i.updatedKeys=[]),i._ts)for(const[u,f]of Object.entries(i._ts))f&&f.ts&&Math.round(f.ts/1e3)-o>l&&!i.updatedKeys.includes(u)&&i.updatedKeys.push(u);const c={_table:i._table,id:i.id||s.doc.id,_tsModFireStore:i._tsModFireStore,_ts:{}};i.updatedKeys.forEach(u=>{c[u]=i[u],r.includes(u)||(c._ts[u]=i._ts[u])}),i.batchTotalEdits&&(c.batchTotalEdits=i.batchTotalEdits),i.batchIdEdits&&(c.batchIdEdits=i.batchIdEdits),i.devicePendingContainer&&(c.devicePendingContainer=i.devicePendingContainer),t.push(c)}}),t.length>0){B(`processSnapshot - Calling FSUpdatesHandler with ${t.length} updates`,"info");const i=t[t.length-1]._tsModFireStore;vo("FSUpdatesHandler",{updates:t,_tsModFireStoreLastUpdate:i instanceof Date?i:new Date(i)})}}function vo(n,e={}){const t=zt();B(`[DEBUG] namedAction called: ${n}`,"info"),B(`[DEBUG] namedAction options: ${JSON.stringify(e,null,2)}`,"info"),B(`[DEBUG] namedAction timestamp: ${new Date().toISOString()}`,"info");let r;try{switch(n){case"isProcessing":return B("[DEBUG] Starting isProcessing action","info"),r=t.startProcessing(),B(`[DEBUG] isProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"endProcessing":return B("[DEBUG] Starting endProcessing action","info"),r=t.endProcessing(),B(`[DEBUG] endProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"promptUserToConfigure":return B("[DEBUG] Starting promptUserToConfigure action","info"),console.log("[namedAction] promptUserToConfigure called"),r=Promise.resolve({success:!0,message:"User prompted (mocked)"}),B(`[DEBUG] promptUserToConfigure result: ${JSON.stringify(r,null,2)}`,"info"),r;case"getSignedURL":return B("[DEBUG] Starting getSignedURL action","info"),console.log("[namedAction] getSignedURL called with options:",e),r=Promise.resolve(`https://mock-signed-url.com/${e.name}`),B(`[DEBUG] getSignedURL result: ${JSON.stringify(r,null,2)}`,"info"),r;case"FSUpdatesHandler":return B("[DEBUG] Starting FSUpdatesHandler action","info"),r=aS(e),B(`[DEBUG] FSUpdatesHandler result: ${JSON.stringify(r,null,2)}`,"info"),r;case"editsUpdateStatus":return B("[DEBUG] Starting editsUpdateStatus action","info"),r=uS(e),B(`[DEBUG] editsUpdateStatus result: ${JSON.stringify(r,null,2)}`,"info"),r;case"updatesContainerDownloads":return B("[DEBUG] Starting updatesContainerDownloads action","info"),r=hS(e),B(`[DEBUG] updatesContainerDownloads result: ${JSON.stringify(r,null,2)}`,"info"),r;case"webSyncReceivePayload":return B("[DEBUG] Starting webSyncReceivePayload action","info"),r=fS(e),B(`[DEBUG] webSyncReceivePayload result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdates":return B("[DEBUG] Starting subscribeUpdates action","info"),r=dS(e),B(`[DEBUG] subscribeUpdates result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdatesDebounce":return B("subscribeUpdatesDebounce called - would re-subscribe to updates","info"),Promise.resolve({success:!0,message:"Debounced subscription triggered"});default:return console.warn(`[namedAction] Unknown action: ${n}`),Promise.resolve({success:!1,message:`Unknown action: ${n}`})}}catch(s){return B(`[ERROR] Error in namedAction ${n}: ${s.message}`,"error"),B(`[ERROR] Error stack: ${s.stack}`,"error"),Promise.resolve({success:!1,error:s.message})}}function i0(){console.log("[BF] actionsClear called - clearing action queue (mocked)"),zt().endProcessing()}function o0(n,e){const t=zt();switch(n){case"isProcessing":e?t.startProcessing():t.endProcessing();break;default:console.log(`[setGlobalVar] ${n} = ${e}`);break}}function a0(n){const e=zt();switch(n){case"isProcessing":return e.isProcessing;case"deviceId":return e.device.id;case"organizationId":return e.organization.id;default:return console.warn(`[getGlobalVar] Unknown variable: ${n}`),null}}function l0(n,e="Alert"){console.log(`[Alert] ${e}: ${n}`),alert(`${e}

${n}`)}function B(n,e="info"){const t=new Date().toISOString(),r=`[BF-${e.toUpperCase()}] ${t}`;switch(e){case"error":console.error(r,n);break;case"warn":console.warn(r,n);break;case"debug":console.debug(r,n);break;default:console.log(r,n)}}async function c0(n){try{const e=JSON.parse(n),{name:t,options:r={}}=e;B(`namedActionFM called: ${t}`,"info");const s=await Promise.resolve(vo(t,r));try{return JSON.stringify(s)}catch(i){return JSON.stringify({success:!1,error:`stringify_failed: ${String((i==null?void 0:i.message)||i)}`})}}catch(e){return B(`Error in namedActionFM: ${e.message}`,"error"),JSON.stringify({success:!1,error:String((e==null?void 0:e.message)||e)})}}const u0={getQueryParam:r0,getUUID:lf,namedAction:vo,namedActionFM:c0,actionsClear:i0,setGlobalVar:o0,getGlobalVar:a0,showAlert:l0,log:B};typeof window<"u"&&(window.BF=u0,window.processSnapshot=s0);const pS=Object.freeze(Object.defineProperty({__proto__:null,BF:u0,actionsClear:i0,getGlobalVar:a0,getQueryParam:r0,getUUID:lf,log:B,namedAction:vo,namedActionFM:c0,setGlobalVar:o0,showAlert:l0},Symbol.toStringTag,{value:"Module"})),zt=ew("appConfig",{state:()=>({sessionId:lf(),activeJob:null,configx:{deviceMode:"passive",deviceType:"webApp",idContext:"CON_north",idDevice:null,idOrganization:null,tsModFireStoreLastUpdate:new Date().toISOString()},device:{id:"DEV_demo",deviceMode:"passive",deviceType:"webApp",tsModFireStoreLastUpdate:null,contexts:["defaultContext"],tables:[],recordID:null,lastSyncOutUTC:null,syncAppURL:null},editsContainersComplete:0,editsContainersTotal:0,editsCurrentState:"0",editsStates:{0:"No New Edits",1:"Starting Sync",2:"Fetching New Edits",3:"Sending Data",4:"Updates Sent",5:"New Edits"},editsTotalPending:0,env:{logoURL:"https://ucarecdn.com/cbbbcd08-c49f-499d-8125-e1dbb2a4f262/"},fmUpdatesBatchSize:25,isOnline:!0,isProcessing:!1,isUpdatingFM:!1,localFSInSync:"-",log:"---",organization:{id:"ORG_demo"},payload:{},people:[],storageSize:0,updateCompletedContainers:0,updateTotalContainers:0,updatesBatches:{},updatesCurrentTS:{},updatesQueue:[],updatesTotal:0,updatesTotalCompleted:0,updatesTotalRecords:0}),actions:{initializeConfigFromURLParams(){const n=s=>new URLSearchParams(window.location.search).get(s);console.log("@onAppLoad InitConfigs - Initial device state before URL params: ",JSON.parse(JSON.stringify(this.device)));const e=n("idOrganization");this.organization.id=e||this.organization.id||"ORG_demo",this.configx.idOrganization=this.organization.id;const t=n("idDevice");if(this.device.id=t||this.device.id||"DEV_demo",this.configx.idDevice=this.device.id,this.device.deviceMode=n("deviceMode")||this.device.deviceMode||"passive",this.configx.deviceMode=this.device.deviceMode,this.device.deviceType=n("deviceType")||this.device.deviceType||"webApp",this.configx.deviceType=this.device.deviceType,this.device.deviceType==="webApp"){const s=new Date;this.device.tsModFireStoreLastUpdate=s,this.configx.tsModFireStoreLastUpdate=s.toISOString()}const r=n("contexts");if(r)try{const i=decodeURI(r).split(",");this.device.contexts=i.length>0?i:this.device.contexts}catch(s){console.error("Error decoding contexts from URL query parameter:",s)}console.log("Final appConfig store state after URL params:",JSON.parse(JSON.stringify(this.$state)))},startProcessing(){this.isProcessing=!0,console.log("isProcessing set to true")},endProcessing(){this.isProcessing=!1,console.log("isProcessing set to false")}}});var mS="firebase",gS="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(mS,gS,"app");const yS={apiKey:"AIzaSyC7IAF_M-rtG-W-M-OxTstiEeS3oG3ctoY",appId:"1:415177867181:web:f0c952ea381ee04fe3ab24",authDomain:"bf-pwa.firebaseapp.com",measurementId:"G-RMDP2726CQ",messagingSenderId:"415177867181",projectId:"bf-pwa",storageBucket:"bf-pwa.appspot.com"};let Oc=null,gs=null,_S=null,Wi=null,cf=null,h0=null;async function vS(){const n=zt();if(!n.organization.id||!n.device.id){console.error("Organization ID or Device ID is missing. Cannot check/create parent documents.");return}try{console.log(`Ensuring Organization document exists: Organizations/${n.organization.id}`),await ku(Wi,{},{merge:!0}),console.log(`Ensuring Device document exists: Organizations/${n.organization.id}/Devices/${n.device.id}`),await ku(cf,{deviceType:n.device.deviceType},{merge:!0}),console.log("Parent documents checked/created successfully.")}catch(e){console.error("Error in checkParentDocuments: ",e)}}async function bS(){var e;const n=zt();if(n.device.deviceMode==="passive"){console.log("Device mode is passive. Skipping Firebase initialization.");return}if(gs){console.log("Firebase already initialized.");return}try{console.log("Initializing Firebase app..."),gs=Py(yS),Oc=Xh(gs);try{console.log("Using Firebase project:",(e=gs==null?void 0:gs.options)==null?void 0:e.projectId)}catch{}if(console.log("Enabling Firestore offline persistence..."),await jv(Oc),console.log("Firestore offline persistence enabled."),n.organization.id&&n.device.id)Wi=rl(Oc,"Organizations",n.organization.id),cf=rl(Wi,"Devices",n.device.id),h0=Bv(Wi,"Updates"),console.log("Firestore document/collection references initialized.");else{console.error("Organization ID or Device ID not available from config store for Firebase refs initialization.");return}console.log("Firebase services initialized."),await ES()}catch(t){console.error("Error initializing Firebase: ",t)}}async function ES(){console.log("Setting up Firestore listeners and initial checks..."),await vS(),typeof window<"u"&&(window.fsOrganizationRef=Wi,window.fsDeviceRef=cf,window.fsUpdatesRef=h0,window.fsUpdatesRefUnsubscribe=_S,console.log("Firestore references exposed globally for BetterForms compatibility"));try{const{namedAction:n}=await py(async()=>{const{namedAction:t}=await Promise.resolve().then(()=>pS);return{namedAction:t}},void 0,import.meta.url),e=await n("subscribeUpdates");console.log("subscribeUpdates result:",e)}catch(n){console.error("Error setting up updates subscription:",n)}console.log("Firestore listeners and checks setup complete.")}const wS=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},TS={class:"min-h-screen w-full bg-gray-900 text-gray-100 overflow-x-auto"},IS={class:"w-full bg-gray-800 border-b border-gray-700 sticky top-0 z-30"},AS={class:"px-0 py-3"},xS={class:"flex items-center justify-between px-3 sm:px-4 max-w-screen-2xl mx-auto"},SS={class:"flex items-center space-x-4"},PS={class:"flex items-center space-x-3"},RS={class:"p-2 bg-blue-600 rounded-lg"},CS={class:"flex items-center space-x-6"},DS={class:"flex items-center space-x-3"},VS={class:"text-sm text-gray-300 font-medium"},kS={class:"flex items-center space-x-3"},OS={class:"text-sm text-gray-300 font-medium capitalize"},NS={class:"w-full pb-4 px-2 sm:px-0"},MS={class:"px-0 py-4"},FS={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 px-3 sm:px-4 max-w-screen-2xl mx-auto"},LS={class:"bg-gray-800 border border-gray-700 rounded-xl p-4 min-w-0"},BS={class:"mb-3"},US={class:"text-sm text-gray-300"},jS={key:0,class:"space-y-3"},$S={class:"flex justify-between items-center"},zS={class:"text-blue-400 font-bold text-sm"},qS={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},GS={class:"flex justify-between text-xs text-gray-400"},KS={key:1,class:"text-center py-4 text-gray-500"},HS={class:"bg-gray-800 border border-gray-700 rounded-xl p-4 min-w-0"},WS={class:"mb-3"},QS={class:"text-sm text-gray-300"},YS={key:0,class:"space-y-4"},JS={class:"space-y-3"},XS={class:"flex justify-between items-center"},ZS={class:"text-green-400 font-bold text-sm"},e2={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},t2={class:"flex justify-between text-xs text-gray-400"},n2={key:0,class:"border-t border-gray-700 pt-3 space-y-3"},r2={class:"flex justify-between items-center"},s2={class:"text-green-400 font-bold text-sm"},i2={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},o2={class:"flex justify-between text-xs text-gray-400"},a2={key:1,class:"text-center py-4"},l2={class:"px-0 py-2"},c2={class:"grid grid-cols-1 md:grid-cols-3 gap-4 px-3 sm:px-4 max-w-screen-2xl mx-auto"},u2={class:"bg-gray-800 border border-gray-700 rounded-xl p-4"},h2={class:"space-y-3"},f2={class:"flex justify-between items-center"},d2={class:"text-white font-mono text-sm"},p2={class:"flex justify-between items-center"},m2={class:"px-2 py-1 bg-gray-700 rounded text-xs text-white font-medium"},g2={class:"flex justify-between items-center"},y2={class:"text-white text-sm"},_2={class:"bg-gray-800 border border-gray-700 rounded-xl p-4"},v2={class:"space-y-3"},b2={class:"flex justify-between items-center"},E2={class:"text-white font-mono text-sm"},w2={class:"flex justify-between items-center"},T2={class:"text-white text-sm"},I2={class:"bg-gray-800 border border-gray-700 rounded-xl p-4"},A2={class:"space-y-3"},x2={class:"flex items-center justify-between"},S2={class:"flex items-center space-x-2"},P2={class:"text-white text-xs font-medium"},R2={class:"flex items-center justify-between"},C2={class:"flex items-center justify-between mb-8"},D2={class:"mb-8"},V2={class:"flex items-center justify-between mb-4"},k2={class:"grid grid-cols-2 gap-4"},O2={class:"mb-8"},N2={class:"space-y-4"},M2={class:"flex items-center justify-between"},F2={class:"flex items-center space-x-2"},L2={class:"flex items-center justify-between"},B2={class:"flex items-center space-x-2"},U2={class:"flex items-center justify-between"},j2={class:"flex items-center space-x-2"},$2={class:"border-t border-gray-700 pt-6"},z2={class:"space-y-2 text-xs text-gray-400 font-mono"},q2={__name:"App",setup(n){const e=zt(),t=Di("Initializing..."),r=Di(!1),s=Di(navigator.onLine),i=Vt(()=>e.editsContainersTotal?Math.round(e.editsContainersComplete/e.editsContainersTotal*100):0),o=Vt(()=>e.updatesTotal?Math.round(e.updatesTotalCompleted/e.updatesTotal*100):0),l=Vt(()=>e.updateTotalContainers?Math.round(e.updateCompletedContainers/e.updateTotalContainers*100):0),c=Vt(()=>s.value?t.value.includes("successfully")?"connected":t.value.includes("error")?"error":"connecting":"offline"),u=Vt(()=>e.isProcessing?"processing":e.updatesTotal>0||e.editsContainersTotal>0?"syncing":"idle");Bg(async()=>{try{console.log("BetterForms utilities initialized:",typeof window.BF<"u"?"BF available globally":"BF not found"),console.log("FileMaker Bridge initialized:",Tt.isFileMakerEnvironment?"FileMaker detected":"Standalone mode"),e.initializeConfigFromURLParams(),await bS(),t.value="Connected successfully"}catch(M){t.value=`Connection failed: ${M.message}`,console.error("Firebase initialization error:",M)}window.addEventListener("online",()=>{s.value=!0,console.log("Network: Online")}),window.addEventListener("offline",()=>{s.value=!1,console.log("Network: Offline")})});const f=async()=>{console.log("Quick Action: Open WebSync Config");try{await Tt.performScript("Open WebSync Config",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(M){console.error("WebSync Config script error:",M)}},p=async()=>{console.log("Quick Action: Open WebSync Edits");try{await Tt.performScript("Open Edits",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(M){console.error("WebSync Edits script error:",M)}},m=async()=>{console.log("Quick Action: Run Sync Now");try{await Tt.performScript("Start Sync",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(M){console.error("Run Sync script error:",M)}},v=async()=>{console.log("Testing FSUpdatesHandler...");const M=[{id:"test-update-1",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()},field2:{ts:Date.now()+1e3}},field1:"Test Value 1",field2:"Test Value 2",batchTotalEdits:2,batchIdEdits:"batch-123"},{id:"test-update-2",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()+2e3}},field1:"Test Value 3",batchTotalEdits:2,batchIdEdits:"batch-123"}],I=await window.BF.namedAction("FSUpdatesHandler",{updates:M});console.log("FSUpdatesHandler result:",I)},R=async()=>{console.log("Testing editsUpdateStatus...");const M=await window.BF.namedAction("editsUpdateStatus",{currentState:"3",pendingEdits:5});console.log("editsUpdateStatus result:",M)},V=async()=>{console.log("Testing updatesContainerDownloads...");const M=await window.BF.namedAction("updatesContainerDownloads",{updates:{totalContainers:10,completedContainers:3}});console.log("updatesContainerDownloads result:",M)},k=async()=>{console.log("Testing FSUpdatesHandler in active mode...");const M=e.device.deviceMode;e.device.deviceMode="active";const I=[{id:"test-update-1",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()},field2:{ts:Date.now()+1e3}},field1:"Test Value 1",field2:"Test Value 2",batchTotalEdits:2,batchIdEdits:"batch-123"},{id:"test-update-2",_table:"TestTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()+2e3}},field1:"Test Value 3",batchTotalEdits:2,batchIdEdits:"batch-123"}],X=await window.BF.namedAction("FSUpdatesHandler",{updates:I});console.log("FSUpdatesHandler active mode result:",X),e.device.deviceMode=M,console.log(`Device mode restored to: ${M}`)},F=async()=>{console.log("Testing subscribeUpdates...");const M=await window.BF.namedAction("subscribeUpdates");console.log("subscribeUpdates result:",M)},N=async()=>{console.log("Simulating Firestore update...");const M={empty:!1,docChanges:()=>[{type:"added",doc:{id:"simulated-update-"+Date.now(),data:()=>({id:"simulated-update-"+Date.now(),_table:"SimulatedTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()*1e3},field2:{ts:(Date.now()+1e3)*1e3}},field1:"Simulated Value 1",field2:"Simulated Value 2",updatedKeys:["field1","field2"],batchTotalEdits:1,batchIdEdits:"simulated-batch-"+Date.now(),_contexts:e.device.contexts})}}]};if(window.processSnapshot)window.processSnapshot(M,e);else{console.log("processSnapshot not available - this would normally be called by the Firestore listener");const I=[{id:"simulated-update-"+Date.now(),_table:"SimulatedTable",_tsModFireStore:new Date,_ts:{field1:{ts:Date.now()*1e3},field2:{ts:(Date.now()+1e3)*1e3}},field1:"Simulated Value 1",field2:"Simulated Value 2",batchTotalEdits:1,batchIdEdits:"simulated-batch-"+Date.now()}],X=e.device.deviceMode;e.device.deviceMode="active";const te=await window.BF.namedAction("FSUpdatesHandler",{updates:I});console.log("Simulated update result:",te),e.device.deviceMode=X}};return(M,I)=>{const X=I1("font-awesome-icon");return jn(),Tr("div",TS,[D("nav",IS,[D("div",AS,[D("div",xS,[D("div",SS,[D("div",PS,[D("div",RS,[wt(X,{icon:["fas","arrows-rotate"],class:gn([de(e).isProcessing?"animate-spin":"","text-white text-lg"])},null,8,["class"])]),I[12]||(I[12]=D("div",null,[D("h1",{class:"text-lg font-bold text-white"},"WebSync"),D("p",{class:"text-xs text-gray-400"},"Dashboard")],-1))])]),D("div",CS,[D("div",DS,[D("div",{class:gn([{"bg-green-500":c.value==="connected","bg-red-500":c.value==="error"||c.value==="offline","bg-yellow-500":c.value==="connecting"},"w-3 h-3 rounded-full"])},null,2),D("span",VS,De(c.value==="connected"?"Connected":c.value==="offline"?"Offline":c.value==="error"?"Error":"Connecting"),1)]),D("div",kS,[D("div",{class:gn([{"bg-blue-500":u.value==="processing","bg-purple-500":u.value==="syncing","bg-gray-500":u.value==="idle"},"w-3 h-3 rounded-full"])},null,2),D("span",OS,De(u.value),1)]),D("div",{class:"hidden md:flex items-center space-x-2"},[D("button",{onClick:f,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Config",title:"Open WebSync Config"},I[13]||(I[13]=[D("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[D("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),D("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),D("span",{class:"text-xs font-medium"},"webSync Config",-1)])),D("button",{onClick:p,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Edits",title:"Open WebSync Edits"},I[14]||(I[14]=[as('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-11d005d6><path d="M8 6h13" data-v-11d005d6></path><path d="M8 12h13" data-v-11d005d6></path><path d="M8 18h13" data-v-11d005d6></path><path d="M3 6h.01" data-v-11d005d6></path><path d="M3 12h.01" data-v-11d005d6></path><path d="M3 18h.01" data-v-11d005d6></path></svg><span class="text-xs font-medium" data-v-11d005d6>WebSync Edits</span>',2)]))]),D("button",{onClick:I[0]||(I[0]=te=>r.value=!r.value),class:"p-3 text-gray-400 hover:text-white hover:bg-gray-700 rounded-xl transition-colors",title:"Debug Controls"},I[15]||(I[15]=[D("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[D("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),D("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),D("button",{onClick:m,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Run Sync",title:"Run Sync"},I[16]||(I[16]=[D("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[D("path",{d:"M21 12a9 9 0 10-6.219 8.56"}),D("path",{d:"M22 12l-3-3-3 3"})],-1),D("span",{class:"text-xs"},"Sync",-1)]))])])])]),D("div",NS,[D("div",MS,[D("div",FS,[D("div",LS,[I[19]||(I[19]=as('<div class="flex items-center justify-between mb-4" data-v-11d005d6><div class="flex items-center space-x-3" data-v-11d005d6><div class="p-2 bg-blue-600 bg-opacity-20 rounded-lg" data-v-11d005d6><svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-11d005d6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-11d005d6></path></svg></div><div data-v-11d005d6><h2 class="text-lg font-bold text-white" data-v-11d005d6>Data Uploads</h2><p class="text-xs text-gray-400" data-v-11d005d6>Local to Cloud Sync</p></div></div><div class="px-2 py-1 bg-blue-600 bg-opacity-20 rounded-full" data-v-11d005d6><span class="text-xs font-semibold text-blue-400 uppercase tracking-wide" data-v-11d005d6>EDITS</span></div></div>',1)),D("div",BS,[D("p",US,De(de(e).editsTotalPending?de(e).editsStates[de(e).editsCurrentState]+": "+de(e).editsTotalPending:de(e).editsStates[de(e).editsCurrentState]),1)]),de(e).editsContainersTotal?(jn(),Tr("div",jS,[D("div",$S,[I[17]||(I[17]=D("span",{class:"text-gray-300 text-sm"},"Container Upload Progress",-1)),D("span",zS,De(i.value)+"%",1)]),D("div",qS,[D("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:Ps(`width: ${Math.min(i.value,100)}%`)},null,4)]),D("div",GS,[D("span",null,De(de(e).editsContainersComplete)+" completed",1),D("span",null,De(de(e).editsContainersTotal)+" total",1)])])):(jn(),Tr("div",KS,I[18]||(I[18]=[D("svg",{class:"w-8 h-8 mx-auto mb-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[D("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),D("p",{class:"text-sm"},"No pending uploads",-1),D("p",{class:"text-xs text-gray-400 invisible"},"placeholder",-1)])))]),D("div",HS,[I[23]||(I[23]=as('<div class="flex items-center justify-between mb-4" data-v-11d005d6><div class="flex items-center space-x-3" data-v-11d005d6><div class="p-2 bg-green-600 bg-opacity-20 rounded-lg" data-v-11d005d6><svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-11d005d6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-11d005d6></path></svg></div><div data-v-11d005d6><h2 class="text-lg font-bold text-white" data-v-11d005d6>Data Downloads</h2><p class="text-xs text-gray-400" data-v-11d005d6>Cloud to Local Sync</p></div></div><div class="px-2 py-1 bg-green-600 bg-opacity-20 rounded-full" data-v-11d005d6><span class="text-xs font-semibold text-green-400 uppercase tracking-wide" data-v-11d005d6>UPDATES</span></div></div>',1)),D("div",WS,[D("p",QS,De(de(e).updatesTotal?"Receiving Updates":"No New Updates"),1)]),de(e).updatesTotal?(jn(),Tr("div",YS,[D("div",JS,[D("div",XS,[I[20]||(I[20]=D("span",{class:"text-gray-300 text-sm"},"Download Progress",-1)),D("span",ZS,De(o.value)+"%",1)]),D("div",e2,[D("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:Ps(`width: ${Math.min(o.value,100)}%`)},null,4)]),D("div",t2,[D("span",null,De(de(e).updatesTotalCompleted)+" completed",1),D("span",null,De(de(e).updatesTotal)+" total",1)])]),de(e).updateTotalContainers?(jn(),Tr("div",n2,[D("div",r2,[I[21]||(I[21]=D("span",{class:"text-gray-300 text-sm"},"Container Downloads",-1)),D("span",s2,De(l.value)+"%",1)]),D("div",i2,[D("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:Ps(`width: ${Math.min(l.value,100)}%`)},null,4)]),D("div",o2,[D("span",null,De(de(e).updateCompletedContainers)+" completed",1),D("span",null,De(de(e).updateTotalContainers)+" total",1)])])):Sd("",!0)])):(jn(),Tr("div",a2,I[22]||(I[22]=[D("svg",{class:"w-8 h-8 mx-auto mb-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[D("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),D("p",{class:"text-green-400 font-semibold text-sm"},"System Up to Date",-1),D("p",{class:"text-xs text-gray-400"},"All data synchronized",-1)])))])])]),D("div",l2,[D("div",c2,[D("div",u2,[I[27]||(I[27]=as('<div class="flex items-center justify-between mb-4" data-v-11d005d6><h3 class="text-lg font-semibold text-white" data-v-11d005d6>Device Info</h3><div class="p-2 bg-blue-600 bg-opacity-20 rounded-lg" data-v-11d005d6><svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-11d005d6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-11d005d6></path></svg></div></div>',1)),D("div",h2,[D("div",f2,[I[24]||(I[24]=D("span",{class:"text-gray-400 text-xs"},"ID:",-1)),D("span",d2,De(de(e).device.id),1)]),D("div",p2,[I[25]||(I[25]=D("span",{class:"text-gray-400 text-xs"},"Mode:",-1)),D("span",m2,De(de(e).device.deviceMode),1)]),D("div",g2,[I[26]||(I[26]=D("span",{class:"text-gray-400 text-xs"},"Type:",-1)),D("span",y2,De(de(e).device.deviceType),1)])])]),D("div",_2,[I[30]||(I[30]=as('<div class="flex items-center justify-between mb-4" data-v-11d005d6><h3 class="text-lg font-semibold text-white" data-v-11d005d6>Organization</h3><div class="p-2 bg-green-600 bg-opacity-20 rounded-lg" data-v-11d005d6><svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-11d005d6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-11d005d6></path></svg></div></div>',1)),D("div",v2,[D("div",b2,[I[28]||(I[28]=D("span",{class:"text-gray-400 text-xs"},"ID:",-1)),D("span",E2,De(de(e).organization.id),1)]),D("div",w2,[I[29]||(I[29]=D("span",{class:"text-gray-400 text-xs"},"Contexts:",-1)),D("span",T2,De(de(e).device.contexts.length),1)])])]),D("div",I2,[I[33]||(I[33]=as('<div class="flex items-center justify-between mb-4" data-v-11d005d6><h3 class="text-lg font-semibold text-white" data-v-11d005d6>System Status</h3><div class="p-2 bg-purple-600 bg-opacity-20 rounded-lg" data-v-11d005d6><svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-11d005d6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 00-2-2z" data-v-11d005d6></path></svg></div></div>',1)),D("div",A2,[D("div",x2,[I[31]||(I[31]=D("span",{class:"text-gray-400 text-xs"},"Database:",-1)),D("div",S2,[D("div",{class:gn([{"bg-green-500":c.value==="connected","bg-red-500":c.value==="error"||c.value==="offline","bg-yellow-500":c.value==="connecting"},"w-2 h-2 rounded-full"])},null,2),D("span",P2,De(c.value==="connected"?"Online":c.value==="offline"?"Offline":c.value==="error"?"Error":"Connecting"),1)])]),D("div",R2,[I[32]||(I[32]=D("span",{class:"text-gray-400 text-xs"},"Processing:",-1)),D("span",{class:gn([de(e).isProcessing?"text-yellow-400":"text-gray-400","text-xs font-medium"])},De(de(e).isProcessing?"Active":"Idle"),3)])])])])])]),r.value?(jn(),Tr("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:I[11]||(I[11]=te=>r.value=!1)},[D("div",{class:"bg-gray-800 border border-gray-700 rounded-2xl p-8 w-full max-w-lg my-8",onClick:I[10]||(I[10]=$E(()=>{},["stop"]))},[D("div",C2,[I[35]||(I[35]=D("h3",{class:"text-xl font-bold text-white"},"Developer Debugging Controls",-1)),D("button",{onClick:I[1]||(I[1]=te=>r.value=!1),class:"text-gray-400 hover:text-white"},I[34]||(I[34]=[D("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[D("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),D("div",D2,[I[37]||(I[37]=D("h4",{class:"text-sm font-semibold text-white mb-4"},"Processing State",-1)),D("div",V2,[I[36]||(I[36]=D("span",{class:"text-gray-400"},"Status:",-1)),D("span",{class:gn([de(e).isProcessing?"text-yellow-400":"text-green-400","font-semibold"])},De(de(e).isProcessing?"Active":"Idle"),3)]),D("div",k2,[D("button",{onClick:I[2]||(I[2]=te=>de(e).startProcessing()),class:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Start "),D("button",{onClick:I[3]||(I[3]=te=>de(e).endProcessing()),class:"bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Stop ")])]),D("div",O2,[I[44]||(I[44]=D("h4",{class:"text-sm font-semibold text-white mb-4"},"Simulate Progress",-1)),D("div",N2,[D("div",M2,[I[39]||(I[39]=D("label",{class:"text-gray-400 text-sm"},"Edits:",-1)),D("div",F2,[os(D("input",{"onUpdate:modelValue":I[4]||(I[4]=te=>de(e).editsContainersComplete=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).editsContainersComplete,void 0,{number:!0}]]),I[38]||(I[38]=D("span",{class:"text-gray-500"},"/",-1)),os(D("input",{"onUpdate:modelValue":I[5]||(I[5]=te=>de(e).editsContainersTotal=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).editsContainersTotal,void 0,{number:!0}]])])]),D("div",L2,[I[41]||(I[41]=D("label",{class:"text-gray-400 text-sm"},"Updates:",-1)),D("div",B2,[os(D("input",{"onUpdate:modelValue":I[6]||(I[6]=te=>de(e).updatesTotalCompleted=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).updatesTotalCompleted,void 0,{number:!0}]]),I[40]||(I[40]=D("span",{class:"text-gray-500"},"/",-1)),os(D("input",{"onUpdate:modelValue":I[7]||(I[7]=te=>de(e).updatesTotal=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).updatesTotal,void 0,{number:!0}]])])]),D("div",U2,[I[43]||(I[43]=D("label",{class:"text-gray-400 text-sm"},"Containers:",-1)),D("div",j2,[os(D("input",{"onUpdate:modelValue":I[8]||(I[8]=te=>de(e).updateCompletedContainers=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).updateCompletedContainers,void 0,{number:!0}]]),I[42]||(I[42]=D("span",{class:"text-gray-500"},"/",-1)),os(D("input",{"onUpdate:modelValue":I[9]||(I[9]=te=>de(e).updateTotalContainers=te),type:"number",class:"w-20 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",min:"0"},null,512),[[ls,de(e).updateTotalContainers,void 0,{number:!0}]])])])])]),D("div",{class:"mb-8 border-t border-gray-700 pt-6"},[I[45]||(I[45]=D("h4",{class:"text-sm font-semibold text-white mb-4"},"Test Actions",-1)),D("div",{class:"space-y-3"},[D("button",{onClick:v,class:"w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test FSUpdatesHandler "),D("button",{onClick:R,class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Edits Update Status "),D("button",{onClick:V,class:"w-full bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Container Downloads "),D("button",{onClick:k,class:"w-full bg-teal-600 hover:bg-teal-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test FSUpdatesHandler in Active Mode "),D("button",{onClick:F,class:"w-full bg-orange-600 hover:bg-orange-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Test Subscribe Updates "),D("button",{onClick:N,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"}," Simulate Firestore Update ")])]),D("div",$2,[I[46]||(I[46]=D("h4",{class:"text-sm font-semibold text-white mb-3"},"System Info",-1)),D("div",z2,[D("div",null,"ORG: "+De(de(e).organization.id),1),D("div",null,"DEV: "+De(de(e).device.id)+" ("+De(de(e).device.deviceMode)+")",1),D("div",null,"DB: "+De(t.value),1)])])])])):Sd("",!0)])}}},G2=wS(q2,[["__scopeId","data-v-11d005d6"]]);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function K2(n,e,t){return(e=W2(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function K(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pm(Object(t),!0).forEach(function(r){K2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function H2(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function W2(n){var e=H2(n,"string");return typeof e=="symbol"?e:e+""}const Rm=()=>{};let uf={},f0={},d0=null,p0={mark:Rm,measure:Rm};try{typeof window<"u"&&(uf=window),typeof document<"u"&&(f0=document),typeof MutationObserver<"u"&&(d0=MutationObserver),typeof performance<"u"&&(p0=performance)}catch{}const{userAgent:Cm=""}=uf.navigator||{},ir=uf,Oe=f0,Dm=d0,ua=p0;ir.document;const Vn=!!Oe.documentElement&&!!Oe.head&&typeof Oe.addEventListener=="function"&&typeof Oe.createElement=="function",m0=~Cm.indexOf("MSIE")||~Cm.indexOf("Trident/");var Q2=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Y2=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,g0={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},J2={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},y0=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],pt="classic",Kl="duotone",X2="sharp",Z2="sharp-duotone",_0=[pt,Kl,X2,Z2],eP={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},tP={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},nP=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),rP={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},sP=["fak","fa-kit","fakd","fa-kit-duotone"],Vm={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},iP=["kit"],oP={kit:{"fa-kit":"fak"}},aP=["fak","fakd"],lP={kit:{fak:"fa-kit"}},km={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},ha={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},cP=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],uP=["fak","fa-kit","fakd","fa-kit-duotone"],hP={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},fP={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},dP={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},Ou={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},pP=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Nu=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...cP,...pP],mP=["solid","regular","light","thin","duotone","brands"],v0=[1,2,3,4,5,6,7,8,9,10],gP=v0.concat([11,12,13,14,15,16,17,18,19,20]),yP=[...Object.keys(dP),...mP,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ha.GROUP,ha.SWAP_OPACITY,ha.PRIMARY,ha.SECONDARY].concat(v0.map(n=>"".concat(n,"x"))).concat(gP.map(n=>"w-".concat(n))),_P={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Sn="___FONT_AWESOME___",Mu=16,b0="fa",E0="svg-inline--fa",Yr="data-fa-i2svg",Fu="data-fa-pseudo-element",vP="data-fa-pseudo-element-pending",hf="data-prefix",ff="data-icon",Om="fontawesome-i2svg",bP="async",EP=["HTML","HEAD","STYLE","SCRIPT"],w0=(()=>{try{return!0}catch{return!1}})();function No(n){return new Proxy(n,{get(e,t){return t in e?e[t]:e[pt]}})}const T0=K({},g0);T0[pt]=K(K(K(K({},{"fa-duotone":"duotone"}),g0[pt]),Vm.kit),Vm["kit-duotone"]);const wP=No(T0),Lu=K({},rP);Lu[pt]=K(K(K(K({},{duotone:"fad"}),Lu[pt]),km.kit),km["kit-duotone"]);const Nm=No(Lu),Bu=K({},Ou);Bu[pt]=K(K({},Bu[pt]),lP.kit);const df=No(Bu),Uu=K({},fP);Uu[pt]=K(K({},Uu[pt]),oP.kit);No(Uu);const TP=Q2,I0="fa-layers-text",IP=Y2,AP=K({},eP);No(AP);const xP=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Nc=J2,SP=[...iP,...yP],Qi=ir.FontAwesomeConfig||{};function PP(n){var e=Oe.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function RP(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}Oe&&typeof Oe.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,r]=e;const s=RP(PP(t));s!=null&&(Qi[r]=s)});const A0={styleDefault:"solid",familyDefault:pt,cssPrefix:b0,replacementClass:E0,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Qi.familyPrefix&&(Qi.cssPrefix=Qi.familyPrefix);const Hs=K(K({},A0),Qi);Hs.autoReplaceSvg||(Hs.observeMutations=!1);const se={};Object.keys(A0).forEach(n=>{Object.defineProperty(se,n,{enumerable:!0,set:function(e){Hs[n]=e,Yi.forEach(t=>t(se))},get:function(){return Hs[n]}})});Object.defineProperty(se,"familyPrefix",{enumerable:!0,set:function(n){Hs.cssPrefix=n,Yi.forEach(e=>e(se))},get:function(){return Hs.cssPrefix}});ir.FontAwesomeConfig=se;const Yi=[];function CP(n){return Yi.push(n),()=>{Yi.splice(Yi.indexOf(n),1)}}const Un=Mu,rn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function DP(n){if(!n||!Vn)return;const e=Oe.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;const t=Oe.head.childNodes;let r=null;for(let s=t.length-1;s>-1;s--){const i=t[s],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}return Oe.head.insertBefore(e,r),n}const VP="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function bo(){let n=12,e="";for(;n-- >0;)e+=VP[Math.random()*62|0];return e}function Zs(n){const e=[];for(let t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function pf(n){return n.classList?Zs(n.classList):(n.getAttribute("class")||"").split(" ").filter(e=>e)}function x0(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kP(n){return Object.keys(n||{}).reduce((e,t)=>e+"".concat(t,'="').concat(x0(n[t]),'" '),"").trim()}function Hl(n){return Object.keys(n||{}).reduce((e,t)=>e+"".concat(t,": ").concat(n[t].trim(),";"),"")}function mf(n){return n.size!==rn.size||n.x!==rn.x||n.y!==rn.y||n.rotate!==rn.rotate||n.flipX||n.flipY}function OP(n){let{transform:e,containerWidth:t,iconWidth:r}=n;const s={transform:"translate(".concat(t/2," 256)")},i="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),l="rotate(".concat(e.rotate," 0 0)"),c={transform:"".concat(i," ").concat(o," ").concat(l)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:c,path:u}}function NP(n){let{transform:e,width:t=Mu,height:r=Mu,startCentered:s=!1}=n,i="";return s&&m0?i+="translate(".concat(e.x/Un-t/2,"em, ").concat(e.y/Un-r/2,"em) "):s?i+="translate(calc(-50% + ".concat(e.x/Un,"em), calc(-50% + ").concat(e.y/Un,"em)) "):i+="translate(".concat(e.x/Un,"em, ").concat(e.y/Un,"em) "),i+="scale(".concat(e.size/Un*(e.flipX?-1:1),", ").concat(e.size/Un*(e.flipY?-1:1),") "),i+="rotate(".concat(e.rotate,"deg) "),i}var MP=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function S0(){const n=b0,e=E0,t=se.cssPrefix,r=se.replacementClass;let s=MP;if(t!==n||r!==e){const i=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),l=new RegExp("\\.".concat(e),"g");s=s.replace(i,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(l,".".concat(r))}return s}let Mm=!1;function Mc(){se.autoAddCss&&!Mm&&(DP(S0()),Mm=!0)}var FP={mixout(){return{dom:{css:S0,insertCss:Mc}}},hooks(){return{beforeDOMElementCreation(){Mc()},beforeI2svg(){Mc()}}}};const Pn=ir||{};Pn[Sn]||(Pn[Sn]={});Pn[Sn].styles||(Pn[Sn].styles={});Pn[Sn].hooks||(Pn[Sn].hooks={});Pn[Sn].shims||(Pn[Sn].shims=[]);var sn=Pn[Sn];const P0=[],R0=function(){Oe.removeEventListener("DOMContentLoaded",R0),il=1,P0.map(n=>n())};let il=!1;Vn&&(il=(Oe.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Oe.readyState),il||Oe.addEventListener("DOMContentLoaded",R0));function LP(n){Vn&&(il?setTimeout(n,0):P0.push(n))}function Mo(n){const{tag:e,attributes:t={},children:r=[]}=n;return typeof n=="string"?x0(n):"<".concat(e," ").concat(kP(t),">").concat(r.map(Mo).join(""),"</").concat(e,">")}function Fm(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var Fc=function(e,t,r,s){var i=Object.keys(e),o=i.length,l=t,c,u,f;for(r===void 0?(c=1,f=e[i[0]]):(c=0,f=r);c<o;c++)u=i[c],f=l(f,e[u],u,e);return f};function BP(n){const e=[];let t=0;const r=n.length;for(;t<r;){const s=n.charCodeAt(t++);if(s>=55296&&s<=56319&&t<r){const i=n.charCodeAt(t++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function ju(n){const e=BP(n);return e.length===1?e[0].toString(16):null}function UP(n,e){const t=n.length;let r=n.charCodeAt(e),s;return r>=55296&&r<=56319&&t>e+1&&(s=n.charCodeAt(e+1),s>=56320&&s<=57343)?(r-55296)*1024+s-56320+65536:r}function Lm(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return!!r.icon?e[r.iconName]=r.icon:e[t]=r,e},{})}function $u(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=t,s=Lm(e);typeof sn.hooks.addPack=="function"&&!r?sn.hooks.addPack(n,Lm(e)):sn.styles[n]=K(K({},sn.styles[n]||{}),s),n==="fas"&&$u("fa",e)}const{styles:Eo,shims:jP}=sn,C0=Object.keys(df),$P=C0.reduce((n,e)=>(n[e]=Object.keys(df[e]),n),{});let gf=null,D0={},V0={},k0={},O0={},N0={};function zP(n){return~SP.indexOf(n)}function qP(n,e){const t=e.split("-"),r=t[0],s=t.slice(1).join("-");return r===n&&s!==""&&!zP(s)?s:null}const M0=()=>{const n=r=>Fc(Eo,(s,i,o)=>(s[o]=Fc(i,r,{}),s),{});D0=n((r,s,i)=>(s[3]&&(r[s[3]]=i),s[2]&&s[2].filter(l=>typeof l=="number").forEach(l=>{r[l.toString(16)]=i}),r)),V0=n((r,s,i)=>(r[i]=i,s[2]&&s[2].filter(l=>typeof l=="string").forEach(l=>{r[l]=i}),r)),N0=n((r,s,i)=>{const o=s[2];return r[i]=i,o.forEach(l=>{r[l]=i}),r});const e="far"in Eo||se.autoFetchSvg,t=Fc(jP,(r,s)=>{const i=s[0];let o=s[1];const l=s[2];return o==="far"&&!e&&(o="fas"),typeof i=="string"&&(r.names[i]={prefix:o,iconName:l}),typeof i=="number"&&(r.unicodes[i.toString(16)]={prefix:o,iconName:l}),r},{names:{},unicodes:{}});k0=t.names,O0=t.unicodes,gf=Wl(se.styleDefault,{family:se.familyDefault})};CP(n=>{gf=Wl(n.styleDefault,{family:se.familyDefault})});M0();function yf(n,e){return(D0[n]||{})[e]}function GP(n,e){return(V0[n]||{})[e]}function Or(n,e){return(N0[n]||{})[e]}function F0(n){return k0[n]||{prefix:null,iconName:null}}function KP(n){const e=O0[n],t=yf("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function or(){return gf}const L0=()=>({prefix:null,iconName:null,rest:[]});function HP(n){let e=pt;const t=C0.reduce((r,s)=>(r[s]="".concat(se.cssPrefix,"-").concat(s),r),{});return _0.forEach(r=>{(n.includes(t[r])||n.some(s=>$P[r].includes(s)))&&(e=r)}),e}function Wl(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=pt}=e,r=wP[t][n];if(t===Kl&&!n)return"fad";const s=Nm[t][n]||Nm[t][r],i=n in sn.styles?n:null;return s||i||null}function WP(n){let e=[],t=null;return n.forEach(r=>{const s=qP(se.cssPrefix,r);s?t=s:r&&e.push(r)}),{iconName:t,rest:e}}function Bm(n){return n.sort().filter((e,t,r)=>r.indexOf(e)===t)}function Ql(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e;let r=null;const s=Nu.concat(uP),i=Bm(n.filter(p=>s.includes(p))),o=Bm(n.filter(p=>!Nu.includes(p))),l=i.filter(p=>(r=p,!y0.includes(p))),[c=null]=l,u=HP(i),f=K(K({},WP(o)),{},{prefix:Wl(c,{family:u})});return K(K(K({},f),XP({values:n,family:u,styles:Eo,config:se,canonical:f,givenPrefix:r})),QP(t,r,f))}function QP(n,e,t){let{prefix:r,iconName:s}=t;if(n||!r||!s)return{prefix:r,iconName:s};const i=e==="fa"?F0(s):{},o=Or(r,s);return s=i.iconName||o||s,r=i.prefix||r,r==="far"&&!Eo.far&&Eo.fas&&!se.autoFetchSvg&&(r="fas"),{prefix:r,iconName:s}}const YP=_0.filter(n=>n!==pt||n!==Kl),JP=Object.keys(Ou).filter(n=>n!==pt).map(n=>Object.keys(Ou[n])).flat();function XP(n){const{values:e,family:t,canonical:r,givenPrefix:s="",styles:i={},config:o={}}=n,l=t===Kl,c=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",f=r.prefix==="fad"||r.prefix==="fa-duotone";if(!l&&(c||u||f)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&YP.includes(t)&&(Object.keys(i).find(m=>JP.includes(m))||o.autoFetchSvg)){const m=nP.get(t).defaultShortPrefixId;r.prefix=m,r.iconName=Or(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||s==="fa")&&(r.prefix=or()||"fas"),r}class ZP{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=t.reduce(this._pullDefinitions,{});Object.keys(s).forEach(i=>{this.definitions[i]=K(K({},this.definitions[i]||{}),s[i]),$u(i,s[i]);const o=df[pt][i];o&&$u(o,s[i]),M0()})}reset(){this.definitions={}}_pullDefinitions(e,t){const r=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(r).map(s=>{const{prefix:i,iconName:o,icon:l}=r[s],c=l[2];e[i]||(e[i]={}),c.length>0&&c.forEach(u=>{typeof u=="string"&&(e[i][u]=l)}),e[i][o]=l}),e}}let Um=[],As={};const Vs={},eR=Object.keys(Vs);function tR(n,e){let{mixoutsTo:t}=e;return Um=n,As={},Object.keys(Vs).forEach(r=>{eR.indexOf(r)===-1&&delete Vs[r]}),Um.forEach(r=>{const s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(i=>{typeof s[i]=="function"&&(t[i]=s[i]),typeof s[i]=="object"&&Object.keys(s[i]).forEach(o=>{t[i]||(t[i]={}),t[i][o]=s[i][o]})}),r.hooks){const i=r.hooks();Object.keys(i).forEach(o=>{As[o]||(As[o]=[]),As[o].push(i[o])})}r.provides&&r.provides(Vs)}),t}function zu(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),s=2;s<t;s++)r[s-2]=arguments[s];return(As[n]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function Jr(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];(As[n]||[]).forEach(i=>{i.apply(null,t)})}function ar(){const n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Vs[n]?Vs[n].apply(null,e):void 0}function qu(n){n.prefix==="fa"&&(n.prefix="fas");let{iconName:e}=n;const t=n.prefix||or();if(e)return e=Or(t,e)||e,Fm(B0.definitions,t,e)||Fm(sn.styles,t,e)}const B0=new ZP,nR=()=>{se.autoReplaceSvg=!1,se.observeMutations=!1,Jr("noAuto")},rR={i2svg:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vn?(Jr("beforeI2svg",n),ar("pseudoElements2svg",n),ar("i2svg",n)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=n;se.autoReplaceSvg===!1&&(se.autoReplaceSvg=!0),se.observeMutations=!0,LP(()=>{iR({autoReplaceSvgRoot:e}),Jr("watch",n)})}},sR={icon:n=>{if(n===null)return null;if(typeof n=="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:Or(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){const e=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],t=Wl(n[0]);return{prefix:t,iconName:Or(t,e)||e}}if(typeof n=="string"&&(n.indexOf("".concat(se.cssPrefix,"-"))>-1||n.match(TP))){const e=Ql(n.split(" "),{skipLookups:!0});return{prefix:e.prefix||or(),iconName:Or(e.prefix,e.iconName)||e.iconName}}if(typeof n=="string"){const e=or();return{prefix:e,iconName:Or(e,n)||n}}}},Mt={noAuto:nR,config:se,dom:rR,parse:sR,library:B0,findIconDefinition:qu,toHtml:Mo},iR=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Oe}=n;(Object.keys(sn.styles).length>0||se.autoFetchSvg)&&Vn&&se.autoReplaceSvg&&Mt.dom.i2svg({node:e})};function Yl(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(t=>Mo(t))}}),Object.defineProperty(n,"node",{get:function(){if(!Vn)return;const t=Oe.createElement("div");return t.innerHTML=n.html,t.children}}),n}function oR(n){let{children:e,main:t,mask:r,attributes:s,styles:i,transform:o}=n;if(mf(o)&&t.found&&!r.found){const{width:l,height:c}=t,u={x:l/c/2,y:.5};s.style=Hl(K(K({},i),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function aR(n){let{prefix:e,iconName:t,children:r,attributes:s,symbol:i}=n;const o=i===!0?"".concat(e,"-").concat(se.cssPrefix,"-").concat(t):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:K(K({},s),{},{id:o}),children:r}]}]}function _f(n){const{icons:{main:e,mask:t},prefix:r,iconName:s,transform:i,symbol:o,title:l,maskId:c,titleId:u,extra:f,watchable:p=!1}=n,{width:m,height:v}=t.found?t:e,R=aP.includes(r),V=[se.replacementClass,s?"".concat(se.cssPrefix,"-").concat(s):""].filter(X=>f.classes.indexOf(X)===-1).filter(X=>X!==""||!!X).concat(f.classes).join(" ");let k={children:[],attributes:K(K({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:V,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})};const F=R&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/v*16*.0625,"em")}:{};p&&(k.attributes[Yr]=""),l&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(u||bo())},children:[l]}),delete k.attributes.title);const N=K(K({},k),{},{prefix:r,iconName:s,main:e,mask:t,maskId:c,transform:i,symbol:o,styles:K(K({},F),f.styles)}),{children:M,attributes:I}=t.found&&e.found?ar("generateAbstractMask",N)||{children:[],attributes:{}}:ar("generateAbstractIcon",N)||{children:[],attributes:{}};return N.children=M,N.attributes=I,o?aR(N):oR(N)}function jm(n){const{content:e,width:t,height:r,transform:s,title:i,extra:o,watchable:l=!1}=n,c=K(K(K({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});l&&(c[Yr]="");const u=K({},o.styles);mf(s)&&(u.transform=NP({transform:s,startCentered:!0,width:t,height:r}),u["-webkit-transform"]=u.transform);const f=Hl(u);f.length>0&&(c.style=f);const p=[];return p.push({tag:"span",attributes:c,children:[e]}),i&&p.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),p}function lR(n){const{content:e,title:t,extra:r}=n,s=K(K(K({},r.attributes),t?{title:t}:{}),{},{class:r.classes.join(" ")}),i=Hl(r.styles);i.length>0&&(s.style=i);const o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}const{styles:Lc}=sn;function Gu(n){const e=n[0],t=n[1],[r]=n.slice(4);let s=null;return Array.isArray(r)?s={tag:"g",attributes:{class:"".concat(se.cssPrefix,"-").concat(Nc.GROUP)},children:[{tag:"path",attributes:{class:"".concat(se.cssPrefix,"-").concat(Nc.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(se.cssPrefix,"-").concat(Nc.PRIMARY),fill:"currentColor",d:r[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:s}}const cR={found:!1,width:512,height:512};function uR(n,e){!w0&&!se.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function Ku(n,e){let t=e;return e==="fa"&&se.styleDefault!==null&&(e=or()),new Promise((r,s)=>{if(t==="fa"){const i=F0(n)||{};n=i.iconName||n,e=i.prefix||e}if(n&&e&&Lc[e]&&Lc[e][n]){const i=Lc[e][n];return r(Gu(i))}uR(n,e),r(K(K({},cR),{},{icon:se.showMissingIcons&&n?ar("missingIconAbstract")||{}:{}}))})}const $m=()=>{},Hu=se.measurePerformance&&ua&&ua.mark&&ua.measure?ua:{mark:$m,measure:$m},Si='FA "6.7.2"',hR=n=>(Hu.mark("".concat(Si," ").concat(n," begins")),()=>U0(n)),U0=n=>{Hu.mark("".concat(Si," ").concat(n," ends")),Hu.measure("".concat(Si," ").concat(n),"".concat(Si," ").concat(n," begins"),"".concat(Si," ").concat(n," ends"))};var vf={begin:hR,end:U0};const Sa=()=>{};function zm(n){return typeof(n.getAttribute?n.getAttribute(Yr):null)=="string"}function fR(n){const e=n.getAttribute?n.getAttribute(hf):null,t=n.getAttribute?n.getAttribute(ff):null;return e&&t}function dR(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(se.replacementClass)}function pR(){return se.autoReplaceSvg===!0?Pa.replace:Pa[se.autoReplaceSvg]||Pa.replace}function mR(n){return Oe.createElementNS("http://www.w3.org/2000/svg",n)}function gR(n){return Oe.createElement(n)}function j0(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=n.tag==="svg"?mR:gR}=e;if(typeof n=="string")return Oe.createTextNode(n);const r=t(n.tag);return Object.keys(n.attributes||[]).forEach(function(i){r.setAttribute(i,n.attributes[i])}),(n.children||[]).forEach(function(i){r.appendChild(j0(i,{ceFn:t}))}),r}function yR(n){let e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Pa={replace:function(n){const e=n[0];if(e.parentNode)if(n[1].forEach(t=>{e.parentNode.insertBefore(j0(t),e)}),e.getAttribute(Yr)===null&&se.keepOriginalSource){let t=Oe.createComment(yR(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(n){const e=n[0],t=n[1];if(~pf(e).indexOf(se.replacementClass))return Pa.replace(n);const r=new RegExp("".concat(se.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const i=t[0].attributes.class.split(" ").reduce((o,l)=>(l===se.replacementClass||l.match(r)?o.toSvg.push(l):o.toNode.push(l),o),{toNode:[],toSvg:[]});t[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",i.toNode.join(" "))}const s=t.map(i=>Mo(i)).join(`
`);e.setAttribute(Yr,""),e.innerHTML=s}};function qm(n){n()}function $0(n,e){const t=typeof e=="function"?e:Sa;if(n.length===0)t();else{let r=qm;se.mutateApproach===bP&&(r=ir.requestAnimationFrame||qm),r(()=>{const s=pR(),i=vf.begin("mutate");n.map(s),i(),t()})}}let bf=!1;function z0(){bf=!0}function Wu(){bf=!1}let ol=null;function Gm(n){if(!Dm||!se.observeMutations)return;const{treeCallback:e=Sa,nodeCallback:t=Sa,pseudoElementsCallback:r=Sa,observeMutationsRoot:s=Oe}=n;ol=new Dm(i=>{if(bf)return;const o=or();Zs(i).forEach(l=>{if(l.type==="childList"&&l.addedNodes.length>0&&!zm(l.addedNodes[0])&&(se.searchPseudoElements&&r(l.target),e(l.target)),l.type==="attributes"&&l.target.parentNode&&se.searchPseudoElements&&r(l.target.parentNode),l.type==="attributes"&&zm(l.target)&&~xP.indexOf(l.attributeName))if(l.attributeName==="class"&&fR(l.target)){const{prefix:c,iconName:u}=Ql(pf(l.target));l.target.setAttribute(hf,c||o),u&&l.target.setAttribute(ff,u)}else dR(l.target)&&t(l.target)})}),Vn&&ol.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function _R(){ol&&ol.disconnect()}function vR(n){const e=n.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((r,s)=>{const i=s.split(":"),o=i[0],l=i.slice(1);return o&&l.length>0&&(r[o]=l.join(":").trim()),r},{})),t}function bR(n){const e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),r=n.innerText!==void 0?n.innerText.trim():"";let s=Ql(pf(n));return s.prefix||(s.prefix=or()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=GP(s.prefix,n.innerText)||yf(s.prefix,ju(n.innerText))),!s.iconName&&se.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=n.firstChild.data)),s}function ER(n){const e=Zs(n.attributes).reduce((s,i)=>(s.name!=="class"&&s.name!=="style"&&(s[i.name]=i.value),s),{}),t=n.getAttribute("title"),r=n.getAttribute("data-fa-title-id");return se.autoA11y&&(t?e["aria-labelledby"]="".concat(se.replacementClass,"-title-").concat(r||bo()):(e["aria-hidden"]="true",e.focusable="false")),e}function wR(){return{iconName:null,title:null,titleId:null,prefix:null,transform:rn,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Km(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:r,rest:s}=bR(n),i=ER(n),o=zu("parseNodeAttributes",{},n);let l=e.styleParser?vR(n):[];return K({iconName:t,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:rn,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:i}},o)}const{styles:TR}=sn;function q0(n){const e=se.autoReplaceSvg==="nest"?Km(n,{styleParser:!1}):Km(n);return~e.extra.classes.indexOf(I0)?ar("generateLayersText",n,e):ar("generateSvgReplacementMutation",n,e)}function IR(){return[...sP,...Nu]}function Hm(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Vn)return Promise.resolve();const t=Oe.documentElement.classList,r=f=>t.add("".concat(Om,"-").concat(f)),s=f=>t.remove("".concat(Om,"-").concat(f)),i=se.autoFetchSvg?IR():y0.concat(Object.keys(TR));i.includes("fa")||i.push("fa");const o=[".".concat(I0,":not([").concat(Yr,"])")].concat(i.map(f=>".".concat(f,":not([").concat(Yr,"])"))).join(", ");if(o.length===0)return Promise.resolve();let l=[];try{l=Zs(n.querySelectorAll(o))}catch{}if(l.length>0)r("pending"),s("complete");else return Promise.resolve();const c=vf.begin("onTree"),u=l.reduce((f,p)=>{try{const m=q0(p);m&&f.push(m)}catch(m){w0||m.name==="MissingIcon"&&console.error(m)}return f},[]);return new Promise((f,p)=>{Promise.all(u).then(m=>{$0(m,()=>{r("active"),r("complete"),s("pending"),typeof e=="function"&&e(),c(),f()})}).catch(m=>{c(),p(m)})})}function AR(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;q0(n).then(t=>{t&&$0([t],e)})}function xR(n){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:qu(e||{});let{mask:s}=t;return s&&(s=(s||{}).icon?s:qu(s||{})),n(r,K(K({},t),{},{mask:s}))}}const SR=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=rn,symbol:r=!1,mask:s=null,maskId:i=null,title:o=null,titleId:l=null,classes:c=[],attributes:u={},styles:f={}}=e;if(!n)return;const{prefix:p,iconName:m,icon:v}=n;return Yl(K({type:"icon"},n),()=>(Jr("beforeDOMElementCreation",{iconDefinition:n,params:e}),se.autoA11y&&(o?u["aria-labelledby"]="".concat(se.replacementClass,"-title-").concat(l||bo()):(u["aria-hidden"]="true",u.focusable="false")),_f({icons:{main:Gu(v),mask:s?Gu(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:p,iconName:m,transform:K(K({},rn),t),symbol:r,title:o,maskId:i,titleId:l,extra:{attributes:u,styles:f,classes:c}})))};var PR={mixout(){return{icon:xR(SR)}},hooks(){return{mutationObserverCallbacks(n){return n.treeCallback=Hm,n.nodeCallback=AR,n}}},provides(n){n.i2svg=function(e){const{node:t=Oe,callback:r=()=>{}}=e;return Hm(t,r)},n.generateSvgReplacementMutation=function(e,t){const{iconName:r,title:s,titleId:i,prefix:o,transform:l,symbol:c,mask:u,maskId:f,extra:p}=t;return new Promise((m,v)=>{Promise.all([Ku(r,o),u.iconName?Ku(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(R=>{let[V,k]=R;m([e,_f({icons:{main:V,mask:k},prefix:o,iconName:r,transform:l,symbol:c,maskId:f,title:s,titleId:i,extra:p,watchable:!0})])}).catch(v)})},n.generateAbstractIcon=function(e){let{children:t,attributes:r,main:s,transform:i,styles:o}=e;const l=Hl(o);l.length>0&&(r.style=l);let c;return mf(i)&&(c=ar("generateAbstractTransformGrouping",{main:s,transform:i,containerWidth:s.width,iconWidth:s.width})),t.push(c||s.icon),{children:t,attributes:r}}}},RR={mixout(){return{layer(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return Yl({type:"layer"},()=>{Jr("beforeDOMElementCreation",{assembler:n,params:e});let r=[];return n(s=>{Array.isArray(s)?s.map(i=>{r=r.concat(i.abstract)}):r=r.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(se.cssPrefix,"-layers"),...t].join(" ")},children:r}]})}}}},CR={mixout(){return{counter(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:r=[],attributes:s={},styles:i={}}=e;return Yl({type:"counter",content:n},()=>(Jr("beforeDOMElementCreation",{content:n,params:e}),lR({content:n.toString(),title:t,extra:{attributes:s,styles:i,classes:["".concat(se.cssPrefix,"-layers-counter"),...r]}})))}}}},DR={mixout(){return{text(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=rn,title:r=null,classes:s=[],attributes:i={},styles:o={}}=e;return Yl({type:"text",content:n},()=>(Jr("beforeDOMElementCreation",{content:n,params:e}),jm({content:n,transform:K(K({},rn),t),title:r,extra:{attributes:i,styles:o,classes:["".concat(se.cssPrefix,"-layers-text"),...s]}})))}}},provides(n){n.generateLayersText=function(e,t){const{title:r,transform:s,extra:i}=t;let o=null,l=null;if(m0){const c=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/c,l=u.height/c}return se.autoA11y&&!r&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,jm({content:e.innerHTML,width:o,height:l,transform:s,title:r,extra:i,watchable:!0})])}}};const VR=new RegExp('"',"ug"),Wm=[1105920,1112319],Qm=K(K(K(K({},{FontAwesome:{normal:"fas",400:"fas"}}),tP),_P),hP),Qu=Object.keys(Qm).reduce((n,e)=>(n[e.toLowerCase()]=Qm[e],n),{}),kR=Object.keys(Qu).reduce((n,e)=>{const t=Qu[e];return n[e]=t[900]||[...Object.entries(t)][0][1],n},{});function OR(n){const e=n.replace(VR,""),t=UP(e,0),r=t>=Wm[0]&&t<=Wm[1],s=e.length===2?e[0]===e[1]:!1;return{value:ju(s?e[0]:e),isSecondary:r||s}}function NR(n,e){const t=n.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),s=isNaN(r)?"normal":r;return(Qu[t]||{})[s]||kR[t]}function Ym(n,e){const t="".concat(vP).concat(e.replace(":","-"));return new Promise((r,s)=>{if(n.getAttribute(t)!==null)return r();const o=Zs(n.children).filter(m=>m.getAttribute(Fu)===e)[0],l=ir.getComputedStyle(n,e),c=l.getPropertyValue("font-family"),u=c.match(IP),f=l.getPropertyValue("font-weight"),p=l.getPropertyValue("content");if(o&&!u)return n.removeChild(o),r();if(u&&p!=="none"&&p!==""){const m=l.getPropertyValue("content");let v=NR(c,f);const{value:R,isSecondary:V}=OR(m),k=u[0].startsWith("FontAwesome");let F=yf(v,R),N=F;if(k){const M=KP(R);M.iconName&&M.prefix&&(F=M.iconName,v=M.prefix)}if(F&&!V&&(!o||o.getAttribute(hf)!==v||o.getAttribute(ff)!==N)){n.setAttribute(t,N),o&&n.removeChild(o);const M=wR(),{extra:I}=M;I.attributes[Fu]=e,Ku(F,v).then(X=>{const te=_f(K(K({},M),{},{icons:{main:X,mask:L0()},prefix:v,iconName:N,extra:I,watchable:!0})),w=Oe.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?n.insertBefore(w,n.firstChild):n.appendChild(w),w.outerHTML=te.map(y=>Mo(y)).join(`
`),n.removeAttribute(t),r()}).catch(s)}else r()}else r()})}function MR(n){return Promise.all([Ym(n,"::before"),Ym(n,"::after")])}function FR(n){return n.parentNode!==document.head&&!~EP.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(Fu)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function Jm(n){if(Vn)return new Promise((e,t)=>{const r=Zs(n.querySelectorAll("*")).filter(FR).map(MR),s=vf.begin("searchPseudoElements");z0(),Promise.all(r).then(()=>{s(),Wu(),e()}).catch(()=>{s(),Wu(),t()})})}var LR={hooks(){return{mutationObserverCallbacks(n){return n.pseudoElementsCallback=Jm,n}}},provides(n){n.pseudoElements2svg=function(e){const{node:t=Oe}=e;se.searchPseudoElements&&Jm(t)}}};let Xm=!1;var BR={mixout(){return{dom:{unwatch(){z0(),Xm=!0}}}},hooks(){return{bootstrap(){Gm(zu("mutationObserverCallbacks",{}))},noAuto(){_R()},watch(n){const{observeMutationsRoot:e}=n;Xm?Wu():Gm(zu("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const Zm=n=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce((t,r)=>{const s=r.toLowerCase().split("-"),i=s[0];let o=s.slice(1).join("-");if(i&&o==="h")return t.flipX=!0,t;if(i&&o==="v")return t.flipY=!0,t;if(o=parseFloat(o),isNaN(o))return t;switch(i){case"grow":t.size=t.size+o;break;case"shrink":t.size=t.size-o;break;case"left":t.x=t.x-o;break;case"right":t.x=t.x+o;break;case"up":t.y=t.y-o;break;case"down":t.y=t.y+o;break;case"rotate":t.rotate=t.rotate+o;break}return t},e)};var UR={mixout(){return{parse:{transform:n=>Zm(n)}}},hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-transform");return t&&(n.transform=Zm(t)),n}}},provides(n){n.generateAbstractTransformGrouping=function(e){let{main:t,transform:r,containerWidth:s,iconWidth:i}=e;const o={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(r.x*32,", ").concat(r.y*32,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},p={transform:"translate(".concat(i/2*-1," -256)")},m={outer:o,inner:f,path:p};return{tag:"g",attributes:K({},m.outer),children:[{tag:"g",attributes:K({},m.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:K(K({},t.icon.attributes),m.path)}]}]}}}};const Bc={x:0,y:0,width:"100%",height:"100%"};function eg(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function jR(n){return n.tag==="g"?n.children:[n]}var $R={hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-mask"),r=t?Ql(t.split(" ").map(s=>s.trim())):L0();return r.prefix||(r.prefix=or()),n.mask=r,n.maskId=e.getAttribute("data-fa-mask-id"),n}}},provides(n){n.generateAbstractMask=function(e){let{children:t,attributes:r,main:s,mask:i,maskId:o,transform:l}=e;const{width:c,icon:u}=s,{width:f,icon:p}=i,m=OP({transform:l,containerWidth:f,iconWidth:c}),v={tag:"rect",attributes:K(K({},Bc),{},{fill:"white"})},R=u.children?{children:u.children.map(eg)}:{},V={tag:"g",attributes:K({},m.inner),children:[eg(K({tag:u.tag,attributes:K(K({},u.attributes),m.path)},R))]},k={tag:"g",attributes:K({},m.outer),children:[V]},F="mask-".concat(o||bo()),N="clip-".concat(o||bo()),M={tag:"mask",attributes:K(K({},Bc),{},{id:F,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,k]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:N},children:jR(p)},M]};return t.push(I,{tag:"rect",attributes:K({fill:"currentColor","clip-path":"url(#".concat(N,")"),mask:"url(#".concat(F,")")},Bc)}),{children:t,attributes:r}}}},zR={provides(n){let e=!1;ir.matchMedia&&(e=ir.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){const t=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:K(K({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const i=K(K({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:K(K({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:K(K({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:K(K({},i),{},{values:"1;0;1;1;0;1;"})}),t.push(o),t.push({tag:"path",attributes:K(K({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:K(K({},i),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:K(K({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:K(K({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},qR={hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-symbol"),r=t===null?!1:t===""?!0:t;return n.symbol=r,n}}}},GR=[FP,PR,RR,CR,DR,LR,BR,UR,$R,zR,qR];tR(GR,{mixoutsTo:Mt});Mt.noAuto;Mt.config;const KR=Mt.library;Mt.dom;const Yu=Mt.parse;Mt.findIconDefinition;Mt.toHtml;const HR=Mt.icon;Mt.layer;Mt.text;Mt.counter;function tg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function bn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tg(Object(t),!0).forEach(function(r){At(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tg(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WR(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QR(n){var e=WR(n,"string");return typeof e=="symbol"?e:e+""}function al(n){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(n)}function At(n,e,t){return e=QR(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YR(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function JR(n,e){if(n==null)return{};var t=YR(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}var XR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G0={exports:{}};(function(n){(function(e){var t=function(F,N,M){if(!u(N)||p(N)||m(N)||v(N)||c(N))return N;var I,X=0,te=0;if(f(N))for(I=[],te=N.length;X<te;X++)I.push(t(F,N[X],M));else{I={};for(var w in N)Object.prototype.hasOwnProperty.call(N,w)&&(I[F(w,M)]=t(F,N[w],M))}return I},r=function(F,N){N=N||{};var M=N.separator||"_",I=N.split||/(?=[A-Z])/;return F.split(I).join(M)},s=function(F){return R(F)?F:(F=F.replace(/[\-_\s]+(.)?/g,function(N,M){return M?M.toUpperCase():""}),F.substr(0,1).toLowerCase()+F.substr(1))},i=function(F){var N=s(F);return N.substr(0,1).toUpperCase()+N.substr(1)},o=function(F,N){return r(F,N).toLowerCase()},l=Object.prototype.toString,c=function(F){return typeof F=="function"},u=function(F){return F===Object(F)},f=function(F){return l.call(F)=="[object Array]"},p=function(F){return l.call(F)=="[object Date]"},m=function(F){return l.call(F)=="[object RegExp]"},v=function(F){return l.call(F)=="[object Boolean]"},R=function(F){return F=F-0,F===F},V=function(F,N){var M=N&&"process"in N?N.process:N;return typeof M!="function"?F:function(I,X){return M(I,F,X)}},k={camelize:s,decamelize:o,pascalize:i,depascalize:o,camelizeKeys:function(F,N){return t(V(s,N),F)},decamelizeKeys:function(F,N){return t(V(o,N),F,N)},pascalizeKeys:function(F,N){return t(V(i,N),F)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};n.exports?n.exports=k:e.humps=k})(XR)})(G0);var ZR=G0.exports,eC=["class","style"];function tC(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.indexOf(":"),s=ZR.camelize(t.slice(0,r)),i=t.slice(r+1).trim();return e[s]=i,e},{})}function nC(n){return n.split(/\s+/).reduce(function(e,t){return e[t]=!0,e},{})}function K0(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n=="string")return n;var r=(n.children||[]).map(function(c){return K0(c)}),s=Object.keys(n.attributes||{}).reduce(function(c,u){var f=n.attributes[u];switch(u){case"class":c.class=nC(f);break;case"style":c.style=tC(f);break;default:c.attrs[u]=f}return c},{attrs:{},class:{},style:{}});t.class;var i=t.style,o=i===void 0?{}:i,l=JR(t,eC);return _E(n.tag,bn(bn(bn({},e),{},{class:s.class,style:bn(bn({},s.style),o)},s.attrs),l),r)}var H0=!1;try{H0=!0}catch{}function rC(){if(!H0&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function Uc(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?At({},n,e):{}}function sC(n){var e,t=(e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-li":n.listItem,"fa-inverse":n.inverse,"fa-flip":n.flip===!0,"fa-flip-horizontal":n.flip==="horizontal"||n.flip==="both","fa-flip-vertical":n.flip==="vertical"||n.flip==="both"},At(At(At(At(At(At(At(At(At(At(e,"fa-".concat(n.size),n.size!==null),"fa-rotate-".concat(n.rotation),n.rotation!==null),"fa-pull-".concat(n.pull),n.pull!==null),"fa-swap-opacity",n.swapOpacity),"fa-bounce",n.bounce),"fa-shake",n.shake),"fa-beat",n.beat),"fa-fade",n.fade),"fa-beat-fade",n.beatFade),"fa-flash",n.flash),At(At(e,"fa-spin-pulse",n.spinPulse),"fa-spin-reverse",n.spinReverse));return Object.keys(t).map(function(r){return t[r]?r:null}).filter(function(r){return r})}function ng(n){if(n&&al(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(Yu.icon)return Yu.icon(n);if(n===null)return null;if(al(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}var iC=h1({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,t){var r=t.attrs,s=Vt(function(){return ng(e.icon)}),i=Vt(function(){return Uc("classes",sC(e))}),o=Vt(function(){return Uc("transform",typeof e.transform=="string"?Yu.transform(e.transform):e.transform)}),l=Vt(function(){return Uc("mask",ng(e.mask))}),c=Vt(function(){return HR(s.value,bn(bn(bn(bn({},i.value),o.value),l.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Ni(c,function(f){if(!f)return rC("Could not find one or more icon(s)",s.value,l.value)},{immediate:!0});var u=Vt(function(){return c.value?K0(c.value.abstract[0],{},r):null});return function(){return u.value}}});/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const oC={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},aC={prefix:"fas",iconName:"arrows-spin",icon:[512,512,[],"e4bb","M256 96c38.4 0 73.7 13.5 101.3 36.1l-32.6 32.6c-4.6 4.6-5.9 11.5-3.5 17.4s8.3 9.9 14.8 9.9l112 0c8.8 0 16-7.2 16-16l0-112c0-6.5-3.9-12.3-9.9-14.8s-12.9-1.1-17.4 3.5l-34 34C363.4 52.6 312.1 32 256 32c-10.9 0-21.5 .8-32 2.3l0 64.9c10.3-2.1 21-3.2 32-3.2zM132.1 154.7l32.6 32.6c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-112c0-8.8-7.2-16-16-16L64 48c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l34 34C52.6 148.6 32 199.9 32 256c0 10.9 .8 21.5 2.3 32l64.9 0c-2.1-10.3-3.2-21-3.2-32c0-38.4 13.5-73.7 36.1-101.3zM477.7 224l-64.9 0c2.1 10.3 3.2 21 3.2 32c0 38.4-13.5 73.7-36.1 101.3l-32.6-32.6c-4.6-4.6-11.5-5.9-17.4-3.5s-9.9 8.3-9.9 14.8l0 112c0 8.8 7.2 16 16 16l112 0c6.5 0 12.3-3.9 14.8-9.9s1.1-12.9-3.5-17.4l-34-34C459.4 363.4 480 312.1 480 256c0-10.9-.8-21.5-2.3-32zM256 416c-38.4 0-73.7-13.5-101.3-36.1l32.6-32.6c4.6-4.6 5.9-11.5 3.5-17.4s-8.3-9.9-14.8-9.9L64 320c-8.8 0-16 7.2-16 16l0 112c0 6.5 3.9 12.3 9.9 14.8s12.9 1.1 17.4-3.5l34-34C148.6 459.4 199.9 480 256 480c10.9 0 21.5-.8 32-2.3l0-64.9c-10.3 2.1-21 3.2-32 3.2z"]};KR.add(aC,oC);const Ef=GE(G2);Ef.use(WE());Ef.component("font-awesome-icon",iC);Ef.mount("#app");</script>
    <style rel="stylesheet" crossorigin>/*! tailwindcss v4.1.6 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-font-weight:initial;--tw-tracking:initial;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-teal-600:oklch(60% .118 184.704);--color-teal-700:oklch(51.1% .096 186.391);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--breakpoint-2xl:96rem;--container-lg:32rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--animate-spin:spin 1s linear infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.invisible{visibility:hidden}.visible{visibility:visible}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.z-30{z-index:30}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-auto{margin-inline:auto}.my-8{margin-block:calc(var(--spacing)*8)}.mt-1{margin-top:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline-flex{display:inline-flex}.table{display:table}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.h-12{height:calc(var(--spacing)*12)}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-12{width:calc(var(--spacing)*12)}.w-20{width:calc(var(--spacing)*20)}.w-full{width:100%}.max-w-lg{max-width:var(--container-lg)}.max-w-screen-2xl{max-width:var(--breakpoint-2xl)}.min-w-0{min-width:calc(var(--spacing)*0)}.shrink{flex-shrink:1}.grow{flex-grow:1}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.rotate-270{rotate:270deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.transform\!{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)!important}.animate-spin{animation:var(--animate-spin)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-4{gap:calc(var(--spacing)*4)}.gap-8{gap:calc(var(--spacing)*8)}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-8>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*8)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-x-reverse)))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-gray-700\/70{border-color:#364153b3}@supports (color:color-mix(in lab,red,red)){.border-gray-700\/70{border-color:color-mix(in oklab,var(--color-gray-700)70%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-blue-200{background-color:var(--color-blue-200)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-teal-600{background-color:var(--color-teal-600)}.bg-transparent{background-color:#0000}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-500{--tw-gradient-from:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-400{--tw-gradient-to:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-400{--tw-gradient-to:var(--color-green-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-0{padding-inline:calc(var(--spacing)*0)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-6{padding-top:calc(var(--spacing)*6)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.text-center{text-align:center}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.text-blue-400{color:var(--color-blue-400)}.text-gray-100{color:var(--color-gray-100)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-purple-400{color:var(--color-purple-400)}.text-white{color:var(--color-white)}.text-yellow-400{color:var(--color-yellow-400)}.capitalize{text-transform:capitalize}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-700{--tw-duration:.7s;transition-duration:.7s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}@media (hover:hover){.hover\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-gray-700\/40:hover{background-color:#36415366}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-700\/40:hover{background-color:color-mix(in oklab,var(--color-gray-700)40%,transparent)}}.hover\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\:bg-orange-700:hover{background-color:var(--color-orange-700)}.hover\:bg-purple-700:hover{background-color:var(--color-purple-700)}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:bg-teal-700:hover{background-color:var(--color-teal-700)}.hover\:text-white:hover{color:var(--color-white)}}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\:ring-2:focus-visible{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-visible\:ring-blue-500:focus-visible{--tw-ring-color:var(--color-blue-500)}.focus-visible\:ring-gray-500:focus-visible{--tw-ring-color:var(--color-gray-500)}@media (min-width:40rem){.sm\:px-0{padding-inline:calc(var(--spacing)*0)}.sm\:px-4{padding-inline:calc(var(--spacing)*4)}}@media (min-width:48rem){.md\:flex{display:flex}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:64rem){.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}}html,body{overscroll-behavior:none;-webkit-overflow-scrolling:touch;width:100%;max-width:100%;overflow-x:auto}body{position:static;overflow-y:auto}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@keyframes spin{to{transform:rotate(360deg)}}[data-v-11d005d6]::-webkit-scrollbar{width:6px}[data-v-11d005d6]::-webkit-scrollbar-track{background:#374151}[data-v-11d005d6]::-webkit-scrollbar-thumb{background:#6b7280;border-radius:3px}[data-v-11d005d6]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
