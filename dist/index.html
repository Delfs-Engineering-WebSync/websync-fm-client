<!doctype html><html lang="en"><head><meta charset="UTF-8"/><link href="./favicon.ico" rel="icon"/><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"/><link href="./manifest.json" rel="manifest"/><meta content="#2563eb" name="theme-color"/><meta content="FileMaker WebSync Dashboard - Sync data between FileMaker and Firebase" name="description"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="WebSync" name="apple-mobile-web-app-title"/><title>WebSync Dashboard</title><script crossorigin type="module">!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),function(){const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0;if(!e)return;let t=!!e.__fileMakerConsoleBridgeApplied;const n=console.log.__fileMakerOriginal||console.log.bind(console);function r(){if(t)return;const r=function(...t){n(...t);try{if(e.FileMaker&&"function"==typeof e.FileMaker.PerformScript){const n=function(e){try{return JSON.stringify(e)}catch{try{return JSON.stringify(e.map(e=>{if(e instanceof Error)return{name:e.name,message:e.message,stack:e.stack};const t=typeof e;if(null===e||"string"===t||"number"===t||"boolean"===t)return e;try{return JSON.parse(JSON.stringify(e))}catch{return Object.prototype.toString.call(e)}}))}catch{try{return JSON.stringify(e.map(e=>String(e)))}catch{return"[]"}}}}(t);e.FileMaker.PerformScript("DebugLog",n)}}catch(e){try{n("[FileMaker Console Bridge] Error sending to FileMaker:",e)}catch{}}};r.__fileMakerOriginal=n,console.log=r,t=!0,e.__fileMakerConsoleBridgeApplied=!0}e.enableFileMakerConsoleBridge=function(){r()},e.disableFileMakerConsoleBridge=function(){!function(){if(t){try{const e=console.log.__fileMakerOriginal||n;console.log=e}catch{}t=!1,e.__fileMakerConsoleBridgeApplied=!1}}()};let s=!1;try{s=!!e.__fileMakerConsoleBridgeEnabled||e.localStorage&&"1"===e.localStorage.getItem("fmLog")||e.location&&"1"===new URL(e.location.href).searchParams.get("fmLog")}catch{}s&&r()}();let e=!1,t=null;const n=[],r=["log","info","warn","error"];function s(e){try{return e.map(e=>{if(e instanceof Error)return`${e.name}: ${e.message}`;if("object"==typeof e)try{return JSON.stringify(e)}catch{return Object.prototype.toString.call(e)}return void 0===e?"undefined":String(e)}).join(" ")}catch{return"[unserializable log arguments]"}}function i(){return t?!!t.devLoggingEnabled:function(){try{if("undefined"!=typeof window&&window.localStorage)return"1"===window.localStorage.getItem("ws-dev-logs-enabled")}catch{}return!1}()}function o(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}const a={},c=[],l=()=>{},u=()=>!1,h=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),d=e=>e.startsWith("onUpdate:"),f=Object.assign,p=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},g=Object.prototype.hasOwnProperty,m=(e,t)=>g.call(e,t),y=Array.isArray,v=e=>"[object Map]"===C(e),b=e=>"[object Set]"===C(e),w=e=>"function"==typeof e,x=e=>"string"==typeof e,S=e=>"symbol"==typeof e,E=e=>null!==e&&"object"==typeof e,_=e=>(E(e)||w(e))&&w(e.then)&&w(e.catch),I=Object.prototype.toString,C=e=>I.call(e),T=e=>"[object Object]"===C(e),k=e=>x(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,A=o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),D=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},N=/-(\w)/g,O=D(e=>e.replace(N,(e,t)=>t?t.toUpperCase():"")),P=/\B([A-Z])/g,M=D(e=>e.replace(P,"-$1").toLowerCase()),R=D(e=>e.charAt(0).toUpperCase()+e.slice(1)),F=D(e=>e?`on${R(e)}`:""),L=(e,t)=>!Object.is(e,t),U=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},V=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},B=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let j;const z=()=>j||(j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function $(e){if(y(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=x(r)?W(r):$(r);if(s)for(const e in s)t[e]=s[e]}return t}if(x(e)||E(e))return e}const q=/;(?![^(]*\))/g,G=/:([^]+)/,K=/\/\*[^]*?\*\//g;function W(e){const t={};return e.replace(K,"").split(q).forEach(e=>{if(e){const n=e.split(G);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function H(e){let t="";if(x(e))t=e;else if(y(e))for(let n=0;n<e.length;n++){const r=H(e[n]);r&&(t+=r+" ")}else if(E(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Q=o("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function J(e){return!!e||""===e}const Y=e=>!(!e||!0!==e.__v_isRef),X=e=>x(e)?e:null==e?"":y(e)||E(e)&&(e.toString===I||!w(e.toString))?Y(e)?X(e.value):JSON.stringify(e,Z,2):String(e),Z=(e,t)=>Y(t)?Z(e,t.value):v(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[ee(t,r)+" =>"]=n,e),{})}:b(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ee(e))}:S(t)?ee(t):!E(t)||y(t)||T(t)?t:String(t),ee=(e,t="")=>{var n;return S(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};let te,ne;class re{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=te,!e&&te&&(this.index=(te.scopes||(te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=te;try{return te=this,e()}finally{te=t}}}on(){te=this}off(){te=this.parent}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function se(e){return new re(e)}function ie(){return te}const oe=new WeakSet;class ae{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,te&&te.active&&te.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,oe.has(this)&&(oe.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||he(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,_e(this),pe(this);const e=ne,t=we;ne=this,we=!0;try{return this.fn()}finally{ge(this),ne=e,we=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ve(e);this.deps=this.depsTail=void 0,_e(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?oe.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){me(this)&&this.run()}get dirty(){return me(this)}}let ce,le,ue=0;function he(e,t=!1){if(e.flags|=8,t)return e.next=le,void(le=e);e.next=ce,ce=e}function de(){ue++}function fe(){if(--ue>0)return;if(le){let e=le;for(le=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ce;){let t=ce;for(ce=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}function pe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ge(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),ve(r),be(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function me(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ye(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ye(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ie)return;e.globalVersion=Ie;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!me(e))return void(e.flags&=-3);const n=ne,r=we;ne=e,we=!0;try{pe(e);const n=e.fn(e._value);(0===t.version||L(n,e._value))&&(e._value=n,t.version++)}catch(e){throw t.version++,e}finally{ne=n,we=r,ge(e),e.flags&=-3}}function ve(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)ve(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function be(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let we=!0;const xe=[];function Se(){xe.push(we),we=!1}function Ee(){const e=xe.pop();we=void 0===e||e}function _e(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=ne;ne=void 0;try{t()}finally{ne=e}}}let Ie=0;class Ce{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Te{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ne||!we||ne===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==ne)t=this.activeLink=new Ce(ne,this),ne.deps?(t.prevDep=ne.depsTail,ne.depsTail.nextDep=t,ne.depsTail=t):ne.deps=ne.depsTail=t,ke(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=ne.depsTail,t.nextDep=void 0,ne.depsTail.nextDep=t,ne.depsTail=t,ne.deps===t&&(ne.deps=e)}return t}trigger(e){this.version++,Ie++,this.notify(e)}notify(e){de();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{fe()}}}function ke(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)ke(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ae=new WeakMap,De=Symbol(""),Ne=Symbol(""),Oe=Symbol("");function Pe(e,t,n){if(we&&ne){let t=Ae.get(e);t||Ae.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Te),r.map=t,r.key=n),r.track()}}function Me(e,t,n,r,s,i){const o=Ae.get(e);if(!o)return void Ie++;const a=e=>{e&&e.trigger()};if(de(),"clear"===t)o.forEach(a);else{const s=y(e),i=s&&k(n);if(s&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===Oe||!S(n)&&n>=e)&&a(t)})}else switch((void 0!==n||o.has(void 0))&&a(o.get(n)),i&&a(o.get(Oe)),t){case"add":s?i&&a(o.get("length")):(a(o.get(De)),v(e)&&a(o.get(Ne)));break;case"delete":s||(a(o.get(De)),v(e)&&a(o.get(Ne)));break;case"set":v(e)&&a(o.get(De))}}fe()}function Re(e){const t=bt(e);return t===e?t:(Pe(t,0,Oe),yt(e)?t:t.map(xt))}function Fe(e){return Pe(e=bt(e),0,Oe),e}const Le={__proto__:null,[Symbol.iterator](){return Ue(this,Symbol.iterator,xt)},concat(...e){return Re(this).concat(...e.map(e=>y(e)?Re(e):e))},entries(){return Ue(this,"entries",e=>(e[1]=xt(e[1]),e))},every(e,t){return Be(this,"every",e,t,void 0,arguments)},filter(e,t){return Be(this,"filter",e,t,e=>e.map(xt),arguments)},find(e,t){return Be(this,"find",e,t,xt,arguments)},findIndex(e,t){return Be(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Be(this,"findLast",e,t,xt,arguments)},findLastIndex(e,t){return Be(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Be(this,"forEach",e,t,void 0,arguments)},includes(...e){return ze(this,"includes",e)},indexOf(...e){return ze(this,"indexOf",e)},join(e){return Re(this).join(e)},lastIndexOf(...e){return ze(this,"lastIndexOf",e)},map(e,t){return Be(this,"map",e,t,void 0,arguments)},pop(){return $e(this,"pop")},push(...e){return $e(this,"push",e)},reduce(e,...t){return je(this,"reduce",e,t)},reduceRight(e,...t){return je(this,"reduceRight",e,t)},shift(){return $e(this,"shift")},some(e,t){return Be(this,"some",e,t,void 0,arguments)},splice(...e){return $e(this,"splice",e)},toReversed(){return Re(this).toReversed()},toSorted(e){return Re(this).toSorted(e)},toSpliced(...e){return Re(this).toSpliced(...e)},unshift(...e){return $e(this,"unshift",e)},values(){return Ue(this,"values",xt)}};function Ue(e,t,n){const r=Fe(e),s=r[t]();return r===e||yt(e)||(s._next=s.next,s.next=()=>{const e=s._next();return e.value&&(e.value=n(e.value)),e}),s}const Ve=Array.prototype;function Be(e,t,n,r,s,i){const o=Fe(e),a=o!==e&&!yt(e),c=o[t];if(c!==Ve[t]){const t=c.apply(e,i);return a?xt(t):t}let l=n;o!==e&&(a?l=function(t,r){return n.call(this,xt(t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));const u=c.call(o,l,r);return a&&s?s(u):u}function je(e,t,n,r){const s=Fe(e);let i=n;return s!==e&&(yt(e)?n.length>3&&(i=function(t,r,s){return n.call(this,t,r,s,e)}):i=function(t,r,s){return n.call(this,t,xt(r),s,e)}),s[t](i,...r)}function ze(e,t,n){const r=bt(e);Pe(r,0,Oe);const s=r[t](...n);return-1!==s&&!1!==s||!vt(n[0])?s:(n[0]=bt(n[0]),r[t](...n))}function $e(e,t,n=[]){Se(),de();const r=bt(e)[t].apply(e,n);return fe(),Ee(),r}const qe=o("__proto__,__v_isRef,__isVue"),Ge=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(S));function Ke(e){S(e)||(e=String(e));const t=bt(this);return Pe(t,0,e),t.hasOwnProperty(e)}class We{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return s;if("__v_raw"===t)return n===(r?s?ut:lt:s?ct:at).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=y(e);if(!r){let e;if(i&&(e=Le[t]))return e;if("hasOwnProperty"===t)return Ke}const o=Reflect.get(e,t,Et(e)?e:n);return(S(t)?Ge.has(t):qe(t))?o:(r||Pe(e,0,t),s?o:Et(o)?i&&k(t)?o:o.value:E(o)?r?ft(o):dt(o):o)}}class He extends We{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const t=mt(s);if(yt(n)||mt(n)||(s=bt(s),n=bt(n)),!y(e)&&Et(s)&&!Et(n))return!t&&(s.value=n,!0)}const i=y(e)&&k(t)?Number(t)<e.length:m(e,t),o=Reflect.set(e,t,n,Et(e)?e:r);return e===bt(r)&&(i?L(n,s)&&Me(e,"set",t,n):Me(e,"add",t,n)),o}deleteProperty(e,t){const n=m(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Me(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return S(t)&&Ge.has(t)||Pe(e,0,t),n}ownKeys(e){return Pe(e,0,y(e)?"length":De),Reflect.ownKeys(e)}}class Qe extends We{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Je=new He,Ye=new Qe,Xe=new He(!0),Ze=e=>e,et=e=>Reflect.getPrototypeOf(e);function tt(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function nt(e,t){const n={get(n){const r=this.__v_raw,s=bt(r),i=bt(n);e||(L(n,i)&&Pe(s,0,n),Pe(s,0,i));const{has:o}=et(s),a=t?Ze:e?St:xt;return o.call(s,n)?a(r.get(n)):o.call(s,i)?a(r.get(i)):void(r!==s&&r.get(n))},get size(){const t=this.__v_raw;return!e&&Pe(bt(t),0,De),Reflect.get(t,"size",t)},has(t){const n=this.__v_raw,r=bt(n),s=bt(t);return e||(L(t,s)&&Pe(r,0,t),Pe(r,0,s)),t===s?n.has(t):n.has(t)||n.has(s)},forEach(n,r){const s=this,i=s.__v_raw,o=bt(i),a=t?Ze:e?St:xt;return!e&&Pe(o,0,De),i.forEach((e,t)=>n.call(r,a(e),a(t),s))}};return f(n,e?{add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear")}:{add(e){t||yt(e)||mt(e)||(e=bt(e));const n=bt(this);return et(n).has.call(n,e)||(n.add(e),Me(n,"add",e,e)),this},set(e,n){t||yt(n)||mt(n)||(n=bt(n));const r=bt(this),{has:s,get:i}=et(r);let o=s.call(r,e);o||(e=bt(e),o=s.call(r,e));const a=i.call(r,e);return r.set(e,n),o?L(n,a)&&Me(r,"set",e,n):Me(r,"add",e,n),this},delete(e){const t=bt(this),{has:n,get:r}=et(t);let s=n.call(t,e);s||(e=bt(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Me(t,"delete",e,void 0),i},clear(){const e=bt(this),t=0!==e.size,n=e.clear();return t&&Me(e,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=function(e,t,n){return function(...r){const s=this.__v_raw,i=bt(s),o=v(i),a="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,l=s[e](...r),u=n?Ze:t?St:xt;return!t&&Pe(i,0,c?Ne:De),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(r,e,t)}),n}function rt(e,t){const n=nt(e,t);return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(m(n,r)&&r in t?n:t,r,s)}const st={get:rt(!1,!1)},it={get:rt(!1,!0)},ot={get:rt(!0,!1)},at=new WeakMap,ct=new WeakMap,lt=new WeakMap,ut=new WeakMap;function ht(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>C(e).slice(8,-1))(e))}function dt(e){return mt(e)?e:pt(e,!1,Je,st,at)}function ft(e){return pt(e,!0,Ye,ot,lt)}function pt(e,t,n,r,s){if(!E(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=ht(e);if(0===o)return e;const a=new Proxy(e,2===o?r:n);return s.set(e,a),a}function gt(e){return mt(e)?gt(e.__v_raw):!(!e||!e.__v_isReactive)}function mt(e){return!(!e||!e.__v_isReadonly)}function yt(e){return!(!e||!e.__v_isShallow)}function vt(e){return!!e&&!!e.__v_raw}function bt(e){const t=e&&e.__v_raw;return t?bt(t):e}function wt(e){return!m(e,"__v_skip")&&Object.isExtensible(e)&&V(e,"__v_skip",!0),e}const xt=e=>E(e)?dt(e):e,St=e=>E(e)?ft(e):e;function Et(e){return!!e&&!0===e.__v_isRef}function _t(e){return function(e){return Et(e)?e:new It(e,!1)}(e)}class It{constructor(e,t){this.dep=new Te,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:bt(e),this._value=t?e:xt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||yt(e)||mt(e);e=n?e:bt(e),L(e,t)&&(this._rawValue=e,this._value=n?e:xt(e),this.dep.trigger())}}function Ct(e){return Et(e)?e.value:e}const Tt={get:(e,t,n)=>"__v_raw"===t?e:Ct(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Et(s)&&!Et(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function kt(e){return gt(e)?e:new Proxy(e,Tt)}class At{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=Ae.get(e);return n&&n.get(t)}(bt(this._object),this._key)}}function Dt(e,t,n){const r=e[t];return Et(r)?r:new At(e,t,n)}class Nt{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Te(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ie-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&ne!==this)return he(this,!0),!0}get value(){const e=this.dep.track();return ye(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const Ot={},Pt=new WeakMap;let Mt;function Rt(e,t,n=a){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:u}=n,h=e=>s?e:yt(e)||!1===s||0===s?Ft(e,1):Ft(e);let d,f,g,m,v=!1,b=!1;if(Et(e)?(f=()=>e.value,v=yt(e)):gt(e)?(f=()=>h(e),v=!0):y(e)?(b=!0,v=e.some(e=>gt(e)||yt(e)),f=()=>e.map(e=>Et(e)?e.value:gt(e)?h(e):w(e)?u?u(e,2):e():void 0)):f=w(e)?t?u?()=>u(e,2):e:()=>{if(g){Se();try{g()}finally{Ee()}}const t=Mt;Mt=d;try{return u?u(e,3,[m]):e(m)}finally{Mt=t}}:l,t&&s){const e=f,t=!0===s?1/0:s;f=()=>Ft(e(),t)}const E=ie(),S=()=>{d.stop(),E&&E.active&&p(E.effects,d)};if(i&&t){const e=t;t=(...t)=>{e(...t),S()}}let x=b?new Array(e.length).fill(Ot):Ot;const _=e=>{if(1&d.flags&&(d.dirty||e))if(t){const e=d.run();if(s||v||(b?e.some((e,t)=>L(e,x[t])):L(e,x))){g&&g();const n=Mt;Mt=d;try{const n=[e,x===Ot?void 0:b&&x[0]===Ot?[]:x,m];u?u(t,3,n):t(...n),x=e}finally{Mt=n}}}else d.run()};return c&&c(_),d=new ae(f),d.scheduler=o?()=>o(_,!1):_,m=e=>function(e,t=!1,n=Mt){if(n){let t=Pt.get(n);t||Pt.set(n,t=[]),t.push(e)}}(e,!1,d),g=d.onStop=()=>{const e=Pt.get(d);if(e){if(u)u(e,4);else for(const t of e)t();Pt.delete(d)}},t?r?_(!0):x=d.run():o?o(_.bind(null,!0),!0):d.run(),S.pause=d.pause.bind(d),S.resume=d.resume.bind(d),S.stop=S,S}function Ft(e,t=1/0,n){if(t<=0||!E(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,Et(e))Ft(e.value,t,n);else if(y(e))for(let r=0;r<e.length;r++)Ft(e[r],t,n);else if(b(e)||v(e))e.forEach(e=>{Ft(e,t,n)});else if(T(e)){for(const r in e)Ft(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ft(e[r],t,n)}return e}function Lt(e,t,n,r){try{return r?e(...r):e()}catch(e){Vt(e,t,n)}}function Ut(e,t,n,r){if(w(e)){const s=Lt(e,t,n,r);return s&&_(s)&&s.catch(e=>{Vt(e,t,n)}),s}if(y(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ut(e[i],t,n,r));return s}}function Vt(e,t,n,r=!0){t&&t.vnode;const{errorHandler:s,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||a;if(t){let r=t.parent;const i=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}if(s)return Se(),Lt(s,null,10,[e,i,o]),void Ee()}!function(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}(e,0,0,r,i)}const Bt=[];let jt=-1;const zt=[];let $t=null,qt=0;const Gt=Promise.resolve();let Kt=null;function Wt(e){const t=Kt||Gt;return e?t.then(this?e.bind(this):e):t}function Ht(e){if(!(1&e.flags)){const t=Xt(e),n=Bt[Bt.length-1];!n||!(2&e.flags)&&t>=Xt(n)?Bt.push(e):Bt.splice(function(e){let t=jt+1,n=Bt.length;for(;t<n;){const r=t+n>>>1,s=Bt[r],i=Xt(s);i<e||i===e&&2&s.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,Qt()}}function Qt(){Kt||(Kt=Gt.then(Zt))}function Jt(e,t,n=jt+1){for(;n<Bt.length;n++){const t=Bt[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Bt.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function Yt(e){if(zt.length){const e=[...new Set(zt)].sort((e,t)=>Xt(e)-Xt(t));if(zt.length=0,$t)return void $t.push(...e);for($t=e,qt=0;qt<$t.length;qt++){const e=$t[qt];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}$t=null,qt=0}}const Xt=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Zt(e){try{for(jt=0;jt<Bt.length;jt++){const e=Bt[jt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Lt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;jt<Bt.length;jt++){const e=Bt[jt];e&&(e.flags&=-2)}jt=-1,Bt.length=0,Yt(),Kt=null,(Bt.length||zt.length)&&Zt()}}let en=null,tn=null;function nn(e){const t=en;return en=e,tn=e&&e.type.__scopeId||null,t}function rn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Se(),Ut(c,n,8,[e.el,a,e,t]),Ee())}}const sn=Symbol("_vte");function on(e,t){6&e.shapeFlag&&e.component?(e.transition=t,on(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function an(e,t){return w(e)?f({name:e.name},t,{setup:e}):e}function cn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ln(e,t,n,r,s=!1){if(y(e))return void e.forEach((e,i)=>ln(e,t&&(y(t)?t[i]:t),n,r,s));if(un(r)&&!s)return void(512&r.shapeFlag&&r.type.__asyncResolved&&r.component.subTree.component&&ln(e,t,n,r.component.subTree));const i=4&r.shapeFlag?ws(r.component):r.el,o=s?null:i,{i:c,r:l}=e,u=t&&t.r,h=c.refs===a?c.refs={}:c.refs,d=c.setupState,f=bt(d),g=d===a?()=>!1:e=>m(f,e);if(null!=u&&u!==l&&(x(u)?(h[u]=null,g(u)&&(d[u]=null)):Et(u)&&(u.value=null)),w(l))Lt(l,c,12,[o,h]);else{const t=x(l),r=Et(l);if(t||r){const a=()=>{if(e.f){const n=t?g(l)?d[l]:h[l]:l.value;s?y(n)&&p(n,i):y(n)?n.includes(i)||n.push(i):t?(h[l]=[i],g(l)&&(d[l]=h[l])):(l.value=[i],e.k&&(h[e.k]=l.value))}else t?(h[l]=o,g(l)&&(d[l]=o)):r&&(l.value=o,e.k&&(h[e.k]=o))};o?(a.id=-1,gr(a,n)):a()}}}z().requestIdleCallback,z().cancelIdleCallback;const un=e=>!!e.type.__asyncLoader,hn=e=>e.type.__isKeepAlive;function dn(e,t){pn(e,"a",t)}function fn(e,t){pn(e,"da",t)}function pn(e,t,n=ds){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(mn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)hn(e.parent.vnode)&&gn(r,t,n,e),e=e.parent}}function gn(e,t,n,r){const s=mn(t,e,r,!0);En(()=>{p(r[t],s)},n)}function mn(e,t,n=ds,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{Se();const s=fs(n),i=Ut(t,n,e,r);return s(),Ee(),i});return r?s.unshift(i):s.push(i),i}}const yn=e=>(t,n=ds)=>{ms&&"sp"!==e||mn(e,(...e)=>t(...e),n)},vn=yn("bm"),bn=yn("m"),wn=yn("bu"),xn=yn("u"),Sn=yn("bum"),En=yn("um"),_n=yn("sp"),In=yn("rtg"),Cn=yn("rtc");function Tn(e,t=ds){mn("ec",e,t)}function kn(e,t){return function(e,t,n=!0,r=!1){const s=en||ds;if(s){const n=s.type;{const e=xs(n,!1);if(e&&(e===t||e===O(t)||e===R(O(t))))return n}const i=Dn(s[e]||n[e],t)||Dn(s.appContext[e],t);return!i&&r?n:i}}("components",e,!0,t)||e}const An=Symbol.for("v-ndc");function Dn(e,t){return e&&(e[t]||e[O(t)]||e[R(O(t))])}function Nn(e,t,n,r){let s;const i=n,o=y(e);if(o||x(e)){let n=!1;o&&gt(e)&&(n=!yt(e),e=Fe(e)),s=new Array(e.length);for(let r=0,o=e.length;r<o;r++)s[r]=t(n?xt(e[r]):e[r],r,void 0,i)}else if("number"==typeof e){s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,i)}else if(E(e))if(e[Symbol.iterator])s=Array.from(e,(e,n)=>t(e,n,void 0,i));else{const n=Object.keys(e);s=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];s[r]=t(e[o],o,r,i)}}else s=[];return s}const On=e=>e?gs(e)?ws(e):On(e.parent):null,Pn=f(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>On(e.parent),$root:e=>On(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>jn(e),$forceUpdate:e=>e.f||(e.f=()=>{Ht(e.update)}),$nextTick:e=>e.n||(e.n=Wt.bind(e.proxy)),$watch:e=>Cr.bind(e)}),Mn=(e,t)=>e!==a&&!e.__isScriptSetup&&m(e,t),Rn={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=e;let u;if("$"!==t[0]){const c=o[t];if(void 0!==c)switch(c){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Mn(r,t))return o[t]=1,r[t];if(s!==a&&m(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&m(u,t))return o[t]=3,i[t];if(n!==a&&m(n,t))return o[t]=4,n[t];Ln&&(o[t]=0)}}const h=Pn[t];let d,f;return h?("$attrs"===t&&Pe(e.attrs,0,""),h(e)):(d=c.__cssModules)&&(d=d[t])?d:n!==a&&m(n,t)?(o[t]=4,n[t]):(f=l.config.globalProperties,m(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Mn(s,t)?(s[t]=n,!0):r!==a&&m(r,t)?(r[t]=n,!0):!(m(e.props,t)||"$"===t[0]&&t.slice(1)in e||(i[t]=n,0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let c;return!!n[o]||e!==a&&m(e,o)||Mn(t,o)||(c=i[0])&&m(c,o)||m(r,o)||m(Pn,o)||m(s.config.globalProperties,o)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:m(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Fn(e){return y(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let Ln=!0;function Un(e){const t=jn(e),n=e.proxy,r=e.ctx;Ln=!1,t.beforeCreate&&Vn(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:m,deactivated:v,beforeDestroy:b,beforeUnmount:S,destroyed:x,unmounted:_,render:I,renderTracked:C,renderTriggered:T,errorCaptured:k,serverPrefetch:A,expose:D,inheritAttrs:N,components:R,directives:O,filters:P}=t;if(u&&function(e,t){y(e)&&(e=Gn(e));for(const n in e){const r=e[n];let s;s=E(r)?"default"in r?Zn(r.from||n,r.default,!0):Zn(r.from||n):Zn(r),Et(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[n]=s}}(u,r),o)for(const e in o){const t=o[e];w(t)&&(r[e]=t.bind(n))}if(s){const t=s.call(n,n);E(t)&&(e.data=dt(t))}if(Ln=!0,i)for(const e in i){const t=i[e],s=w(t)?t.bind(n,n):w(t.get)?t.get.bind(n,n):l,o=!w(t)&&w(t.set)?t.set.bind(n):l,a=Ss({get:s,set:o});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(a)for(const e in a)Bn(a[e],r,n,e);if(c){const e=w(c)?c.call(n):c;Reflect.ownKeys(e).forEach(t=>{!function(e,t){if(ds){let n=ds.provides;const r=ds.parent&&ds.parent.provides;r===n&&(n=ds.provides=Object.create(r)),n[e]=t}}(t,e[t])})}function M(e,t){y(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(h&&Vn(h,e,"c"),M(vn,d),M(bn,f),M(wn,p),M(xn,g),M(dn,m),M(fn,v),M(Tn,k),M(Cn,C),M(In,T),M(Sn,S),M(En,_),M(_n,A),y(D))if(D.length){const t=e.exposed||(e.exposed={});D.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={});I&&e.render===l&&(e.render=I),null!=N&&(e.inheritAttrs=N),R&&(e.components=R),O&&(e.directives=O),A&&cn(e)}function Vn(e,t,n){Ut(y(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Bn(e,t,n,r){let s=r.includes(".")?Tr(n,r):()=>n[r];if(x(e)){const n=t[e];w(n)&&_r(s,n)}else if(w(e))_r(s,e.bind(n));else if(E(e))if(y(e))e.forEach(e=>Bn(e,t,n,r));else{const r=w(e.handler)?e.handler.bind(n):t[e.handler];w(r)&&_r(s,r,e)}}function jn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:s.length||n||r?(c={},s.length&&s.forEach(e=>zn(c,e,o,!0)),zn(c,t,o)):c=t,E(t)&&i.set(t,c),c}function zn(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&zn(e,i,n,!0),s&&s.forEach(t=>zn(e,t,n,!0));for(const s in t)if(r&&"expose"===s);else{const r=$n[s]||n&&n[s];e[s]=r?r(e[s],t[s]):t[s]}return e}const $n={data:qn,props:Hn,emits:Hn,methods:Wn,computed:Wn,beforeCreate:Kn,created:Kn,beforeMount:Kn,mounted:Kn,beforeUpdate:Kn,updated:Kn,beforeDestroy:Kn,beforeUnmount:Kn,destroyed:Kn,unmounted:Kn,activated:Kn,deactivated:Kn,errorCaptured:Kn,serverPrefetch:Kn,components:Wn,directives:Wn,watch:function(e,t){if(!e)return t;if(!t)return e;const n=f(Object.create(null),e);for(const r in t)n[r]=Kn(e[r],t[r]);return n},provide:qn,inject:function(e,t){return Wn(Gn(e),Gn(t))}};function qn(e,t){return t?e?function(){return f(w(e)?e.call(this,this):e,w(t)?t.call(this,this):t)}:t:e}function Gn(e){if(y(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Kn(e,t){return e?[...new Set([].concat(e,t))]:t}function Wn(e,t){return e?f(Object.create(null),e,t):t}function Hn(e,t){return e?y(e)&&y(t)?[...new Set([...e,...t])]:f(Object.create(null),Fn(e),Fn(null!=t?t:{})):t}function Qn(){return{app:null,config:{isNativeTag:u,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jn=0;function Yn(e,t){return function(t,n=null){w(t)||(t=f({},t)),null==n||E(n)||(n=null);const r=Qn(),s=new WeakSet,i=[];let o=!1;const a=r.app={_uid:Jn++,_component:t,_props:n,_container:null,_context:r,_instance:null,version:Es,get config(){return r.config},set config(e){},use:(e,...t)=>(s.has(e)||(e&&w(e.install)?(s.add(e),e.install(a,...t)):w(e)&&(s.add(e),e(a,...t))),a),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),a),component:(e,t)=>t?(r.components[e]=t,a):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,a):r.directives[e],mount(s,i,c){if(!o){const i=a._ceVNode||Zr(t,n);return i.appContext=r,!0===c?c="svg":!1===c&&(c=void 0),e(i,s,c),o=!0,a._container=s,s.__vue_app__=a,ws(i.component)}},onUnmount(e){i.push(e)},unmount(){o&&(Ut(i,a._instance,16),e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,a),runWithContext(e){const t=Xn;Xn=a;try{return e()}finally{Xn=t}}};return a}}let Xn=null;function Zn(e,t,n=!1){const r=ds||en;if(r||Xn){const s=Xn?Xn._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&w(t)?t.call(r&&r.proxy):t}}const er={},tr=()=>Object.create(er),nr=e=>Object.getPrototypeOf(e)===er;function rr(e,t,n,r=!1){const s={},i=tr();e.propsDefaults=Object.create(null),sr(e,t,s,i);for(const t in e.propsOptions[0])t in s||(s[t]=void 0);n?e.props=r?s:pt(s,!1,Xe,it,ct):e.type.props?e.props=s:e.props=i,e.attrs=i}function sr(e,t,n,r){const[s,i]=e.propsOptions;let o,c=!1;if(t)for(let a in t){if(A(a))continue;const l=t[a];let u;s&&m(s,u=O(a))?i&&i.includes(u)?(o||(o={}))[u]=l:n[u]=l:Nr(e.emitsOptions,a)||a in r&&l===r[a]||(r[a]=l,c=!0)}if(i){const t=bt(n),r=o||a;for(let o=0;o<i.length;o++){const a=i[o];n[a]=ir(s,t,a,r[a],e,!m(r,a))}}return c}function ir(e,t,n,r,s,i){const o=e[n];if(null!=o){const e=m(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&!o.skipFactory&&w(e)){const{propsDefaults:i}=s;if(n in i)r=i[n];else{const o=fs(s);r=i[n]=e.call(null,t),o()}}else r=e;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!e?r=!1:!o[1]||""!==r&&r!==M(n)||(r=!0))}return r}const or=new WeakMap;function ar(e,t,n=!1){const r=n?or:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},l=[];let u=!1;if(!w(e)){const r=e=>{u=!0;const[n,r]=ar(e,t,!0);f(o,n),r&&l.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!i&&!u)return E(e)&&r.set(e,c),c;if(y(i))for(let e=0;e<i.length;e++){const t=O(i[e]);cr(t)&&(o[t]=a)}else if(i)for(const e in i){const t=O(e);if(cr(t)){const n=i[e],r=o[t]=y(n)||w(n)?{type:n}:f({},n),s=r.type;let a=!1,c=!0;if(y(s))for(let e=0;e<s.length;++e){const t=s[e],n=w(t)&&t.name;if("Boolean"===n){a=!0;break}"String"===n&&(c=!1)}else a=w(s)&&"Boolean"===s.name;r[0]=a,r[1]=c,(a||m(r,"default"))&&l.push(t)}}const h=[o,l];return E(e)&&r.set(e,h),h}function cr(e){return"$"!==e[0]&&!A(e)}const lr=e=>"_"===e[0]||"$stable"===e,ur=e=>y(e)?e.map(ss):[ss(e)],hr=(e,t,n)=>{if(t._n)return t;const r=function(e,t=en){if(!t)return e;if(e._n)return e;const n=(...r)=>{n._d&&Gr(-1);const s=nn(t);let i;try{i=e(...r)}finally{nn(s),n._d&&Gr(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}((...e)=>ur(t(...e)),n);return r._c=!1,r},dr=(e,t,n)=>{const r=e._ctx;for(const n in e){if(lr(n))continue;const s=e[n];if(w(s))t[n]=hr(0,s,r);else if(null!=s){const e=ur(s);t[n]=()=>e}}},fr=(e,t)=>{const n=ur(t);e.slots.default=()=>n},pr=(e,t,n)=>{for(const r in t)(n||"_"!==r)&&(e[r]=t[r])},gr=function(e,t){var n;t&&t.pendingBranch?y(e)?t.effects.push(...e):t.effects.push(e):(y(n=e)?zt.push(...n):$t&&-1===n.id?$t.splice(qt+1,0,n):1&n.flags||(zt.push(n),n.flags|=1),Qt())};function mr(e){return function(e){z().__VUE__=!0;const{insert:t,remove:n,patchProp:r,createElement:s,createText:i,createComment:o,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:p=l,insertStaticContent:g}=e,y=(e,t,n,r=null,s=null,i=null,o=void 0,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Qr(e,t)&&(r=Q(e),K(e,s,i,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=t;switch(l){case Ur:v(e,t,n,r);break;case Vr:b(e,t,n,r);break;case Br:null==e&&w(t,n,r,o);break;case Lr:D(e,t,n,r,s,i,o,a,c);break;default:1&h?E(e,t,n,r,s,i,o,a,c):6&h?N(e,t,n,r,s,i,o,a,c):(64&h||128&h)&&l.process(e,t,n,r,s,i,o,a,c,Z)}null!=u&&s&&ln(u,e&&e.ref,i,t||e,!t)},v=(e,n,r,s)=>{if(null==e)t(n.el=i(n.children),r,s);else{const t=n.el=e.el;n.children!==e.children&&u(t,n.children)}},b=(e,n,r,s)=>{null==e?t(n.el=o(n.children||""),r,s):n.el=e.el},w=(e,t,n,r)=>{[e.el,e.anchor]=g(e.children,t,n,r,e.el,e.anchor)},E=(e,t,n,r,s,i,o,a,c)=>{"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?S(t,n,r,s,i,o,a,c):C(e,t,s,i,o,a,c)},S=(e,n,i,o,a,c,l,u)=>{let d,f;const{props:p,shapeFlag:g,transition:m,dirs:y}=e;if(d=e.el=s(e.type,c,p&&p.is,p),8&g?h(d,e.children):16&g&&I(e.children,d,null,o,a,yr(e,c),l,u),y&&rn(e,null,o,"created"),x(d,e,e.scopeId,l,o),p){for(const e in p)"value"===e||A(e)||r(d,e,null,p[e],c,o);"value"in p&&r(d,"value",null,p.value,c),(f=p.onVnodeBeforeMount)&&as(f,o,e)}y&&rn(e,null,o,"beforeMount");const v=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(a,m);v&&m.beforeEnter(d),t(d,n,i),((f=p&&p.onVnodeMounted)||v||y)&&gr(()=>{f&&as(f,o,e),v&&m.enter(d),y&&rn(e,null,o,"mounted")},a)},x=(e,t,n,r,s)=>{if(n&&p(e,n),r)for(let t=0;t<r.length;t++)p(e,r[t]);if(s){let n=s.subTree;if(t===n||Fr(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=s.vnode;x(e,t,t.scopeId,t.slotScopeIds,s.parent)}}},I=(e,t,n,r,s,i,o,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?is(e[l]):ss(e[l]);y(null,c,t,n,r,s,i,o,a)}},C=(e,t,n,s,i,o,c)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=t;u|=16&e.patchFlag;const p=e.props||a,g=t.props||a;let m;if(n&&vr(n,!1),(m=g.onVnodeBeforeUpdate)&&as(m,n,t,e),f&&rn(t,e,n,"beforeUpdate"),n&&vr(n,!0),(p.innerHTML&&null==g.innerHTML||p.textContent&&null==g.textContent)&&h(l,""),d?T(e.dynamicChildren,d,l,n,s,yr(t,i),o):c||B(e,t,l,null,n,s,yr(t,i),o,!1),u>0){if(16&u)k(l,p,g,n,i);else if(2&u&&p.class!==g.class&&r(l,"class",null,g.class,i),4&u&&r(l,"style",p.style,g.style,i),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t],o=p[s],a=g[s];a===o&&"value"!==s||r(l,s,o,a,i,n)}}1&u&&e.children!==t.children&&h(l,t.children)}else c||null!=d||k(l,p,g,n,i);((m=g.onVnodeUpdated)||f)&&gr(()=>{m&&as(m,n,t,e),f&&rn(t,e,n,"updated")},s)},T=(e,t,n,r,s,i,o)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],u=c.el&&(c.type===Lr||!Qr(c,l)||70&c.shapeFlag)?d(c.el):n;y(c,l,u,null,r,s,i,o,!0)}},k=(e,t,n,s,i)=>{if(t!==n){if(t!==a)for(const o in t)A(o)||o in n||r(e,o,t[o],null,i,s);for(const o in n){if(A(o))continue;const a=n[o],c=t[o];a!==c&&"value"!==o&&r(e,o,c,a,i,s)}"value"in n&&r(e,"value",t.value,n.value,i)}},D=(e,n,r,s,o,a,c,l,u)=>{const h=n.el=e?e.el:i(""),d=n.anchor=e?e.anchor:i("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=n;g&&(l=l?l.concat(g):g),null==e?(t(h,r,s),t(d,r,s),I(n.children||[],r,d,o,a,c,l,u)):f>0&&64&f&&p&&e.dynamicChildren?(T(e.dynamicChildren,p,r,o,a,c,l),(null!=n.key||o&&n===o.subTree)&&br(e,n,!0)):B(e,n,r,d,o,a,c,l,u)},N=(e,t,n,r,s,i,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?s.ctx.activate(t,n,r,o,c):R(t,n,r,s,i,o,c):P(e,t,c)},R=(e,t,n,r,s,i,o)=>{const c=e.component=function(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||cs,i={uid:ls++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new re(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ar(r,s),emitsOptions:Dr(r,s),emit:null,emitted:null,propsDefaults:a,inheritAttrs:r.inheritAttrs,ctx:a,data:a,props:a,attrs:a,slots:a,refs:a,setupState:a,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ar.bind(null,i),e.ce&&e.ce(i),i}(e,r,s);if(hn(e)&&(c.ctx.renderer=Z),function(e,t=!1,n=!1){t&&hs(t);const{props:r,children:s}=e.vnode,i=gs(e);rr(e,r,i,t),((e,t,n)=>{const r=e.slots=tr();if(32&e.vnode.shapeFlag){const e=t._;e?(pr(r,t,n),n&&V(r,"_",e,!0)):dr(t,r)}else t&&fr(e,t)})(e,s,n);i&&function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Rn);const{setup:r}=n;if(r){Se();const n=e.setupContext=r.length>1?function(e){return{attrs:new Proxy(e.attrs,bs),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}(e):null,s=fs(e),i=Lt(r,e,0,[e.props,n]),o=_(i);if(Ee(),s(),!o&&!e.sp||un(e)||cn(e),o){if(i.then(ps,ps),t)return i.then(t=>{ys(e,t)}).catch(t=>{Vt(t,e,0)});e.asyncDep=i}else ys(e,i)}else vs(e)}(e,t);t&&hs(!1)}(c,!1,o),c.asyncDep){if(s&&s.registerDep(c,F,o),!e.el){const e=c.subTree=Zr(Vr);b(null,e,t,n)}}else F(c,e,t,n,s,i,o)},P=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!s&&!a||a&&a.$stable)||r!==o&&(r?!o||Rr(r,o,l):!!o);if(1024&c)return!0;if(16&c)return r?Rr(r,o,l):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!Nr(l,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void L(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},F=(e,t,n,r,s,i,o)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{const n=wr(e);if(n)return t&&(t.el=l.el,L(e,t,o)),void n.asyncDep.then(()=>{e.isUnmounted||a()})}let u,h=t;vr(e,!1),t?(t.el=l.el,L(e,t,o)):t=l,n&&U(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&as(u,c,t,l),vr(e,!0);const f=Or(e),p=e.subTree;e.subTree=f,y(p,f,d(p.el),Q(p),e,s,i),t.el=f.el,null===h&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,f.el),r&&gr(r,s),(u=t.props&&t.props.onVnodeUpdated)&&gr(()=>as(u,c,t,l),s)}else{let o;const{el:a,props:c}=t,{bm:l,m:u,parent:h,root:d,type:f}=e,p=un(t);vr(e,!1),l&&U(l),!p&&(o=c&&c.onVnodeBeforeMount)&&as(o,h,t),vr(e,!0);{d.ce&&d.ce._injectChildStyle(f);const o=e.subTree=Or(e);y(null,o,n,r,e,s,i),t.el=o.el}if(u&&gr(u,s),!p&&(o=c&&c.onVnodeMounted)){const e=t;gr(()=>as(o,h,e),s)}(256&t.shapeFlag||h&&un(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&gr(e.a,s),e.isMounted=!0,t=n=r=null}};e.scope.on();const c=e.effect=new ae(a);e.scope.off();const l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>Ht(u),vr(e,!0),l()},L=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=bt(s),[c]=e.propsOptions;let l=!1;if(!(r||o>0)||16&o){let r;sr(e,t,s,i)&&(l=!0);for(const i in a)t&&(m(t,i)||(r=M(i))!==i&&m(t,r))||(c?!n||void 0===n[i]&&void 0===n[r]||(s[i]=ir(c,a,i,void 0,e,!0)):delete s[i]);if(i!==a)for(const e in i)t&&m(t,e)||(delete i[e],l=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(Nr(e.emitsOptions,o))continue;const u=t[o];if(c)if(m(i,o))u!==i[o]&&(i[o]=u,l=!0);else{const t=O(o);s[t]=ir(c,a,t,u,e,!1)}else u!==i[o]&&(i[o]=u,l=!0)}}l&&Me(e.attrs,"set","")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=a;if(32&r.shapeFlag){const e=t._;e?n&&1===e?i=!1:pr(s,t,n):(i=!t.$stable,dr(t,s)),o=t}else t&&(fr(e,t),o={default:1});if(i)for(const e in s)lr(e)||null!=o[e]||delete s[e]})(e,t.children,n),Se(),Jt(e),Ee()},B=(e,t,n,r,s,i,o,a,c=!1)=>{const l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void $(l,d,n,r,s,i,o,a,c);if(256&f)return void j(l,d,n,r,s,i,o,a,c)}8&p?(16&u&&X(l,s,i),d!==l&&h(n,d)):16&u?16&p?$(l,d,n,r,s,i,o,a,c):X(l,s,i,!0):(8&u&&h(n,""),16&p&&I(d,n,r,s,i,o,a,c))},j=(e,t,n,r,s,i,o,a,l)=>{t=t||c;const u=(e=e||c).length,h=t.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=t[f]=l?is(t[f]):ss(t[f]);y(e[f],r,n,null,s,i,o,a,l)}u>h?X(e,s,i,!0,!1,d):I(t,n,r,s,i,o,a,l,d)},$=(e,t,n,r,s,i,o,a,l)=>{let u=0;const h=t.length;let d=e.length-1,f=h-1;for(;u<=d&&u<=f;){const r=e[u],c=t[u]=l?is(t[u]):ss(t[u]);if(!Qr(r,c))break;y(r,c,n,null,s,i,o,a,l),u++}for(;u<=d&&u<=f;){const r=e[d],c=t[f]=l?is(t[f]):ss(t[f]);if(!Qr(r,c))break;y(r,c,n,null,s,i,o,a,l),d--,f--}if(u>d){if(u<=f){const e=f+1,c=e<h?t[e].el:r;for(;u<=f;)y(null,t[u]=l?is(t[u]):ss(t[u]),n,c,s,i,o,a,l),u++}}else if(u>f)for(;u<=d;)K(e[u],s,i,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const e=t[u]=l?is(t[u]):ss(t[u]);null!=e.key&&m.set(e.key,u)}let v,b=0;const w=f-g+1;let E=!1,S=0;const x=new Array(w);for(u=0;u<w;u++)x[u]=0;for(u=p;u<=d;u++){const r=e[u];if(b>=w){K(r,s,i,!0);continue}let c;if(null!=r.key)c=m.get(r.key);else for(v=g;v<=f;v++)if(0===x[v-g]&&Qr(r,t[v])){c=v;break}void 0===c?K(r,s,i,!0):(x[c-g]=u+1,c>=S?S=c:E=!0,y(r,t[c],n,null,s,i,o,a,l),b++)}const _=E?function(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}(x):c;for(v=_.length-1,u=w-1;u>=0;u--){const e=g+u,c=t[e],d=e+1<h?t[e+1].el:r;0===x[u]?y(null,c,n,d,s,i,o,a,l):E&&(v<0||u!==_[v]?q(c,n,d,2):v--)}}},q=(e,n,r,s,i=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:u}=e;if(6&u)q(e.component.subTree,n,r,s);else if(128&u)e.suspense.move(n,r,s);else if(64&u)a.move(e,n,r,Z);else if(a!==Lr)if(a!==Br)if(2!==s&&1&u&&c)if(0===s)c.beforeEnter(o),t(o,n,r),gr(()=>c.enter(o),i);else{const{leave:e,delayLeave:s,afterLeave:i}=c,a=()=>t(o,n,r),l=()=>{e(o,()=>{a(),i&&i()})};s?s(o,a,l):l()}else t(o,n,r);else(({el:e,anchor:n},r,s)=>{let i;for(;e&&e!==n;)i=f(e),t(e,r,s),e=i;t(n,r,s)})(e,n,r);else{t(o,n,r);for(let e=0;e<l.length;e++)q(l[e],n,r,s);t(e.anchor,n,r)}},K=(e,t,n,r=!1,s=!1)=>{const{type:i,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:f}=e;if(-2===h&&(s=!1),null!=a&&ln(a,null,n,e,!0),null!=f&&(t.renderCache[f]=void 0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,g=!un(e);let m;if(g&&(m=o&&o.onVnodeBeforeUnmount)&&as(m,t,e),6&u)W(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&rn(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,Z,r):l&&!l.hasOnce&&(i!==Lr||h>0&&64&h)?X(l,t,n,!1,!0):(i===Lr&&384&h||!s&&16&u)&&X(c,t,n),r&&H(e)}(g&&(m=o&&o.onVnodeUnmounted)||p)&&gr(()=>{m&&as(m,t,e),p&&rn(e,null,t,"unmounted")},n)},H=e=>{const{type:t,el:r,anchor:s,transition:i}=e;if(t===Lr)return void G(r,s);if(t===Br)return void(({el:e,anchor:t})=>{let r;for(;e&&e!==t;)r=f(e),n(e),e=r;n(t)})(e);const o=()=>{n(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:n}=i,s=()=>t(r,o);n?n(e.el,o,s):s()}else o()},G=(e,t)=>{let r;for(;e!==t;)r=f(e),n(e),e=r;n(t)},W=(e,t,n)=>{const{bum:r,scope:s,job:i,subTree:o,um:a,m:c,a:l}=e;xr(c),xr(l),r&&U(r),s.stop(),i&&(i.flags|=8,K(o,e,t,n)),a&&gr(a,t),gr(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,r=!1,s=!1,i=0)=>{for(let o=i;o<e.length;o++)K(e[o],t,n,r,s)},Q=e=>{if(6&e.shapeFlag)return Q(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),n=t&&t[sn];return n?f(n):t};let J=!1;const Y=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),t._vnode=e,J||(J=!0,Jt(),Yt(),J=!1)},Z={p:y,um:K,m:q,r:H,mt:R,mc:I,pc:B,pbc:T,n:Q,o:e};return{render:Y,hydrate:undefined,createApp:Yn(Y)}}(e)}function yr({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function vr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function br(e,t,n=!1){const r=e.children,s=t.children;if(y(r)&&y(s))for(let e=0;e<r.length;e++){const t=r[e];let i=s[e];1&i.shapeFlag&&!i.dynamicChildren&&((i.patchFlag<=0||32===i.patchFlag)&&(i=s[e]=is(s[e]),i.el=t.el),n||-2===i.patchFlag||br(t,i)),i.type===Ur&&(i.el=t.el)}}function wr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:wr(t)}function xr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Sr=Symbol.for("v-scx"),Er=()=>Zn(Sr);function _r(e,t,n){return Ir(e,t,n)}function Ir(e,t,n=a){const{immediate:r,deep:s,flush:i,once:o}=n,c=f({},n),u=t&&r||!t&&"post"!==i;let h;if(ms)if("sync"===i){const e=Er();h=e.__watcherHandles||(e.__watcherHandles=[])}else if(!u){const e=()=>{};return e.stop=l,e.resume=l,e.pause=l,e}const d=ds;c.call=(e,t,n)=>Ut(e,d,t,n);let p=!1;"post"===i?c.scheduler=e=>{gr(e,d&&d.suspense)}:"sync"!==i&&(p=!0,c.scheduler=(e,t)=>{t?e():Ht(e)}),c.augmentJob=e=>{t&&(e.flags|=4),p&&(e.flags|=2,d&&(e.id=d.uid,e.i=d))};const g=Rt(e,t,c);return ms&&(h?h.push(g):u&&g()),g}function Cr(e,t,n){const r=this.proxy,s=x(e)?e.includes(".")?Tr(r,e):()=>r[e]:e.bind(r,r);let i;w(t)?i=t:(i=t.handler,n=t);const o=fs(this),a=Ir(s,i.bind(r),n);return o(),a}function Tr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const kr=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${O(t)}Modifiers`]||e[`${M(t)}Modifiers`];function Ar(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||a;let s=n;const i=t.startsWith("update:"),o=i&&kr(r,t.slice(7));let c;o&&(o.trim&&(s=n.map(e=>x(e)?e.trim():e)),o.number&&(s=n.map(B)));let l=r[c=F(t)]||r[c=F(O(t))];!l&&i&&(l=r[c=F(M(t))]),l&&Ut(l,e,6,s);const u=r[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,Ut(u,e,6,s)}}function Dr(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(void 0!==s)return s;const i=e.emits;let o={},a=!1;if(!w(e)){const r=e=>{const n=Dr(e,t,!0);n&&(a=!0,f(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||a?(y(i)?i.forEach(e=>o[e]=null):f(o,i),E(e)&&r.set(e,o),o):(E(e)&&r.set(e,null),null)}function Nr(e,t){return!(!e||!h(t))&&(t=t.slice(2).replace(/Once$/,""),m(e,t[0].toLowerCase()+t.slice(1))||m(e,M(t))||m(e,t))}function Or(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:f,setupState:p,ctx:g,inheritAttrs:m}=e,y=nn(e);let v,b;try{if(4&n.shapeFlag){const e=s||r,t=e;v=ss(l.call(t,e,u,h,p,f,g)),b=a}else{const e=t;v=ss(e.length>1?e(h,{attrs:a,slots:o,emit:c}):e(h,null)),b=t.props?a:Pr(a)}}catch(t){jr.length=0,Vt(t,e,1),v=Zr(Vr)}let w=v;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=w;e.length&&7&t&&(i&&e.some(d)&&(b=Mr(b,i)),w=es(w,b,!1,!0))}return n.dirs&&(w=es(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&on(w,n.transition),v=w,nn(y),v}const Pr=e=>{let t;for(const n in e)("class"===n||"style"===n||h(n))&&((t||(t={}))[n]=e[n]);return t},Mr=(e,t)=>{const n={};for(const r in e)d(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Rr(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Nr(n,i))return!0}return!1}const Fr=e=>e.__isSuspense,Lr=Symbol.for("v-fgt"),Ur=Symbol.for("v-txt"),Vr=Symbol.for("v-cmt"),Br=Symbol.for("v-stc"),jr=[];let zr=null;function $r(e=!1){jr.push(zr=e?null:[])}let qr=1;function Gr(e,t=!1){qr+=e,e<0&&zr&&t&&(zr.hasOnce=!0)}function Kr(e){return e.dynamicChildren=qr>0?zr||c:null,jr.pop(),zr=jr[jr.length-1]||null,qr>0&&zr&&zr.push(e),e}function Wr(e,t,n,r,s,i){return Kr(Xr(e,t,n,r,s,i,!0))}function Hr(e){return!!e&&!0===e.__v_isVNode}function Qr(e,t){return e.type===t.type&&e.key===t.key}const Jr=({key:e})=>null!=e?e:null,Yr=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?x(e)||Et(e)||w(e)?{i:en,r:e,k:t,f:!!n}:e:null);function Xr(e,t=null,n=null,r=0,s=null,i=(e===Lr?0:1),o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jr(t),ref:t&&Yr(t),scopeId:tn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:en};return a?(os(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=x(n)?8:16),qr>0&&!o&&zr&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&zr.push(c),c}const Zr=function(e,t=null,n=null,r=0,s=null,i=!1){if(e&&e!==An||(e=Vr),Hr(e)){const r=es(e,t,!0);return n&&os(r,n),qr>0&&!i&&zr&&(6&r.shapeFlag?zr[zr.indexOf(e)]=r:zr.push(r)),r.patchFlag=-2,r}var o;if(w(o=e)&&"__vccOpts"in o&&(e=e.__vccOpts),t){t=function(e){return e?vt(e)||nr(e)?f({},e):e:null}(t);let{class:e,style:n}=t;e&&!x(e)&&(t.class=H(e)),E(n)&&(vt(n)&&!y(n)&&(n=f({},n)),t.style=$(n))}return Xr(e,t,n,r,s,x(e)?1:Fr(e)?128:(e=>e.__isTeleport)(e)?64:E(e)?4:w(e)?2:0,i,!0)};function es(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=e,l=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=H([t.class,r.class]));else if("style"===e)t.style=$([t.style,r.style]);else if(h(e)){const n=t[e],s=r[e];!s||n===s||y(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=r[e])}return t}(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Jr(l),ref:t&&t.ref?n&&i?y(i)?i.concat(Yr(t)):[i,Yr(t)]:Yr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Lr?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&es(e.ssContent),ssFallback:e.ssFallback&&es(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&on(u,c.clone(u)),u}function ts(e=" ",t=0){return Zr(Ur,null,e,t)}function ns(e,t){const n=Zr(Br,null,e);return n.staticCount=t,n}function rs(e="",t=!1){return t?($r(),Kr(Zr(Vr,null,e,undefined,undefined,!0))):Zr(Vr,null,e)}function ss(e){return null==e||"boolean"==typeof e?Zr(Vr):y(e)?Zr(Lr,null,e.slice()):Hr(e)?is(e):Zr(Ur,null,String(e))}function is(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:es(e)}function os(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(y(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),os(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||nr(t)?3===r&&en&&(1===en.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=en}}else w(t)?(t={default:t,_ctx:en},n=32):(t=String(t),64&r?(n=16,t=[ts(t)]):n=8);e.children=t,e.shapeFlag|=n}function as(e,t,n,r=null){Ut(e,t,7,[n,r])}const cs=Qn();let us,hs,ls=0,ds=null;{const e=z(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};us=t("__VUE_INSTANCE_SETTERS__",e=>ds=e),hs=t("__VUE_SSR_SETTERS__",e=>ms=e)}const fs=e=>{const t=ds;return us(e),e.scope.on(),()=>{e.scope.off(),us(t)}},ps=()=>{ds&&ds.scope.off(),us(null)};function gs(e){return 4&e.vnode.shapeFlag}let ms=!1;function ys(e,t,n){w(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:E(t)&&(e.setupState=kt(t)),vs(e)}function vs(e,t,n){const r=e.type;e.render||(e.render=r.render||l);{const t=fs(e);Se();try{Un(e)}finally{Ee(),t()}}}const bs={get:(e,t)=>(Pe(e,0,""),e[t])};function ws(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kt(wt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Pn?Pn[n](e):void 0,has:(e,t)=>t in e||t in Pn})):e.proxy}function xs(e,t=!0){return w(e)?e.displayName||e.name:e.name||t&&e.__name}const Ss=(e,t)=>{const n=function(e,t,n=!1){let r,s;return w(e)?r=e:(r=e.get,s=e.set),new Nt(r,s,n)}(e,0,ms);return n},Es="3.5.13";let _s;const Is="undefined"!=typeof window&&window.trustedTypes;if(Is)try{_s=Is.createPolicy("vue",{createHTML:e=>e})}catch(e){}const Cs=_s?e=>_s.createHTML(e):e=>e,Ts="undefined"!=typeof document?document:null,ks=Ts&&Ts.createElement("template"),As={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s="svg"===t?Ts.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Ts.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?Ts.createElement(e,{is:n}):Ts.createElement(e);return"select"===e&&r&&null!=r.multiple&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ts.createTextNode(e),createComment:e=>Ts.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ts.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),s!==i&&(s=s.nextSibling););else{ks.innerHTML=Cs("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const s=ks.content;if("svg"===r||"mathml"===r){const e=s.firstChild;for(;e.firstChild;)s.appendChild(e.firstChild);s.removeChild(e)}t.insertBefore(s,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ds=Symbol("_vtc"),Ns=Symbol("_vod"),Os=Symbol("_vsh"),Ps=Symbol(""),Ms=/(^|;)\s*display\s*:/,Rs=/\s*!important$/;function Fs(e,t,n){if(y(n))n.forEach(n=>Fs(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Us[t];if(n)return n;let r=O(t);if("filter"!==r&&r in e)return Us[t]=r;r=R(r);for(let n=0;n<Ls.length;n++){const s=Ls[n]+r;if(s in e)return Us[t]=s}return t}(e,t);Rs.test(n)?e.setProperty(M(r),n.replace(Rs,""),"important"):e[r]=n}}const Ls=["Webkit","Moz","ms"],Us={},Vs="http://www.w3.org/1999/xlink";function Bs(e,t,n,r,s,i=Q(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(Vs,t.slice(6,t.length)):e.setAttributeNS(Vs,t,n):null==n||i&&!J(n)?e.removeAttribute(t):e.setAttribute(t,i?"":S(n)?String(n):n)}function js(e,t,n,r,s){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?Cs(n):n));const i=e.tagName;if("value"===t&&"PROGRESS"!==i&&!i.includes("-")){const r="OPTION"===i?e.getAttribute("value")||"":e.value,s=null==n?"checkbox"===e.type?"on":"":String(n);return r===s&&"_value"in e||(e.value=s),null==n&&e.removeAttribute(t),void(e._value=n)}let o=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=J(n):null==n&&"string"===r?(n="",o=!0):"number"===r&&(n=0,o=!0)}try{e[t]=n}catch(e){}o&&e.removeAttribute(s||t)}const zs=Symbol("_vei");function $s(e,t,n,r,s=null){const i=e[zs]||(e[zs]={}),o=i[t];if(r&&o)o.value=r;else{const[n,a]=function(e){let t;if(qs.test(e)){let n;for(t={};n=e.match(qs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):M(e.slice(2)),t]}(t);if(r){const o=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();Ut(function(e,t){if(y(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Ws(),n}(r,s);!function(e,t,n,r){e.addEventListener(t,n,r)}(e,n,o,a)}else o&&(function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,a),i[t]=void 0)}}const qs=/(?:Once|Passive|Capture)$/;let Gs=0;const Ks=Promise.resolve(),Ws=()=>Gs||(Ks.then(()=>Gs=0),Gs=Date.now()),Hs=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qs=["ctrl","shift","alt","meta"],Js={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Qs.some(n=>e[`${n}Key`]&&!t.includes(n))},Ys=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=Js[t[e]];if(r&&r(n,t))return}return e(n,...r)})},Xs=f({patchProp:(e,t,n,r,s,i)=>{const o="svg"===s;"class"===t?function(e,t,n){const r=e[Ds];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,o):"style"===t?function(e,t,n){const r=e.style,s=x(n);let i=!1;if(n&&!s){if(t)if(x(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&Fs(r,t,"")}else for(const e in t)null==n[e]&&Fs(r,e,"");for(const e in n)"display"===e&&(i=!0),Fs(r,e,n[e])}else if(s){if(t!==n){const e=r[Ps];e&&(n+=";"+e),r.cssText=n,i=Ms.test(n)}}else t&&e.removeAttribute("style");Ns in e&&(e[Ns]=i?r.display:"",e[Os]&&(r.display="none"))}(e,n,r):h(t)?d(t)||$s(e,t,0,r,i):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Hs(t)&&w(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!Hs(t)||!x(n))&&t in e}(e,t,r,o))?(js(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Bs(e,t,r,o,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&x(r)?("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),Bs(e,t,r,o)):js(e,O(t),r,0,t)}},As);let Zs,ei;const ti=e=>ei=e,ni=Symbol();function ri(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var si,ii;(ii=si||(si={})).direct="direct",ii.patchObject="patch object",ii.patchFunction="patch function";const oi=()=>{};function ai(e,t,n,r=oi){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};var i;return!n&&ie()&&(i=s,te&&te.cleanups.push(i)),s}function ci(e,...t){e.slice().forEach(e=>{e(...t)})}const li=e=>e(),ui=Symbol(),hi=Symbol();function di(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];ri(s)&&ri(r)&&e.hasOwnProperty(n)&&!Et(r)&&!gt(r)?e[n]=di(s,r):e[n]=r}return e}const fi=Symbol();function pi(e){return!ri(e)||!Object.prototype.hasOwnProperty.call(e,fi)}const{assign:gi}=Object;function mi(e){return!(!Et(e)||!e.effect)}function yi(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let c;return c=vi(e,function(){a||(n.state.value[e]=s?s():{});const t=function(e){const t=y(e)?new Array(e.length):{};for(const n in e)t[n]=Dt(e,n);return t}(n.state.value[e]);return gi(t,i,Object.keys(o||{}).reduce((t,r)=>(t[r]=wt(Ss(()=>{ti(n);const t=n._s.get(e);return o[r].call(t,t)})),t),{}))},t,n,r,!0),c}function vi(e,t,n={},r,s,i){let o;const a=gi({actions:{}},n),c={deep:!0};let l,u,h,d=[],f=[];const p=r.state.value[e];let g;function m(t){let n;l=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:si.patchFunction,storeId:e,events:h}):(di(r.state.value[e],t),n={type:si.patchObject,payload:t,storeId:e,events:h});const s=g=Symbol();Wt().then(()=>{g===s&&(l=!0)}),u=!0,ci(d,n,r.state.value[e])}i||p||(r.state.value[e]={}),_t({});const y=i?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{gi(e,t)})}:oi,v=(t,n="")=>{if(ui in t)return t[hi]=n,t;const s=function(){ti(r);const n=Array.from(arguments),i=[],o=[];let a;ci(f,{args:n,name:s[hi],store:b,after:function(e){i.push(e)},onError:function(e){o.push(e)}});try{a=t.apply(this&&this.$id===e?this:b,n)}catch(e){throw ci(o,e),e}return a instanceof Promise?a.then(e=>(ci(i,e),e)).catch(e=>(ci(o,e),Promise.reject(e))):(ci(i,a),a)};return s[ui]=!0,s[hi]=n,s},b=dt({_p:r,$id:e,$onAction:ai.bind(null,f),$patch:m,$reset:y,$subscribe(t,n={}){const s=ai(d,t,n.detached,()=>i()),i=o.run(()=>_r(()=>r.state.value[e],r=>{("sync"===n.flush?u:l)&&t({storeId:e,type:si.direct,events:h},r)},gi({},c,n)));return s},$dispose:function(){o.stop(),d=[],f=[],r._s.delete(e)}});r._s.set(e,b);const w=(r._a&&r._a.runWithContext||li)(()=>r._e.run(()=>(o=se()).run(()=>t({action:v}))));for(const t in w){const n=w[t];if(Et(n)&&!mi(n)||gt(n))i||(p&&pi(n)&&(Et(n)?n.value=p[t]:di(n,p[t])),r.state.value[e][t]=n);else if("function"==typeof n){const e=v(n,t);w[t]=e,a.actions[t]=n}}return gi(b,w),gi(bt(b),w),Object.defineProperty(b,"$state",{get:()=>r.state.value[e],set:e=>{m(t=>{gi(t,e)})}}),r._p.forEach(e=>{gi(b,o.run(()=>e({store:b,app:r._a,pinia:r,options:a})))}),p&&i&&n.hydrate&&n.hydrate(b.$state,p),l=!0,u=!0,b}function bi(e,t,n){let r;const s="function"==typeof t;function i(n,i){return(n=n||(ds||en||Xn?Zn(ni,null):null))&&ti(n),(n=ei)._s.has(e)||(s?vi(e,t,r,n):yi(e,r,n)),n._s.get(e)}return r=s?n:t,i.$id=e,i}const wi={},xi=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in wi)return;wi[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(n)for(let n=s.length-1;n>=0;n--){const r=s[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},Si=new class{constructor(){this._q={},this._counter=0,this._fireAndForgetIds=new Set,"undefined"!=typeof window&&window.addEventListener("unhandledrejection",e=>{e.preventDefault()})}get isFileMakerEnvironment(){return"undefined"!=typeof window&&void 0!==window.FileMaker}async performScript(e,t="",n={}){var r,s,i;if("undefined"!=typeof window){let r=0;const s=20;for(;void 0===window.FileMaker&&r<s;)r+=1,await this._sleep(100);if(void 0!==window.FileMaker){const r=this._counter++,s={id:r,scriptParameter:t,scriptName:e};n&&n.fireAndForget&&this._fireAndForgetIds.add(String(r));try{return"function"==typeof window.FileMaker.PerformScriptWithOption?window.FileMaker.PerformScriptWithOption("_fmBridgit.webhook",JSON.stringify(s),"0"):"function"==typeof window.FileMaker.PerformScriptWithOptions?window.FileMaker.PerformScriptWithOptions("_fmBridgit.webhook",JSON.stringify(s),"0"):window.FileMaker.PerformScript("_fmBridgit.webhook",JSON.stringify(s)),this._registerPromise(r)}catch(e){throw console.error("Error performing FileMaker script:",e),e}}}console.log(`[FileMaker Mock] Script: ${e}`);let o=t;try{"string"==typeof t&&t.startsWith("{")&&(o=JSON.parse(t))}catch{}switch(e){case"API - Web Sync Inbound dispatcher {payload}":return console.log(`[FileMaker Mock] Processing ${(null==(r=null==o?void 0:o.updates)?void 0:r.length)||0} updates, ${(null==o?void 0:o.remaining)||0} remaining`),{success:!0,message:`Processed ${(null==(s=null==o?void 0:o.updates)?void 0:s.length)||0} updates successfully (mocked)`,data:{recordsProcessed:(null==(i=null==o?void 0:o.updates)?void 0:i.length)||0}};case"API - Upload Complete Callback":return{success:!0,message:"Upload completed (mocked)"};case"_fmBridgit.webhook":return{success:!0,message:"Webhook received (mocked)"};case"_fmBridgit.returnResult":return{success:!0,data:t};default:return console.log(`[FileMaker Mock] Unknown script: ${e}`),{success:!0,message:`Script ${e} executed (mocked)`}}}callback(e){try{const t=JSON.parse(e);t.error?t.error_message:t.success;let n=null;if(t.error)if("object"==typeof t.error)n={code:t.error.code??t.error.error??"1",message:t.error.message??t.error.error_message,raw:t.error};else if("string"==typeof t.error){let e=null;const r=null!=t.error?String(t.error).trim():"";if(r.startsWith("{")||r.startsWith("["))try{e=JSON.parse(r)}catch{}n=e&&"object"==typeof e?{code:e.code??e.error??t.error,message:e.message??e.error_message,raw:e}:{code:t.error,message:t.error_message}}else n={code:String(t.error),message:t.error_message};this._applyPromise(t.id,t.success,n)}catch{}}returnResult(e){return this.performScript("_fmBridgit.returnResult",JSON.stringify(e),{fireAndForget:!0})}_registerPromise(e){return new Promise((t,n)=>{this._q[e]={resolve:t,reject:n}})}_applyPromise(e,t,n){const r=this._q[e];r&&(t?r.resolve(t):n?this._fireAndForgetIds.has(String(e))?(this._fireAndForgetIds.delete(String(e)),r.resolve(!0)):r.reject(n):r.resolve(!0),delete this._q[e])}_sleep(e){return new Promise(t=>setTimeout(t,e))}testCallback(e,t=!0,n=null){const r={id:e,success:t?n||{message:"Test callback successful"}:null,error:t?null:n||"Test error"};this.callback(JSON.stringify(r))}};"undefined"!=typeof window&&(window.fmBridgit=Si);var Ei={};const _i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ii={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const s=e[t],i=t+1<e.length,o=i?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==i||null==o||null==a)throw new Ci;const c=s<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ci extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ti=function(e){return function(e){const t=_i(e);return Ii.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function ki(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}const Ai=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return Ii.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)},Di=()=>{try{return ki().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const e=Ei.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||Ai()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Ni=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Di())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Oi=()=>{var e;return null===(e=Di())||void 0===e?void 0:e.config};class Pi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Mi(e){return e.endsWith(".cloudworkstations.dev")}async function Ri(e){return(await fetch(e,{credentials:"include"})).ok}const Fi={};let Li=!1;function Ui(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Mi(window.location.host)||Fi[e]===t||Fi[e]||Li)return;function n(e){return`__firebase__banner__${e}`}Fi[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Fi))Fi[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),a=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),l=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(a,o);const n=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Li=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(l,c),t.append(l,i,a,n),document.body.appendChild(t)}s?(i.innerText="Preview backend disconnected.",l.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(l.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function Vi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Bi(){var e;const t=null===(e=Di())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function ji(){return!Bi()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zi(){return!Bi()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function $i(){try{return"object"==typeof indexedDB}catch(e){return!1}}class qi extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace(Ki,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new qi(r,o,n)}}const Ki=/\{\$([^}]+)}/g;function Wi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Hi(n)&&Hi(i)){if(!Wi(n,i))return!1}else if(n!==i)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Hi(e){return null!==e&&"object"==typeof e}function Qi(e){return e&&e._delegate?e._delegate:e}class Ji{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yi="[DEFAULT]";class Xi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Pi;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Yi?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var eo,to;(to=eo||(eo={}))[to.DEBUG=0]="DEBUG",to[to.VERBOSE=1]="VERBOSE",to[to.INFO=2]="INFO",to[to.WARN=3]="WARN",to[to.ERROR=4]="ERROR",to[to.SILENT=5]="SILENT";const no={debug:eo.DEBUG,verbose:eo.VERBOSE,info:eo.INFO,warn:eo.WARN,error:eo.ERROR,silent:eo.SILENT},ro=eo.INFO,so={[eo.DEBUG]:"log",[eo.VERBOSE]:"log",[eo.INFO]:"info",[eo.WARN]:"warn",[eo.ERROR]:"error"},io=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=so[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class oo{constructor(e){this.name=e,this._logLevel=ro,this._logHandler=io,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in eo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?no[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,eo.DEBUG,...e),this._logHandler(this,eo.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,eo.VERBOSE,...e),this._logHandler(this,eo.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,eo.INFO,...e),this._logHandler(this,eo.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,eo.WARN,...e),this._logHandler(this,eo.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,eo.ERROR,...e),this._logHandler(this,eo.ERROR,...e)}}let ao,co;const lo=new WeakMap,uo=new WeakMap,ho=new WeakMap,fo=new WeakMap,po=new WeakMap;let go={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return uo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ho.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(co||(co=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(bo(this),t),vo(lo.get(this))}:function(...t){return vo(e.apply(bo(this),t))}:function(t,...n){const r=e.call(bo(this),t,...n);return ho.set(r,t.sort?t.sort():[t]),vo(r)}}function yo(e){return"function"==typeof e?mo(e):(e instanceof IDBTransaction&&function(e){if(uo.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});uo.set(e,t)}(e),t=e,(ao||(ao=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,go):e);var t}function vo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(vo(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&lo.set(t,e)}).catch(()=>{}),po.set(t,e),t}(e);if(fo.has(e))return fo.get(e);const t=yo(e);return t!==e&&(fo.set(e,t),po.set(t,e)),t}const bo=e=>po.get(e),wo=["get","getKey","getAll","getAllKeys","count"],xo=["put","add","delete","clear"],So=new Map;function Eo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(So.get(t))return So.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=xo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!wo.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,s?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&i.done]))[0]};return So.set(t,i),i}go=(e=>({...e,get:(t,n,r)=>Eo(t,n)||e.get(t,n,r),has:(t,n)=>!!Eo(t,n)||e.has(t,n)}))(go);class _o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Io="@firebase/app",Co="0.13.0",To=new oo("@firebase/app"),ko="@firebase/app-compat",Ao="@firebase/analytics-compat",Do="@firebase/analytics",No="@firebase/app-check-compat",Oo="@firebase/app-check",Po="@firebase/auth",Mo="@firebase/auth-compat",Ro="@firebase/database",Fo="@firebase/data-connect",Lo="@firebase/database-compat",Uo="@firebase/functions",Vo="@firebase/functions-compat",Bo="@firebase/installations",jo="@firebase/installations-compat",zo="@firebase/messaging",$o="@firebase/messaging-compat",qo="@firebase/performance",Go="@firebase/performance-compat",Ko="@firebase/remote-config",Wo="@firebase/remote-config-compat",Ho="@firebase/storage",Qo="@firebase/storage-compat",Jo="@firebase/firestore",Yo="@firebase/ai",Xo="@firebase/firestore-compat",Zo="firebase",ea="[DEFAULT]",ta={[Io]:"fire-core",[ko]:"fire-core-compat",[Do]:"fire-analytics",[Ao]:"fire-analytics-compat",[Oo]:"fire-app-check",[No]:"fire-app-check-compat",[Po]:"fire-auth",[Mo]:"fire-auth-compat",[Ro]:"fire-rtdb",[Fo]:"fire-data-connect",[Lo]:"fire-rtdb-compat",[Uo]:"fire-fn",[Vo]:"fire-fn-compat",[Bo]:"fire-iid",[jo]:"fire-iid-compat",[zo]:"fire-fcm",[$o]:"fire-fcm-compat",[qo]:"fire-perf",[Go]:"fire-perf-compat",[Ko]:"fire-rc",[Wo]:"fire-rc-compat",[Ho]:"fire-gcs",[Qo]:"fire-gcs-compat",[Jo]:"fire-fst",[Xo]:"fire-fst-compat",[Yo]:"fire-vertex","fire-js":"fire-js",[Zo]:"fire-js-all"},na=new Map,ra=new Map,sa=new Map;function ia(e,t){try{e.container.addComponent(t)}catch(n){To.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function oa(e){const t=e.name;if(sa.has(t))return To.debug(`There were multiple attempts to register component ${t}.`),!1;sa.set(t,e);for(const t of na.values())ia(t,e);for(const t of ra.values())ia(t,e);return!0}function aa(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ca=new Gi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class la{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ca.create("app-deleted",{appName:this._name})}}function ua(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:ea,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!=typeof s||!s)throw ca.create("bad-app-name",{appName:String(s)});if(n||(n=Oi()),!n)throw ca.create("no-options");const i=na.get(s);if(i){if(Wi(n,i.options)&&Wi(r,i.config))return i;throw ca.create("duplicate-app",{appName:s})}const o=new Zi(s);for(const e of sa.values())o.addComponent(e);const a=new la(n,r,o);return na.set(s,a),a}function ha(e,t,n){var r;let s=null!==(r=ta[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void To.warn(e.join(" "))}oa(new Ji(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const da="firebase-heartbeat-store";let fa=null;function pa(){return fa||(fa=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=vo(o);return r&&o.addEventListener("upgradeneeded",e=>{r(vo(o.result),e.oldVersion,e.newVersion,vo(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(da)}catch(e){console.warn(e)}}}).catch(e=>{throw ca.create("idb-open",{originalErrorMessage:e.message})})),fa}async function ga(e,t){try{const n=(await pa()).transaction(da,"readwrite"),r=n.objectStore(da);await r.put(t,ma(e)),await n.done}catch(e){if(e instanceof qi)To.warn(e.message);else{const t=ca.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});To.warn(t.message)}}}function ma(e){return`${e.name}!${e.options.appId}`}class ya{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ba(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=va();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){To.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=va(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),wa(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wa(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Ti(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return To.warn(e),""}}}function va(){return(new Date).toISOString().substring(0,10)}class ba{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!$i()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await pa()).transaction(da),n=await t.objectStore(da).get(ma(e));return await t.done,n}catch(e){if(e instanceof qi)To.warn(e.message);else{const t=ca.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});To.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ga(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ga(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function wa(e){return Ti(JSON.stringify({version:2,heartbeats:e})).length}var xa;xa="",oa(new Ji("platform-logger",e=>new _o(e),"PRIVATE")),oa(new Ji("heartbeat",e=>new ya(e),"PRIVATE")),ha(Io,Co,xa),ha(Io,Co,"esm2017"),ha("fire-js","");var Sa,Ea,_a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e){var t=s;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var a=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=i.add(r);0>=l.l(e)&&(s=s.add(n),i=l),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new g(s,t)}for(s=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(i=o(n)).j(t);h(l)||0<l.l(e);)l=(i=o(n-=r)).j(t);u(i)&&(i=c),s=s.add(i),e=f(e,l)}return new g(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],o=0;o<s;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var s=m(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var o=s+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var c=this.i(s)>>>16,f=65535&this.i(s),g=e.i(i)>>>16,m=65535&e.i(i);n[2*s+2*i]+=f*m,p(n,2*s+2*i),n[2*s+2*i+1]+=c*m,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*g,p(n,2*s+2*i+1),n[2*s+2*i+2]+=c*g,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ea=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),s=a,i=0;i<t.length;i+=8){var c=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+c),n);8>c?(c=o(Math.pow(n,c)),s=s.j(c).add(o(l))):s=(s=s.j(r)).add(o(l))}return s},Sa=r}).apply(void 0!==_a?_a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ia,Ca,Ta,ka,Aa,Da,Na,Oa,Pa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Pa&&Pa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(i(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let s=0;s<r;s++)e[t+s]=n[s]}else e.push(n)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){s.setTimeout(()=>{throw e},0)}function _(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,k=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(N)}};var N=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(e){x(e)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}k=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(e){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:F[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,O);var F={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),B=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++B,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}j.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=$(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),K={};function H(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)H(e,t[i],n,r,s);return null}return n=Z(n),e&&e[L]?e.K(t,n,!!o(r)&&!!r.capture,s):function(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,c=J(e);if(c||(e[q]=c=new j(e)),(n=c.add(t,n,r,a,i)).proxy)return n;if(r=function(){const e=Q;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function G(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=$(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&W(n))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function J(e){return(e=e[q])instanceof j?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function ee(){R.call(this),this.i=new j(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var s=t;E(t=new O(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ne(o,r,!0,t)&&s}if(s=ne(o=t.g=e,r,!0,t)&&s,s=ne(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ne(o=t.g=n[i],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&z(e.i,o),s=!1!==a.call(c,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,R),ee.prototype[L]=!0,ee.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){R.call(this),this.h=e,this.g={}}h(oe,R);var ae=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=s.JSON.stringify,ue=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){O.call(this,"d")}function ye(){O.call(this,"c")}h(me,O),h(ye,O);var ve={},be=null;function we(){return be=be||new ee}function Ee(e){O.call(this,ve.La,e)}function Se(e){const t=we();te(t,new Ee(t))}function xe(e,t){O.call(this,ve.STAT_EVENT,e),this.stat=t}function _e(e){const t=we();te(t,new xe(t,e))}function Ie(e,t){O.call(this,ve.Ma,e),this.size=t}function Ce(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return le(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",h(Ee,O),ve.STAT_EVENT="statevent",h(xe,O),ve.Ma="timingevent",h(Ie,O),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}h(Re,de),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Me={},Fe={};function Le(e,t,n){e.L=1,e.v=lt(st(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),je(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ae[0]=s.toString()),s=ae);for(var i=0;i<s.length;i++){var o=H(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(l(e.ba,e),t)}function $e(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||sn(e.j,e)}function Ke(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function He(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Gt(n)}en(n),_e(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(l(n.Za,n),6e3));if(1>=Qe(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=l[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=ln(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&($e(a),je(a)),r.g=o}else Zt(r);0<n.i.length&&Xt(n)}else"stop"!=l[0]&&"close"!=l[0]||an(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?an(n,7):Ht(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Se()}catch(e){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=zt(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=d||7==t||Se(),$e(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=$t(this.g);e="";var i=r.length,o=4==zt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ke(this),qe(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),qe(this);break e}ke(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,He(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ve(this,a),e==Fe){4==d&&(this.s=4,_e(14),n=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),ke(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}ke(this.i,this.l,e,null),He(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,_e(11))}}else ke(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),qe(this)}else ke(this.i,this.l,a,null),He(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),qe(this)}}}catch(e){}},Oe.prototype.cancel=function(){this.J=!0,Ke(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),_e(17)),Ke(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,e=s.PerformanceNavigationTiming?0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}We.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),ot(this,t[4]),this.l=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function st(e){return new rt(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,mt)),e.i=new vt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function lt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,gt=/[#\?]/g,mt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wt(e,t){bt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return bt(e),t=xt(e,t),e.g.has(t)}function St(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(e){}}function It(){this.g=new he}function Ct(e,t,n){const r=n||"";try{tt(e,function(e,n){let s=e;o(e)&&(s=le(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Tt(e){this.l=e.Ub||null,this.j=e.eb||!1}function kt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Pt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){bt(this),this.i=null,e=xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"==typeof e)Et(this,e)&&(t=t.concat(this.g.get(xt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,Et(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},h(Tt,de),Tt.prototype.g=function(){return new kt(this.l,this.j)},Tt.prototype.i=function(e){return function(){return e}}({}),h(kt,ee),(e=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Nt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Pt,ee);var Mt=/^https?$/i,Ft=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),Vt(e)}function Bt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(nt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Mt.test(o?o.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<zt(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){jt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function jt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new We(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ht(e){if(Wt(e),3==e.G){var t=e.U++,n=st(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Jt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=lt(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),je(t)}cn(e)}function Gt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Wt(e){Gt(e),e.u&&(s.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||D(),k||(T(),k=!0),A.add(t,e),e.B=0}}function Qt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Yt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ye(e.h,n),Le(n,r,t)}function Jt(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&tt({},function(e,n){ct(t,n,e)})}function Yt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Ct(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||D(),k||(T(),k=!0),A.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=Ce(l(e.Fa,e),on(e,e.v)),e.v++,0))}function tn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=lt(st(t)),n.m=null,n.P=!0,Be(n,e)}function rn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=we(),new Ie(r,n)),Xt(e)}else Zt(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ce(l(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||it(r,"https"),lt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),cn(e),Wt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function ln(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new rt(null);r&&it(o,r),t&&(o.g=t),i&&ot(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Jt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Pt(new Tt({eb:n})):new Pt(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new mn(this)}function pn(e){me.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function mn(e){this.g=e}(e=Pt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Lt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jt(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Lt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=ln(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),E(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yt(this,s,t),ct(n=st(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Jt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Rt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),Ye(this.h,s),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),s.T=!0,Le(s,n,null)):Le(s,n,t),this.G=2}}else 3==this.G&&(e?Qt(this,e):0==this.i.length||Xe(this.h)||Qt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Gt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),en(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ht(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=le(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Xt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,fn.aa.N.call(this)},h(pn,me),h(gn,ye),h(mn,hn),mn.prototype.ua=function(){te(this.g,"a")},mn.prototype.ta=function(e){te(this.g,new pn(e))},mn.prototype.sa=function(e){te(this.g,new gn)},mn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Oa=function(){return new dn},Na=function(){return we()},Da=ve,Aa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,ka=De,Ne.COMPLETE="complete",Ta=Ne,pe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Ca=pe,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,Ia=Pt}).apply(void 0!==Pa?Pa:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Ma="@firebase/firestore",Ra="4.7.15";class Fa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fa.UNAUTHENTICATED=new Fa(null),Fa.GOOGLE_CREDENTIALS=new Fa("google-credentials-uid"),Fa.FIRST_PARTY=new Fa("first-party-uid"),Fa.MOCK_USER=new Fa("mock-user");let La="11.8.0";const Ua=new oo("@firebase/firestore");function Va(){return Ua.logLevel}function Ba(e,...t){if(Ua.logLevel<=eo.DEBUG){const n=t.map($a);Ua.debug(`Firestore (${La}): ${e}`,...n)}}function ja(e,...t){if(Ua.logLevel<=eo.ERROR){const n=t.map($a);Ua.error(`Firestore (${La}): ${e}`,...n)}}function za(e,...t){if(Ua.logLevel<=eo.WARN){const n=t.map($a);Ua.warn(`Firestore (${La}): ${e}`,...n)}}function $a(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function qa(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ga(e,r,n)}function Ga(e,t,n){let r=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ja(r),new Error(r)}function Ka(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Ga(t,s,r)}function Wa(e,t){return e}const Ha={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qa extends qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ja{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fa.UNAUTHENTICATED))}shutdown(){}}class Za{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ec{constructor(e){this.t=e,this.currentUser=Fa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ka(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Ja;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ja,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Ba("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ba("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ja)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ba("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ka("string"==typeof t.accessToken,31837,{l:t}),new Ya(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ka(null===e||"string"==typeof e,2055,{h:e}),new Fa(e)}}class tc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Fa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nc{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new tc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Fa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sc{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ka(void 0===this.o,3512);const n=e=>{null!=e.error&&Ba("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Ba("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ba("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ba("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ka("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new rc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ic(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}function oc(){return new TextEncoder}class ac{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ic(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function cc(e,t){return e<t?-1:e>t?1:0}function lc(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return cc(r,s);{const i=oc(),o=hc(i.encode(uc(e,n)),i.encode(uc(t,n)));return 0!==o?o:cc(r,s)}}n+=r>65535?2:1}return cc(e.length,t.length)}function uc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function hc(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return cc(e[n],t[n]);return cc(e.length,t.length)}function dc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function fc(e){return e+"\0"}const pc=-62135596800,gc=1e6;class mc{static now(){return mc.fromMillis(Date.now())}static fromDate(e){return mc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*gc);return new mc(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qa(Ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qa(Ha.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pc)throw new Qa(Ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qa(Ha.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gc}_compareTo(e){return this.seconds===e.seconds?cc(this.nanoseconds,e.nanoseconds):cc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-pc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yc{static fromTimestamp(e){return new yc(e)}static min(){return new yc(new mc(0,0))}static max(){return new yc(new mc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vc="__name__";class bc{constructor(e,t,n){void 0===t?t=0:t>e.length&&qa(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&qa(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===bc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=bc.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return cc(e.length,t.length)}static compareSegments(e,t){const n=bc.isNumericId(e),r=bc.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?bc.extractNumericId(e).compare(bc.extractNumericId(t)):lc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class wc extends bc{construct(e,t,n){return new wc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Qa(Ha.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new wc(t)}static emptyPath(){return new wc([])}}const xc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sc extends bc{construct(e,t,n){return new Sc(e,t,n)}static isValidIdentifier(e){return xc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===vc}static keyField(){return new Sc([vc])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Qa(Ha.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Qa(Ha.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Qa(Ha.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Qa(Ha.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sc(t)}static emptyPath(){return new Sc([])}}class Ec{constructor(e){this.path=e}static fromPath(e){return new Ec(wc.fromString(e))}static fromName(e){return new Ec(wc.fromString(e).popFirst(5))}static empty(){return new Ec(wc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ec(new wc(e.slice()))}}class _c{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ic(e){return e.fields.find(e=>2===e.kind)}function Cc(e){return e.fields.filter(e=>2!==e.kind)}_c.UNKNOWN_ID=-1;class Tc{constructor(e,t){this.fieldPath=e,this.kind=t}}class kc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kc(0,Dc.min())}}function Ac(e){return new Dc(e.readTime,e.key,-1)}class Dc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dc(yc.min(),Ec.empty(),-1)}static max(){return new Dc(yc.max(),Ec.empty(),-1)}}function Nc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ec.comparator(e.documentKey,t.documentKey),0!==n?n:cc(e.largestBatchId,t.largestBatchId))}const Oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Mc(e){if(e.code!==Ha.FAILED_PRECONDITION||e.message!==Oc)throw e;Ba("LocalStore","Unexpectedly lost primary lease")}class Rc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qa(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rc?t:Rc.resolve(t)}catch(e){return Rc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rc.reject(t)}static resolve(e){return new Rc((t,n)=>{t(e)})}static reject(e){return new Rc((t,n)=>{n(e)})}static waitFor(e){return new Rc((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Rc.resolve(!1);for(const n of e)t=t.next(e=>e?Rc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Rc((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next(e=>{i[c]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Rc((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}const Fc="SimpleDb";class Lc{static open(e,t,n,r){try{return new Lc(t,e.transaction(r,n))}catch(e){throw new jc(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ja,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new jc(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Kc(t.target.error);this.S.reject(new jc(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ba(Fc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $c(t)}}class Uc{static delete(e){return Ba(Fc,"Removing database:",e),qc(ki().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!$i())return!1;if(Uc.F())return!0;const e=Vi(),t=Uc.M(e),n=0<t&&t<10,r=Vc(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===Uc.M(Vi())&&ja("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Ba(Fc,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Qa(Ha.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Qa(Ha.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new jc(e,r))},r.onupgradeneeded=e=>{Ba(Fc,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.B.q(t,r.transaction,e.oldVersion,this.version).next(()=>{Ba(Fc,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const t=e.target;this.L=t.version},{passive:!0})),this.$&&(this.db.onversionchange=e=>this.$(e)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.k(e);const t=Lc.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.v(),e)).catch(e=>(t.abort(e),Rc.reject(e))).toPromise();return i.catch(()=>{}),await t.D,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(Ba(Fc,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Vc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Bc{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return qc(this.K.delete())}}class jc extends Qa{constructor(e,t){super(Ha.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zc(e){return"IndexedDbTransactionError"===e.name}class $c{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ba(Fc,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ba(Fc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qc(n)}add(e){return Ba(Fc,"ADD",this.store.name,e,e),qc(this.store.add(e))}get(e){return qc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ba(Fc,"GET",this.store.name,e,t),t))}delete(e){return Ba(Fc,"DELETE",this.store.name,e),qc(this.store.delete(e))}count(){return Ba(Fc,"COUNT",this.store.name),qc(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Rc((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.Y(e,(e,n)=>{t.push(n)}).next(()=>t)}}Z(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Rc((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}X(e,t){Ba(Fc,"DELETE ALL",this.store.name);const n=this.options(e,t);n.ee=!1;const r=this.cursor(n);return this.Y(r,(e,t,n)=>n.delete())}te(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Y(r,t)}ne(e){const t=this.cursor({});return new Rc((n,r)=>{t.onerror=e=>{const t=Kc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Y(e,t){const n=[];return new Rc((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Bc(s),o=t(s.primaryKey,s.value,i);if(o instanceof Rc){const e=o.catch(e=>(i.done(),Rc.reject(e)));n.push(e)}i.isDone?r():null===i.j?s.continue():s.continue(i.j)}}).next(()=>Rc.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.ee?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qc(e){return new Rc((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Kc(e.target.error);n(t)}})}let Gc=!1;function Kc(e){const t=Uc.M(Vi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Qa("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gc||(Gc=!0,setTimeout(()=>{throw e},0)),e}}return e}const Wc="IndexBackfiller";class Hc{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){Ba(Wc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.re.se();Ba(Wc,`Documents written: ${e}`)}catch(e){zc(e)?Ba(Wc,"Ignoring IndexedDB error during index backfill: ",e):await Mc(e)}await this.ie(6e4)})}}class Qc{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const n=new Set;let r=t,s=!0;return Rc.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return Ba(Wc,`Processing collection: ${t}`),this._e(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}_e(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(r,n)).next(n=>(Ba(Wc,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}ae(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Ac(t);Nc(r,n)>0&&(n=r)}),new Dc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Jc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Jc.le=-1;const Yc=-1;function Xc(e){return null==e}function Zc(e){return 0===e&&1/e==-1/0}const el="";function tl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=rl(t)),t=nl(e.get(n),t);return rl(t)}function nl(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case el:n+="";break;default:n+=r}}return n}function rl(e){return e+el+""}function sl(e){const t=e.length;if(Ka(t>=2,64408,{path:e}),2===t)return Ka(e.charAt(0)===el&&""===e.charAt(1),56145,{path:e}),wc.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf(el,i);switch((t<0||t>n)&&qa(50515,{path:e}),e.charAt(t+1)){case"":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"":s+=e.substring(i,t),s+="\0";break;case"":s+=e.substring(i,t+1);break;default:qa(61167,{path:e})}i=t+2}return new wc(r)}const il="remoteDocuments",ol="owner",al="owner",cl="mutationQueues",ll="mutations",ul="batchId",hl="userMutationsIndex",dl=["userId","batchId"];function fl(e,t){return[e,tl(t)]}function pl(e,t,n){return[e,tl(t),n]}const gl={},ml="documentMutations",yl="remoteDocumentsV14",vl=["prefixPath","collectionGroup","readTime","documentId"],bl="documentKeyIndex",wl=["prefixPath","collectionGroup","documentId"],xl="collectionGroupIndex",Sl=["collectionGroup","readTime","prefixPath","documentId"],El="remoteDocumentGlobal",_l="remoteDocumentGlobalKey",Il="targets",Cl="queryTargetsIndex",Tl=["canonicalId","targetId"],kl="targetDocuments",Al=["targetId","path"],Dl="documentTargetsIndex",Nl=["path","targetId"],Ol="targetGlobalKey",Pl="targetGlobal",Ml="collectionParents",Rl=["collectionId","parent"],Fl="clientMetadata",Ll="bundles",Ul="namedQueries",Vl="indexConfiguration",Bl="collectionGroupIndex",jl="indexState",zl=["indexId","uid"],$l="sequenceNumberIndex",ql=["uid","sequenceNumber"],Gl="indexEntries",Kl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wl="documentKeyIndex",Hl=["indexId","uid","orderedDocumentKey"],Ql="documentOverlays",Jl=["userId","collectionPath","documentId"],Yl="collectionPathOverlayIndex",Xl=["userId","collectionPath","largestBatchId"],Zl="collectionGroupOverlayIndex",eu=["userId","collectionGroup","largestBatchId"],tu="globals",nu=[cl,ll,ml,il,Il,ol,Pl,kl,Fl,El,Ml,Ll,Ul],ru=[...nu,Ql],su=[cl,ll,ml,yl,Il,ol,Pl,kl,Fl,El,Ml,Ll,Ul,Ql],iu=su,ou=[...iu,Vl,jl,Gl],au=ou,cu=[...ou,tu],lu=cu;class uu extends Pc{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function hu(e,t){const n=Wa(e);return Uc.N(n.he,t)}function du(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class gu{constructor(e,t){this.comparator=e,this.root=t||yu.EMPTY}insert(e,t){return new gu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yu.BLACK,null,null))}remove(e){return new gu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yu{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:yu.RED,this.left=null!=r?r:yu.EMPTY,this.right=null!=s?s:yu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new yu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return yu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return yu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qa(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qa(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qa(27949);return e+(this.isRed()?0:1)}}yu.EMPTY=null,yu.RED=!0,yu.BLACK=!1,yu.EMPTY=new class{constructor(){this.size=0}get key(){throw qa(57766)}get value(){throw qa(16141)}get color(){throw qa(16727)}get left(){throw qa(29726)}get right(){throw qa(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new yu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vu{constructor(e){this.comparator=e,this.data=new gu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bu(this.data.getIterator())}getIteratorFrom(e){return new bu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof vu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vu(this.comparator);return t.data=e,t}}class bu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wu(e){return e.hasNext()?e.getNext():void 0}class xu{constructor(e){this.fields=e,e.sort(Sc.comparator)}static empty(){return new xu([])}unionWith(e){let t=new vu(Sc.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new xu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Su extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Eu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Su("Invalid base64 string: "+e):e}}(e);return new Eu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Eu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Eu.EMPTY_BYTE_STRING=new Eu("");const _u=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iu(e){if(Ka(!!e,39018),"string"==typeof e){let t=0;const n=_u.exec(e);if(Ka(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Cu(e.seconds),nanos:Cu(e.nanos)}}function Cu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Tu(e){return"string"==typeof e?Eu.fromBase64String(e):Eu.fromUint8Array(e)}const ku="server_timestamp",Au="__type__",Du="__previous_value__",Nu="__local_write_time__";function Ou(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Au])||void 0===n?void 0:n.stringValue)===ku}function Pu(e){const t=e.mapValue.fields[Du];return Ou(t)?Pu(t):t}function Mu(e){const t=Iu(e.mapValue.fields[Nu].timestampValue);return new mc(t.seconds,t.nanos)}class Ru{constructor(e,t,n,r,s,i,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=l}}const Fu="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||Fu}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===Fu}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}const Uu="__type__",Vu="__max__",Bu={mapValue:{fields:{__type__:{stringValue:Vu}}}},ju="__vector__",zu="value",$u={nullValue:"NULL_VALUE"};function qu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ou(e)?4:ah(e)?9007199254740991:ih(e)?10:11:qa(28295,{value:e})}function Gu(e,t){if(e===t)return!0;const n=qu(e);if(n!==qu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mu(e).isEqual(Mu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Iu(e.timestampValue),r=Iu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Tu(e.bytesValue).isEqual(Tu(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cu(e.geoPointValue.latitude)===Cu(t.geoPointValue.latitude)&&Cu(e.geoPointValue.longitude)===Cu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cu(e.integerValue)===Cu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cu(e.doubleValue),r=Cu(t.doubleValue);return n===r?Zc(n)===Zc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dc(e.arrayValue.values||[],t.arrayValue.values||[],Gu);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(du(n)!==du(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Gu(n[e],r[e])))return!1;return!0}(e,t);default:return qa(52216,{left:e})}var r}function Ku(e,t){return void 0!==(e.values||[]).find(e=>Gu(e,t))}function Wu(e,t){if(e===t)return 0;const n=qu(e),r=qu(t);if(n!==r)return cc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cu(e.integerValue||e.doubleValue),r=Cu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hu(e.timestampValue,t.timestampValue);case 4:return Hu(Mu(e),Mu(t));case 5:return lc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Tu(e),r=Tu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=cc(n[e],r[e]);if(0!==t)return t}return cc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=cc(Cu(e.latitude),Cu(t.latitude));return 0!==n?n:cc(Cu(e.longitude),Cu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Qu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const o=e.fields||{},a=t.fields||{},c=null===(n=o[zu])||void 0===n?void 0:n.arrayValue,l=null===(r=a[zu])||void 0===r?void 0:r.arrayValue,u=cc((null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0,(null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Qu(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Bu.mapValue&&t===Bu.mapValue)return 0;if(e===Bu.mapValue)return 1;if(t===Bu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let e=0;e<r.length&&e<i.length;++e){const t=lc(r[e],i[e]);if(0!==t)return t;const o=Wu(n[r[e]],s[i[e]]);if(0!==o)return o}return cc(r.length,i.length)}(e.mapValue,t.mapValue);default:throw qa(23264,{Pe:n})}}function Hu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return cc(e,t);const n=Iu(e),r=Iu(t),s=cc(n.seconds,r.seconds);return 0!==s?s:cc(n.nanos,r.nanos)}function Qu(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Wu(n[e],r[e]);if(t)return t}return cc(n.length,r.length)}function Ju(e){return Yu(e)}function Yu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Iu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Tu(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Ec.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Yu(e.fields[s])}`;return n+"}"}(e.mapValue):qa(61005,{value:e})}function Xu(e){switch(qu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Pu(e);return t?16+Xu(t):16;case 5:return 2*e.stringValue.length;case 6:return Tu(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Xu(t),0);case 10:case 11:return function(e){let t=0;return fu(e.fields,(e,n)=>{t+=e.length+Xu(n)}),t}(e.mapValue);default:throw qa(13486,{value:e})}}function Zu(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function eh(e){return!!e&&"integerValue"in e}function th(e){return!!e&&"arrayValue"in e}function nh(e){return!!e&&"nullValue"in e}function rh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sh(e){return!!e&&"mapValue"in e}function ih(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Uu])||void 0===n?void 0:n.stringValue)===ju}function oh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=oh(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ah(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Vu}const ch={mapValue:{fields:{[Uu]:{stringValue:ju},[zu]:{arrayValue:{}}}}};function lh(e){return"nullValue"in e?$u:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zu(Lu.empty(),Ec.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?ih(e)?ch:{mapValue:{}}:qa(35942,{value:e})}function uh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zu(Lu.empty(),Ec.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?ch:"mapValue"in e?ih(e)?{mapValue:{}}:Bu:qa(61959,{value:e})}function hh(e,t){const n=Wu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function dh(e,t){const n=Wu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class fh{constructor(e){this.value=e}static empty(){return new fh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(t)}setAll(e){let t=Sc.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=oh(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];sh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){fu(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new fh(oh(this.value))}}function ph(e){const t=[];return fu(e.fields,(e,n)=>{const r=new Sc([e]);if(sh(n)){const e=ph(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new xu(t)}class gh{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new gh(e,0,yc.min(),yc.min(),yc.min(),fh.empty(),0)}static newFoundDocument(e,t,n,r){return new gh(e,1,t,yc.min(),n,r,0)}static newNoDocument(e,t){return new gh(e,2,t,yc.min(),yc.min(),fh.empty(),0)}static newUnknownDocument(e,t){return new gh(e,3,t,yc.min(),yc.min(),fh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mh{constructor(e,t){this.position=e,this.inclusive=t}}function yh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?Ec.comparator(Ec.fromName(o.referenceValue),n.key):Wu(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function vh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gu(e.position[n],t.position[n]))return!1;return!0}class bh{constructor(e,t="asc"){this.field=e,this.dir=t}}function wh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xh{}class Sh extends xh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Oh(e,t,n):"array-contains"===t?new Fh(e,n):"in"===t?new Lh(e,n):"not-in"===t?new Uh(e,n):"array-contains-any"===t?new Vh(e,n):new Sh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ph(e,n):new Mh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Wu(t,this.value)):null!==t&&qu(this.value)===qu(t)&&this.matchesComparison(Wu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qa(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Eh extends xh{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Eh(e,t)}matches(e){return _h(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _h(e){return"and"===e.op}function Ih(e){return"or"===e.op}function Ch(e){return Th(e)&&_h(e)}function Th(e){for(const t of e.filters)if(t instanceof Eh)return!1;return!0}function kh(e){if(e instanceof Sh)return e.field.canonicalString()+e.op.toString()+Ju(e.value);if(Ch(e))return e.filters.map(e=>kh(e)).join(",");{const t=e.filters.map(e=>kh(e)).join(",");return`${e.op}(${t})`}}function Ah(e,t){return e instanceof Sh?(n=e,(r=t)instanceof Sh&&n.op===r.op&&n.field.isEqual(r.field)&&Gu(n.value,r.value)):e instanceof Eh?function(e,t){return t instanceof Eh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ah(n,t.filters[r]),!0)}(e,t):void qa(19439);var n,r}function Dh(e,t){const n=e.filters.concat(t);return Eh.create(n,e.op)}function Nh(e){return e instanceof Sh?`${(t=e).field.canonicalString()} ${t.op} ${Ju(t.value)}`:e instanceof Eh?function(e){return e.op.toString()+" {"+e.getFilters().map(Nh).join(" ,")+"}"}(e):"Filter";var t}class Oh extends Sh{constructor(e,t,n){super(e,t,n),this.key=Ec.fromName(n.referenceValue)}matches(e){const t=Ec.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ph extends Sh{constructor(e,t){super(e,"in",t),this.keys=Rh("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mh extends Sh{constructor(e,t){super(e,"not-in",t),this.keys=Rh("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ec.fromName(e.referenceValue))}class Fh extends Sh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return th(t)&&Ku(t.arrayValue,this.value)}}class Lh extends Sh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ku(this.value.arrayValue,t)}}class Uh extends Sh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ku(this.value.arrayValue,t)}}class Vh extends Sh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!th(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ku(this.value.arrayValue,e))}}class Bh{constructor(e,t=null,n=[],r=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Ie=null}}function jh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new Bh(e,t,n,r,s,i,o)}function zh(e){const t=Wa(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>kh(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Xc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ju(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ju(e)).join(",")),t.Ie=e}return t.Ie}function $h(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ah(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vh(e.startAt,t.startAt)&&vh(e.endAt,t.endAt)}function qh(e){return Ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Gh(e,t){return e.filters.filter(e=>e instanceof Sh&&e.field.isEqual(t))}function Kh(e,t,n){let r=$u,s=!0;for(const n of Gh(e,t)){let e=$u,t=!0;switch(n.op){case"<":case"<=":e=lh(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=$u}hh({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];hh({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function Wh(e,t,n){let r=Bu,s=!0;for(const n of Gh(e,t)){let e=Bu,t=!0;switch(n.op){case">=":case">":e=uh(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=Bu}dh({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];dh({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class Hh{constructor(e,t=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Qh(e){return new Hh(e)}function Jh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yh(e){return null!==e.collectionGroup}function Xh(e){const t=Wa(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ee.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new vu(Sc.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new bh(r,n))}),e.has(Sc.keyField().canonicalString())||t.Ee.push(new bh(Sc.keyField(),n))}return t.Ee}function Zh(e){const t=Wa(e);return t.de||(t.de=function(e,t){if("F"===e.limitType)return jh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new bh(e.field,t)});const n=e.endAt?new mh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mh(e.startAt.position,e.startAt.inclusive):null;return jh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Xh(e))),t.de}function ed(e,t){const n=e.filters.concat([t]);return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function td(e,t,n){return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return $h(Zh(e),Zh(t))&&e.limitType===t.limitType}function rd(e){return`${zh(Zh(e))}|lt:${e.limitType}`}function sd(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Nh(e)).join(", ")}]`),Xc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ju(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ju(e)).join(",")),`Target(${t})`}(Zh(e))}; limitType=${e.limitType})`}function id(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ec.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Xh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=yh(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,Xh(n),r)||n.endAt&&!function(e,t,n){const r=yh(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,Xh(n),r)));var n,r}function od(e){return(t,n)=>{let r=!1;for(const s of Xh(e)){const e=ad(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function ad(e,t,n){const r=e.field.isKeyField()?Ec.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Wu(r,s):qa(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qa(19790,{direction:e.dir})}}class cd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){fu(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return pu(this.inner)}size(){return this.innerSize}}const ld=new gu(Ec.comparator);function ud(){return ld}const hd=new gu(Ec.comparator);function dd(...e){let t=hd;for(const n of e)t=t.insert(n.key,n);return t}function fd(e){let t=hd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function pd(){return md()}function gd(){return md()}function md(){return new cd(e=>e.toString(),(e,t)=>e.isEqual(t))}const yd=new gu(Ec.comparator),vd=new vu(Ec.comparator);function bd(...e){let t=vd;for(const n of e)t=t.add(n);return t}const wd=new vu(cc);function xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(t)?"-0":t}}function Sd(e){return{integerValue:""+e}}function Ed(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Zc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Sd(t):xd(e,t)}class _d{constructor(){this._=void 0}}function Id(e,t,n){return e instanceof kd?function(e,t){const n={fields:{[Au]:{stringValue:ku},[Nu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ou(t)&&(t=Pu(t)),t&&(n.fields[Du]=t),{mapValue:n}}(n,t):e instanceof Ad?Dd(e,t):e instanceof Nd?Od(e,t):function(e,t){const n=Td(e,t),r=Md(n)+Md(e.Re);return eh(n)&&eh(e.Re)?Sd(r):xd(e.serializer,r)}(e,t)}function Cd(e,t,n){return e instanceof Ad?Dd(e,t):e instanceof Nd?Od(e,t):n}function Td(e,t){return e instanceof Pd?eh(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class kd extends _d{}class Ad extends _d{constructor(e){super(),this.elements=e}}function Dd(e,t){const n=Rd(t);for(const t of e.elements)n.some(e=>Gu(e,t))||n.push(t);return{arrayValue:{values:n}}}class Nd extends _d{constructor(e){super(),this.elements=e}}function Od(e,t){let n=Rd(t);for(const t of e.elements)n=n.filter(e=>!Gu(e,t));return{arrayValue:{values:n}}}class Pd extends _d{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Md(e){return Cu(e.integerValue||e.doubleValue)}function Rd(e){return th(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Fd{constructor(e,t){this.field=e,this.transform=t}}class Ld{constructor(e,t){this.version=e,this.transformResults=t}}class Ud{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ud}static exists(e){return new Ud(void 0,e)}static updateTime(e){return new Ud(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Bd{}function jd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yd(e.key,Ud.none()):new Kd(e.key,e.data,Ud.none());{const n=e.data,r=fh.empty();let s=new vu(Sc.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Wd(e.key,r,new xu(s.toArray()),Ud.none())}}function zd(e,t,n){var r;e instanceof Kd?function(e,t,n){const r=e.value.clone(),s=Qd(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wd?function(e,t,n){if(!Vd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qd(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Hd(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function $d(e,t,n,r){return e instanceof Kd?function(e,t,n,r){if(!Vd(e.precondition,t))return n;const s=e.value.clone(),i=Jd(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wd?function(e,t,n,r){if(!Vd(e.precondition,t))return n;const s=Jd(e.fieldTransforms,r,t),i=t.data;return i.setAll(Hd(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(s=t,i=n,Vd(e.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):i);var s,i}function qd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Td(r.transform,e||null);null!=s&&(null===n&&(n=fh.empty()),n.set(r.field,s))}return n||null}function Gd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&dc(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Ad&&r instanceof Ad||n instanceof Nd&&r instanceof Nd?dc(n.elements,r.elements,Gu):n instanceof Pd&&r instanceof Pd?Gu(n.Re,r.Re):n instanceof kd&&r instanceof kd);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Kd extends Bd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wd extends Bd{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Hd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qd(e,t,n){const r=new Map;Ka(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Cd(o,a,n[s]))}return r}function Jd(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Id(e,i,t))}return r}class Yd extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xd extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&zd(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gd();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=jd(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(yc.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bd())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(e,t)=>Gd(e,t))&&dc(this.baseMutations,e.baseMutations,(e,t)=>Gd(e,t))}}class ef{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ka(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=yd;const s=e.mutations;for(let e=0;e<s.length;e++)r=r.insert(s[e].key,n[e].version);return new ef(e,t,n,r)}}class tf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nf{constructor(e,t){this.count=e,this.unchangedNames=t}}var rf,sf;function of(e){if(void 0===e)return ja("GRPC error has no .code"),Ha.UNKNOWN;switch(e){case rf.OK:return Ha.OK;case rf.CANCELLED:return Ha.CANCELLED;case rf.UNKNOWN:return Ha.UNKNOWN;case rf.DEADLINE_EXCEEDED:return Ha.DEADLINE_EXCEEDED;case rf.RESOURCE_EXHAUSTED:return Ha.RESOURCE_EXHAUSTED;case rf.INTERNAL:return Ha.INTERNAL;case rf.UNAVAILABLE:return Ha.UNAVAILABLE;case rf.UNAUTHENTICATED:return Ha.UNAUTHENTICATED;case rf.INVALID_ARGUMENT:return Ha.INVALID_ARGUMENT;case rf.NOT_FOUND:return Ha.NOT_FOUND;case rf.ALREADY_EXISTS:return Ha.ALREADY_EXISTS;case rf.PERMISSION_DENIED:return Ha.PERMISSION_DENIED;case rf.FAILED_PRECONDITION:return Ha.FAILED_PRECONDITION;case rf.ABORTED:return Ha.ABORTED;case rf.OUT_OF_RANGE:return Ha.OUT_OF_RANGE;case rf.UNIMPLEMENTED:return Ha.UNIMPLEMENTED;case rf.DATA_LOSS:return Ha.DATA_LOSS;default:return qa(39323,{code:e})}}(sf=rf||(rf={}))[sf.OK=0]="OK",sf[sf.CANCELLED=1]="CANCELLED",sf[sf.UNKNOWN=2]="UNKNOWN",sf[sf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sf[sf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sf[sf.NOT_FOUND=5]="NOT_FOUND",sf[sf.ALREADY_EXISTS=6]="ALREADY_EXISTS",sf[sf.PERMISSION_DENIED=7]="PERMISSION_DENIED",sf[sf.UNAUTHENTICATED=16]="UNAUTHENTICATED",sf[sf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sf[sf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sf[sf.ABORTED=10]="ABORTED",sf[sf.OUT_OF_RANGE=11]="OUT_OF_RANGE",sf[sf.UNIMPLEMENTED=12]="UNIMPLEMENTED",sf[sf.INTERNAL=13]="INTERNAL",sf[sf.UNAVAILABLE=14]="UNAVAILABLE",sf[sf.DATA_LOSS=15]="DATA_LOSS";const af=new Sa([4294967295,4294967295],0);function cf(e){const t=oc().encode(e),n=new Ea;return n.update(t),new Uint8Array(n.digest())}function lf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Sa([n,r],0),new Sa([s,i],0)]}class uf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hf(`Invalid padding: ${t}`);if(n<0)throw new hf(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hf(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hf(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Sa.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Sa.fromNumber(n)));return 1===r.compare(af)&&(r=new Sa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=cf(e),[n,r]=lf(t);for(let e=0;e<this.hashCount;e++){const t=this.we(n,r,e);if(!this.Se(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new uf(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.pe)return;const t=cf(e),[n,r]=lf(t);for(let e=0;e<this.hashCount;e++){const t=this.we(n,r,e);this.be(t)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class df{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ff.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new df(yc.min(),r,new gu(cc),ud(),bd())}}class ff{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ff(n,t,bd(),bd(),bd())}}class pf{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class gf{constructor(e,t){this.targetId=e,this.Ce=t}}class mf{constructor(e,t,n=Eu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yf{constructor(){this.Fe=0,this.Me=wf(),this.xe=Eu.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=bd(),t=bd(),n=bd();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qa(38017,{changeType:s})}}),new ff(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=wf()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ka(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class vf{constructor(e){this.ze=e,this.je=new Map,this.He=ud(),this.Je=bf(),this.Ye=bf(),this.Ze=new gu(cc)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:qa(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((e,n)=>{this.it(n)&&t(n)})}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(qh(s))if(0===n){const e=new Ec(s.path);this.tt(t,e,gh.newNoDocument(e,yc.min()))}else Ka(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=Tu(n).toUint8Array()}catch(e){if(e instanceof Su)return za("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new uf(i,r,s)}catch(e){return za(e instanceof hf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.pe?null:o}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.ze.Pt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.tt(t,n,null),r++)}),r}It(e){const t=new Map;this.je.forEach((n,r)=>{const s=this._t(r);if(s){if(n.current&&qh(s.target)){const t=new Ec(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,gh.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}});let n=bd();this.Ye.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.He.forEach((t,n)=>n.setReadTime(e));const r=new df(e,t,this.Ze,this.He,n);return this.He=ud(),this.Je=bf(),this.Ye=bf(),this.Ze=new gu(cc),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new yf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new vu(cc),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new vu(cc),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||Ba("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new yf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function bf(){return new gu(Ec.comparator)}function wf(){return new gu(Ec.comparator)}const xf={asc:"ASCENDING",desc:"DESCENDING"},Sf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ef={and:"AND",or:"OR"};class _f{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function If(e,t){return e.useProto3Json||Xc(t)?t:{value:t}}function Cf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kf(e,t){return Cf(e,t.toTimestamp())}function Af(e){return Ka(!!e,49232),yc.fromTimestamp(function(e){const t=Iu(e);return new mc(t.seconds,t.nanos)}(e))}function Df(e,t){return Nf(e,t).canonicalString()}function Nf(e,t){const n=(r=e,new wc(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function Of(e){const t=wc.fromString(e);return Ka(Zf(t),10190,{key:t.toString()}),t}function Pf(e,t){return Df(e.databaseId,t.path)}function Mf(e,t){const n=Of(t);if(n.get(1)!==e.databaseId.projectId)throw new Qa(Ha.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qa(Ha.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ec(Uf(n))}function Rf(e,t){return Df(e.databaseId,t)}function Ff(e){const t=Of(e);return 4===t.length?wc.emptyPath():Uf(t)}function Lf(e){return new wc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uf(e){return Ka(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Vf(e,t,n){return{name:Pf(e,t),fields:n.value.mapValue.fields}}function Bf(e,t){let n;if(t instanceof Kd)n={update:Vf(e,t.key,t.value)};else if(t instanceof Yd)n={delete:Pf(e,t.key)};else if(t instanceof Wd)n={update:Vf(e,t.key,t.data),updateMask:Xf(t.fieldMask)};else{if(!(t instanceof Xd))return qa(16599,{ft:t.type});n={verify:Pf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof kd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw qa(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(s=t.precondition).updateTime?{updateTime:kf(r,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:qa(27497))),n;var r,s}function jf(e,t){const n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Ud.updateTime(Af(s.updateTime)):void 0!==s.exists?Ud.exists(s.exists):Ud.none():Ud.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)Ka("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new kd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ad(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Nd(e)}else"increment"in t?n=new Pd(e,t.increment):qa(16584,{proto:t});const r=Sc.fromServerFormat(t.fieldPath);return new Fd(r,n)}(e,t)):[];var s;if(t.update){t.update.name;const s=Mf(e,t.update.name),i=new fh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new xu(t.map(e=>Sc.fromServerFormat(e)))}(t.updateMask);return new Wd(s,i,e,n,r)}return new Kd(s,i,n,r)}if(t.delete){const r=Mf(e,t.delete);return new Yd(r,n)}if(t.verify){const r=Mf(e,t.verify);return new Xd(r,n)}return qa(1463,{proto:t})}function zf(e,t){return{documents:[Rf(e,t.path)]}}function $f(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rf(e,s);const i=function(e){if(0!==e.length)return Yf(Eh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:Qf((t=e).field),direction:Kf(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=If(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s};var c}function qf(e){let t=Ff(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ka(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Gf(e);return t instanceof Eh&&Ch(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new bh(Jf((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Xc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new mh(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new mh(n,t)}(n.endAt)),function(e,t,n,r,s,i,o,a){return new Hh(e,t,n,r,s,"F",o,a)}(t,s,o,i,a,0,c,l)}function Gf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jf(e.unaryFilter.field);return Sh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Jf(e.unaryFilter.field);return Sh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jf(e.unaryFilter.field);return Sh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Jf(e.unaryFilter.field);return Sh.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qa(61313);default:return qa(60726)}}(e):void 0!==e.fieldFilter?(t=e,Sh.create(Jf(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qa(58110);default:return qa(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Eh.create(e.compositeFilter.filters.map(e=>Gf(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qa(1026)}}(e.compositeFilter.op))}(e):qa(30097,{filter:e});var t}function Kf(e){return xf[e]}function Wf(e){return Sf[e]}function Hf(e){return Ef[e]}function Qf(e){return{fieldPath:e.canonicalString()}}function Jf(e){return Sc.fromServerFormat(e.fieldPath)}function Yf(e){return e instanceof Sh?function(e){if("=="===e.op){if(rh(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NAN"}};if(nh(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rh(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NOT_NAN"}};if(nh(e.value))return{unaryFilter:{field:Qf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qf(e.field),op:Wf(e.op),value:e.value}}}(e):e instanceof Eh?function(e){const t=e.getFilters().map(e=>Yf(e));return 1===t.length?t[0]:{compositeFilter:{op:Hf(e.op),filters:t}}}(e):qa(54877,{filter:e})}function Xf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ep{constructor(e,t,n,r,s=yc.min(),i=yc.min(),o=Eu.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ep(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tp{constructor(e){this.wt=e}}function np(e,t){let n;if(t.document)n=function(e,t,n){const r=Mf(e,t.name),s=Af(t.updateTime),i=t.createTime?Af(t.createTime):yc.min(),o=new fh({mapValue:{fields:t.fields}}),a=gh.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}(e.wt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ec.fromSegments(t.noDocument.path),r=op(t.noDocument.readTime);n=gh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qa(56709);{const e=Ec.fromSegments(t.unknownDocument.path),r=op(t.unknownDocument.version);n=gh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new mc(e[0],e[1]);return yc.fromTimestamp(t)}(t.readTime)),n}function rp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:Pf(s=e.wt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:Cf(s,i.version.toTimestamp()),createTime:Cf(s,i.createTime.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ip(t.version)};else{if(!t.isUnknownDocument())return qa(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:ip(t.version)}}var s,i;return r}function sp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ip(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function op(e){const t=new mc(e.seconds,e.nanoseconds);return yc.fromTimestamp(t)}function ap(e,t){const n=(t.baseMutations||[]).map(t=>jf(e.wt,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>jf(e.wt,t)),s=mc.fromMillis(t.localWriteTimeMs);return new Zd(t.batchId,s,n,r)}function cp(e){const t=op(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?op(e.lastLimboFreeSnapshotVersion):yc.min();let r;return r=void 0!==e.query.documents?function(e){const t=e.documents.length;return Ka(1===t,1966,{count:t}),Zh(Qh(Ff(e.documents[0])))}(e.query):function(e){return Zh(qf(e))}(e.query),new ep(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Eu.fromBase64String(e.resumeToken))}function lp(e,t){const n=ip(t.snapshotVersion),r=ip(t.lastLimboFreeSnapshotVersion);let s;s=qh(t.target)?zf(e.wt,t.target):$f(e.wt,t.target).gt;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zh(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function up(e){const t=qf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?td(t,t.limit,"L"):t}function hp(e,t){return new tf(t.largestBatchId,jf(e.wt,t.overlayMutation))}function dp(e,t){const n=t.path.lastSegment();return[e,tl(t.path.popLast()),n]}function fp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ip(r.readTime),documentKey:tl(r.documentKey.path),largestBatchId:r.largestBatchId}}class pp{getBundleMetadata(e,t){return gp(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:op(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return gp(e).put({bundleId:(n=t).id,createTime:ip(Af(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return mp(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:up(t.bundledQuery),readTime:op(t.readTime)};var t})}saveNamedQuery(e,t){return mp(e).put({name:(n=t).name,readTime:ip(Af(n.readTime)),bundledQuery:n.bundledQuery});var n}}function gp(e){return hu(e,Ll)}function mp(e){return hu(e,Ul)}class yp{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const n=t.uid||"";return new yp(e,n)}getOverlay(e,t){return vp(e).get(dp(this.userId,t)).next(e=>e?hp(this.serializer,e):null)}getOverlays(e,t){const n=pd();return Rc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new tf(t,s);r.push(this.bt(e,i))}),Rc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(tl(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(vp(e).X(Yl,r))}),Rc.waitFor(s)}getOverlaysForCollection(e,t,n){const r=pd(),s=tl(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vp(e).J(Yl,i).next(e=>{for(const t of e){const e=hp(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=pd();let i;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vp(e).te({index:Zl,range:o},(e,t,n)=>{const o=hp(this.serializer,t);s.size()<r||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(()=>s)}bt(e,t){return vp(e).put(function(e,t,n){const[r,s,i]=dp(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Bf(e.wt,n.mutation)}}(this.serializer,this.userId,t))}}function vp(e){return hu(e,Ql)}class bp{Dt(e){return hu(e,tu)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Eu.fromUint8Array(t):Eu.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class wp{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Cu(e.integerValue));else if("doubleValue"in e){const n=Cu(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Zc(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Iu(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Tu(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?ah(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):ih(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):qa(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const e of Object.keys(n))this.Nt(e,t),this.Ct(n[e],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=zu,o=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Cu(o)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const e of n)this.Ct(e,t)}kt(e,t){this.Mt(t,37),Ec.fromName(e).path.forEach(e=>{this.Mt(t,60),this.Kt(e,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}wp.Wt=new wp;const xp=255;function Sp(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Ep(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Sp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class _p{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.zt(n.value),n=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Yt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.zt(e);else if(e<2048)this.zt(960|e>>>6),this.zt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.zt(480|e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e);else{const e=t.codePointAt(0);this.zt(240|e>>>18),this.zt(128|63&e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e)}}this.jt()}Xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Yt()}en(e){const t=this.tn(e),n=Ep(t);this.nn(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}rn(e){const t=this.tn(e),n=Ep(t);this.nn(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}sn(){this._n(xp),this._n(255)}an(){this.un(xp),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===xp?(this._n(xp),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):t===xp?(this.un(xp),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ip{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class Cp{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class Tp{constructor(){this.ln=new _p,this.hn=new Ip(this.ln),this.Pn=new Cp(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class kp{constructor(e,t,n,r){this.In=e,this.En=t,this.dn=n,this.An=r}Rn(){const e=this.An.length,t=0===e||255===this.An[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.An,0),t!==e?n.set([0],this.An.length):++n[n.length-1],new kp(this.In,this.En,this.dn,n)}Vn(e,t,n){return{indexId:this.In,uid:e,arrayValue:Np(this.dn),directionalValue:Np(this.An),orderedDocumentKey:Np(t),documentKey:n.path.toArray()}}mn(e,t,n){const r=this.Vn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ap(e,t){let n=e.In-t.In;return 0!==n?n:(n=Dp(e.dn,t.dn),0!==n?n:(n=Dp(e.An,t.An),0!==n?n:Ec.comparator(e.En,t.En)))}function Dp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Np(e){return zi()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Op(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Pp{constructor(e){this.fn=new vu((e,t)=>Sc.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const e=t;e.isInequality()?this.fn=this.fn.add(e):this.pn.push(e)}}get yn(){return this.fn.size>1}wn(e){if(Ka(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Ic(e);if(void 0!==t&&!this.Sn(t))return!1;const n=Cc(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.Sn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.fn.size>0){const e=this.fn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.bn(e,t)||!this.Dn(this.gn[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.gn.length||!this.Dn(this.gn[i++],e))return!1}return!0}vn(){if(this.yn)return null;let e=new vu(Sc.comparator);const t=[];for(const n of this.pn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Tc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Tc(n.field,0))}for(const n of this.gn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Tc(n.field,"asc"===n.dir?0:1)));return new _c(_c.UNKNOWN_ID,this.collectionId,t,kc.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mp(e){var t,n;if(Ka(e instanceof Sh||e instanceof Eh,20012),e instanceof Sh){if(e instanceof Lh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Sh.create(e.field,"==",t)))||[];return Eh.create(r,"or")}return e}const r=e.filters.map(e=>Mp(e));return Eh.create(r,e.op)}function Rp(e){if(0===e.getFilters().length)return[];const t=Vp(Mp(e));return Ka(Up(t),7391),Fp(t)||Lp(t)?[t]:t.getFilters()}function Fp(e){return e instanceof Sh}function Lp(e){return e instanceof Eh&&Ch(e)}function Up(e){return Fp(e)||Lp(e)||function(e){if(e instanceof Eh&&Ih(e)){for(const t of e.getFilters())if(!Fp(t)&&!Lp(t))return!1;return!0}return!1}(e)}function Vp(e){if(Ka(e instanceof Sh||e instanceof Eh,34018),e instanceof Sh)return e;if(1===e.filters.length)return Vp(e.filters[0]);const t=e.filters.map(e=>Vp(e));let n=Eh.create(t,e.op);return n=zp(n),Up(n)?n:(Ka(n instanceof Eh,64498),Ka(_h(n),40251),Ka(n.filters.length>1,57927),n.filters.reduce((e,t)=>Bp(e,t)))}function Bp(e,t){let n;return Ka(e instanceof Sh||e instanceof Eh,38388),Ka(t instanceof Sh||t instanceof Eh,25473),n=e instanceof Sh?t instanceof Sh?(r=e,s=t,Eh.create([r,s],"and")):jp(e,t):t instanceof Sh?jp(t,e):function(e,t){if(Ka(e.filters.length>0&&t.filters.length>0,48005),_h(e)&&_h(t))return Dh(e,t.getFilters());const n=Ih(e)?e:t,r=Ih(e)?t:e,s=n.filters.map(e=>Bp(e,r));return Eh.create(s,"or")}(e,t),zp(n);var r,s}function jp(e,t){if(_h(t))return Dh(t,e.getFilters());{const n=t.filters.map(t=>Bp(e,t));return Eh.create(n,"or")}}function zp(e){if(Ka(e instanceof Sh||e instanceof Eh,11850),e instanceof Sh)return e;const t=e.getFilters();if(1===t.length)return zp(t[0]);if(Th(e))return e;const n=t.map(e=>zp(e)),r=[];return n.forEach(t=>{t instanceof Sh?r.push(t):t instanceof Eh&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Eh.create(r,e.op)}class $p{constructor(){this.Cn=new qp}addToCollectionParentIndex(e,t){return this.Cn.add(t),Rc.resolve()}getCollectionParents(e,t){return Rc.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Rc.resolve()}deleteFieldIndex(e,t){return Rc.resolve()}deleteAllFieldIndexes(e){return Rc.resolve()}createTargetIndexes(e,t){return Rc.resolve()}getDocumentsMatchingTarget(e,t){return Rc.resolve(null)}getIndexType(e,t){return Rc.resolve(0)}getFieldIndexes(e,t){return Rc.resolve([])}getNextCollectionGroupToUpdate(e){return Rc.resolve(null)}getMinOffset(e,t){return Rc.resolve(Dc.min())}getMinOffsetFromCollectionGroup(e,t){return Rc.resolve(Dc.min())}updateCollectionGroup(e,t,n){return Rc.resolve()}updateIndexEntries(e,t){return Rc.resolve()}}class qp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new vu(wc.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new vu(wc.comparator)).toArray()}}const Gp="IndexedDbIndexManager",Kp=new Uint8Array(0);class Wp{constructor(e,t){this.databaseId=t,this.Fn=new qp,this.Mn=new cd(e=>zh(e),(e,t)=>$h(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const s={collectionId:n,parent:tl(r)};return Hp(e).put(s)}return Rc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[fc(t),""],!1,!0);return Hp(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(sl(r.parent))}return n})}addFieldIndex(e,t){const n=Jp(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};var s;delete r.indexId;const i=n.add(r);if(t.indexState){const n=Yp(e);return i.next(e=>{n.put(fp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Jp(e),r=Yp(e),s=Qp(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Jp(e),n=Qp(e),r=Yp(e);return t.X().next(()=>n.X()).next(()=>r.X())}createTargetIndexes(e,t){return Rc.forEach(this.xn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Pp(t).vn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Qp(e);let r=!0;const s=new Map;return Rc.forEach(this.xn(t),t=>this.On(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=bd();const r=[];return Rc.forEach(s,(s,i)=>{var o;Ba(Gp,`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${zh(t)}`);const a=function(e,t){const n=Ic(t);if(void 0===n)return null;for(const t of Gh(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(i,s),c=function(e,t){const n=new Map;for(const r of Cc(t))for(const t of Gh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of Cc(t)){const t=0===s.kind?Kh(e,s.fieldPath,e.startAt):Wh(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new mh(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of Cc(t)){const t=0===s.kind?Wh(e,s.fieldPath,e.endAt):Kh(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new mh(n,r)}(i,s),h=this.Nn(s,i,l),d=this.Nn(s,i,u),f=this.Bn(s,i,c),p=this.Ln(s.indexId,a,h,l.inclusive,d,u.inclusive,f);return Rc.forEach(p,s=>n.Z(s,t.limit).next(t=>{t.forEach(t=>{const n=Ec.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Rc.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(t=0===e.filters.length?[e]:Rp(Eh.create(e.filters,"and")).map(t=>jh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,n,r,s,i,o){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.kn(t[u/c]):Kp,h=this.qn(e,a,n[u%c],r),d=this.Qn(e,a,s[u%c],i),f=o.map(t=>this.qn(e,a,t,!0));l.push(...this.createRange(h,d,f))}return l}qn(e,t,n,r){const s=new kp(e,Ec.empty(),t,n);return r?s:s.Rn()}Qn(e,t,n,r){const s=new kp(e,Ec.empty(),t,n);return r?s.Rn():s}On(e,t){const n=new Pp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.wn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.xn(t);return Rc.forEach(r,t=>this.On(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new vu(Sc.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>null!==t.limit&&r.length>1&&2===n?1:n)}$n(e,t){const n=new Tp;for(const r of Cc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Tn(r.kind);wp.Wt.vt(e,s)}return n.cn()}kn(e){const t=new Tp;return wp.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const n=new Tp;return wp.Wt.vt(Zu(this.databaseId,t),n.Tn(function(e){const t=Cc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.cn()}Bn(e,t,n){if(null===n)return[];let r=[];r.push(new Tp);let s=0;for(const i of Cc(e)){const e=n[s++];for(const n of r)if(this.Kn(t,i.fieldPath)&&th(e))r=this.Wn(r,i,e);else{const t=n.Tn(i.kind);wp.Wt.vt(e,t)}}return this.Gn(r)}Nn(e,t,n){return this.Bn(e,t,n.position)}Gn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].cn();return t}Wn(e,t,n){const r=[...e],s=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Tp;r.seed(n.cn()),wp.Wt.vt(e,r.Tn(t.kind)),s.push(r)}return s}Kn(e,t){return!!e.filters.find(e=>e instanceof Sh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Jp(e),r=Yp(e);return(t?n.J(Bl,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return Rc.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new kc(t.sequenceNumber,new Dc(op(t.readTime),new Ec(sl(t.documentKey)),t.largestBatchId)):kc.empty(),r=e.fields.map(([e,t])=>new Tc(Sc.fromServerFormat(e),t));return new _c(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:cc(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Jp(e),s=Yp(e);return this.zn(e).next(e=>r.J(Bl,IDBKeyRange.bound(t,t)).next(t=>Rc.forEach(t,t=>s.put(fp(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Rc.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?Rc.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),Rc.forEach(s,n=>this.jn(e,t,n).next(t=>{const s=this.Hn(r,n);return t.isEqual(s)?Rc.resolve():this.Jn(e,r,n,t,s)}))))})}Yn(e,t,n,r){return Qp(e).put(r.Vn(this.uid,this.Un(n,t.key),t.key))}Zn(e,t,n,r){return Qp(e).delete(r.mn(this.uid,this.Un(n,t.key),t.key))}jn(e,t,n){const r=Qp(e);let s=new vu(Ap);return r.te({index:Wl,range:IDBKeyRange.only([n.indexId,this.uid,Np(this.Un(n,t))])},(e,r)=>{s=s.add(new kp(n.indexId,t,Op(r.arrayValue),Op(r.directionalValue)))}).next(()=>s)}Hn(e,t){let n=new vu(Ap);const r=this.$n(t,e);if(null==r)return n;const s=Ic(t);if(null!=s){const i=e.data.field(s.fieldPath);if(th(i))for(const s of i.arrayValue.values||[])n=n.add(new kp(t.indexId,e.key,this.kn(s),r))}else n=n.add(new kp(t.indexId,e.key,Kp,r));return n}Jn(e,t,n,r,s){Ba(Gp,"Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),o=t.getIterator();let a=wu(i),c=wu(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=wu(o)):t?(s(a),a=wu(i)):(a=wu(i),c=wu(o))}}(r,s,Ap,r=>{i.push(this.Yn(e,t,n,r))},r=>{i.push(this.Zn(e,t,n,r))}),Rc.waitFor(i)}zn(e){let t=1;return Yp(e).te({index:$l,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Ap(e,t)).filter((e,t,n)=>!t||0!==Ap(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=Ap(s,e),i=Ap(s,t);if(0===n)r[0]=e.Rn();else if(n>0&&i<0)r.push(s),r.push(s.Rn());else if(i>0)break}r.push(t);const s=[];for(let e=0;e<r.length;e+=2){if(this.Xn(r[e],r[e+1]))return[];const t=r[e].mn(this.uid,Kp,Ec.empty()),n=r[e+1].mn(this.uid,Kp,Ec.empty());s.push(IDBKeyRange.bound(t,n))}return s}Xn(e,t){return Ap(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Xp)}getMinOffset(e,t){return Rc.mapArray(this.xn(t),t=>this.On(e,t).next(e=>e||qa(44426))).next(Xp)}}function Hp(e){return hu(e,Ml)}function Qp(e){return hu(e,Gl)}function Jp(e){return hu(e,Vl)}function Yp(e){return hu(e,jl)}function Xp(e){Ka(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Nc(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Dc(t.readTime,t.documentKey,n)}const Zp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eg=41943040;class tg{static withCacheSize(e){return new tg(e,tg.DEFAULT_COLLECTION_PERCENTILE,tg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function ng(e,t,n){const r=e.store(ll),s=e.store(ml),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.te({range:o},(e,t,n)=>(a++,n.delete()));i.push(c.next(()=>{Ka(1===a,47070,{batchId:n.batchId})}));const l=[];for(const e of n.mutations){const r=pl(t,e.key.path,n.batchId);i.push(s.delete(r)),l.push(e.key)}return Rc.waitFor(i).next(()=>l)}function rg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qa(14731);t=e.noDocument}return JSON.stringify(t).length}tg.DEFAULT_COLLECTION_PERCENTILE=10,tg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tg.DEFAULT=new tg(eg,tg.DEFAULT_COLLECTION_PERCENTILE,tg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tg.DISABLED=new tg(-1,0,0);class sg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.er={}}static St(e,t,n,r){Ka(""!==e.uid,64387);const s=e.isAuthenticated()?e.uid:"";return new sg(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return og(e).te({index:hl,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=ag(e),i=og(e);return i.add({}).next(o=>{Ka("number"==typeof o,49019);const a=new Zd(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Bf(e.wt,t)),s=n.mutations.map(t=>Bf(e.wt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,a),l=[];let u=new vu((e,t)=>cc(e.canonicalString(),t.canonicalString()));for(const e of r){const t=pl(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(i.put(c)),l.push(s.put(t,gl))}return u.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.er[o]=a.keys()}),Rc.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return og(e).get(t).next(e=>e?(Ka(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),ap(this.serializer,e)):null)}tr(e,t){return this.er[t]?Rc.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.er[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return og(e).te({index:hl,range:r},(e,t,r)=>{t.userId===this.userId&&(Ka(t.batchId>=n,47524,{nr:n}),s=ap(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return og(e).te({index:hl,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return og(e).J(hl,t).next(e=>e.map(e=>ap(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=fl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return ag(e).te({range:r},(n,r,i)=>{const[o,a,c]=n,l=sl(a);if(o===this.userId&&t.path.isEqual(l))return og(e).get(c).next(e=>{if(!e)throw qa(61480,{rr:n,batchId:c});Ka(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:c}),s.push(ap(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vu(cc);const r=[];return t.forEach(t=>{const s=fl(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=ag(e).te({range:i},(e,r,s)=>{const[i,o,a]=e,c=sl(o);i===this.userId&&t.path.isEqual(c)?n=n.add(a):s.done()});r.push(o)}),Rc.waitFor(r).next(()=>this.ir(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=fl(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new vu(cc);return ag(e).te({range:i},(e,t,s)=>{const[i,a,c]=e,l=sl(a);i===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):s.done()}).next(()=>this.ir(e,o))}ir(e,t){const n=[],r=[];return t.forEach(t=>{r.push(og(e).get(t).next(e=>{if(null===e)throw qa(35274,{batchId:t});Ka(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(ap(this.serializer,e))}))}),Rc.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ng(e.he,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),Rc.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ag(e).te({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=sl(e[1]);r.push(t)}else n.done()}).next(()=>{Ka(0===r.length,56720,{_r:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return ig(e,this.userId,t)}ar(e){return cg(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ig(e,t,n){const r=fl(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ag(e).te({range:i,ee:!0},(e,n,r)=>{const[i,a,c]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function og(e){return hu(e,ll)}function ag(e){return hu(e,ml)}function cg(e){return hu(e,cl)}class lg{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new lg(0)}static lr(){return new lg(-1)}}class ug{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const n=new lg(t.highestTargetId);return t.highestTargetId=n.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(e=>yc.fromTimestamp(new mc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.hr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pr(e,r)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(n=>(n.targetCount+=1,this.Ir(t,n),this.Pr(e,n))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hg(e).delete(t.targetId)).next(()=>this.hr(e)).next(t=>(Ka(t.targetCount>0,8065),t.targetCount-=1,this.Pr(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return hg(e).te((i,o)=>{const a=cp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>Rc.waitFor(s)).next(()=>r)}forEachTarget(e,t){return hg(e).te((e,n)=>{const r=cp(n);t(r)})}hr(e){return dg(e).get(Ol).next(e=>(Ka(null!==e,2888),e))}Pr(e,t){return dg(e).put(Ol,t)}Tr(e,t){return hg(e).put(lp(this.serializer,t))}Ir(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.hr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=zh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return hg(e).te({range:r,index:Cl},(e,n,r)=>{const i=cp(n);$h(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=fg(e);return t.forEach(t=>{const i=tl(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),Rc.waitFor(r)}removeMatchingKeys(e,t,n){const r=fg(e);return Rc.forEach(t,t=>{const s=tl(t.path);return Rc.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=fg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fg(e);let s=bd();return r.te({range:n,ee:!0},(e,t,n)=>{const r=sl(e[1]),i=new Ec(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=tl(t.path),r=IDBKeyRange.bound([n],[fc(n)],!1,!0);let s=0;return fg(e).te({index:Dl,ee:!0,range:r},([e,t],n,r)=>{0!==e&&(s++,r.done())}).next(()=>s>0)}Rt(e,t){return hg(e).get(t).next(e=>e?cp(e):null)}}function hg(e){return hu(e,Il)}function dg(e){return hu(e,Pl)}function fg(e){return hu(e,kl)}const pg="LruGarbageCollector",gg=1048576;function mg([e,t],[n,r]){const s=cc(e,n);return 0===s?cc(t,r):s}class yg{constructor(e){this.Er=e,this.buffer=new vu(mg),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();mg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vg{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){Ba(pg,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zc(e)?Ba(pg,"Ignoring IndexedDB error during garbage collection: ",e):await Mc(e)}await this.mr(3e5)})}}class bg{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Rc.resolve(Jc.le);const n=new yg(t);return this.gr.forEachTarget(e,e=>n.Rr(e.sequenceNumber)).next(()=>this.gr.yr(e,e=>n.Rr(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ba("LruGarbageCollector","Garbage collection skipped; disabled"),Rc.resolve(Zp)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ba("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zp):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,i,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ba("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),Va()<=eo.DEBUG&&Ba("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${r} in `+(o-i)+`ms\n\tRemoved ${s} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(c-a)+`ms\nTotal Duration: ${c-l}ms`),Rc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function wg(e,t){return new bg(e,t)}class xg{constructor(e,t){this.db=e,this.garbageCollector=wg(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Sr(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,(e,n)=>t(n))}addReference(e,t,n){return Sg(e,n)}removeReference(e,t,n){return Sg(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Sg(e,t)}Dr(e,t){return function(e,t){let n=!1;return cg(e).ne(r=>ig(e,r,t).next(e=>(e&&(n=!0),Rc.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.br(e,(i,o)=>{if(o<=t){const t=this.Dr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,yc.min()),fg(e).delete([0,tl(i.path)])))});r.push(t)}}).next(()=>Rc.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Sg(e,t)}br(e,t){const n=fg(e);let r,s=Jc.le;return n.te({index:Dl},([e,n],{path:i,sequenceNumber:o})=>{0===e?(s!==Jc.le&&t(new Ec(sl(r)),s),s=o,r=i):s=Jc.le}).next(()=>{s!==Jc.le&&t(new Ec(sl(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sg(e,t){return fg(e).put((n=t,r=e.currentSequenceNumber,{targetId:0,path:tl(n.path),sequenceNumber:r}));var n,r}class Eg{constructor(){this.changes=new cd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Rc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _g{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return kg(e).put(n)}removeEntry(e,t,n){return kg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],sp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.vr(e,n)))}getEntry(e,t){let n=gh.newInvalidDocument(t);return kg(e).te({index:bl,range:IDBKeyRange.only(Ag(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}Fr(e,t){let n={size:0,document:gh.newInvalidDocument(t)};return kg(e).te({index:bl,range:IDBKeyRange.only(Ag(t))},(e,r)=>{n={document:this.Cr(t,r),size:rg(r)}}).next(()=>n)}getEntries(e,t){let n=ud();return this.Mr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Or(e,t){let n=ud(),r=new gu(Ec.comparator);return this.Mr(e,t,(e,t)=>{const s=this.Cr(e,t);n=n.insert(e,s),r=r.insert(e,rg(t))}).next(()=>({documents:n,Nr:r}))}Mr(e,t,n){if(t.isEmpty())return Rc.resolve();let r=new vu(Ng);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Ag(r.first()),Ag(r.last())),i=r.getIterator();let o=i.getNext();return kg(e).te({index:bl,range:s},(e,t,r)=>{const s=Ec.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ng(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.H(Ag(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,o=[i.popLast().toArray(),i.lastSegment(),sp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kg(e).J(IDBKeyRange.bound(o,a,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=ud();for(const s of e){const e=this.Cr(Ec.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(id(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=ud();const i=Dg(t,n),o=Dg(t,Dc.max());return kg(e).te({index:xl,range:IDBKeyRange.bound(i,o,!0)},(e,t,n)=>{const i=this.Cr(Ec.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Cg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Tg(e).get(_l).next(e=>(Ka(!!e,20021),e))}vr(e,t){return Tg(e).put(_l,t)}Cr(e,t){if(t){const e=np(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(yc.min()))return e}return gh.newInvalidDocument(e)}}function Ig(e){return new _g(e)}class Cg extends Eg{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new cd(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new vu((e,t)=>cc(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.Lr.get(s);if(t.push(this.Br.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=rp(this.Br.serializer,i);r=r.add(s.path.popLast());const c=rg(a);n+=c-o.size,t.push(this.Br.addEntry(e,s,a))}else if(n-=o.size,this.trackRemovals){const n=rp(this.Br.serializer,i.convertToNoDocument(yc.min()));t.push(this.Br.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Br.updateMetadata(e,n)),Rc.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(e=>(this.Lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:e,Nr:t})=>(t.forEach((t,n)=>{this.Lr.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function Tg(e){return hu(e,El)}function kg(e){return hu(e,yl)}function Ag(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Dg(e,t){const n=t.documentKey.path.toArray();return[e,sp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ng(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(s=cc(n[e],r[e]),s)return s;return s=cc(n.length,r.length),s||(s=cc(n[n.length-2],r[r.length-2]),s||cc(n[n.length-1],r[r.length-1]))}class Og{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pg{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&$d(n.mutation,e,xu.empty(),mc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,bd()).next(()=>t))}getLocalViewOfDocuments(e,t,n=bd()){const r=pd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=dd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=pd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,bd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=ud();const i=md(),o=md();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wd)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),$d(o.mutation,t,o.mutation.getFieldMask(),mc.now())):i.set(t.key,xu.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Og(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=md();let r=new gu((e,t)=>e-t),s=bd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||xu.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||bd()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=gd();c.forEach(e=>{if(!s.has(e)){const r=jd(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Rc.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return s=t,Ec.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Yh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var s}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Rc.resolve(pd());let o=-1,a=s;return i.next(t=>Rc.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Rc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,bd())).next(e=>({batchId:o,changes:fd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ec(t)).next(e=>{let t=dd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=dd();return this.indexManager.getCollectionParents(e,s).next(o=>Rc.forEach(o,o=>{const a=(c=t,l=o.child(s),new Hh(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gh.newInvalidDocument(r)))});let n=dd();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&$d(i.mutation,r,xu.empty(),mc.now()),id(t,r)&&(n=n.insert(e,r))}),n})}}class Mg{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return Rc.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,{id:(n=t).id,version:n.version,createTime:Af(n.createTime)}),Rc.resolve();var n}getNamedQuery(e,t){return Rc.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,{name:(n=t).name,query:up(n.bundledQuery),readTime:Af(n.readTime)}),Rc.resolve();var n}}class Rg{constructor(){this.overlays=new gu(Ec.comparator),this.Qr=new Map}getOverlay(e,t){return Rc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=pd();return Rc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),Rc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Qr.delete(n)),Rc.resolve()}getOverlaysForCollection(e,t,n){const r=pd(),s=t.length+1,i=new Ec(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Rc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new gu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=pd(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=pd(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Rc.resolve(o)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new tf(t,n));let s=this.Qr.get(t);void 0===s&&(s=bd(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}class Fg{constructor(){this.sessionToken=Eu.EMPTY_BYTE_STRING}getSessionToken(e){return Rc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Rc.resolve()}}class Lg{constructor(){this.$r=new vu(Ug.Ur),this.Kr=new vu(Ug.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Ug(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.zr(new Ug(e,t))}jr(e,t){e.forEach(e=>this.removeReference(e,t))}Hr(e){const t=new Ec(new wc([])),n=new Ug(t,e),r=new Ug(t,e+1),s=[];return this.Kr.forEachInRange([n,r],e=>{this.zr(e),s.push(e.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Ec(new wc([])),n=new Ug(t,e),r=new Ug(t,e+1);let s=bd();return this.Kr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Ug(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ug{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Ec.comparator(e.key,t.key)||cc(e.Zr,t.Zr)}static Wr(e,t){return cc(e.Zr,t.Zr)||Ec.comparator(e.key,t.key)}}class Vg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new vu(Ug.Ur)}checkEmpty(e){return Rc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Zd(s,t,n,r);this.mutationQueue.push(i);for(const t of r)this.Xr=this.Xr.add(new Ug(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Rc.resolve(i)}lookupMutationBatch(e,t){return Rc.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return Rc.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Rc.resolve(0===this.mutationQueue.length?-1:this.nr-1)}getAllMutationBatches(e){return Rc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ug(t,0),r=new Ug(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],e=>{const t=this.ei(e.Zr);s.push(t)}),Rc.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new vu(cc);return t.forEach(e=>{const t=new Ug(e,0),r=new Ug(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],e=>{n=n.add(e.Zr)})}),Rc.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ec.isDocumentKey(s)||(s=s.child(""));const i=new Ug(new Ec(s),0);let o=new vu(cc);return this.Xr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Zr)),!0)},i),Rc.resolve(this.ni(o))}ni(e){const t=[];return e.forEach(e=>{const n=this.ei(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ka(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return Rc.forEach(t.mutations,r=>{const s=new Ug(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){const n=new Ug(t,0),r=this.Xr.firstAfterOrEqual(n);return Rc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Rc.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Bg{constructor(e){this.ii=e,this.docs=new gu(Ec.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Rc.resolve(n?n.document.mutableCopy():gh.newInvalidDocument(t))}getEntries(e,t){let n=ud();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gh.newInvalidDocument(e))}),Rc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=ud();const i=t.path,o=new Ec(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Nc(Ac(o),n)<=0||(r.has(o.key)||id(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Rc.resolve(s)}getAllFromCollectionGroup(e,t,n,r){qa(9500)}si(e,t){return Rc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new jg(this)}getSize(e){return Rc.resolve(this.size)}}class jg extends Eg{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)}),Rc.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class zg{constructor(e){this.persistence=e,this.oi=new cd(e=>zh(e),$h),this.lastRemoteSnapshotVersion=yc.min(),this.highestTargetId=0,this._i=0,this.ai=new Lg,this.targetCount=0,this.ui=lg.cr()}forEachTarget(e,t){return this.oi.forEach((e,n)=>t(n)),Rc.resolve()}getLastRemoteSnapshotVersion(e){return Rc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rc.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Rc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),Rc.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new lg(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,Rc.resolve()}updateTargetData(e,t){return this.Tr(t),Rc.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,Rc.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.oi.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Rc.waitFor(s).next(()=>r)}getTargetCount(e){return Rc.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return Rc.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),Rc.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Rc.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),Rc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return Rc.resolve(n)}containsKey(e,t){return Rc.resolve(this.ai.containsKey(t))}}class $g{constructor(e,t){this.ci={},this.overlays={},this.li=new Jc(0),this.hi=!1,this.hi=!0,this.Pi=new Fg,this.referenceDelegate=e(this),this.Ti=new zg(this),this.indexManager=new $p,this.remoteDocumentCache=new Bg(e=>this.referenceDelegate.Ii(e)),this.serializer=new tp(t),this.Ei=new Mg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Vg(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){Ba("MemoryPersistence","Starting transaction:",e);const r=new qg(this.li.next());return this.referenceDelegate.di(),n(r).next(e=>this.referenceDelegate.Ai(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ri(e,t){return Rc.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class qg extends Pc{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.Vi=new Lg,this.mi=null}static fi(e){return new Gg(e)}get gi(){if(this.mi)return this.mi;throw qa(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),Rc.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),Rc.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),Rc.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(e=>this.gi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.gi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rc.forEach(this.gi,n=>{const r=Ec.fromPath(n);return this.pi(e,r).next(e=>{e||t.removeEntry(r,yc.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return Rc.or([()=>Rc.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Kg{constructor(e,t){this.persistence=e,this.yi=new cd(e=>tl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=wg(this,t)}static fi(e,t){return new Kg(e,t)}di(){}Ai(e){return Rc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Sr(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}yr(e,t){return Rc.forEach(this.yi,(n,r)=>this.Dr(e,n,r).next(e=>e?Rc.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,r=>this.Dr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,yc.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),Rc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Rc.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),Rc.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),Rc.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xu(e.data.value)),t}Dr(e,t,n){return Rc.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return Rc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Wg{constructor(e){this.serializer=e}q(e,t,n,r){const s=new Lc("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(ol),function(e){e.createObjectStore(cl,{keyPath:"userId"}),e.createObjectStore(ll,{keyPath:ul,autoIncrement:!0}).createIndex(hl,dl,{unique:!0}),e.createObjectStore(ml)}(e),Hg(e),function(e){e.createObjectStore(il)}(e));let i=Rc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(kl),e.deleteObjectStore(Il),e.deleteObjectStore(Pl)}(e),Hg(e)),i=i.next(()=>function(e){const t=e.store(Pl),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yc.min().toTimestamp(),targetCount:0};return t.put(Ol,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(ll).J().next(n=>{e.deleteObjectStore(ll),e.createObjectStore(ll,{keyPath:ul,autoIncrement:!0}).createIndex(hl,dl,{unique:!0});const r=t.store(ll),s=n.map(e=>r.put(e));return Rc.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(Fl,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.wi(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(El)}(e),this.Si(s)))),n<7&&r>=7&&(i=i.next(()=>this.bi(s))),n<8&&r>=8&&(i=i.next(()=>this.Di(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.Ci(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(Ll,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(Ul,{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore(Ql,{keyPath:Jl});t.createIndex(Yl,Xl,{unique:!1}),t.createIndex(Zl,eu,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore(yl,{keyPath:vl});t.createIndex(bl,wl),t.createIndex(xl,Sl)}(e)).next(()=>this.Fi(e,s)).next(()=>e.deleteObjectStore(il))),n<14&&r>=14&&(i=i.next(()=>this.Mi(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore(Vl,{keyPath:"indexId",autoIncrement:!0}).createIndex(Bl,"collectionGroup",{unique:!1}),e.createObjectStore(jl,{keyPath:zl}).createIndex($l,ql,{unique:!1}),e.createObjectStore(Gl,{keyPath:Kl}).createIndex(Wl,Hl,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore(jl).clear()}).next(()=>{t.objectStore(Gl).clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore(tu,{keyPath:"name"})}(e)})),n<18&&r>=18&&zi()&&(i=i.next(()=>{t.objectStore(jl).clear()}).next(()=>{t.objectStore(Gl).clear()})),i}Si(e){let t=0;return e.store(il).te((e,n)=>{t+=rg(n)}).next(()=>{const n={byteSize:t};return e.store(El).put(_l,n)})}wi(e){const t=e.store(cl),n=e.store(ll);return t.J().next(t=>Rc.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.J(hl,r).next(n=>Rc.forEach(n,n=>{Ka(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=ap(this.serializer,n);return ng(e,t.userId,r).next(()=>{})}))}))}bi(e){const t=e.store(kl),n=e.store(il);return e.store(Pl).get(Ol).next(e=>{const r=[];return n.te((n,s)=>{const i=new wc(n),o=[0,tl(i)];r.push(t.get(o).next(n=>{return n?Rc.resolve():(r=i,t.put({targetId:0,path:tl(r),sequenceNumber:e.highestListenSequenceNumber}));var r}))}).next(()=>Rc.waitFor(r))})}Di(e,t){e.createObjectStore(Ml,{keyPath:Rl});const n=t.store(Ml),r=new qp,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:tl(r)})}};return t.store(il).te({ee:!0},(e,t)=>{const n=new wc(e);return s(n.popLast())}).next(()=>t.store(ml).te({ee:!0},([e,t,n],r)=>{const i=sl(t);return s(i.popLast())}))}Ci(e){const t=e.store(Il);return t.te((e,n)=>{const r=cp(n),s=lp(this.serializer,r);return t.put(s)})}Fi(e,t){const n=t.store(il),r=[];return n.te((e,n)=>{const s=t.store(yl),i=(a=n,a.document?new Ec(wc.fromString(a.document.name).popFirst(5)):a.noDocument?Ec.fromSegments(a.noDocument.path):a.unknownDocument?Ec.fromSegments(a.unknownDocument.path):qa(36783)).path.toArray(),o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};var a;r.push(s.put(o))}).next(()=>Rc.waitFor(r))}Mi(e,t){const n=t.store(ll),r=Ig(this.serializer),s=new $g(Gg.fi,this.serializer.wt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:bd();ap(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Rc.forEach(n,(e,n)=>{const i=new Fa(n),o=yp.St(this.serializer,i),a=s.getIndexManager(i),c=sg.St(i,this.serializer,a,s.referenceDelegate);return new Pg(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new uu(t,Jc.le),e).next()})})}}function Hg(e){e.createObjectStore(kl,{keyPath:Al}).createIndex(Dl,Nl,{unique:!0}),e.createObjectStore(Il,{keyPath:"targetId"}).createIndex(Cl,Tl,{unique:!0}),e.createObjectStore(Pl)}const Qg="IndexedDbPersistence",Jg=18e5,Yg=5e3,Xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zg{constructor(e,t,n,r,s,i,o,a,c,l,u=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.xi=s,this.window=i,this.document=o,this.Oi=c,this.Ni=l,this.Bi=u,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=e=>Promise.resolve(),!Zg.C())throw new Qa(Ha.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xg(this,r),this.Ui=t+"main",this.serializer=new tp(a),this.Ki=new Uc(this.Ui,this.Bi,new Wg(this.serializer)),this.Pi=new bp,this.Ti=new ug(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ig(this.serializer),this.Ei=new pp,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,!1===l&&ja(Qg,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qa(Ha.FAILED_PRECONDITION,Xg);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Jc(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(e=>{e||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(zc(e))return Ba(Qg,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ba(Qg,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return em(e).get(al).next(e=>Rc.resolve(this.ts(e)))}ns(e){return tm(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Jg)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=hu(e,Fl);return t.J().next(e=>{const n=this._s(e,Jg),r=e.filter(e=>-1===n.indexOf(e));return Rc.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?Rc.resolve(!0):em(e).get(al).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,Yg)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Qa(Ha.FAILED_PRECONDITION,Xg);return!1}}return!(!this.networkEnabled||!this.inForeground)||tm(e).J().next(e=>void 0===this._s(e,Yg).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ba(Qg,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[ol,Fl],e=>{const t=new uu(e,Jc.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(e=>this.ss(e.updateTimeMs,t)&&!this.cs(e.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>tm(e).J().next(e=>this._s(e,Jg).map(e=>e.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return sg.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wp(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return yp.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,n){Ba(Qg,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=18===(i=this.Bi)?lu:17===i?cu:16===i?au:15===i?ou:14===i?iu:13===i?su:12===i?ru:11===i?nu:void qa(60245);var i;let o;return this.Ki.runTransaction(e,r,s,r=>(o=new uu(r,this.li?this.li.next():Jc.le),"readwrite-primary"===t?this.Yi(o).next(e=>!!e||this.Zi(o)).next(t=>{if(!t)throw ja(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new Qa(Ha.FAILED_PRECONDITION,Oc);return n(o)}).next(e=>this.es(o).next(()=>e)):this.Es(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Es(e){return em(e).get(al).next(e=>{if(null!==e&&this.ss(e.leaseTimestampMs,Yg)&&!this.cs(e.ownerId)&&!this.ts(e)&&!(this.Ni||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Qa(Ha.FAILED_PRECONDITION,Xg)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return em(e).put(al,t)}static C(){return Uc.C()}Xi(e){const t=em(e);return t.get(al).next(e=>this.ts(e)?(Ba(Qg,"Releasing primary lease."),t.delete(al)):Rc.resolve())}ss(e,t){const n=Date.now();return!(e<n-t||e>n&&(ja(`Detected an update time that is in the future: ${e} > ${n}`),1))}zi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground="visible"===this.document.visibilityState)}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Li=()=>{this.ls();const e=/(?:Version|Mobile)\/1[456]/;ji()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const n=null!==(null===(t=this.Wi)||void 0===t?void 0:t.getItem(this.us(e)));return Ba(Qg,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return ja(Qg,"Failed to get zombied client id.",e),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){ja("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch(e){}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function em(e){return hu(e,ol)}function tm(e){return hu(e,Fl)}class nm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=bd(),r=bd();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new nm(e,t.fromCache,n,r)}}class rm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sm{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=ji()?8:Vc(Vi())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Ss(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new rm;return this.bs(e,t,n).next(r=>{if(s.result=r,this.fs)return this.Ds(e,t,n,r.size)})}).next(()=>s.result)}Ds(e,t,n,r){return n.documentReadCount<this.gs?(Va()<=eo.DEBUG&&Ba("QueryEngine","SDK will not create cache indexes for query:",sd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Rc.resolve()):(Va()<=eo.DEBUG&&Ba("QueryEngine","Query:",sd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(Va()<=eo.DEBUG&&Ba("QueryEngine","The SDK decides to create cache indexes for query:",sd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zh(t))):Rc.resolve())}ws(e,t){if(Jh(t))return Rc.resolve(null);let n=Zh(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=td(t,null,"F"),n=Zh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=bd(...r);return this.ys.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.vs(t,r);return this.Cs(t,i,s,n.readTime)?this.ws(e,td(t,null,"F")):this.Fs(e,i,t,n)}))})))}Ss(e,t,n,r){return Jh(t)||r.isEqual(yc.min())?Rc.resolve(null):this.ys.getDocuments(e,n).next(s=>{const i=this.vs(t,s);return this.Cs(t,i,n,r)?Rc.resolve(null):(Va()<=eo.DEBUG&&Ba("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sd(t)),this.Fs(e,i,t,function(e){const t=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=yc.fromTimestamp(1e9===n?new mc(t+1,0):new mc(t,n));return new Dc(r,Ec.empty(),-1)}(r)).next(e=>e))})}vs(e,t){let n=new vu(od(e));return t.forEach((t,r)=>{id(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}bs(e,t,n){return Va()<=eo.DEBUG&&Ba("QueryEngine","Using full collection scan to execute query:",sd(t)),this.ys.getDocumentsMatchingQuery(e,t,Dc.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const im="LocalStore";class om{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new gu(cc),this.Os=new cd(e=>zh(e),$h),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pg(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function am(e,t,n,r){return new om(e,t,n,r)}async function cm(e,t){const n=Wa(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=bd();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({ks:e,removedBatchIds:s,addedBatchIds:i}))})})}function lm(e){const t=Wa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function um(e,t){const n=Wa(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const o=[];t.targetChanges.forEach((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.Ti.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Ti.addMatchingKeys(e,i.addedDocuments,a)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Eu.EMPTY_BYTE_STRING,yc.min()).withLastLimboFreeSnapshotVersion(yc.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,i)&&o.push(n.Ti.updateTargetData(e,l))});let a=ud(),c=bd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=bd(),s=bd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ud();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(yc.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Ba(im,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{qs:r,Qs:s}})}(e,i,t.documentUpdates).next(e=>{a=e.qs,c=e.Qs})),!r.isEqual(yc.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next(t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Rc.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.xs=s,e))}function hm(e,t){const n=Wa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function dm(e,t,n){const r=Wa(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!zc(e))throw e;Ba(im,`Failed to update sequence numbers for target ${t}: ${e}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function fm(e,t,n){const r=Wa(e);let s=yc.min(),i=bd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Wa(e),s=r.Os.get(n);return void 0!==s?Rc.resolve(r.xs.get(s)):r.Ti.getTargetData(t,n)}(r,e,Zh(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Ms.getDocumentsMatchingQuery(e,t,n?s:yc.min(),n?i:bd())).next(e=>(function(e,t,n){let r=e.Ns.get(t)||yc.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ns.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,$s:i})))}class pm{constructor(){this.activeTargetIds=wd}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gm{constructor(){this.xo=new pm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new pm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mm{No(e){}shutdown(){}}const ym="ConnectivityMonitor";class vm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ba(ym,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ba(ym,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bm=null;function wm(){return null===bm?bm=268435456+Math.round(2147483648*Math.random()):bm++,"0x"+bm.toString(16)}const xm="RestConnection",Sm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Em{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${n}/databases/${r}`,this.Go=this.databaseId.database===Fu?`project_id=${n}`:`project_id=${n}&database_id=${r}`}zo(e,t,n,r,s){const i=wm(),o=this.jo(e,t.toUriEncodedString());Ba(xm,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(a,r,s);const{host:c}=new URL(o),l=Mi(c);return this.Jo(e,o,a,n,l).then(t=>(Ba(xm,`Received RPC '${e}' ${i}: `,t),t),t=>{throw za(xm,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Yo(e,t,n,r,s,i){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+La,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}jo(e,t){const n=Sm[e];return`${this.Ko}/v1/${t}:${n}`}terminate(){}}class _m{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Im="WebChannelConnection";class Cm extends Em{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=wm();return new Promise((s,o)=>{const a=new Ia;a.setWithCredentials(!0),a.listenOnce(Ta.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ka.NO_ERROR:const t=a.getResponseJson();Ba(Im,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ka.TIMEOUT:Ba(Im,`RPC '${e}' ${i} timed out`),o(new Qa(Ha.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const n=a.getStatus();if(Ba(Im,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ha).indexOf(t)>=0?t:Ha.UNKNOWN}(t.status);o(new Qa(e,t.message))}else o(new Qa(Ha.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Qa(Ha.UNAVAILABLE,"Connection failed."));break;default:qa(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Ba(Im,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(r);Ba(Im,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)})}T_(e,t,n){const r=wm(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Oa(),o=Na(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Ho(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");Ba(Im,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=i.createWebChannel(l,a);let h=!1,d=!1;const f=new _m({Zo:t=>{d?Ba(Im,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Ba(Im,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Ba(Im,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ca.EventType.OPEN,()=>{d||(Ba(Im,`RPC '${e}' stream ${r} transport opened.`),f.__())}),p(u,Ca.EventType.CLOSE,()=>{d||(d=!0,Ba(Im,`RPC '${e}' stream ${r} transport closed`),f.u_())}),p(u,Ca.EventType.ERROR,t=>{d||(d=!0,za(Im,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.u_(new Qa(Ha.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ca.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];Ka(!!s,16349);const i=s,o=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Ba(Im,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=rf[e];if(void 0!==t)return of(t)}(t),s=o.message;void 0===n&&(n=Ha.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,f.u_(new Qa(n,s)),u.close()}else Ba(Im,`RPC '${e}' stream ${r} received:`,s),f.c_(s)}}),p(o,Da.STAT_EVENT,t=>{t.stat===Aa.PROXY?Ba(Im,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Aa.NOPROXY&&Ba(Im,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.a_()},0),f}}function Tm(){return"undefined"!=typeof document?document:null}function km(e){return new _f(e,!0)}class Am{constructor(e,t,n=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=t,this.I_=n,this.E_=r,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),n=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-n);r>0&&Ba("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){null!==this.R_&&(this.R_.skipDelay(),this.R_=null)}cancel(){null!==this.R_&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}const Dm="PersistentStream";class Nm{constructor(e,t,n,r,s,i,o,a){this.xi=e,this.y_=n,this.w_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Am(e,t)}F_(){return 1===this.state||5===this.state||this.M_()}M_(){return 2===this.state||3===this.state}start(){this.v_=0,4!==this.state?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&null===this.b_&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,4!==e?this.C_.reset():t&&t.code===Ha.RESOURCE_EXHAUSTED?(ja(t.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===Ha.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.S_===t&&this.K_(e,n)},t=>{e(()=>{const e=new Qa(Ha.UNKNOWN,"Fetching auth token failed: "+t.message);return this.W_(e)})})}K_(e,t){const n=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(e=>{n(()=>this.W_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.v_?this.z_(e):this.onNext(e))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Ba(Dm,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Ba(Dm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Om extends Nm{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:qa(39313,{state:r}),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ka(void 0===t||"string"==typeof t,58123),Eu.fromBase64String(t||"")):(Ka(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Eu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(e){const t=void 0===e.code?Ha.UNKNOWN:of(e.code);return new Qa(t,e.message||"")}(a);n=new mf(s,i,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mf(e,r.document.name),i=Af(r.document.updateTime),o=r.document.createTime?Af(r.document.createTime):yc.min(),a=new fh({mapValue:{fields:r.document.fields}}),c=gh.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new pf(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Mf(e,r.document),i=r.readTime?Af(r.readTime):yc.min(),o=gh.newNoDocument(s,i),a=r.removedTargetIds||[];n=new pf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Mf(e,r.document),i=r.removedTargetIds||[];n=new pf([],i,s,null)}else{if(!("filter"in t))return qa(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new nf(r,s),o=e.targetId;n=new gf(o,i)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return yc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?yc.min():t.readTime?Af(t.readTime):yc.min()}(e);return this.listener.j_(t,n)}H_(e){const t={};t.database=Lf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qh(r)?{documents:zf(e,r)}:{query:$f(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Tf(e,t.resumeToken);const r=If(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(yc.min())>0){n.readTime=Cf(e,t.snapshotVersion.toTimestamp());const r=If(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qa(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.L_(t)}J_(e){const t={};t.database=Lf(this.serializer),t.removeTarget=e,this.L_(t)}}class Pm extends Nm{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return Ka(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ka(!e.writeResults||0===e.writeResults.length,55816),this.listener.X_()}onNext(e){Ka(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=function(e,t){return e&&e.length>0?(Ka(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Af(e.updateTime):Af(t);return n.isEqual(yc.min())&&(n=Af(t)),new Ld(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Af(e.commitTime);return this.listener.ea(n,t)}ta(){const e={};e.database=Lf(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Bf(this.serializer,e))};this.L_(t)}}class Mm{}class Rm extends Mm{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.na=!1}ra(){if(this.na)throw new Qa(Ha.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.zo(e,Nf(t,n),r,s,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qa(Ha.UNKNOWN,e.toString())})}Yo(e,t,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Yo(e,Nf(t,n),r,i,o,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ha.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qa(Ha.UNKNOWN,e.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class Fm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){0===this.ia&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){"Online"===this.state?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,"Online"===e&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ja(t),this.oa=!1):Ba("OnlineStateTracker",t)}la(){null!==this.sa&&(this.sa.cancel(),this.sa=null)}}const Lm="RemoteStore";class Um{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(e=>{n.enqueueAndForget(async()=>{Wm(this)&&(Ba(Lm,"Restarting streams for network reachability change."),await async function(e){const t=Wa(e);t.Ta.add(4),await Bm(t),t.da.set("Unknown"),t.Ta.delete(4),await Vm(t)}(this))})}),this.da=new Fm(n,r)}}async function Vm(e){if(Wm(e))for(const t of e.Ia)await t(!0)}async function Bm(e){for(const t of e.Ia)await t(!1)}function jm(e,t){const n=Wa(e);n.Pa.has(t.targetId)||(n.Pa.set(t.targetId,t),Km(n)?Gm(n):hy(n).M_()&&$m(n,t))}function zm(e,t){const n=Wa(e),r=hy(n);n.Pa.delete(t),r.M_()&&qm(n,t),0===n.Pa.size&&(r.M_()?r.N_():Wm(n)&&n.da.set("Unknown"))}function $m(e,t){if(e.Aa.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hy(e).H_(t)}function qm(e,t){e.Aa.Ke(t),hy(e).J_(t)}function Gm(e){e.Aa=new vf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Pa.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),hy(e).start(),e.da._a()}function Km(e){return Wm(e)&&!hy(e).F_()&&e.Pa.size>0}function Wm(e){return 0===Wa(e).Ta.size}function Hm(e){e.Aa=void 0}async function Qm(e){e.da.set("Online")}async function Jm(e){e.Pa.forEach((t,n)=>{$m(e,t)})}async function Ym(e,t){Hm(e),Km(e)?(e.da.ca(t),Gm(e)):e.da.set("Unknown")}async function Xm(e,t,n){if(e.da.set("Online"),t instanceof mf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Pa.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Pa.delete(r),e.Aa.removeTarget(r))}(e,t)}catch(n){Ba(Lm,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Zm(e,n)}else if(t instanceof pf?e.Aa.Xe(t):t instanceof gf?e.Aa.ot(t):e.Aa.nt(t),!n.isEqual(yc.min()))try{const t=await lm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Aa.It(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Pa.get(r);s&&e.Pa.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Pa.get(t);if(!r)return;e.Pa.set(t,r.withResumeToken(Eu.EMPTY_BYTE_STRING,r.snapshotVersion)),qm(e,t);const s=new ep(r.target,t,n,r.sequenceNumber);$m(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ba(Lm,"Failed to raise snapshot:",t),await Zm(e,t)}}async function Zm(e,t,n){if(!zc(t))throw t;e.Ta.add(1),await Bm(e),e.da.set("Offline"),n||(n=()=>lm(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ba(Lm,"Retrying IndexedDB access"),await n(),e.Ta.delete(1),await Vm(e)})}function ey(e,t){return t().catch(n=>Zm(e,n,t))}async function ty(e){const t=Wa(e),n=dy(t);let r=t.ha.length>0?t.ha[t.ha.length-1].batchId:-1;for(;ny(t);)try{const e=await hm(t.localStore,r);if(null===e){0===t.ha.length&&n.N_();break}r=e.batchId,ry(t,e)}catch(e){await Zm(t,e)}sy(t)&&iy(t)}function ny(e){return Wm(e)&&e.ha.length<10}function ry(e,t){e.ha.push(t);const n=dy(e);n.M_()&&n.Y_&&n.Z_(t.mutations)}function sy(e){return Wm(e)&&!dy(e).F_()&&e.ha.length>0}function iy(e){dy(e).start()}async function oy(e){dy(e).ta()}async function ay(e){const t=dy(e);for(const n of e.ha)t.Z_(n.mutations)}async function cy(e,t,n){const r=e.ha.shift(),s=ef.from(r,t,n);await ey(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ty(e)}async function ly(e,t){t&&dy(e).Y_&&await async function(e,t){if(function(e){switch(e){case Ha.OK:return qa(64938);case Ha.CANCELLED:case Ha.UNKNOWN:case Ha.DEADLINE_EXCEEDED:case Ha.RESOURCE_EXHAUSTED:case Ha.INTERNAL:case Ha.UNAVAILABLE:case Ha.UNAUTHENTICATED:return!1;case Ha.INVALID_ARGUMENT:case Ha.NOT_FOUND:case Ha.ALREADY_EXISTS:case Ha.PERMISSION_DENIED:case Ha.FAILED_PRECONDITION:case Ha.ABORTED:case Ha.OUT_OF_RANGE:case Ha.UNIMPLEMENTED:case Ha.DATA_LOSS:return!0;default:return qa(15467,{code:e})}}(n=t.code)&&n!==Ha.ABORTED){const n=e.ha.shift();dy(e).O_(),await ey(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ty(e)}var n}(e,t),sy(e)&&iy(e)}async function uy(e,t){const n=Wa(e);n.asyncQueue.verifyOperationInProgress(),Ba(Lm,"RemoteStore received new credentials");const r=Wm(n);n.Ta.add(3),await Bm(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ta.delete(3),await Vm(n)}function hy(e){return e.Ra||(e.Ra=function(e,t,n){const r=Wa(e);return r.ra(),new Om(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:Qm.bind(null,e),n_:Jm.bind(null,e),i_:Ym.bind(null,e),j_:Xm.bind(null,e)}),e.Ia.push(async t=>{t?(e.Ra.O_(),Km(e)?Gm(e):e.da.set("Unknown")):(await e.Ra.stop(),Hm(e))})),e.Ra}function dy(e){return e.Va||(e.Va=function(e,t,n){const r=Wa(e);return r.ra(),new Pm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:oy.bind(null,e),i_:ly.bind(null,e),X_:ay.bind(null,e),ea:cy.bind(null,e)}),e.Ia.push(async t=>{t?(e.Va.O_(),await ty(e)):(await e.Va.stop(),e.ha.length>0&&(Ba(Lm,`Stopping write stream with ${e.ha.length} pending writes`),e.ha=[]))})),e.Va}class fy{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new fy(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qa(Ha.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(e,t){if(ja("AsyncQueue",`${t}: ${e}`),zc(e))return new Qa(Ha.UNAVAILABLE,`${t}: ${e}`);throw e}class gy{static emptySet(e){return new gy(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ec.comparator(t.key,n.key):(e,t)=>Ec.comparator(e.key,t.key),this.keyedMap=dd(),this.sortedSet=new gu(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class my{constructor(){this.ma=new gu(Ec.comparator)}track(e){const t=e.doc.key,n=this.ma.get(t);n?0!==e.type&&3===n.type?this.ma=this.ma.insert(t,e):3===e.type&&1!==n.type?this.ma=this.ma.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ma=this.ma.remove(t):1===e.type&&2===n.type?this.ma=this.ma.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):qa(63341,{Vt:e,fa:n}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,n)=>{e.push(n)}),e}}class yy{constructor(e,t,n,r,s,i,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new yy(e,t,gy.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class vy{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class by{constructor(){this.queries=wy(),this.onlineState="Unknown",this.ba=new Set}terminate(){!function(e,t){const n=Wa(e),r=n.queries;n.queries=wy(),r.forEach((e,n)=>{for(const e of n.ya)e.onError(t)})}(this,new Qa(Ha.ABORTED,"Firestore shutting down"))}}function wy(){return new cd(e=>rd(e),nd)}async function xy(e,t){const n=Wa(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.wa()&&t.Sa()&&(r=2):(i=new vy,r=t.Sa()?0:1);try{switch(r){case 0:i.pa=await n.onListen(s,!0);break;case 1:i.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=py(e,`Initialization of query '${sd(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.ya.push(t),t.Da(n.onlineState),i.pa&&t.va(i.pa)&&Iy(n)}async function Sy(e,t){const n=Wa(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.ya.indexOf(t);e>=0&&(i.ya.splice(e,1),0===i.ya.length?s=t.Sa()?0:1:!i.wa()&&t.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ey(e,t){const n=Wa(e);let r=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.ya)t.va(e)&&(r=!0);s.pa=e}}r&&Iy(n)}function _y(e,t,n){const r=Wa(e),s=r.queries.get(t);if(s)for(const e of s.ya)e.onError(n);r.queries.delete(t)}function Iy(e){e.ba.forEach(e=>{e.next()})}var Cy,Ty;(Ty=Cy||(Cy={})).Ca="default",Ty.Cache="cache";class ky{constructor(e,t,n){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=n||{}}va(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache)return!0;if(!this.Sa())return!0;const n="Offline"!==t;return(!this.options.La||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ba(e){e=yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Cy.Cache}}class Ay{constructor(e){this.key=e}}class Dy{constructor(e){this.key=e}}class Ny{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=bd(),this.mutatedKeys=bd(),this.Ha=od(e),this.Ja=new gy(this.Ha)}get Ya(){return this.Ga}Za(e,t){const n=t?t.Xa:new my,r=t?t.Ja:this.Ja;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=id(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.eu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ha(u,a)>0||c&&this.Ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ja:i,Xa:n,Cs:o,mutatedKeys:s}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const i=e.Xa.ga();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qa(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ha(e.doc,t.doc)),this.tu(n),r=null!=r&&r;const o=t&&!r?this.nu():[],a=0===this.ja.size&&this.current&&!r?1:0,c=a!==this.za;return this.za=a,0!==i.length||c?{snapshot:new yy(this.query,e.Ja,s,i,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),ru:o}:{ru:o}}Da(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new my,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(e=>this.Ga=this.Ga.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ga=this.Ga.delete(e)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=bd(),this.Ja.forEach(e=>{this.iu(e.key)&&(this.ja=this.ja.add(e.key))});const t=[];return e.forEach(e=>{this.ja.has(e)||t.push(new Dy(e))}),this.ja.forEach(n=>{e.has(n)||t.push(new Ay(n))}),t}su(e){this.Ga=e.$s,this.ja=bd();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return yy.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,0===this.za,this.hasCachedResults)}}const Oy="SyncEngine";class Py{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class My{constructor(e){this.key=e,this._u=!1}}class Ry{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.au={},this.uu=new cd(e=>rd(e),nd),this.cu=new Map,this.lu=new Set,this.hu=new gu(Ec.comparator),this.Pu=new Map,this.Tu=new Lg,this.Iu={},this.Eu=new Map,this.du=lg.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return!0===this.Au}}async function Fy(e,t,n=!0){const r=nv(e);let s;const i=r.uu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await Uy(r,t,n,!0),s}async function Ly(e,t){const n=nv(e);await Uy(n,t,!0,!1)}async function Uy(e,t,n,r){const s=await function(e,t){const n=Wa(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ti.getTargetData(e,t).next(s=>s?(r=s,Rc.resolve(r)):n.Ti.allocateTargetId(e).next(s=>(r=new ep(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e})}(e.localStore,Zh(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await async function(e,t,n,r,s){e.Ru=(t,n,r)=>async function(e,t,n,r){let s=t.view.Za(n);s.Cs&&(s=await fm(e.localStore,t.query,!1).then(({documents:e})=>t.view.Za(e,s)));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return Jy(e,t.targetId,a.ru),a.snapshot}(e,t,n,r);const i=await fm(e.localStore,t,!0),o=new Ny(t,i.$s),a=o.Za(i.documents),c=ff.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);Jy(e,n,l.ru);const u=new Py(t,n,o);return e.uu.set(t,u),e.cu.has(n)?e.cu.get(n).push(t):e.cu.set(n,[t]),l.snapshot}(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&jm(e.remoteStore,s),a}async function Vy(e,t,n){const r=Wa(e),s=r.uu.get(t),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(e=>!nd(e,t))),void r.uu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zm(r.remoteStore,s.targetId),Hy(r,s.targetId)}).catch(Mc)):(Hy(r,s.targetId),await dm(r.localStore,s.targetId,!0))}async function By(e,t){const n=Wa(e),r=n.uu.get(t),s=n.cu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zm(n.remoteStore,r.targetId))}async function jy(e,t){const n=Wa(e);try{const e=await um(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Pu.get(t);r&&(Ka(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r._u=!0:e.modifiedDocuments.size>0?Ka(r._u,14607):e.removedDocuments.size>0&&(Ka(r._u,42227),r._u=!1))}),await Zy(n,e,t)}catch(e){await Mc(e)}}function zy(e,t,n){const r=Wa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.uu.forEach((n,r)=>{const s=r.view.Da(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Wa(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.ya)e.Da(t)&&(r=!0)}),r&&Iy(n)}(r.eventManager,t),e.length&&r.au.j_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $y(e,t,n){const r=Wa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Pu.get(t),i=s&&s.key;if(i){let e=new gu(Ec.comparator);e=e.insert(i,gh.newNoDocument(i,yc.min()));const n=bd().add(i),s=new df(yc.min(),new Map,new gu(cc),e,n);await jy(r,s),r.hu=r.hu.remove(i),r.Pu.delete(t),Xy(r)}else await dm(r.localStore,t,!1).then(()=>Hy(r,t,n)).catch(Mc)}async function qy(e,t){const n=Wa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Wa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Rc.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ka(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=bd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Wy(n,r,null),Ky(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zy(n,e)}catch(e){await Mc(e)}}async function Gy(e,t,n){const r=Wa(e);try{const e=await function(e,t){const n=Wa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ka(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Wy(r,t,n),Ky(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Zy(r,e)}catch(e){await Mc(e)}}function Ky(e,t){(e.Eu.get(t)||[]).forEach(e=>{e.resolve()}),e.Eu.delete(t)}function Wy(e,t,n){const r=Wa(e);let s=r.Iu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Iu[r.currentUser.toKey()]=s}}function Hy(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.cu.get(t))e.uu.delete(r),n&&e.au.Vu(r,n);e.cu.delete(t),e.isPrimaryClient&&e.Tu.Hr(t).forEach(t=>{e.Tu.containsKey(t)||Qy(e,t)})}function Qy(e,t){e.lu.delete(t.path.canonicalString());const n=e.hu.get(t);null!==n&&(zm(e.remoteStore,n),e.hu=e.hu.remove(t),e.Pu.delete(n),Xy(e))}function Jy(e,t,n){for(const r of n)r instanceof Ay?(e.Tu.addReference(r.key,t),Yy(e,r)):r instanceof Dy?(Ba(Oy,"Document no longer in limbo: "+r.key),e.Tu.removeReference(r.key,t),e.Tu.containsKey(r.key)||Qy(e,r.key)):qa(19791,{mu:r})}function Yy(e,t){const n=t.key,r=n.path.canonicalString();e.hu.get(n)||e.lu.has(r)||(Ba(Oy,"New document in limbo: "+n),e.lu.add(r),Xy(e))}function Xy(e){for(;e.lu.size>0&&e.hu.size<e.maxConcurrentLimboResolutions;){const t=e.lu.values().next().value;e.lu.delete(t);const n=new Ec(wc.fromString(t)),r=e.du.next();e.Pu.set(r,new My(n)),e.hu=e.hu.insert(n,r),jm(e.remoteStore,new ep(Zh(Qh(n.path)),r,"TargetPurposeLimboResolution",Jc.le))}}async function Zy(e,t,n){const r=Wa(e),s=[],i=[],o=[];r.uu.isEmpty()||(r.uu.forEach((e,a)=>{o.push(r.Ru(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=nm.Rs(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.au.j_(s),await async function(e,t){const n=Wa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Rc.forEach(t,t=>Rc.forEach(t.ds,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Rc.forEach(t.As,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!zc(e))throw e;Ba(im,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.xs.get(t),r=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(t,s)}}}(r.localStore,i))}async function ev(e,t){const n=Wa(e);if(!n.currentUser.isEqual(t)){Ba(Oy,"User change. New user:",t.toKey());const e=await cm(n.localStore,t);n.currentUser=t,(r=n).Eu.forEach(e=>{e.forEach(e=>{e.reject(new Qa(Ha.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Eu.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Zy(n,e.ks)}var r}function tv(e,t){const n=Wa(e),r=n.Pu.get(t);if(r&&r._u)return bd().add(r.key);{let e=bd();const r=n.cu.get(t);if(!r)return e;for(const t of r){const r=n.uu.get(t);e=e.unionWith(r.view.Ya)}return e}}function nv(e){const t=Wa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$y.bind(null,t),t.au.j_=Ey.bind(null,t.eventManager),t.au.Vu=_y.bind(null,t.eventManager),t}function rv(e){const t=Wa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gy.bind(null,t),t}class sv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=km(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return am(this.persistence,new sm,e.initialUser,this.serializer)}yu(e){return new $g(Gg.fi,this.serializer)}pu(e){return new gm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sv.provider={build:()=>new sv};class iv extends sv{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){Ka(this.persistence.referenceDelegate instanceof Kg,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new vg(n,e.asyncQueue,t)}yu(e){const t=void 0!==this.cacheSizeBytes?tg.withCacheSize(this.cacheSizeBytes):tg.DEFAULT;return new $g(e=>Kg.fi(e,t),this.serializer)}}class ov extends sv{constructor(e,t,n){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await rv(this.Du.syncEngine),await ty(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(e){return am(this.persistence,new sm,e.initialUser,this.serializer)}Su(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new vg(n,e.asyncQueue,t)}bu(e,t){const n=new Qc(t,this.persistence);return new Hc(e.asyncQueue,n)}yu(e){const t=function(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tg.withCacheSize(this.cacheSizeBytes):tg.DEFAULT;return new Zg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,"undefined"!=typeof window?window:null,Tm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new gm}}class av{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ev.bind(null,this.syncEngine),await async function(e,t){const n=Wa(e);t?(n.Ta.delete(2),await Vm(n)):t||(n.Ta.add(2),await Bm(n),n.da.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new by}createDatastore(e){const t=km(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Cm(r));var r;return function(e,t,n,r){return new Rm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>zy(this.syncEngine,e,0),i=vm.C()?new vm:new mm,new Um(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new Ry(e,t,n,r,s,i);return o&&(a.Au=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Wa(e);Ba(Lm,"RemoteStore shutting down."),t.Ta.add(5),await Bm(t),t.Ea.shutdown(),t.da.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}av.provider={build:()=>new av};class cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const lv="FirestoreClient";class uv{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Fa.UNAUTHENTICATED,this.clientId=ac.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Ba(lv,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ba(lv,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=py(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hv(e,t){e.asyncQueue.verifyOperationInProgress(),Ba(lv,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await cm(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fv(e);Ba(lv,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>uy(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>uy(t.remoteStore,n)),e._onlineComponents=t}async function fv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ba(lv,"Using user provided OfflineComponentProvider");try{await hv(e,e._uninitializedComponentsProvider._offline)}catch(n){const r=n;if(!("FirebaseError"===(t=r).name?t.code===Ha.FAILED_PRECONDITION||t.code===Ha.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw r;za("Error using user provided cache. Falling back to memory cache: "+r),await hv(e,new sv)}}else Ba(lv,"Using default OfflineComponentProvider"),await hv(e,new iv(void 0));var t;return e._offlineComponents}async function pv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ba(lv,"Using user provided OnlineComponentProvider"),await dv(e,e._uninitializedComponentsProvider._online)):(Ba(lv,"Using default OnlineComponentProvider"),await dv(e,new av))),e._onlineComponents}function gv(e){return fv(e).then(e=>e.persistence)}function mv(e){return pv(e).then(e=>e.remoteStore)}async function yv(e){const t=await pv(e),n=t.eventManager;return n.onListen=Fy.bind(null,t.syncEngine),n.onUnlisten=Vy.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ly.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=By.bind(null,t.syncEngine),n}function vv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bv=new Map;function wv(e,t,n){if(!n)throw new Qa(Ha.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xv(e,t,n,r){if(!0===t&&!0===r)throw new Qa(Ha.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Sv(e){if(!Ec.isDocumentKey(e))throw new Qa(Ha.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ev(e){if(Ec.isDocumentKey(e))throw new Qa(Ha.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function _v(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":qa(12329,{type:typeof e})}function Iv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qa(Ha.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_v(e);throw new Qa(Ha.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const Cv="firestore.googleapis.com",Tv=!0;class kv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Qa(Ha.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cv,this.ssl=Tv}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Tv;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=eg;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<gg)throw new Qa(Ha.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Qa(Ha.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Qa(Ha.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Qa(Ha.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Av{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qa(Ha.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qa(Ha.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xa;switch(e.type){case"firstParty":return new nc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qa(Ha.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Ui("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bv.get(e);t&&(Ba("ComponentProvider","Removing Datastore"),bv.delete(e),t.terminate())}(this),Promise.resolve()}}function Dv(e,t,n,r={}){var s;e=Iv(e,Av);const i=Mi(t),o=e._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;o.host!==Cv&&o.host!==c&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Wi(l,a)&&(e._setSettings(l),i&&(Ri(`https://${c}`),Ui("Firestore",!0)),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Fa.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ti(JSON.stringify({alg:"none",type:"JWT"})),Ti(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Qa(Ha.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Fa(i)}e._authCredentials=new Za(new Ya(t,n))}}class Nv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Nv(this.firestore,e,this._query)}}class Ov{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ov(this.firestore,e,this._key)}}class Pv extends Nv{constructor(e,t,n){super(e,t,Qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ov(this.firestore,null,new Ec(e))}withConverter(e){return new Pv(this.firestore,e,this._path)}}function Mv(e,t,...n){if(e=Qi(e),wv("collection","path",t),e instanceof Av){const r=wc.fromString(t,...n);return Ev(r),new Pv(e,null,r)}{if(!(e instanceof Ov||e instanceof Pv))throw new Qa(Ha.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wc.fromString(t,...n));return Ev(r),new Pv(e.firestore,null,r)}}function Rv(e,t,...n){if(e=Qi(e),1===arguments.length&&(t=ac.newId()),wv("doc","path",t),e instanceof Av){const r=wc.fromString(t,...n);return Sv(r),new Ov(e,null,new Ec(r))}{if(!(e instanceof Ov||e instanceof Pv))throw new Qa(Ha.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(wc.fromString(t,...n));return Sv(r),new Ov(e.firestore,e instanceof Pv?e.converter:null,new Ec(r))}}const Fv="AsyncQueue";class Lv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Am(this,"async_queue_retry"),this.ec=()=>{const e=Tm();e&&Ba(Fv,"Visibility state changed to "+e.visibilityState),this.C_.p_()},this.tc=e;const t=Tm();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Tm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ja;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(0!==this.zu.length){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!zc(e))throw e;Ba(Fv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(e=>{throw this.Ju=e,this.Yu=!1,ja("INTERNAL UNHANDLED ERROR: ",Uv(e)),e}).then(e=>(this.Yu=!1,e))));return this.tc=t,t}enqueueAfterDelay(e,t,n){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=fy.createAndSchedule(this,e,t,n,e=>this.oc(e));return this.Hu.push(r),r}nc(){this.Ju&&qa(47125,{_c:Uv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do{e=this.tc,await e}while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Uv(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Vv(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(e)}class Bv extends Av{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lv(e),this._firestoreClient=void 0,await e}}}function jv(e,t,n){n||(n=Fu);const r=aa(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Wi(r.getOptions(n),t))return e;throw new Qa(Ha.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Qa(Ha.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<gg)throw new Qa(Ha.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&Mi(t.host)&&Ri(t.host),r.initialize({options:t,instanceIdentifier:n})}function zv(e,t){const n=function(e=ea){const t=na.get(e);if(!t&&e===ea&&Oi())return ua();if(!t)throw ca.create("no-app",{appName:e});return t}(),r=Fu,s=aa(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=Ni("firestore");e&&Dv(s,...e)}return s}function $v(e){if(e._terminated)throw new Qa(Ha.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const s=e._freezeSettings(),i=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",c=e._persistenceKey,new Ru(o,a,c,(l=s).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,vv(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator));var o,a,c,l;e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new uv(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}function qv(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await gv(e),n=await mv(e);return t.setNetworkEnabled(!0),function(e){const t=Wa(e);return t.Ta.delete(0),Vm(t)}(n)})}($v(e=Iv(e,Bv)))}function Gv(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await gv(e),n=await mv(e);return t.setNetworkEnabled(!1),async function(e){const t=Wa(e);t.Ta.add(0),await Bm(t),t.da.set("Offline")}(n)})}($v(e=Iv(e,Bv)))}class Kv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kv(Eu.fromBase64String(e))}catch(e){throw new Qa(Ha.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Kv(Eu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Qa(Ha.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hv{constructor(e){this._methodName=e}}class Qv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qa(Ha.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qa(Ha.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cc(this._lat,e._lat)||cc(this._long,e._long)}}class Jv{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Yv=/^__.*__$/;class Xv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kd(e,this.data,t,this.fieldTransforms)}}class Zv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qa(40011,{hc:e})}}class tb{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.dc(e),r}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tc({path:n,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return fb(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(0===e.length)throw this.Vc("Document fields must not be empty");if(eb(this.hc)&&Yv.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class nb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||km(e)}gc(e,t,n,r=!1){return new tb({hc:e,methodName:t,fc:n,path:Sc.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rb(e){const t=e._freezeSettings(),n=km(e._databaseId);return new nb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sb(e,t,n,r,s,i={}){const o=e.gc(i.merge||i.mergeFields?2:0,t,n,s);lb("Data must be an object, but it was:",o,r);const a=ab(r,o);let c,l;if(i.merge)c=new xu(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=ub(t,r,n);if(!o.contains(s))throw new Qa(Ha.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);pb(e,s)||e.push(s)}c=new xu(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new Xv(new fh(a),c,l)}class ib extends Hv{_toFieldTransform(e){if(2!==e.hc)throw 1===e.hc?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ib}}function ob(e,t){if(cb(e=Qi(e)))return lb("Unsupported field value:",t,e),ab(e,t);if(e instanceof Hv)return function(e,t){if(!eb(t.hc))throw t.Vc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Vc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ec&&4!==t.hc)throw t.Vc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ob(s,t.Rc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Qi(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ed(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=mc.fromDate(e);return{timestampValue:Cf(t.serializer,n)}}if(e instanceof mc){const n=new mc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cf(t.serializer,n)}}if(e instanceof Qv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Kv)return{bytesValue:Tf(t.serializer,e._byteString)};if(e instanceof Ov){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Vc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Df(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Jv)return n=e,r=t,{mapValue:{fields:{[Uu]:{stringValue:ju},[zu]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.Vc("VectorValues must only contain numeric values.");return xd(r.serializer,e)})}}}}};var n,r;throw t.Vc(`Unsupported field value: ${_v(e)}`)}(e,t)}function ab(e,t){const n={};return pu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fu(e,(e,r)=>{const s=ob(r,t.Ic(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function cb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mc||e instanceof Qv||e instanceof Kv||e instanceof Ov||e instanceof Hv||e instanceof Jv)}function lb(e,t,n){if(!cb(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_v(n);throw"an object"===r?t.Vc(e+" a custom object"):t.Vc(e+" "+r)}var r}function ub(e,t,n){if((t=Qi(t))instanceof Wv)return t._internalPath;if("string"==typeof t)return db(e,t);throw fb("Field path arguments must be of type string or ",e,!1,void 0,n)}const hb=new RegExp("[~\\*/\\[\\]]");function db(e,t,n){if(t.search(hb)>=0)throw fb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wv(...t.split("."))._internalPath}catch(r){throw fb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fb(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Qa(Ha.INVALID_ARGUMENT,a+e+c)}function pb(e,t){return e.some(e=>e.isEqual(t))}class gb{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ov(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mb extends gb{data(){return super.data()}}function yb(e,t){return"string"==typeof t?db(e,t):t instanceof Wv?t._internalPath:t._delegate._internalPath}class vb{}class bb extends vb{}function wb(e,t,...n){let r=[];t instanceof vb&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Eb).length,n=e.filter(e=>e instanceof xb).length;if(t>1||t>0&&n>0)throw new Qa(Ha.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class xb extends bb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new xb(e,t,n)}_apply(e){const t=this._parse(e);return kb(e._query,t),new Nv(e.firestore,e.converter,ed(e._query,t))}_parse(e){const t=rb(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Qa(Ha.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Tb(o,i);const t=[];for(const n of o)t.push(Cb(r,e,n));a={arrayValue:{values:t}}}else a=Cb(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Tb(o,i),a=function(e,t,n,r=!1){return ob(n,e.gc(r?4:3,t))}(n,"where",o,"in"===i||"not-in"===i);return Sh.create(s,i,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Sb(e,t,n){const r=t,s=yb("where",e);return xb._create(s,r,n)}class Eb extends vb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Eb(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Eh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)kb(n,e),n=ed(n,e)}(e._query,t),new Nv(e.firestore,e.converter,ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _b extends bb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _b(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Qa(Ha.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qa(Ha.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bh(t,n)}(e._query,this._field,this._direction);return new Nv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Hh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ib(e,t="asc"){const n=t,r=yb("orderBy",e);return _b._create(r,n)}function Cb(e,t,n){if("string"==typeof(n=Qi(n))){if(""===n)throw new Qa(Ha.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yh(t)&&-1!==n.indexOf("/"))throw new Qa(Ha.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(wc.fromString(n));if(!Ec.isDocumentKey(r))throw new Qa(Ha.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zu(e,new Ec(r))}if(n instanceof Ov)return Zu(e,n._key);throw new Qa(Ha.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_v(n)}.`)}function Tb(e,t){if(!Array.isArray(e)||0===e.length)throw new Qa(Ha.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Qa(Ha.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Qa(Ha.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Ab{convertValue(e,t="none"){switch(qu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qa(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return fu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[zu].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Cu(e.doubleValue));return new Jv(s)}convertGeoPoint(e){return new Qv(Cu(e.latitude),Cu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Pu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=Iu(e);return new mc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wc.fromString(e);Ka(Zf(n),9688,{name:e});const r=new Lu(n.get(1),n.get(3)),s=new Ec(n.popFirst(5));return r.isEqual(t)||ja(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Db{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nb extends gb{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ob(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(yb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ob extends Nb{data(e={}){return super.data(e)}}class Pb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Db(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ob(this._firestore,this._userDataWriter,n.key,n,new Db(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qa(Ha.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ob(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Db(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ob(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Db(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Mb(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Mb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qa(61501,{type:e})}}function Rb(e){e=Iv(e,Ov);const t=Iv(e.firestore,Bv);return function(e,t,n={}){const r=new Ja;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new cv({next:a=>{i.Cu(),t.enqueueAndForget(()=>Sy(e,o));const c=a.docs.has(n);!c&&a.fromCache?s.reject(new Qa(Ha.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?s.reject(new Qa(Ha.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new ky(Qh(n.path),i,{includeMetadataChanges:!0,La:!0});return xy(e,o)}(await yv(e),e.asyncQueue,t,n,r)),r.promise}($v(t),e._key).then(n=>jb(t,e,n))}class Fb extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ov(this.firestore,null,t)}}function Lb(e,t,n){e=Iv(e,Ov);const r=Iv(e.firestore,Bv),s=function(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}(e.converter,t,n);return Bb(r,[sb(rb(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Ud.none())])}function Ub(e,t,n,...r){e=Iv(e,Ov);const s=Iv(e.firestore,Bv),i=rb(s);let o;return o="string"==typeof(t=Qi(t))||t instanceof Wv?function(e,t,n,r,s,i){const o=e.gc(1,t,n),a=[ub(t,r,n)],c=[s];if(i.length%2!=0)throw new Qa(Ha.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<i.length;e+=2)a.push(ub(t,i[e])),c.push(i[e+1]);const l=[],u=fh.empty();for(let e=a.length-1;e>=0;--e)if(!pb(l,a[e])){const t=a[e];let n=c[e];n=Qi(n);const r=o.Ac(t);if(n instanceof ib)l.push(t);else{const e=ob(n,r);null!=e&&(l.push(t),u.set(t,e))}}const h=new xu(l);return new Zv(u,h,o.fieldTransforms)}(i,"updateDoc",e._key,t,n,r):function(e,t,n,r){const s=e.gc(1,t,n);lb("Data must be an object, but it was:",s,r);const i=[],o=fh.empty();fu(r,(e,r)=>{const a=db(t,e,n);r=Qi(r);const c=s.Ac(a);if(r instanceof ib)i.push(a);else{const e=ob(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new xu(i);return new Zv(o,a,s.fieldTransforms)}(i,"updateDoc",e._key,t),Bb(s,[o.toMutation(e._key,Ud.exists(!0))])}function Vb(e,...t){var n,r,s;e=Qi(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||Vv(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Vv(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,l,u;if(e instanceof Ov)l=Iv(e.firestore,Bv),u=Qh(e._key.path),c={next:n=>{t[o]&&t[o](jb(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Iv(e,Nv);l=Iv(n.firestore,Bv),u=n._query;const r=new Fb(l);c={next:e=>{t[o]&&t[o](new Pb(l,r,n,e))},error:t[o+1],complete:t[o+2]},function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qa(Ha.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query)}return function(e,t,n,r){const s=new cv(r),i=new ky(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>xy(await yv(e),i)),()=>{s.Cu(),e.asyncQueue.enqueueAndForget(async()=>Sy(await yv(e),i))}}($v(l),u,a,c)}function Bb(e,t){return function(e,t){const n=new Ja;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=rv(e);try{const e=await function(e,t){const n=Wa(e),r=mc.now(),s=t.reduce((e,t)=>e.add(t.key),bd());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ud(),c=bd();return n.Bs.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=qd(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Wd(e.key,t,ph(t.value.mapValue),Ud.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:fd(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Iu[e.currentUser.toKey()];r||(r=new gu(cc)),r=r.insert(t,n),e.Iu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Zy(r,e.changes),await ty(r.remoteStore)}catch(e){const t=py(e,"Failed to persist write");n.reject(t)}}(await function(e){return pv(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}($v(e),t)}function jb(e,t,n){const r=n.docs.get(t._key),s=new Fb(e);return new Nb(e,s,t._key,r,new Db(n.hasPendingWrites,n.fromCache),t.converter)}class zb{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Gb(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function $b(e){return new zb(e)}class qb{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=av.provider,this._offlineComponentProvider={build:t=>new ov(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function Gb(e){return new qb(void 0)}!function(e,t=!0){La="11.8.0",oa(new Ji("firestore",(e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),i=new Bv(new ec(e.getProvider("auth-internal")),new sc(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qa(Ha.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i},"PUBLIC").setMultipleInstances(!0)),ha(Ma,Ra,e),ha(Ma,Ra,"esm2017")}();const Kb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Ab,Bytes:Kv,CollectionReference:Pv,DocumentReference:Ov,DocumentSnapshot:Nb,FieldPath:Wv,FieldValue:Hv,Firestore:Bv,FirestoreError:Qa,GeoPoint:Qv,Query:Nv,QueryCompositeFilterConstraint:Eb,QueryConstraint:bb,QueryDocumentSnapshot:Ob,QueryFieldFilterConstraint:xb,QueryOrderByConstraint:_b,QuerySnapshot:Pb,SnapshotMetadata:Db,Timestamp:mc,VectorValue:Jv,_AutoId:ac,_ByteString:Eu,_DatabaseId:Lu,_DocumentKey:Ec,_EmptyAuthCredentialsProvider:Xa,_FieldPath:Sc,_cast:Iv,_logWarn:za,_validateIsNotUsedTogether:xv,collection:Mv,connectFirestoreEmulator:Dv,disableNetwork:Gv,doc:Rv,enableNetwork:qv,ensureFirestoreConfigured:$v,executeWrite:Bb,getDoc:Rb,getFirestore:zv,initializeFirestore:jv,onSnapshot:Vb,orderBy:Ib,persistentLocalCache:$b,persistentSingleTabManager:Gb,query:wb,setDoc:Lb,updateDoc:Ub,where:Sb},Symbol.toStringTag,{value:"Module"}));function Wb(e){return new URLSearchParams(window.location.search).get(e)}function Hb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}async function Qb(e){const t=aw();if(void 0===Si)return rw("FSUpdatesHandler - FileMaker not detected, skipping","warn"),{success:!1,message:"FileMaker not available"};if("passive"===t.device.deviceMode)return rw("FSUpdatesHandler - Device in passive mode, skipping","info"),{success:!0,message:"Passive mode - no processing needed"};const n=e.updates||[];if(!n.length)return rw("FSUpdatesHandler - No updates to process","info"),{success:!0,message:"No updates to process"};const r=[];return n.forEach(e=>{const t={id:e.id,_table:e._table,_tsModFireStore:e._tsModFireStore,_ts:{}};void 0===e._ts&&(e._ts={}),Object.keys(e._ts).forEach(n=>{("number"==typeof e._ts[n]||"object"==typeof e._ts[n])&&(t[n]=e[n],t._ts[n]=e._ts[n])}),(null==e?void 0:e.devicePendingContainer)&&(t.devicePendingContainer=e.devicePendingContainer),(null==e?void 0:e.batchTotalEdits)&&(t.batchTotalEdits=e.batchTotalEdits),(null==e?void 0:e.batchIdEdits)&&(t.batchIdEdits=e.batchIdEdits),r.push(t)}),t.updatesQueue.push(...r),t.updatesTotal+=r.length,rw(`Batched updates: ${r.length}, Total Updates: ${t.updatesQueue.length}`,"info"),t.isUpdatingFM?{success:!0,message:"Update process already running"}:await async function(e){const t=e.fmUpdatesBatchSize||10;let n=!1;e.isUpdatingFM=!0;try{for(;e.updatesQueue.length>0;){e.startProcessing();const r=e.updatesQueue.slice(0,t),s="API - Web Sync Inbound dispatcher {payload}",i={updates:r,remaining:e.updatesQueue.length-r.length};rw(`Sending updates: ${r.length}`,"info");const o=await Si.performScript(s,JSON.stringify(i),1e4);if(!o.success){rw(`ERROR writing batch to database: ${JSON.stringify(o.error)}`,"error");break}rw(`${r.length} Updates successfully saved!`,"info"),e.updatesTotalCompleted+=r.length,Jb(r,e)&&(n=!0),e.updatesQueue.splice(0,r.length);try{const t=window.localStorage.device;if(t&&n){const n=JSON.parse(t);n.tsModFireStoreLastUpdate=e.device.tsModFireStoreLastUpdate,window.localStorage.device=JSON.stringify(n)}}catch{rw("Error updating device object in localStorage","error")}}if(n)try{const t=Rv(zv(),"Organizations",e.organization.id,"Devices",e.device.id);await Ub(t,{tsModFireStoreLastUpdate:new Date(e.device.tsModFireStoreLastUpdate)})}catch(e){rw(`Error updating Firestore timestamp: ${e.message}`,"error")}return e.updatesTotal===e.updatesTotalCompleted&&(rw("Updates Completed!","info"),e.updatesTotal=0,e.updatesTotalCompleted=0),n&&(rw("Re-subscribing device with new timestamp","info"),Xb("subscribeUpdatesDebounce")),{success:!0,message:"Updates processed successfully"}}catch(e){return rw(`Error in sendUpdatesToDatabase: ${e.message}`,"error"),{success:!1,error:e.message}}finally{e.isUpdatingFM=!1;try{e.endProcessing(),rw("sendUpdatesToDatabase - processing ended","info")}catch{}}}(t)}function Jb(e,t){function n(e){return e&&e.toMillis?e.toMillis()+(e.nanoseconds||0)/1e6:Date.parse(e)}let r=!1;return e.forEach(e=>{if(e.batchIdEdits){s=e.batchIdEdits,i=e._tsModFireStore,Object.prototype.hasOwnProperty.call(t.updatesBatches,s)?n(i)>n(t.updatesBatches[s].latestTs)&&(t.updatesBatches[s].latestTs=i):t.updatesBatches[s]={latestTs:i};const o=t.updatesBatches[e.batchIdEdits],a=o.totalReceived||0;a+1===e.batchTotalEdits||1===e.batchTotalEdits?(t.device.tsModFireStoreLastUpdate=function(e){if(e&&e.toMillis){const t=e.toMillis()+(e.nanoseconds||0)/1e6;return new Date(t).toISOString()}return new Date(e).toISOString()}(o.latestTs),delete t.updatesBatches[e.batchIdEdits],r=!0):o.totalReceived=a+1}var s,i}),r}function Yb(e,t){if(!e||e.empty)return void rw("processSnapshot - No updates in snapshot","info");const n=[],r=["devicePendingContainer","batchTotalEdits","batchIdEdits"];if(e.docChanges().forEach(async e=>{const s=e.doc.data();if("added"===e.type||"modified"===e.type){rw(`processSnapshot - Processing ${e.type} update: ${s.id||e.doc.id}`,"info"),Xb("isProcessing");const i=62135596800,o=Date.parse(t.device.tsModFireStoreLastUpdate)/1e3;if(s.updatedKeys||(s.updatedKeys=[]),s._ts)for(const[e,t]of Object.entries(s._ts))t&&t.ts&&Math.round(t.ts/1e3)-i>o&&!s.updatedKeys.includes(e)&&s.updatedKeys.push(e);const a={_table:s._table,id:s.id||e.doc.id,_tsModFireStore:s._tsModFireStore,_ts:{}};s.updatedKeys.forEach(e=>{a[e]=s[e],r.includes(e)||(a._ts[e]=s._ts[e])}),s.batchTotalEdits&&(a.batchTotalEdits=s.batchTotalEdits),s.batchIdEdits&&(a.batchIdEdits=s.batchIdEdits),s.devicePendingContainer&&(a.devicePendingContainer=s.devicePendingContainer),n.push(a)}}),n.length>0){rw(`processSnapshot - Calling FSUpdatesHandler with ${n.length} updates`,"info");const e=n[n.length-1]._tsModFireStore;Xb("FSUpdatesHandler",{updates:n,_tsModFireStoreLastUpdate:e instanceof Date?e:new Date(e)})}}function Xb(e,t={}){const n=aw();let r;try{switch(e){case"isProcessing":return rw("[DEBUG] Starting isProcessing action","info"),r=n.startProcessing(),rw(`[DEBUG] isProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"endProcessing":return rw("[DEBUG] Starting endProcessing action","info"),r=n.endProcessing(),rw(`[DEBUG] endProcessing result: ${JSON.stringify(r,null,2)}`,"info"),r;case"promptUserToConfigure":return rw("[DEBUG] Starting promptUserToConfigure action","info"),console.log("[namedAction] promptUserToConfigure called"),r=Promise.resolve({success:!0,message:"User prompted (mocked)"}),rw(`[DEBUG] promptUserToConfigure result: ${JSON.stringify(r,null,2)}`,"info"),r;case"getSignedURL":return rw("[DEBUG] Starting getSignedURL action","info"),console.log("[namedAction] getSignedURL called with options:",t),r=Promise.resolve(`https://mock-signed-url.com/${t.name}`),rw(`[DEBUG] getSignedURL result: ${JSON.stringify(r,null,2)}`,"info"),r;case"FSUpdatesHandler":return rw("[DEBUG] Starting FSUpdatesHandler action","info"),r=Qb(t),rw(`[DEBUG] FSUpdatesHandler result: ${JSON.stringify(r,null,2)}`,"info"),r;case"editsUpdateStatus":return rw("[DEBUG] Starting editsUpdateStatus action","info"),r=async function(e){const t=aw();try{const n=t.editsCurrentState,r=t.editsTotalPending;if(e.currentState&&(t.editsCurrentState=e.currentState),void 0!==e.pendingEdits&&(t.editsTotalPending=e.pendingEdits),n===t.editsCurrentState&&r===t.editsTotalPending||rw(`[editsUpdateStatus] state ${n}${t.editsCurrentState}, pending ${r}${t.editsTotalPending}`,"info"),void 0!==Si)try{await Si.returnResult({status:"ok"})}catch{}else rw("[WARN] fmBridgit not available for returnResult","warn");const s={success:!0,message:"Edit status updated"};return Promise.resolve(s)}catch(e){rw(`[ERROR] Error in handleEditsUpdateStatus: ${e.message}`,"error"),rw(`[ERROR] Error stack: ${e.stack}`,"error");const t={success:!1,error:e.message};return rw(`[DEBUG] handleEditsUpdateStatus returning error: ${JSON.stringify(t,null,2)}`,"info"),Promise.resolve(t)}}(t),rw(`[DEBUG] editsUpdateStatus result: ${JSON.stringify(r,null,2)}`,"info"),r;case"updatesContainerDownloads":return rw("[DEBUG] Starting updatesContainerDownloads action","info"),r=async function(e){var t,n;const r=aw();rw(`[DEBUG] handleUpdatesContainerDownloads called with options: ${JSON.stringify(e,null,2)}`,"info"),rw("[DEBUG] Current appConfig state before update:","info"),rw(`[DEBUG] - updateTotalContainers: ${r.updateTotalContainers}`,"info"),rw(`[DEBUG] - updateCompletedContainers: ${r.updateCompletedContainers}`,"info");try{if(void 0!==(null==(t=null==e?void 0:e.updates)?void 0:t.totalContainers)){const t=r.updateTotalContainers;r.updateTotalContainers+=e.updates.totalContainers,rw(`[DEBUG] Updated updateTotalContainers from ${t} to ${r.updateTotalContainers}`,"info")}if(void 0!==(null==(n=null==e?void 0:e.updates)?void 0:n.completedContainers)){const t=r.updateCompletedContainers;r.updateCompletedContainers+=e.updates.completedContainers,rw(`[DEBUG] Updated updateCompletedContainers from ${t} to ${r.updateCompletedContainers}`,"info")}if(r.updateCompletedContainers===r.updateTotalContainers&&(rw("[DEBUG] Container download complete, resetting counters","info"),r.updateCompletedContainers=0,r.updateTotalContainers=0),r.updateCompletedContainers>r.updateTotalContainers&&(rw("[WARN] Container overflow detected, resetting completed count","warn"),r.updateCompletedContainers=0),rw("[DEBUG] Final appConfig state after update:","info"),rw(`[DEBUG] - updateTotalContainers: ${r.updateTotalContainers}`,"info"),rw(`[DEBUG] - updateCompletedContainers: ${r.updateCompletedContainers}`,"info"),void 0!==Si){rw("[DEBUG] fmBridgit available, calling returnResult with status: ok","info");try{const e=await Si.returnResult({status:"ok"});rw(`[DEBUG] fmBridgit.returnResult completed successfully: ${JSON.stringify(e)}`,"info")}catch(e){rw(`[WARN] fmBridgit.returnResult failed: ${e.message}`,"warn"),rw("[WARN] This is expected behavior - FileMaker may reject some acknowledgments","warn")}}else rw("[WARN] fmBridgit not available for returnResult","warn");const s={success:!0,message:"Container downloads updated"};return rw(`[DEBUG] handleUpdatesContainerDownloads returning: ${JSON.stringify(s,null,2)}`,"info"),Promise.resolve(s)}catch(e){rw(`[ERROR] Error in handleUpdatesContainerDownloads: ${e.message}`,"error"),rw(`[ERROR] Error stack: ${e.stack}`,"error");const t={success:!1,error:e.message};return rw(`[DEBUG] handleUpdatesContainerDownloads returning error: ${JSON.stringify(t,null,2)}`,"info"),Promise.resolve(t)}}(t),rw(`[DEBUG] updatesContainerDownloads result: ${JSON.stringify(r,null,2)}`,"info"),r;case"webSyncReceivePayload":return rw("[DEBUG] Starting webSyncReceivePayload action","info"),r=async function(e){var t,n;const r=aw(),s=e.payload;if(rw("[DEBUG] webSyncReceivePayload called with options:","info"),rw(`[DEBUG] Options keys: ${Object.keys(e||{}).join(", ")}`,"info"),rw("[DEBUG] Payload type: "+typeof s,"info"),rw(`[DEBUG] Payload content: ${JSON.stringify(s,null,2)}`,"info"),!s)return rw("[ERROR] No payload provided to webSyncReceivePayload","error"),Promise.resolve({success:!1,message:"No payload provided"});if(s.status)return rw("[DEBUG] Status ping received, acknowledging","info"),void 0!==Si&&Si.returnResult({status:"ok"}),Promise.resolve({success:!0,message:"Status ping acknowledged"});if(s.edits&&Array.isArray(s.edits)){rw(`[DEBUG] Processing ${s.edits.length} edits from FileMaker`,"info"),rw(`[DEBUG] Edits array: ${JSON.stringify(s.edits,null,2)}`,"info");let e=0;const i=5;for(;e<i;)if(rw(`[DEBUG] Firebase readiness check attempt ${e+1}/${i}`,"info"),window.fsDeviceRef&&window.fsOrganizationRef){rw("[DEBUG] Firebase references available, proceeding with edit processing","info");try{for(const e of s.edits){rw(`[DEBUG] Processing edit: ${JSON.stringify(e,null,2)}`,"info");const s={...e,id:e.id||null,_table:e._table||e.table||"UnknownTable",_tsModFireStore:new Date,_ts:e._ts||{},_contexts:r.device.contexts||[]};rw(`[DEBUG] Prepared edit data for Firestore: ${JSON.stringify(s,null,2)}`,"info");try{const{doc:i,setDoc:o,getDoc:a,collection:c}=await xi(async()=>{const{doc:e,setDoc:t,getDoc:n,collection:r}=await Promise.resolve().then(()=>Kb);return{doc:e,setDoc:t,getDoc:n,collection:r}},void 0,import.meta.url),l=i(c(window.fsDeviceRef,"Edits"));rw(`[DEBUG] Creating Firestore document at: Organizations/${r.organization.id}/Devices/${r.device.id}/Edits/${s.id}`,"info"),await o(l,s);try{const e=await a(l);rw(`[DEBUG] Read-back after write  exists: ${e.exists()}, fromCache: ${null==(t=e.metadata)?void 0:t.fromCache}, hasPendingWrites: ${null==(n=e.metadata)?void 0:n.hasPendingWrites}`,"info")}catch(e){rw(`[WARN] Read-back check failed: ${(null==e?void 0:e.message)||e}`,"warn")}rw(`[DEBUG] Successfully created Firestore document for edit: ${s.id}`,"info"),"containerIsUploaded"===e.typeEdit&&(r.editsContainersComplete+=1,rw(`[DEBUG] Updated container completion count: ${r.editsContainersComplete}`,"info"))}catch(e){rw(`[ERROR] Failed to create Firestore document for edit ${s.id}: ${e.message}`,"error"),rw(`[ERROR] Firestore error details: ${JSON.stringify(e,null,2)}`,"error")}}r.editsCurrentState="4",rw(`[DEBUG] Updated edit state to: ${r.editsCurrentState}`,"info");try{r.endProcessing()}catch{}r.editsContainersComplete===r.editsContainersTotal&&(r.editsContainersComplete=0,r.editsContainersTotal=0,rw("[DEBUG] Reset container counters","info"));const e={payload:s.modificationTimestampUTCEnd?{modificationTimestampUTCEnd:s.modificationTimestampUTCEnd}:{}};return rw(`[DEBUG] Returning success response to FileMaker: ${JSON.stringify(e,null,2)}`,"info"),void 0!==Si&&(Si.returnResult(e),rw("[DEBUG] Result returned to FileMaker via fmBridgit","info")),Promise.resolve({success:!0,message:"Payload processed successfully"})}catch(e){return rw(`[ERROR] Error processing edits: ${e.message}`,"error"),rw(`[ERROR] Processing error details: ${JSON.stringify(e,null,2)}`,"error"),Promise.resolve({success:!1,message:`Processing error: ${e.message}`})}}else{if(e++,rw(`[WARN] Firebase not ready yet, attempt: ${e}/${i}`,"warn"),rw(`[DEBUG] fsDeviceRef available: ${!!window.fsDeviceRef}`,"info"),rw(`[DEBUG] fsOrganizationRef available: ${!!window.fsOrganizationRef}`,"info"),e>=i)return rw("[ERROR] webSync Timeout - Firebase not ready after maximum attempts","error"),Promise.resolve({success:!1,message:"Firebase timeout"});rw("[DEBUG] Waiting 1 second before retry...","info"),await new Promise(e=>setTimeout(e,1e3))}}else rw("[WARN] No edits array found in payload","warn"),rw(`[DEBUG] Payload keys: ${Object.keys(s).join(", ")}`,"info");return rw("[DEBUG] webSyncReceivePayload completed without processing edits","info"),Promise.resolve({success:!1,message:"No edits to process"})}(t),rw(`[DEBUG] webSyncReceivePayload result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdates":return rw("[DEBUG] Starting subscribeUpdates action","info"),r=function(){const e=aw();if("passive"===e.device.deviceMode)return rw("subscribeUpdates - Device in passive mode, skipping subscription","info"),Promise.resolve({success:!0,message:"Passive mode - no subscription needed"});try{const t=new Date,n=e.device.tsModFireStoreLastUpdate?new Date(e.device.tsModFireStoreLastUpdate):t;if(rw(`subscribeUpdates - Starting subscription from timestamp: ${n.toISOString()}`,"info"),n===t&&(e.device.tsModFireStoreLastUpdate=n,window.fsDeviceRef))try{Ub(Rv(zv(),"Organizations",e.organization.id,"Devices",e.device.id),{tsModFireStoreLastUpdate:n}).catch(e=>{rw(`Error updating device timestamp: ${e.message}`,"error")})}catch(e){rw(`Error accessing Firestore for timestamp update: ${e.message}`,"error")}if(window.fsUpdatesRefUnsubscribe&&"function"==typeof window.fsUpdatesRefUnsubscribe&&(window.fsUpdatesRefUnsubscribe(),rw("subscribeUpdates - Cleaned up existing subscription","info")),!window.fsUpdatesRef)return rw("subscribeUpdates - Firestore updates reference not available, cannot subscribe","warn"),Promise.resolve({success:!1,message:"Firestore references not available"});const r=wb(window.fsUpdatesRef,Ib("_tsModFireStore","asc"),Sb("_tsModFireStore",">",mc.fromDate(n)),Sb("_contexts","array-contains-any",e.device.contexts));return window.fsUpdatesRefUnsubscribe=Vb(r,{includeMetadataChanges:!1},t=>{Yb(t,e)},e=>{rw(`subscribeUpdates - Snapshot listener error: ${e.message}`,"error")}),rw("subscribeUpdates - Firestore listener established successfully","info"),Promise.resolve({success:!0,message:"Updates subscription established"})}catch(e){return rw(`subscribeUpdates - Error setting up subscription: ${e.message}`,"error"),Promise.resolve({success:!1,error:e.message})}}(),rw(`[DEBUG] subscribeUpdates result: ${JSON.stringify(r,null,2)}`,"info"),r;case"subscribeUpdatesDebounce":return rw("subscribeUpdatesDebounce called - would re-subscribe to updates","info"),Promise.resolve({success:!0,message:"Debounced subscription triggered"});default:return console.warn(`[namedAction] Unknown action: ${e}`),Promise.resolve({success:!1,message:`Unknown action: ${e}`})}}catch(t){return rw(`[ERROR] Error in namedAction ${e}: ${t.message}`,"error"),rw(`[ERROR] Error stack: ${t.stack}`,"error"),Promise.resolve({success:!1,error:t.message})}}function Zb(){console.log("[BF] actionsClear called - clearing action queue (mocked)"),aw().endProcessing()}function ew(e,t){const n=aw();"isProcessing"===e?t?n.startProcessing():n.endProcessing():console.log(`[setGlobalVar] ${e} = ${t}`)}function tw(e){const t=aw();switch(e){case"isProcessing":return t.isProcessing;case"deviceId":return t.device.id;case"organizationId":return t.organization.id;default:return console.warn(`[getGlobalVar] Unknown variable: ${e}`),null}}function nw(e,t="Alert"){console.log(`[Alert] ${t}: ${e}`),alert(`${t}\n\n${e}`)}function rw(e,t="info"){const n=(new Date).toISOString(),r=`[BF-${t.toUpperCase()}] ${n}`;switch(t){case"error":console.error(r,e);break;case"warn":console.warn(r,e);break;case"debug":console.debug(r,e);break;default:console.log(r,e)}}async function sw(e){try{const t=JSON.parse(e),{name:n,options:r={}}=t;rw(`namedActionFM called: ${n}`,"info");const s=await Promise.resolve(Xb(n,r));try{return JSON.stringify(s)}catch(e){return JSON.stringify({success:!1,error:`stringify_failed: ${String((null==e?void 0:e.message)||e)}`})}}catch(e){return rw(`Error in namedActionFM: ${e.message}`,"error"),JSON.stringify({success:!1,error:String((null==e?void 0:e.message)||e)})}}const iw={getQueryParam:Wb,getUUID:Hb,namedAction:Xb,namedActionFM:sw,actionsClear:Zb,setGlobalVar:ew,getGlobalVar:tw,showAlert:nw,log:rw};"undefined"!=typeof window&&(window.BF=iw,window.processSnapshot=Yb);const ow=Object.freeze(Object.defineProperty({__proto__:null,BF:iw,actionsClear:Zb,getGlobalVar:tw,getQueryParam:Wb,getUUID:Hb,log:rw,namedAction:Xb,namedActionFM:sw,setGlobalVar:ew,showAlert:nw},Symbol.toStringTag,{value:"Module"})),aw=bi("appConfig",{state:()=>({sessionId:Hb(),activeJob:null,configx:{deviceMode:"passive",deviceType:"webApp",idContext:"CON_north",idDevice:null,idOrganization:null,tsModFireStoreLastUpdate:(new Date).toISOString(),autoPullEdits:!1},device:{id:"DEV_demo",deviceMode:"passive",deviceType:"webApp",tsModFireStoreLastUpdate:null,contexts:["defaultContext"],tables:[],recordID:null,lastSyncOutUTC:null,syncAppURL:null},editsContainersComplete:0,editsContainersTotal:0,editsTotalCompleted:0,editsTotal:0,editsCurrentState:"0",fmPendingEdits:0,editsLocalPendingWrites:0,lastFmStatusAt:null,fmStatusScriptName:"API - Web Sync Status",fmStatusPollingMs:15e3,editsStates:{0:"No New Edits",1:"Starting Sync",2:"Fetching New Edits",3:"Sending Data",4:"Updates Sent",5:"New Edits"},editsTotalPending:0,env:{logoURL:"https://ucarecdn.com/cbbbcd08-c49f-499d-8125-e1dbb2a4f262/"},fmUpdatesBatchSize:25,isOnline:!0,isProcessing:!1,isUpdatingFM:!1,localFSInSync:"-",log:"---",organization:{id:"ORG_demo"},payload:{},people:[],storageSize:0,updateCompletedContainers:0,updateTotalContainers:0,updatesBatches:{},updatesCurrentTS:{},updatesQueue:[],updatesTotal:0,updatesTotalCompleted:0,updatesTotalRecords:0,sessionUpload:{active:!1,total:0,baselineCompleted:0,startedAt:null,lastTotal:0,lastCompleted:0,endedAt:null},devLoggingEnabled:!1,devLogs:[],devLogsMaxEntries:500}),actions:{initializeConfigFromURLParams(){const e=e=>new URLSearchParams(window.location.search).get(e);console.log("@onAppLoad InitConfigs - Initial device state before URL params: ",JSON.parse(JSON.stringify(this.device)));const t=e("idOrganization");this.organization.id=t||this.organization.id||"ORG_demo",this.configx.idOrganization=this.organization.id;const n=e("idDevice");this.device.id=n||this.device.id||"DEV_demo",this.configx.idDevice=this.device.id,this.device.deviceMode=e("deviceMode")||this.device.deviceMode||"passive",this.configx.deviceMode=this.device.deviceMode,this.device.deviceType=e("deviceType")||this.device.deviceType||"webApp",this.configx.deviceType=this.device.deviceType;try{const e=window.localStorage.getItem("ws-auto-pull-edits"),t=window.localStorage.getItem("ws-auto-pull-fm-edits"),n=window.localStorage.getItem("ws-auto-push-edits");null!==e?this.configx.autoPullEdits="1"===e:null!==t?this.configx.autoPullEdits="1"===t:null!==n&&(this.configx.autoPullEdits="1"===n)}catch{}const r=e("autoPullEdits"),s=e("autoPullFmEdits"),i=e("autoPushEdits"),o=r??s??i;if(null!==o){const e=String(o).toLowerCase(),t="1"===e||"true"===e||"yes"===e;this.configx.autoPullEdits=t;try{window.localStorage.setItem("ws-auto-pull-edits",t?"1":"0")}catch{}}const a=e("contexts");if(a)try{const e=decodeURI(a).split(",");this.device.contexts=e.length>0?e:this.device.contexts}catch(e){console.error("Error decoding contexts from URL query parameter:",e)}console.log("Final appConfig store state after URL params:",JSON.parse(JSON.stringify(this.$state)))},startProcessing(){this.isProcessing=!0,console.log("isProcessing set to true")},endProcessing(){this.isProcessing=!1,console.log("isProcessing set to false")},setAutoPullEdits(e){const t=!!e;this.configx.autoPullEdits=t;try{window.localStorage.setItem("ws-auto-pull-edits",t?"1":"0")}catch{}},setAutoPullFmEdits(e){this.setAutoPullEdits(e)},setAutoPushEdits(e){this.setAutoPullEdits(e)},beginUploadSession(e=0,t=0){this.sessionUpload.active=!0,this.sessionUpload.total=Number.isFinite(e)?e:0,this.sessionUpload.baselineCompleted=Number.isFinite(t)?t:0,this.sessionUpload.startedAt=(new Date).toISOString(),this.sessionUpload.lastTotal=0,this.sessionUpload.lastCompleted=0,this.sessionUpload.endedAt=null},endUploadSession(){const e=Math.max(0,(this.editsTotalCompleted||0)-(this.sessionUpload.baselineCompleted||0));this.sessionUpload.lastTotal=this.sessionUpload.total||0,this.sessionUpload.lastCompleted=Math.min(this.sessionUpload.lastTotal,e),this.sessionUpload.endedAt=(new Date).toISOString(),this.sessionUpload.active=!1,this.sessionUpload.total=0,this.sessionUpload.baselineCompleted=0,this.sessionUpload.startedAt=null},initializeDevLoggingSettings(){try{const e=window.localStorage.getItem("ws-dev-logs-enabled");this.devLoggingEnabled="1"===e}catch{this.devLoggingEnabled=!1}},setDevLoggingEnabled(e){const t=!!e;this.devLoggingEnabled=t;try{window.localStorage.setItem("ws-dev-logs-enabled",t?"1":"0")}catch{}t||this.clearDevLogs()},addDevLogEntry(e={}){const t={id:e.id||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,timestamp:e.timestamp||(new Date).toISOString(),level:e.level||"log",message:e.message||""};if(this.devLogs.push(t),this.devLogs.length>this.devLogsMaxEntries){const e=this.devLogs.length-this.devLogsMaxEntries;this.devLogs.splice(0,e)}},clearDevLogs(){this.devLogs=[]}}});ha("firebase","11.8.0","app");const cw={apiKey:"AIzaSyC7IAF_M-rtG-W-M-OxTstiEeS3oG3ctoY",appId:"1:415177867181:web:f0c952ea381ee04fe3ab24",authDomain:"bf-pwa.firebaseapp.com",measurementId:"G-RMDP2726CQ",messagingSenderId:"415177867181",projectId:"bf-pwa",storageBucket:"bf-pwa.appspot.com"};let lw=null,uw=null,hw=null,dw=null,fw=null,pw=null,gw=null,mw="";async function yw(){var e;const t=aw();if("passive"!==t.device.deviceMode)if(uw)console.log("Firebase already initialized.");else try{console.log("Initializing Firebase app..."),uw=ua(cw),lw=jv(uw,{localCache:$b()});try{console.log("Using Firebase project:",null==(e=null==uw?void 0:uw.options)?void 0:e.projectId)}catch{}if(console.log("Configured Firestore persistent local cache."),!t.organization.id||!t.device.id)return void console.error("Organization ID or Device ID not available from config store for Firebase refs initialization.");hw=Rv(lw,"Organizations",t.organization.id),dw=Rv(hw,"Devices",t.device.id),fw=Mv(hw,"Updates"),pw=Mv(dw,"Edits"),console.log("Firestore document/collection references initialized."),console.log("Firebase services initialized."),await async function(){var e;console.log("Setting up Firestore listeners and initial checks..."),await async function(){const e=aw();if(e.organization.id&&e.device.id)try{console.log(`Ensuring Organization document exists: Organizations/${e.organization.id}`),await Lb(hw,{},{merge:!0}),console.log(`Ensuring Device document exists: Organizations/${e.organization.id}/Devices/${e.device.id}`),await Lb(dw,{deviceType:e.device.deviceType},{merge:!0}),console.log("Parent documents checked/created successfully.")}catch(e){console.error("Error in checkParentDocuments: ",e)}else console.error("Organization ID or Device ID is missing. Cannot check/create parent documents.")}(),"undefined"!=typeof window&&(window.fsOrganizationRef=hw,window.fsDeviceRef=dw,window.fsUpdatesRef=fw,window.fsUpdatesRefUnsubscribe=null,window.fsEditsRef=pw,window.fsEditsRefUnsubscribe=gw,console.log("Firestore references exposed globally for BetterForms compatibility"));try{const t=aw();if(dw){const n=await Rb(dw);if(n.exists()){const r=null==(e=n.data())?void 0:e.tsModFireStoreLastUpdate;if(r){const e="function"==typeof r.toDate?r.toDate().toISOString():new Date(r).toISOString();t.device.tsModFireStoreLastUpdate=e,console.log("Hydrated device timestamp from Firebase:",e)}else console.log("No tsModFireStoreLastUpdate field found in Firebase device document")}else console.log("Device document does not exist in Firebase yet")}}catch(e){console.warn("Failed to hydrate device timestamp:",e)}try{const{namedAction:e}=await xi(async()=>{const{namedAction:e}=await Promise.resolve().then(()=>ow);return{namedAction:e}},void 0,import.meta.url),t=await e("subscribeUpdates");console.log("subscribeUpdates result:",t)}catch(e){console.error("Error setting up updates subscription:",e)}try{const e=aw();gw&&gw(),pw&&(gw=Vb(pw,{includeMetadataChanges:!0},t=>{const n=t.docs.map(e=>{var t,n;return{id:e.id,pending:!!(null==(t=e.metadata)?void 0:t.hasPendingWrites),fromCache:!!(null==(n=e.metadata)?void 0:n.fromCache)}}),r=n.filter(e=>e.pending).length,s=`${r}:${n.map(e=>`${e.pending?"P":"C"}-${e.id}`).join("|")}`;s!==mw&&(mw=s,console.log("[EditsPending]",{timestamp:(new Date).toISOString(),pendingCount:r,docStates:n})),e.editsLocalPendingWrites=r},e=>{console.warn("Edits pending-writes listener error:",(null==e?void 0:e.message)||e)}),window.fsEditsRefUnsubscribe=gw,console.log("Edits pending-writes listener established"))}catch(e){console.warn("Failed to establish Edits pending-writes listener",e)}console.log("Firestore listeners and checks setup complete.")}()}catch(e){console.error("Error initializing Firebase: ",e)}else console.log("Device mode is passive. Skipping Firebase initialization.")}async function vw(){lw&&(await Gv(lw),console.log("Firestore network disabled (offline mode)."))}const bw={version:"0.1.7"},ww={class:"min-h-screen w-full bg-gray-900 text-gray-100 overflow-x-auto"},xw={class:"w-full bg-gray-800 border-b border-gray-700 sticky top-0 z-30"},Sw={class:"px-0 py-3"},Ew={class:"flex items-center justify-between px-3 sm:px-4 max-w-screen-2xl mx-auto"},_w={class:"flex items-center space-x-4"},Iw={class:"flex items-center space-x-3"},Cw={class:"p-2 bg-blue-600 rounded-lg"},Tw={class:"flex items-center space-x-6"},kw={class:"flex items-center space-x-3"},Aw={class:"text-sm text-gray-300 font-medium"},Dw={key:0,class:"flex items-center space-x-3"},Nw={class:"text-sm text-gray-300 font-medium capitalize"},Ow={class:"w-full pb-4 px-2 sm:px-0"},Pw={class:"px-0 py-4"},Mw={class:"grid grid-cols-1 lg:grid-cols-12 gap-4 px-2 sm:px-4 max-w-screen-2xl mx-auto"},Rw={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-2"},Fw={class:"space-y-2 text-xs"},Lw={class:"flex items-center justify-between gap-2"},Uw={class:"text-white font-mono text-right break-all"},Vw={class:"flex items-center justify-between gap-2"},Bw={class:"px-2 py-0.5 bg-gray-700 rounded text-[10px] text-white font-medium shrink-0"},jw={class:"flex items-center justify-between gap-2"},zw={class:"text-white font-mono text-right break-all"},$w={class:"flex items-center justify-between gap-2"},qw={class:"text-white"},Gw={class:"flex items-center justify-between gap-2"},Kw={class:"text-white font-mono text-right"},Ww={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-5"},Hw={class:"mb-3"},Qw={class:"text-sm text-gray-300"},Jw={class:"grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs mb-2"},Yw={class:"flex items-center justify-between gap-2 text-gray-400"},Xw={class:"text-white font-medium"},Zw={class:"flex items-center justify-between gap-2 text-gray-400"},ex={class:"text-white font-medium"},tx={class:"flex items-center justify-between gap-2 text-gray-400"},nx={class:"text-white font-medium"},rx={key:0,class:"space-y-4"},sx={key:0,class:"space-y-3"},ix={class:"flex justify-between items-center"},ox={class:"text-blue-400 font-bold text-sm"},ax={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},cx={class:"flex justify-between text-xs text-gray-400"},lx={key:1,class:"border-t border-gray-700 pt-3 space-y-3"},ux={class:"flex justify-between items-center"},hx={class:"text-blue-400 font-bold text-sm"},dx={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},fx={class:"flex justify-between text-xs text-gray-400"},px={key:1,class:"text-center py-4 text-gray-500"},gx={class:"bg-gray-800 border border-gray-700 rounded-xl p-3 sm:p-4 lg:col-span-5"},mx={class:"mb-3"},yx={class:"text-sm text-gray-300"},vx={key:0,class:"space-y-4"},bx={class:"space-y-3"},wx={class:"flex justify-between items-center"},xx={class:"text-green-400 font-bold text-sm"},Sx={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},Ex={class:"flex justify-between text-xs text-gray-400"},_x={key:0,class:"border-t border-gray-700 pt-3 space-y-3"},Ix={class:"flex justify-between items-center"},Cx={class:"text-green-400 font-bold text-sm"},Tx={class:"w-full bg-gray-700 rounded-full h-1.5 overflow-hidden"},kx={class:"flex justify-between text-xs text-gray-400"},Ax={key:1,class:"text-center py-4"},Dx={key:2,class:"text-center py-4 text-gray-500"},Nx={class:"flex items-center justify-between mb-8"},Ox={class:"mb-8"},Px={class:"flex items-center justify-between mb-4"},Mx={class:"mb-8"},Rx={class:"flex items-center justify-between mb-2"},Fx={class:"text-xs text-gray-500 mb-4"},Lx={class:"flex flex-wrap gap-3"},Ux=["disabled"],Vx=["disabled"],Bx=["disabled"],jx={class:"mb-8"},zx={class:"flex items-center justify-between"},$x={class:"inline-flex items-center gap-3"},qx=["checked"],Gx={class:"mb-8"},Kx={class:"flex items-center justify-between mb-3"},Wx={class:"inline-flex items-center gap-3"},Hx=["checked"],Qx={class:"flex flex-wrap gap-3"},Jx=["disabled"],Yx={key:0,class:"text-xs text-gray-500 mt-2"},Xx={class:"flex items-center justify-between mb-6"},Zx={class:"text-sm text-gray-400"},eS={class:"flex items-center justify-between mb-4"},tS={class:"text-sm text-gray-400"},nS={class:"flex gap-3"},rS=["disabled"],sS={class:"bg-gray-950 border border-gray-800 rounded-xl max-h-[60vh] overflow-y-auto divide-y divide-gray-900"},iS={class:"flex items-center justify-between gap-3"},oS={class:"font-mono text-xs text-gray-500"},aS={class:"text-sm text-gray-200 whitespace-pre-wrap break-words"},cS={key:1,class:"py-10 text-center text-gray-500"},lS=(e=>{const t=e.__vccOpts||e;for(const[e,n]of[["__scopeId","data-v-bea940fa"]])t[e]=n;return t})({__name:"App",setup(e){const r=aw(),s=_t("Initializing..."),i=_t(!1),o=_t(!1),a=_t(navigator.onLine),c=_t(!1);let l=null,u=null;const h=null==bw?void 0:bw.version,d=_t(!0);let f=null;_r(Ss(()=>r.updatesTotal>0||r.updateTotalContainers>0),e=>{f&&clearTimeout(f),e?d.value=!1:f=setTimeout(()=>{d.value=!0},1e3)},{immediate:!0});const p=Ss(()=>r.editsContainersTotal?Math.round(r.editsContainersComplete/r.editsContainersTotal*100):0),g=Ss(()=>r.updatesTotal?Math.round(r.updatesTotalCompleted/r.updatesTotal*100):0),m=Ss(()=>r.updateTotalContainers?Math.round(r.updateCompletedContainers/r.updateTotalContainers*100):0),y=Ss(()=>{var e;return(null==(e=r.sessionUpload)?void 0:e.active)&&r.sessionUpload.total>0?r.sessionUpload.total:r.editsTotal}),v=Ss(()=>{var e;if(null==(e=r.sessionUpload)?void 0:e.active){const e=r.editsTotalCompleted-(r.sessionUpload.baselineCompleted||0);return Math.max(0,e)}return r.editsTotalCompleted}),b=Ss(()=>{const e=y.value;return e?Math.round(v.value/e*100):0}),w=Ss(()=>{var e;return(null==(e=r.sessionUpload)?void 0:e.lastCompleted)||0}),E=Ss(()=>{var e;return(null==(e=r.sessionUpload)?void 0:e.lastTotal)||0}),S=Ss(()=>y.value?v.value:w.value),x=Ss(()=>y.value?y.value:E.value),_=Ss(()=>!a.value||c.value?"offline":s.value.includes("successfully")?"connected":s.value.includes("error")?"error":"connecting"),I=Ss(()=>r.isProcessing?"processing":r.updatesTotal>0||r.editsContainersTotal>0?"syncing":"idle"),C=e=>{r.setDevLoggingEnabled(e)},T=()=>{o.value=!0},k=()=>{o.value=!1},A=()=>{r.clearDevLogs()},D=e=>{switch(e){case"error":return"text-red-300 border border-red-500/40 bg-red-500/10";case"warn":return"text-yellow-300 border border-yellow-500/40 bg-yellow-500/10";case"info":return"text-blue-300 border border-blue-500/40 bg-blue-500/10";default:return"text-gray-200 border border-gray-600 bg-gray-700/30"}},N=e=>{try{return new Date(e).toLocaleTimeString([],{hour12:!1})}catch{return e}},R=_t("undefined"!=typeof navigator&&"serviceWorker"in navigator),O=_t(R.value?"checking":"unsupported"),P=_t(R.value?"Checking service worker status...":"Service workers are not supported in this context."),M=_t([]),F=_t(!1),L=_t(!1),B=_t(!1),U=async()=>{if(R.value&&"undefined"!=typeof navigator){F.value=!0;try{const e=await navigator.serviceWorker.getRegistrations();if(M.value=e,!e.length)return O.value="not-registered",void(P.value="No service worker registrations found for this origin.");const t=!!navigator.serviceWorker.controller;O.value=t?"active":"installing";const n=e.map(e=>{try{const t=new URL(e.scope);return t.pathname||t.href}catch{return e.scope}}).join(", ");P.value=`Registered ${t?"(active)":"(installing)"} with scope${e.length>1?"s":""}: ${n}`}catch(e){O.value="error",P.value=`Failed to read service worker status: ${(null==e?void 0:e.message)||e}`}finally{F.value=!1}}},V=async()=>{if(R.value&&"undefined"!=typeof navigator){L.value=!0;try{const e=await navigator.serviceWorker.getRegistrations();if(await Promise.all(e.map(e=>e.unregister().catch(()=>{}))),"undefined"!=typeof caches&&"function"==typeof caches.keys){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e).catch(()=>{})))}O.value="cleared",P.value="Service workers and caches cleared. Reloading to apply...",setTimeout(()=>{window.location.reload()},500)}catch(e){O.value="error",P.value=`Failed to clear service workers: ${(null==e?void 0:e.message)||e}`}finally{L.value=!1}}},j=async()=>{if(R.value&&"undefined"!=typeof navigator){B.value=!0;try{const e=M.value.length>0?M.value:await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(e=>e.update().then(()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})}).catch(()=>{}))),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SKIP_WAITING"}),O.value="updating",P.value="Update requested. Reloading to activate latest assets...",setTimeout(()=>{window.location.reload()},500)}catch(e){O.value="error",P.value=`Failed to update service worker: ${(null==e?void 0:e.message)||e}`}finally{B.value=!1}}},z=Ss(()=>{switch(O.value){case"active":return"Active";case"installing":return"Installing";case"not-registered":return"Not Registered";case"unsupported":return"Unsupported";case"cleared":return"Cleared";case"updating":return"Updating";case"error":return"Error";default:return"Checking..."}}),q=Ss(()=>{switch(O.value){case"active":return"text-green-400";case"installing":case"updating":return"text-yellow-300";case"cleared":return"text-blue-300";case"unsupported":case"not-registered":return"text-gray-400";case"error":return"text-red-400";default:return"text-gray-300"}}),K=async(e="watcher")=>{try{if(!r.configx.autoPullEdits)return;if(!(r.fmPendingEdits>0))return;Si.performScript("Start Sync",JSON.stringify({source:"WebApp",mode:"auto",why:e}),{fireAndForget:!0})}catch{}};bn(async()=>{try{r.initializeDevLoggingSettings(),t=r,t&&("function"==typeof t.initializeDevLoggingSettings&&t.initializeDevLoggingSettings(),t.devLoggingEnabled?(n.forEach(e=>t.addDevLogEntry(e)),n.length=0):n.length=0),console.log("BetterForms utilities initialized:",void 0!==window.BF?"BF available globally":"BF not found"),console.log("FileMaker Bridge initialized:",Si.isFileMakerEnvironment?"FileMaker detected":"Standalone mode"),r.initializeConfigFromURLParams(),await yw(),s.value="Connected successfully"}catch(e){s.value=`Connection failed: ${e.message}`,console.error("Firebase initialization error:",e)}window.addEventListener("online",()=>{a.value=!0,console.log("Network: Online"),K("online")}),window.addEventListener("offline",()=>{a.value=!1,console.log("Network: Offline")});try{"1"===localStorage.getItem("ws-firestore-offline")&&(await vw(),c.value=!0,console.log("Persisted Firestore offline mode applied."))}catch(e){console.warn("Could not apply persisted Firestore offline mode",e)}if(R.value){await U(),u=()=>{U()};try{navigator.serviceWorker.addEventListener("controllerchange",u)}catch{}}try{const e=r.fmStatusPollingMs||15e3,t=r.fmStatusScriptName||"API - Web Sync Status",n=async()=>{try{const e=await Si.performScript(t,JSON.stringify({action:"status",what:"pendingEdits"}));let n=0;if("number"==typeof e)n=e;else if("string"==typeof e)try{const t=JSON.parse(e);n=Number((null==t?void 0:t.pendingEdits)??(null==t?void 0:t.count)??0)}catch{const t=parseInt(e,10);isNaN(t)||(n=t)}else"object"==typeof e&&e&&(n=Number(e.pendingEdits??e.count??0));(!Number.isFinite(n)||n<0)&&(n=0),r.fmPendingEdits=n,K("poll"),r.lastFmStatusAt=(new Date).toISOString()}catch{}};n(),l=setInterval(n,e)}catch{}}),En(()=>{if(l&&(clearInterval(l),l=null),R.value&&u){try{navigator.serviceWorker.removeEventListener("controllerchange",u)}catch{}u=null}});const G=async()=>{try{await vw(),c.value=!0,localStorage.setItem("ws-firestore-offline","1")}catch(e){console.error("Failed to disable Firestore network",e)}},W=async()=>{try{await async function(){lw&&(await qv(lw),console.log("Firestore network enabled (online mode)."))}(),c.value=!1,localStorage.setItem("ws-firestore-offline","0")}catch(e){console.error("Failed to enable Firestore network",e)}},Q=async()=>{console.log("Quick Action: Open WebSync Config");try{await Si.performScript("Open WebSync Config",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("WebSync Config script error:",e)}},J=async()=>{console.log("Quick Action: Open WebSync Edits");try{await Si.performScript("Open Edits",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("WebSync Edits script error:",e)}},Y=async()=>{console.log("Quick Action: Run Sync Now");try{await Si.performScript("Start Sync",JSON.stringify({source:"WebApp"}),{fireAndForget:!0})}catch(e){console.error("Run Sync script error:",e)}};return(e,t)=>{const n=kn("font-awesome-icon");return $r(),Wr(Lr,null,[Xr("div",ww,[Xr("nav",xw,[Xr("div",Sw,[Xr("div",Ew,[Xr("div",_w,[Xr("div",Iw,[Xr("div",Cw,[Zr(n,{icon:["fas","arrows-rotate"],class:H([Ct(r).isProcessing?"animate-spin":"","text-white text-lg"])},null,8,["class"])]),t[8]||(t[8]=Xr("div",null,[Xr("h1",{class:"text-lg font-bold text-white"},"WebSync"),Xr("p",{class:"text-xs text-gray-400"},"Dashboard")],-1))])]),Xr("div",Tw,[Xr("div",kw,[Xr("div",{class:H([{"bg-green-500":"connected"===_.value,"bg-red-500":"error"===_.value||"offline"===_.value,"bg-yellow-500":"connecting"===_.value},"w-3 h-3 rounded-full"])},null,2),Xr("span",Aw,X("connected"===_.value?"Connected":"offline"===_.value?"Offline":"error"===_.value?"Error":"Connecting"),1)]),"idle"!==I.value?($r(),Wr("div",Dw,[Xr("div",{class:H([{"bg-blue-500":"processing"===I.value,"bg-purple-500":"syncing"===I.value,"bg-gray-500":"idle"===I.value},"w-3 h-3 rounded-full"])},null,2),Xr("span",Nw,X(I.value),1)])):rs("",!0),Xr("div",{class:"hidden md:flex items-center space-x-2"},[Xr("button",{onClick:Q,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Config",title:"Open WebSync Config"},t[9]||(t[9]=[Xr("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Xr("path",{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Xr("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Xr("span",{class:"text-xs font-medium"},"webSync Config",-1)])),Xr("button",{onClick:J,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-700/70 bg-transparent hover:bg-gray-700/40 text-gray-300 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500","aria-label":"Open WebSync Edits",title:"Open WebSync Edits"},t[10]||(t[10]=[ns('<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-bea940fa><path d="M8 6h13" data-v-bea940fa></path><path d="M8 12h13" data-v-bea940fa></path><path d="M8 18h13" data-v-bea940fa></path><path d="M3 6h.01" data-v-bea940fa></path><path d="M3 12h.01" data-v-bea940fa></path><path d="M3 18h.01" data-v-bea940fa></path></svg><span class="text-xs font-medium" data-v-bea940fa>WebSync Edits</span>',2)]))]),Xr("button",{onClick:t[0]||(t[0]=e=>i.value=!i.value),class:"p-3 text-gray-400 hover:text-white hover:bg-gray-700 rounded-xl transition-colors",title:"Debug Controls"},t[11]||(t[11]=[Xr("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),Xr("button",{onClick:Y,class:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","aria-label":"Run Sync",title:"Run Sync"},t[12]||(t[12]=[Xr("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Xr("path",{d:"M21 12a9 9 0 10-6.219 8.56"}),Xr("path",{d:"M22 12l-3-3-3 3"})],-1),Xr("span",{class:"text-xs"},"Sync",-1)]))])])])]),Xr("div",Ow,[Xr("div",Pw,[Xr("div",Mw,[Xr("div",Rw,[t[18]||(t[18]=ns('<div class="flex items-center justify-between mb-4" data-v-bea940fa><div class="flex items-center space-x-2" data-v-bea940fa><div class="p-2 bg-indigo-600 bg-opacity-20 rounded-lg" data-v-bea940fa><svg class="w-5 h-5 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bea940fa><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-bea940fa></path></svg></div><div data-v-bea940fa><h2 class="text-lg font-bold text-white" data-v-bea940fa>Device</h2><p class="text-xs text-gray-400" data-v-bea940fa>Configuration</p></div></div></div>',1)),Xr("div",Fw,[Xr("div",Lw,[t[13]||(t[13]=Xr("span",{class:"text-gray-400 shrink-0"},"Device:",-1)),Xr("span",Uw,X(Ct(r).device.id),1)]),Xr("div",Vw,[t[14]||(t[14]=Xr("span",{class:"text-gray-400 shrink-0"},"Mode:",-1)),Xr("span",Bw,X(Ct(r).device.deviceMode),1)]),Xr("div",jw,[t[15]||(t[15]=Xr("span",{class:"text-gray-400 shrink-0"},"Org:",-1)),Xr("span",zw,X(Ct(r).organization.id),1)]),Xr("div",$w,[t[16]||(t[16]=Xr("span",{class:"text-gray-400 shrink-0"},"Contexts:",-1)),Xr("span",qw,X(Ct(r).device.contexts.length),1)]),Xr("div",Gw,[t[17]||(t[17]=Xr("span",{class:"text-gray-400 shrink-0"},"Version:",-1)),Xr("span",Kw,X(Ct(h)),1)])])]),Xr("div",Ww,[t[25]||(t[25]=ns('<div class="flex items-center justify-between mb-4" data-v-bea940fa><div class="flex items-center space-x-3" data-v-bea940fa><div class="p-2 bg-blue-600 bg-opacity-20 rounded-lg" data-v-bea940fa><svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bea940fa><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-bea940fa></path></svg></div><div data-v-bea940fa><div class="flex items-center gap-2" data-v-bea940fa><h2 class="text-lg font-bold text-white" data-v-bea940fa>Data Uploads</h2><span class="px-2 py-1 bg-blue-600 bg-opacity-20 rounded-full text-xs font-semibold text-blue-400 uppercase tracking-wide" data-v-bea940fa>EDITS</span></div><p class="text-xs text-gray-400" data-v-bea940fa>Local to WebSync</p></div></div></div>',1)),Xr("div",Hw,[Xr("p",Qw,X(a.value?y.value?"Uploading Edits":Ct(r).editsStates[Ct(r).editsCurrentState]:"Waiting for connectivity  uploads will resume automatically"),1)]),Xr("div",Jw,[Xr("div",Yw,[t[19]||(t[19]=Xr("span",{class:"shrink-0"},"FM pending edits",-1)),Xr("span",Xw,X(Ct(r).fmPendingEdits),1)]),Xr("div",Zw,[t[20]||(t[20]=Xr("span",{class:"shrink-0"},"Local unsynced",-1)),Xr("span",ex,X(Ct(r).editsLocalPendingWrites),1)]),Xr("div",tx,[t[21]||(t[21]=Xr("span",{class:"shrink-0"},"Uploaded (session)",-1)),Xr("span",nx,X(S.value)+" / "+X(x.value),1)])]),Ct(r).editsTotal||Ct(r).editsContainersTotal?($r(),Wr("div",rx,[y.value?($r(),Wr("div",sx,[Xr("div",ix,[t[22]||(t[22]=Xr("span",{class:"text-gray-300 text-sm"},"Edits Upload Progress",-1)),Xr("span",ox,X(b.value)+"%",1)]),Xr("div",ax,[Xr("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:$(`width: ${Math.min(b.value,100)}%`)},null,4)]),Xr("div",cx,[Xr("span",null,X(v.value)+" completed",1),Xr("span",null,X(y.value)+" total",1)])])):rs("",!0),Ct(r).editsContainersTotal?($r(),Wr("div",lx,[Xr("div",ux,[t[23]||(t[23]=Xr("span",{class:"text-gray-300 text-sm"},"Container Upload Progress",-1)),Xr("span",hx,X(p.value)+"%",1)]),Xr("div",dx,[Xr("div",{class:"bg-gradient-to-r from-blue-500 to-blue-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:$(`width: ${Math.min(p.value,100)}%`)},null,4)]),Xr("div",fx,[Xr("span",null,X(Ct(r).editsContainersComplete)+" completed",1),Xr("span",null,X(Ct(r).editsContainersTotal)+" total",1)])])):rs("",!0)])):($r(),Wr("div",px,t[24]||(t[24]=[Xr("svg",{class:"w-8 h-8 mx-auto mb-2 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Xr("p",{class:"text-sm"},"No pending uploads",-1),Xr("p",{class:"text-xs text-gray-400 invisible"},"placeholder",-1)])))]),Xr("div",gx,[t[30]||(t[30]=ns('<div class="flex items-center justify-between mb-4" data-v-bea940fa><div class="flex items-center space-x-3" data-v-bea940fa><div class="p-2 bg-green-600 bg-opacity-20 rounded-lg" data-v-bea940fa><svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bea940fa><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-bea940fa></path></svg></div><div data-v-bea940fa><div class="flex items-center gap-2" data-v-bea940fa><h2 class="text-lg font-bold text-white" data-v-bea940fa>Data Downloads</h2><span class="px-2 py-1 bg-green-600 bg-opacity-20 rounded-full text-xs font-semibold text-green-400 uppercase tracking-wide" data-v-bea940fa>UPDATES</span></div><p class="text-xs text-gray-400" data-v-bea940fa>WebSync to Local</p></div></div></div>',1)),Xr("div",mx,[Xr("p",yx,X(Ct(r).updatesTotal?"Receiving Updates":"No New Updates"),1)]),t[31]||(t[31]=ns('<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 text-xs mb-2" data-v-bea940fa><div class="flex items-center justify-between gap-2 text-gray-400" data-v-bea940fa><span class="shrink-0" data-v-bea940fa>FM pending edits</span><span class="text-white font-medium" data-v-bea940fa>0</span></div><div class="flex items-center justify-between gap-2 text-gray-400" data-v-bea940fa><span class="shrink-0" data-v-bea940fa>Local unsynced</span><span class="text-white font-medium" data-v-bea940fa>0</span></div><div class="flex items-center justify-between gap-2 text-gray-400" data-v-bea940fa><span class="shrink-0" data-v-bea940fa>Uploaded (session)</span><span class="text-white font-medium" data-v-bea940fa>0 / 0</span></div></div>',1)),Ct(r).updatesTotal?($r(),Wr("div",vx,[Xr("div",bx,[Xr("div",wx,[t[26]||(t[26]=Xr("span",{class:"text-gray-300 text-sm"},"Download Progress",-1)),Xr("span",xx,X(g.value)+"%",1)]),Xr("div",Sx,[Xr("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:$(`width: ${Math.min(g.value,100)}%`)},null,4)]),Xr("div",Ex,[Xr("span",null,X(Ct(r).updatesTotalCompleted)+" completed",1),Xr("span",null,X(Ct(r).updatesTotal)+" total",1)])]),Ct(r).updateTotalContainers?($r(),Wr("div",_x,[Xr("div",Ix,[t[27]||(t[27]=Xr("span",{class:"text-gray-300 text-sm"},"Container Downloads",-1)),Xr("span",Cx,X(m.value)+"%",1)]),Xr("div",Tx,[Xr("div",{class:"bg-gradient-to-r from-green-500 to-green-400 h-1.5 rounded-full transition-all duration-700 ease-out",style:$(`width: ${Math.min(m.value,100)}%`)},null,4)]),Xr("div",kx,[Xr("span",null,X(Ct(r).updateCompletedContainers)+" completed",1),Xr("span",null,X(Ct(r).updateTotalContainers)+" total",1)])])):rs("",!0)])):d.value?($r(),Wr("div",Ax,t[28]||(t[28]=[Xr("svg",{class:"w-8 h-8 mx-auto mb-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Xr("p",{class:"text-green-400 font-semibold text-sm"},"System Up to Date",-1),Xr("p",{class:"text-xs text-gray-400"},"All data synchronized",-1)]))):($r(),Wr("div",Dx,t[29]||(t[29]=[Xr("p",{class:"text-xs invisible"},"placeholder",-1)])))])])])]),i.value?($r(),Wr("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:t[5]||(t[5]=e=>i.value=!1)},[Xr("div",{class:"bg-gray-800 border border-gray-700 rounded-2xl p-8 w-full max-w-lg my-8",onClick:t[4]||(t[4]=Ys(()=>{},["stop"]))},[Xr("div",Nx,[t[33]||(t[33]=Xr("h3",{class:"text-xl font-bold text-white"},"Developer Debugging Controls",-1)),Xr("button",{onClick:t[1]||(t[1]=e=>i.value=!1),class:"text-gray-400 hover:text-white"},t[32]||(t[32]=[Xr("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Xr("div",Ox,[t[35]||(t[35]=Xr("h4",{class:"text-sm font-semibold text-white mb-4"},"Firestore Network",-1)),Xr("div",Px,[t[34]||(t[34]=Xr("span",{class:"text-gray-400"},"Mode:",-1)),Xr("span",{class:H([c.value?"text-red-400":"text-green-400","font-semibold"])},X(c.value?"Offline (network disabled)":"Online"),3)]),Xr("div",{class:"grid grid-cols-2 gap-4"},[Xr("button",{onClick:G,class:"bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Go Offline "),Xr("button",{onClick:W,class:"bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-xl font-medium transition-colors"}," Go Online ")])]),Xr("div",Mx,[t[37]||(t[37]=Xr("h4",{class:"text-sm font-semibold text-white mb-4"},"Service Worker",-1)),Xr("div",Rx,[t[36]||(t[36]=Xr("span",{class:"text-gray-400"},"Status:",-1)),Xr("span",{class:H(["font-semibold",q.value])},X(z.value),3)]),Xr("p",Fx,X(P.value),1),Xr("div",Lx,[Xr("button",{onClick:U,class:"flex-1 min-w-[150px] bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-xl font-medium transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!R.value||F.value},X(F.value?"Checking...":"Refresh Status"),9,Ux),Xr("button",{onClick:j,class:"flex-1 min-w-[150px] bg-indigo-600 hover:bg-indigo-500 text-white py-2 px-4 rounded-xl font-medium transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!R.value||B.value},X(B.value?"Updating":"Force Update + Reload"),9,Vx),Xr("button",{onClick:V,class:"flex-1 min-w-[150px] bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-xl font-medium transition-colors disabled:opacity-40 disabled:cursor-not-allowed",disabled:!R.value||L.value},X(L.value?"Clearing":"Clear + Reload"),9,Bx)])]),Xr("div",jx,[t[40]||(t[40]=Xr("h4",{class:"text-sm font-semibold text-white mb-4"},"Upload Settings",-1)),Xr("div",zx,[t[39]||(t[39]=Xr("span",{class:"text-gray-400",title:"When enabled, new FileMaker edits are auto-imported to local Firestore when online; if offline, they import on reconnect."},"Auto pull edits to local",-1)),Xr("label",$x,[Xr("input",{type:"checkbox",checked:Ct(r).configx.autoPullEdits,onChange:t[2]||(t[2]=e=>{Ct(r).setAutoPullEdits(e.target.checked),e.target.checked&&K("toggle")}),class:"w-5 h-5 rounded border-gray-600 bg-gray-700"},null,40,qx),t[38]||(t[38]=Xr("span",{class:"text-xs text-gray-400"},"URL param overrides and is saved",-1))])])]),Xr("div",Gx,[t[43]||(t[43]=Xr("h4",{class:"text-sm font-semibold text-white mb-4"},"Console Logging",-1)),Xr("div",Kx,[t[42]||(t[42]=Xr("span",{class:"text-gray-400"},"Persist log capture for in-app inspection",-1)),Xr("label",Wx,[Xr("input",{type:"checkbox",checked:Ct(r).devLoggingEnabled,onChange:t[3]||(t[3]=e=>C(e.target.checked)),class:"w-5 h-5 rounded border-gray-600 bg-gray-700"},null,40,Hx),t[41]||(t[41]=Xr("span",{class:"text-xs text-gray-400"},"Persists until disabled",-1))])]),Xr("div",Qx,[Xr("button",{onClick:T,class:"flex-1 min-w-[140px] bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-xl font-medium transition-colors"}," View Logs ("+X(Ct(r).devLogs.length)+") ",1),Xr("button",{onClick:A,class:"flex-1 min-w-[140px] bg-gray-800 hover:bg-gray-700 text-gray-200 py-2 px-4 rounded-xl font-medium transition-colors border border-gray-600 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!Ct(r).devLogs.length}," Clear Logs ",8,Jx)]),Ct(r).devLogs.length?($r(),Wr("p",Yx," Turning logging off clears captured entries automatically. ")):rs("",!0)])])])):rs("",!0)]),o.value?($r(),Wr("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-start justify-center p-4 overflow-y-auto",onClick:k},[Xr("div",{class:"bg-gray-900 border border-gray-700 rounded-2xl p-6 w-full max-w-3xl my-8 shadow-2xl",onClick:t[7]||(t[7]=Ys(()=>{},["stop"]))},[Xr("div",Xx,[Xr("div",null,[t[44]||(t[44]=Xr("h3",{class:"text-xl font-bold text-white"},"Console Log Viewer",-1)),Xr("p",Zx," Logging is "+X(Ct(r).devLoggingEnabled?"enabled":"disabled")+"  entries clear when logging is turned off. ",1)]),Xr("button",{onClick:k,class:"text-gray-400 hover:text-white"},t[45]||(t[45]=[Xr("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[Xr("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Xr("div",eS,[Xr("span",tS,X(Ct(r).devLogs.length)+" entries captured this session",1),Xr("div",nS,[Xr("button",{onClick:A,class:"px-4 py-2 rounded-xl border border-gray-600 text-gray-200 text-sm hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!Ct(r).devLogs.length}," Clear Logs ",8,rS),Xr("button",{onClick:t[6]||(t[6]=e=>C(!Ct(r).devLoggingEnabled)),class:H(["px-4 py-2 rounded-xl text-sm font-medium",Ct(r).devLoggingEnabled?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"])},X(Ct(r).devLoggingEnabled?"Disable Logging":"Enable Logging"),3)])]),Xr("div",sS,[Ct(r).devLogs.length?($r(!0),Wr(Lr,{key:0},Nn(Ct(r).devLogs,e=>($r(),Wr("div",{key:e.id,class:"px-4 py-3 space-y-2"},[Xr("div",iS,[Xr("span",oS,X(N(e.timestamp)),1),Xr("span",{class:H(["px-2 py-0.5 rounded-full text-xs font-semibold tracking-wide uppercase",D(e.level)])},X(e.level),3)]),Xr("p",aS,X(e.message),1)]))),128)):($r(),Wr("div",cS," No logs captured yet. Enable logging in the debug controls to start collecting entries. "))])])])):rs("",!0)],64)}}});function uS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(n),!0).forEach(function(t){uS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const fS=()=>{};let pS={},gS={},mS=null,yS={mark:fS,measure:fS};try{"undefined"!=typeof window&&(pS=window),"undefined"!=typeof document&&(gS=document),"undefined"!=typeof MutationObserver&&(mS=MutationObserver),"undefined"!=typeof performance&&(yS=performance)}catch(e){}const{userAgent:vS=""}=pS.navigator||{},bS=pS,wS=gS,xS=mS,SS=yS;bS.document;const ES=!!wS.documentElement&&!!wS.head&&"function"==typeof wS.addEventListener&&"function"==typeof wS.createElement,_S=~vS.indexOf("MSIE")||~vS.indexOf("Trident/");var IS={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},CS=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],TS="classic",kS="duotone",AS=[TS,kS,"sharp","sharp-duotone"],DS=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),NS=["fak","fa-kit","fakd","fa-kit-duotone"],OS={fak:"kit","fa-kit":"kit"},PS={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},MS=["fak","fakd"],RS={kit:"fak"},FS={"kit-duotone":"fakd"},LS={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},US=["fak","fa-kit","fakd","fa-kit-duotone"],VS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},BS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],jS=[1,2,3,4,5,6,7,8,9,10],zS=jS.concat([11,12,13,14,15,16,17,18,19,20]),$S=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",LS.GROUP,LS.SWAP_OPACITY,LS.PRIMARY,LS.SECONDARY].concat(jS.map(e=>"".concat(e,"x"))).concat(zS.map(e=>"w-".concat(e)));const qS="___FONT_AWESOME___",GS=16,KS="svg-inline--fa",WS="data-fa-i2svg",HS="data-fa-pseudo-element",QS="data-prefix",JS="data-icon",YS="fontawesome-i2svg",XS=["HTML","HEAD","STYLE","SCRIPT"],ZS=(()=>{try{return!0}catch(e){return!1}})();function eE(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[TS]})}const tE=dS({},IS);tE[TS]=dS(dS(dS(dS({},{"fa-duotone":"duotone"}),IS[TS]),OS),PS);const nE=eE(tE),rE=dS({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});rE[TS]=dS(dS(dS(dS({},{duotone:"fad"}),rE[TS]),RS),FS);const sE=eE(rE),iE=dS({},VS);iE[TS]=dS(dS({},iE[TS]),{fak:"fa-kit"});const oE=eE(iE),aE=dS({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});aE[TS]=dS(dS({},aE[TS]),{"fa-kit":"fak"}),eE(aE);const cE=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,lE="fa-layers-text",uE=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i;eE(dS({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}}));const hE=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],dE={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},fE=["kit",...$S],pE=bS.FontAwesomeConfig||{};wS&&"function"==typeof wS.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=wS.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));null!=r&&(pE[n]=r)});const gE={styleDefault:"solid",familyDefault:TS,cssPrefix:"fa",replacementClass:KS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};pE.familyPrefix&&(pE.cssPrefix=pE.familyPrefix);const mE=dS(dS({},gE),pE);mE.autoReplaceSvg||(mE.observeMutations=!1);const yE={};Object.keys(gE).forEach(e=>{Object.defineProperty(yE,e,{enumerable:!0,set:function(t){mE[e]=t,vE.forEach(e=>e(yE))},get:function(){return mE[e]}})}),Object.defineProperty(yE,"familyPrefix",{enumerable:!0,set:function(e){mE.cssPrefix=e,vE.forEach(e=>e(yE))},get:function(){return mE.cssPrefix}}),bS.FontAwesomeConfig=yE;const vE=[],bE=GS,wE={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function xE(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function SE(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function EE(e){return e.classList?SE(e.classList):(e.getAttribute("class")||"").split(" ").filter(e=>e)}function _E(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function IE(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function CE(e){return e.size!==wE.size||e.x!==wE.x||e.y!==wE.y||e.rotate!==wE.rotate||e.flipX||e.flipY}function TE(){const e="fa",t=KS,n=yE.cssPrefix,r=yE.replacementClass;let s=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||r!==t){const i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");s=s.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return s}let kE=!1;function AE(){yE.autoAddCss&&!kE&&(function(e){if(!e||!ES)return;const t=wS.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=wS.head.childNodes;let r=null;for(let e=n.length-1;e>-1;e--){const t=n[e],s=(t.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=t)}wS.head.insertBefore(t,r)}(TE()),kE=!0)}var DE={mixout:()=>({dom:{css:TE,insertCss:AE}}),hooks:()=>({beforeDOMElementCreation(){AE()},beforeI2svg(){AE()}})};const NE=bS||{};NE[qS]||(NE[qS]={}),NE[qS].styles||(NE[qS].styles={}),NE[qS].hooks||(NE[qS].hooks={}),NE[qS].shims||(NE[qS].shims=[]);var OE=NE[qS];const PE=[],ME=function(){wS.removeEventListener("DOMContentLoaded",ME),RE=1,PE.map(e=>e())};let RE=!1;function FE(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"==typeof e?_E(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(_E(e[n]),'" '),"").trim()}(n),">").concat(r.map(FE).join(""),"</").concat(t,">")}function LE(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}ES&&(RE=(wS.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(wS.readyState),RE||wS.addEventListener("DOMContentLoaded",ME));var UE=function(e,t,n,r){var s,i,o,a=Object.keys(e),c=a.length,l=t;for(void 0===n?(s=1,o=e[a[0]]):(s=0,o=n);s<c;s++)o=l(o,e[i=a[s]],i,e);return o};function VE(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t}(e);return 1===t.length?t[0].toString(16):null}function BE(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function jE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,s=BE(t);"function"!=typeof OE.hooks.addPack||r?OE.styles[e]=dS(dS({},OE.styles[e]||{}),s):OE.hooks.addPack(e,BE(t)),"fas"===e&&jE("fa",t)}const{styles:zE,shims:$E}=OE,qE=Object.keys(oE),GE=qE.reduce((e,t)=>(e[t]=Object.keys(oE[t]),e),{});let KE=null,WE={},HE={},QE={},JE={},YE={};function XE(e,t){const n=t.split("-"),r=n[0],s=n.slice(1).join("-");return r!==e||""===s||(i=s,~fE.indexOf(i))?null:s;var i}const ZE=()=>{const e=e=>UE(zE,(t,n,r)=>(t[r]=UE(n,e,{}),t),{});WE=e((e,t,n)=>(t[3]&&(e[t[3]]=n),t[2]&&t[2].filter(e=>"number"==typeof e).forEach(t=>{e[t.toString(16)]=n}),e)),HE=e((e,t,n)=>(e[n]=n,t[2]&&t[2].filter(e=>"string"==typeof e).forEach(t=>{e[t]=n}),e)),YE=e((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach(t=>{e[t]=n}),e});const t="far"in zE||yE.autoFetchSvg,n=UE($E,(e,n)=>{const r=n[0];let s=n[1];const i=n[2];return"far"!==s||t||(s="fas"),"string"==typeof r&&(e.names[r]={prefix:s,iconName:i}),"number"==typeof r&&(e.unicodes[r.toString(16)]={prefix:s,iconName:i}),e},{names:{},unicodes:{}});QE=n.names,JE=n.unicodes,KE=i_(yE.styleDefault,{family:yE.familyDefault})};var e_;function t_(e,t){return(WE[e]||{})[t]}function n_(e,t){return(YE[e]||{})[t]}function r_(e){return QE[e]||{prefix:null,iconName:null}}function s_(){return KE}function i_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=TS}=t,r=nE[n][e];if(n===kS&&!e)return"fad";const s=sE[n][e]||sE[n][r],i=e in OE.styles?e:null;return s||i||null}function o_(e){return e.sort().filter((e,t,n)=>n.indexOf(e)===t)}function a_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const s=BS.concat(US),i=o_(e.filter(e=>s.includes(e))),o=o_(e.filter(e=>!BS.includes(e))),a=i.filter(e=>(r=e,!CS.includes(e))),[c=null]=a,l=function(e){let t=TS;const n=qE.reduce((e,t)=>(e[t]="".concat(yE.cssPrefix,"-").concat(t),e),{});return AS.forEach(r=>{(e.includes(n[r])||e.some(e=>GE[r].includes(e)))&&(t=r)}),t}(i),u=dS(dS({},function(e){let t=[],n=null;return e.forEach(e=>{const r=XE(yE.cssPrefix,e);r?n=r:e&&t.push(e)}),{iconName:n,rest:t}}(o)),{},{prefix:i_(c,{family:l})});return dS(dS(dS({},u),function(e){const{values:t,family:n,canonical:r,givenPrefix:s="",styles:i={},config:o={}}=e,a=n===kS,c=t.includes("fa-duotone")||t.includes("fad"),l="duotone"===o.familyDefault,u="fad"===r.prefix||"fa-duotone"===r.prefix;if(!a&&(c||l||u)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&c_.includes(n)&&(Object.keys(i).find(e=>l_.includes(e))||o.autoFetchSvg)){const e=DS.get(n).defaultShortPrefixId;r.prefix=e,r.iconName=n_(r.prefix,r.iconName)||r.iconName}return"fa"!==r.prefix&&"fa"!==s||(r.prefix=s_()||"fas"),r}({values:e,family:l,styles:zE,config:yE,canonical:u,givenPrefix:r})),function(e,t,n){let{prefix:r,iconName:s}=n;if(e||!r||!s)return{prefix:r,iconName:s};const i="fa"===t?r_(s):{},o=n_(r,s);return s=i.iconName||o||s,r=i.prefix||r,"far"!==r||zE.far||!zE.fas||yE.autoFetchSvg||(r="fas"),{prefix:r,iconName:s}}(n,r,u))}e_=e=>{KE=i_(e.styleDefault,{family:yE.familyDefault})},vE.push(e_),ZE();const c_=AS.filter(e=>e!==TS||e!==kS),l_=Object.keys(VS).filter(e=>e!==TS).map(e=>Object.keys(VS[e])).flat();let u_=[],h_={};const d_={},f_=Object.keys(d_);function p_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(h_[e]||[]).forEach(e=>{t=e.apply(null,[t,...r])}),t}function g_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(h_[e]||[]).forEach(e=>{e.apply(null,n)})}function m_(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return d_[e]?d_[e].apply(null,t):void 0}function y_(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||s_();if(t)return t=n_(n,t)||t,LE(v_.definitions,n,t)||LE(OE.styles,n,t)}const v_=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach(e=>{this.definitions[e]=dS(dS({},this.definitions[e]||{}),r[e]),jE(e,r[e]);const t=oE[TS][e];t&&jE(t,r[e]),ZE()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(t=>{const{prefix:r,iconName:s,icon:i}=n[t],o=i[2];e[r]||(e[r]={}),o.length>0&&o.forEach(t=>{"string"==typeof t&&(e[r][t]=i)}),e[r][s]=i}),e}},b_={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ES?(g_("beforeI2svg",e),m_("pseudoElements2svg",e),m_("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===yE.autoReplaceSvg&&(yE.autoReplaceSvg=!0),yE.observeMutations=!0,n=()=>{x_({autoReplaceSvgRoot:t}),g_("watch",e)},ES&&(RE?setTimeout(n,0):PE.push(n))}},w_={noAuto:()=>{yE.autoReplaceSvg=!1,yE.observeMutations=!1,g_("noAuto")},config:yE,dom:b_,parse:{icon:e=>{if(null===e)return null;if("object"==typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:n_(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=i_(e[0]);return{prefix:n,iconName:n_(n,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(yE.cssPrefix,"-"))>-1||e.match(cE))){const t=a_(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||s_(),iconName:n_(t.prefix,t.iconName)||t.iconName}}if("string"==typeof e){const t=s_();return{prefix:t,iconName:n_(t,e)||e}}}},library:v_,findIconDefinition:y_,toHtml:FE},x_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=wS}=e;(Object.keys(OE.styles).length>0||yE.autoFetchSvg)&&ES&&yE.autoReplaceSvg&&w_.dom.i2svg({node:t})};function S_(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(e=>FE(e))}}),Object.defineProperty(e,"node",{get:function(){if(!ES)return;const t=wS.createElement("div");return t.innerHTML=e.html,t.children}}),e}function E_(e){const{icons:{main:t,mask:n},prefix:r,iconName:s,transform:i,symbol:o,title:a,maskId:c,titleId:l,extra:u,watchable:h=!1}=e,{width:d,height:f}=n.found?n:t,p=MS.includes(r),g=[yE.replacementClass,s?"".concat(yE.cssPrefix,"-").concat(s):""].filter(e=>-1===u.classes.indexOf(e)).filter(e=>""!==e||!!e).concat(u.classes).join(" ");let m={children:[],attributes:dS(dS({},u.attributes),{},{"data-prefix":r,"data-icon":s,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(d," ").concat(f)})};const y=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(d/f*16*.0625,"em")}:{};h&&(m.attributes[WS]=""),a&&(m.children.push({tag:"title",attributes:{id:m.attributes["aria-labelledby"]||"title-".concat(l||xE())},children:[a]}),delete m.attributes.title);const v=dS(dS({},m),{},{prefix:r,iconName:s,main:t,mask:n,maskId:c,transform:i,symbol:o,styles:dS(dS({},y),u.styles)}),{children:b,attributes:w}=n.found&&t.found?m_("generateAbstractMask",v)||{children:[],attributes:{}}:m_("generateAbstractIcon",v)||{children:[],attributes:{}};return v.children=b,v.attributes=w,o?function(e){let{prefix:t,iconName:n,children:r,attributes:s,symbol:i}=e;const o=!0===i?"".concat(t,"-").concat(yE.cssPrefix,"-").concat(n):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:dS(dS({},s),{},{id:o}),children:r}]}]}(v):function(e){let{children:t,main:n,mask:r,attributes:s,styles:i,transform:o}=e;if(CE(o)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};s.style=IE(dS(dS({},i),{},{"transform-origin":"".concat(r.x+o.x/16,"em ").concat(r.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}(v)}function __(e){const{content:t,width:n,height:r,transform:s,title:i,extra:o,watchable:a=!1}=e,c=dS(dS(dS({},o.attributes),i?{title:i}:{}),{},{class:o.classes.join(" ")});a&&(c[WS]="");const l=dS({},o.styles);CE(s)&&(l.transform=function(e){let{transform:t,width:n=GS,height:r=GS,startCentered:s=!1}=e,i="";return i+=s&&_S?"translate(".concat(t.x/bE-n/2,"em, ").concat(t.y/bE-r/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/bE,"em), calc(-50% + ").concat(t.y/bE,"em)) "):"translate(".concat(t.x/bE,"em, ").concat(t.y/bE,"em) "),i+="scale(".concat(t.size/bE*(t.flipX?-1:1),", ").concat(t.size/bE*(t.flipY?-1:1),") "),i+="rotate(".concat(t.rotate,"deg) "),i}({transform:s,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);const u=IE(l);u.length>0&&(c.style=u);const h=[];return h.push({tag:"span",attributes:c,children:[t]}),i&&h.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),h}const{styles:I_}=OE;function C_(e){const t=e[0],n=e[1],[r]=e.slice(4);let s=null;return s=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(yE.cssPrefix,"-").concat(dE.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yE.cssPrefix,"-").concat(dE.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(yE.cssPrefix,"-").concat(dE.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:s}}const T_={found:!1,width:512,height:512};function k_(e,t){let n=t;return"fa"===t&&null!==yE.styleDefault&&(t=s_()),new Promise((r,s)=>{if("fa"===n){const n=r_(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&I_[t]&&I_[t][e])return r(C_(I_[t][e]));!function(e,t){ZS||yE.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(dS(dS({},T_),{},{icon:yE.showMissingIcons&&e&&m_("missingIconAbstract")||{}}))})}const A_=()=>{},D_=yE.measurePerformance&&SS&&SS.mark&&SS.measure?SS:{mark:A_,measure:A_},N_='FA "6.7.2"',O_=e=>{D_.mark("".concat(N_," ").concat(e," ends")),D_.measure("".concat(N_," ").concat(e),"".concat(N_," ").concat(e," begins"),"".concat(N_," ").concat(e," ends"))};var P_=e=>(D_.mark("".concat(N_," ").concat(e," begins")),()=>O_(e));const M_=()=>{};function R_(e){return"string"==typeof(e.getAttribute?e.getAttribute(WS):null)}function F_(e){return wS.createElementNS("http://www.w3.org/2000/svg",e)}function L_(e){return wS.createElement(e)}function U_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?F_:L_)}=t;if("string"==typeof e)return wS.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(t){r.setAttribute(t,e.attributes[t])}),(e.children||[]).forEach(function(e){r.appendChild(U_(e,{ceFn:n}))}),r}const V_={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(e=>{t.parentNode.insertBefore(U_(e),t)}),null===t.getAttribute(WS)&&yE.keepOriginalSource){let e=wS.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~EE(t).indexOf(yE.replacementClass))return V_.replace(e);const r=new RegExp("".concat(yE.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce((e,t)=>(t===yE.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const s=n.map(e=>FE(e)).join("\n");t.setAttribute(WS,""),t.innerHTML=s}};function B_(e){e()}function j_(e,t){const n="function"==typeof t?t:M_;if(0===e.length)n();else{let t=B_;"async"===yE.mutateApproach&&(t=bS.requestAnimationFrame||B_),t(()=>{const t=!0===yE.autoReplaceSvg?V_.replace:V_[yE.autoReplaceSvg]||V_.replace,r=P_("mutate");e.map(t),r(),n()})}}let z_=!1;function $_(){z_=!0}function q_(){z_=!1}let G_=null;function K_(e){if(!xS)return;if(!yE.observeMutations)return;const{treeCallback:t=M_,nodeCallback:n=M_,pseudoElementsCallback:r=M_,observeMutationsRoot:s=wS}=e;G_=new xS(e=>{if(z_)return;const s=s_();SE(e).forEach(e=>{if("childList"===e.type&&e.addedNodes.length>0&&!R_(e.addedNodes[0])&&(yE.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&yE.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&R_(e.target)&&~hE.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(QS):null,n=e.getAttribute?e.getAttribute(JS):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=a_(EE(e.target));e.target.setAttribute(QS,t||s),n&&e.target.setAttribute(JS,n)}else(i=e.target)&&i.classList&&i.classList.contains&&i.classList.contains(yE.replacementClass)&&n(e.target);var i})}),ES&&G_.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function W_(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let s=a_(EE(e));return s.prefix||(s.prefix=s_()),t&&n&&(s.prefix=t,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=(i=s.prefix,o=e.innerText,(HE[i]||{})[o]||t_(s.prefix,VE(e.innerText)))),!s.iconName&&yE.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=e.firstChild.data)),s;var i,o}function H_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=W_(e),i=function(e){const t=SE(e.attributes).reduce((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return yE.autoA11y&&(n?t["aria-labelledby"]="".concat(yE.replacementClass,"-title-").concat(r||xE()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),o=p_("parseNodeAttributes",{},e);let a=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((e,t)=>{const n=t.split(":"),r=n[0],s=n.slice(1);return r&&s.length>0&&(e[r]=s.join(":").trim()),e},{})),n}(e):[];return dS({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:wE,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:a,attributes:i}},o)}const{styles:Q_}=OE;function J_(e){const t="nest"===yE.autoReplaceSvg?H_(e,{styleParser:!1}):H_(e);return~t.extra.classes.indexOf(lE)?m_("generateLayersText",e,t):m_("generateSvgReplacementMutation",e,t)}function Y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ES)return Promise.resolve();const n=wS.documentElement.classList,r=e=>n.add("".concat(YS,"-").concat(e)),s=e=>n.remove("".concat(YS,"-").concat(e)),i=yE.autoFetchSvg?[...NS,...BS]:CS.concat(Object.keys(Q_));i.includes("fa")||i.push("fa");const o=[".".concat(lE,":not([").concat(WS,"])")].concat(i.map(e=>".".concat(e,":not([").concat(WS,"])"))).join(", ");if(0===o.length)return Promise.resolve();let a=[];try{a=SE(e.querySelectorAll(o))}catch(e){}if(!(a.length>0))return Promise.resolve();r("pending"),s("complete");const c=P_("onTree"),l=a.reduce((e,t)=>{try{const n=J_(t);n&&e.push(n)}catch(e){ZS||"MissingIcon"===e.name&&console.error(e)}return e},[]);return new Promise((e,n)=>{Promise.all(l).then(n=>{j_(n,()=>{r("active"),r("complete"),s("pending"),"function"==typeof t&&t(),c(),e()})}).catch(e=>{c(),n(e)})})}function X_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;J_(e).then(e=>{e&&j_([e],t)})}const Z_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=wE,symbol:r=!1,mask:s=null,maskId:i=null,title:o=null,titleId:a=null,classes:c=[],attributes:l={},styles:u={}}=t;if(!e)return;const{prefix:h,iconName:d,icon:f}=e;return S_(dS({type:"icon"},e),()=>(g_("beforeDOMElementCreation",{iconDefinition:e,params:t}),yE.autoA11y&&(o?l["aria-labelledby"]="".concat(yE.replacementClass,"-title-").concat(a||xE()):(l["aria-hidden"]="true",l.focusable="false")),E_({icons:{main:C_(f),mask:s?C_(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:d,transform:dS(dS({},wE),n),symbol:r,title:o,maskId:i,titleId:a,extra:{attributes:l,styles:u,classes:c}})))};var eI={mixout(){return{icon:(e=Z_,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:y_(t||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:y_(s||{})),e(r,dS(dS({},n),{},{mask:s}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=Y_,e.nodeCallback=X_,e)}),provides(e){e.i2svg=function(e){const{node:t=wS,callback:n=()=>{}}=e;return Y_(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:s,prefix:i,transform:o,symbol:a,mask:c,maskId:l,extra:u}=t;return new Promise((t,h)=>{Promise.all([k_(n,i),c.iconName?k_(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(c=>{let[h,d]=c;t([e,E_({icons:{main:h,mask:d},prefix:i,iconName:n,transform:o,symbol:a,maskId:l,title:r,titleId:s,extra:u,watchable:!0})])}).catch(h)})},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:s,styles:i}=e;const o=IE(i);let a;return o.length>0&&(n.style=o),CE(s)&&(a=m_("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),t.push(a||r.icon),{children:t,attributes:n}}}},tI={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return S_({type:"layer"},()=>{g_("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(e=>{Array.isArray(e)?e.map(e=>{r=r.concat(e.abstract)}):r=r.concat(e.abstract)}),[{tag:"span",attributes:{class:["".concat(yE.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}})},nI={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:i={}}=t;return S_({type:"counter",content:e},()=>(g_("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,s=dS(dS(dS({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),i=IE(r.styles);i.length>0&&(s.style=i);const o=[];return o.push({tag:"span",attributes:s,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:n,extra:{attributes:s,styles:i,classes:["".concat(yE.cssPrefix,"-layers-counter"),...r]}})))}})},rI={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=wE,title:r=null,classes:s=[],attributes:i={},styles:o={}}=t;return S_({type:"text",content:e},()=>(g_("beforeDOMElementCreation",{content:e,params:t}),__({content:e,transform:dS(dS({},wE),n),title:r,extra:{attributes:i,styles:o,classes:["".concat(yE.cssPrefix,"-layers-text"),...s]}})))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:s}=t;let i=null,o=null;if(_S){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();i=n.width/t,o=n.height/t}return yE.autoA11y&&!n&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,__({content:e.innerHTML,width:i,height:o,transform:r,title:n,extra:s,watchable:!0})])}}};const sI=new RegExp('"',"ug"),iI=[1105920,1112319],oI=dS(dS(dS(dS({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),aI=Object.keys(oI).reduce((e,t)=>(e[t.toLowerCase()]=oI[t],e),{}),cI=Object.keys(aI).reduce((e,t)=>{const n=aI[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function lI(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((r,s)=>{if(null!==e.getAttribute(n))return r();const i=SE(e.children).filter(e=>e.getAttribute(HS)===t)[0],o=bS.getComputedStyle(e,t),a=o.getPropertyValue("font-family"),c=a.match(uE),l=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(i&&!c)return e.removeChild(i),r();if(c&&"none"!==u&&""!==u){const u=o.getPropertyValue("content");let h=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(aI[n]||{})[s]||cI[n]}(a,l);const{value:d,isSecondary:f}=function(e){const t=e.replace(sI,""),n=function(e){const t=e.length;let n,r=e.charCodeAt(0);return r>=55296&&r<=56319&&t>1&&(n=e.charCodeAt(1),n>=56320&&n<=57343)?1024*(r-55296)+n-56320+65536:r}(t),r=n>=iI[0]&&n<=iI[1],s=2===t.length&&t[0]===t[1];return{value:VE(s?t[0]:t),isSecondary:r||s}}(u),p=c[0].startsWith("FontAwesome");let g=t_(h,d),m=g;if(p){const e=function(e){const t=JE[e],n=t_("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);e.iconName&&e.prefix&&(g=e.iconName,h=e.prefix)}if(!g||f||i&&i.getAttribute(QS)===h&&i.getAttribute(JS)===m)r();else{e.setAttribute(n,m),i&&e.removeChild(i);const o={iconName:null,title:null,titleId:null,prefix:null,transform:wE,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:a}=o;a.attributes[HS]=t,k_(g,h).then(s=>{const i=E_(dS(dS({},o),{},{icons:{main:s,mask:{prefix:null,iconName:null,rest:[]}},prefix:h,iconName:m,extra:a,watchable:!0})),c=wS.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(c,e.firstChild):e.appendChild(c),c.outerHTML=i.map(e=>FE(e)).join("\n"),e.removeAttribute(n),r()}).catch(s)}}else r()})}function uI(e){return Promise.all([lI(e,"::before"),lI(e,"::after")])}function hI(e){return!(e.parentNode===document.head||~XS.indexOf(e.tagName.toUpperCase())||e.getAttribute(HS)||e.parentNode&&"svg"===e.parentNode.tagName)}function dI(e){if(ES)return new Promise((t,n)=>{const r=SE(e.querySelectorAll("*")).filter(hI).map(uI),s=P_("searchPseudoElements");$_(),Promise.all(r).then(()=>{s(),q_(),t()}).catch(()=>{s(),q_(),n()})})}let fI=!1;const pI=e=>e.toLowerCase().split(" ").reduce((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let s=n.slice(1).join("-");if(r&&"h"===s)return e.flipX=!0,e;if(r&&"v"===s)return e.flipY=!0,e;if(s=parseFloat(s),isNaN(s))return e;switch(r){case"grow":e.size=e.size+s;break;case"shrink":e.size=e.size-s;break;case"left":e.x=e.x-s;break;case"right":e.x=e.x+s;break;case"up":e.y=e.y-s;break;case"down":e.y=e.y+s;break;case"rotate":e.rotate=e.rotate+s}return e},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0}),gI={x:0,y:0,width:"100%",height:"100%"};function mI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}!function(e,t){let{mixoutsTo:n}=t;u_=e,h_={},Object.keys(d_).forEach(e=>{-1===f_.indexOf(e)&&delete d_[e]}),u_.forEach(e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach(e=>{"function"==typeof t[e]&&(n[e]=t[e]),"object"==typeof t[e]&&Object.keys(t[e]).forEach(r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]})}),e.hooks){const t=e.hooks();Object.keys(t).forEach(e=>{h_[e]||(h_[e]=[]),h_[e].push(t[e])})}e.provides&&e.provides(d_)})}([DE,eI,tI,nI,rI,{hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=dI,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=wS}=e;yE.searchPseudoElements&&dI(t)}}},{mixout:()=>({dom:{unwatch(){$_(),fI=!0}}}),hooks:()=>({bootstrap(){K_(p_("mutationObserverCallbacks",{}))},noAuto(){G_&&G_.disconnect()},watch(e){const{observeMutationsRoot:t}=e;fI?q_():K_(p_("mutationObserverCallbacks",{observeMutationsRoot:t}))}})},{mixout:()=>({parse:{transform:e=>pI(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=pI(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:s}=e;const i={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),l={outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(c)},path:{transform:"translate(".concat(s/2*-1," -256)")}};return{tag:"g",attributes:dS({},l.outer),children:[{tag:"g",attributes:dS({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:dS(dS({},t.icon.attributes),l.path)}]}]}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?a_(n.split(" ").map(e=>e.trim())):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=s_()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:s,maskId:i,transform:o}=e;const{width:a,icon:c}=r,{width:l,icon:u}=s,h=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const s={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:s,inner:{transform:"".concat(i," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:o,containerWidth:l,iconWidth:a}),d={tag:"rect",attributes:dS(dS({},gI),{},{fill:"white"})},f=c.children?{children:c.children.map(mI)}:{},p={tag:"g",attributes:dS({},h.inner),children:[mI(dS({tag:c.tag,attributes:dS(dS({},c.attributes),h.path)},f))]},g={tag:"g",attributes:dS({},h.outer),children:[p]},m="mask-".concat(i||xE()),y="clip-".concat(i||xE()),v={tag:"mask",attributes:dS(dS({},gI),{},{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(w=u,"g"===w.tag?w.children:[w])},v]};var w;return t.push(b,{tag:"rect",attributes:dS({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(m,")")},gI)}),{children:t,attributes:n}}}},{provides(e){let t=!1;bS.matchMedia&&(t=bS.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:dS(dS({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=dS(dS({},r),{},{attributeName:"opacity"}),i={tag:"circle",attributes:dS(dS({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||i.children.push({tag:"animate",attributes:dS(dS({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:dS(dS({},s),{},{values:"1;0;1;1;0;1;"})}),e.push(i),e.push({tag:"path",attributes:dS(dS({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:dS(dS({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:dS(dS({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:dS(dS({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}},{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})}],{mixoutsTo:w_});const yI=w_.library,vI=w_.parse,bI=w_.icon;function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(t){_I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function SI(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function EI(e){return(EI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _I(e,t,n){return(t=SI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function II(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var CI,TI,kI,AI,DI,NI,OI,PI,MI,RI,FI,LI,UI,VI,BI,jI,zI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$I={exports:{}};CI=$I,TI=zI,kI=function(e,t,n){if(!MI(t)||FI(t)||LI(t)||UI(t)||PI(t))return t;var r,s=0,i=0;if(RI(t))for(r=[],i=t.length;s<i;s++)r.push(kI(e,t[s],n));else for(var o in r={},t)Object.prototype.hasOwnProperty.call(t,o)&&(r[e(o,n)]=kI(e,t[o],n));return r},AI=function(e){return VI(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1)},DI=function(e){var t=AI(e);return t.substr(0,1).toUpperCase()+t.substr(1)},NI=function(e,t){return function(e,t){var n=(t=t||{}).separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)}(e,t).toLowerCase()},OI=Object.prototype.toString,PI=function(e){return"function"==typeof e},MI=function(e){return e===Object(e)},RI=function(e){return"[object Array]"==OI.call(e)},FI=function(e){return"[object Date]"==OI.call(e)},LI=function(e){return"[object RegExp]"==OI.call(e)},UI=function(e){return"[object Boolean]"==OI.call(e)},VI=function(e){return(e-=0)==e},BI=function(e,t){var n=t&&"process"in t?t.process:t;return"function"!=typeof n?e:function(t,r){return n(t,e,r)}},jI={camelize:AI,decamelize:NI,pascalize:DI,depascalize:NI,camelizeKeys:function(e,t){return kI(BI(AI,t),e)},decamelizeKeys:function(e,t){return kI(BI(NI,t),e,t)},pascalizeKeys:function(e,t){return kI(BI(DI,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},CI.exports?CI.exports=jI:TI.humps=jI;var qI=$I.exports,GI=["class","style"];function KI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e)return e;var r=(e.children||[]).map(function(e){return KI(e)}),s=Object.keys(e.attributes||{}).reduce(function(t,n){var r=e.attributes[n];switch(n){case"class":t.class=r.split(/\s+/).reduce(function(e,t){return e[t]=!0,e},{});break;case"style":t.style=r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),r=qI.camelize(t.slice(0,n)),s=t.slice(n+1).trim();return e[r]=s,e},{});break;default:t.attrs[n]=r}return t},{attrs:{},class:{},style:{}});n.class;var i=n.style,o=void 0===i?{}:i,a=II(n,GI);return function(e,t,n){const r=arguments.length;return 2===r?E(t)&&!y(t)?Hr(t)?Zr(e,null,[t]):Zr(e,t):Zr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Hr(n)&&(n=[n]),Zr(e,t,n))}(e.tag,xI(xI(xI({},t),{},{class:s.class,style:xI(xI({},s.style),o)},s.attrs),a),r)}var WI=!1;try{WI=!0}catch(e){}function HI(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?_I({},e,t):{}}function QI(e){return e&&"object"===EI(e)&&e.prefix&&e.iconName&&e.icon?e:vI.icon?vI.icon(e):null===e?null:"object"===EI(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}var JI=an({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,t){var n=t.attrs,r=Ss(function(){return QI(e.icon)}),s=Ss(function(){return HI("classes",function(e){var t,n=(_I(_I(_I(_I(_I(_I(_I(_I(_I(_I(t={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":!0===e.flip,"fa-flip-horizontal":"horizontal"===e.flip||"both"===e.flip,"fa-flip-vertical":"vertical"===e.flip||"both"===e.flip},"fa-".concat(e.size),null!==e.size),"fa-rotate-".concat(e.rotation),null!==e.rotation),"fa-pull-".concat(e.pull),null!==e.pull),"fa-swap-opacity",e.swapOpacity),"fa-bounce",e.bounce),"fa-shake",e.shake),"fa-beat",e.beat),"fa-fade",e.fade),"fa-beat-fade",e.beatFade),"fa-flash",e.flash),_I(_I(t,"fa-spin-pulse",e.spinPulse),"fa-spin-reverse",e.spinReverse));return Object.keys(n).map(function(e){return n[e]?e:null}).filter(function(e){return e})}(e))}),i=Ss(function(){return HI("transform","string"==typeof e.transform?vI.transform(e.transform):e.transform)}),o=Ss(function(){return HI("mask",QI(e.mask))}),a=Ss(function(){return bI(r.value,xI(xI(xI(xI({},s.value),i.value),o.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});_r(a,function(e){if(!e)return function(){var e;!WI&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find one or more icon(s)",r.value,o.value)},{immediate:!0});var c=Ss(function(){return a.value?KI(a.value.abstract[0],{},n):null});return function(){return c.value}}});yI.add({prefix:"fas",iconName:"arrows-spin",icon:[512,512,[],"e4bb","M256 96c38.4 0 73.7 13.5 101.3 36.1l-32.6 32.6c-4.6 4.6-5.9 11.5-3.5 17.4s8.3 9.9 14.8 9.9l112 0c8.8 0 16-7.2 16-16l0-112c0-6.5-3.9-12.3-9.9-14.8s-12.9-1.1-17.4 3.5l-34 34C363.4 52.6 312.1 32 256 32c-10.9 0-21.5 .8-32 2.3l0 64.9c10.3-2.1 21-3.2 32-3.2zM132.1 154.7l32.6 32.6c4.6 4.6 11.5 5.9 17.4 3.5s9.9-8.3 9.9-14.8l0-112c0-8.8-7.2-16-16-16L64 48c-6.5 0-12.3 3.9-14.8 9.9s-1.1 12.9 3.5 17.4l34 34C52.6 148.6 32 199.9 32 256c0 10.9 .8 21.5 2.3 32l64.9 0c-2.1-10.3-3.2-21-3.2-32c0-38.4 13.5-73.7 36.1-101.3zM477.7 224l-64.9 0c2.1 10.3 3.2 21 3.2 32c0 38.4-13.5 73.7-36.1 101.3l-32.6-32.6c-4.6-4.6-11.5-5.9-17.4-3.5s-9.9 8.3-9.9 14.8l0 112c0 8.8 7.2 16 16 16l112 0c6.5 0 12.3-3.9 14.8-9.9s1.1-12.9-3.5-17.4l-34-34C459.4 363.4 480 312.1 480 256c0-10.9-.8-21.5-2.3-32zM256 416c-38.4 0-73.7-13.5-101.3-36.1l32.6-32.6c4.6-4.6 5.9-11.5 3.5-17.4s-8.3-9.9-14.8-9.9L64 320c-8.8 0-16 7.2-16 16l0 112c0 6.5 3.9 12.3 9.9 14.8s12.9 1.1 17.4-3.5l34-34C148.6 459.4 199.9 480 256 480c10.9 0 21.5-.8 32-2.3l0-64.9c-10.3 2.1-21 3.2-32 3.2z"]},{prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]}),e||"undefined"==typeof console||(r.forEach(e=>{const r=console[e];if("function"!=typeof r)return;if(r.__wsDevLoggerPatched)return;const o=function(...o){try{a={level:e,message:s(o)},i()&&(t&&"function"==typeof t.addDevLogEntry?t.addDevLogEntry(a):(n.push(a),n.length>1e3&&n.splice(0,n.length-1e3)))}catch{}var a;return r.apply(this,o)};o.__wsDevLoggerPatched=!0,o.__wsDevLoggerOriginal=r,console[e]=o}),e=!0);const YI=((...e)=>{const t=(Zs||(Zs=mr(Xs))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){return x(e)?document.querySelector(e):e}(e);if(!r)return;const s=t._component;w(s)||s.render||s.template||(s.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const i=n(r,!1,function(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t})(lS);YI.use(function(){const e=se(!0),t=e.run(()=>_t({}));let n=[],r=[];const s=wt({install(e){ti(s),s._a=e,e.provide(ni,s),e.config.globalProperties.$pinia=s,r.forEach(e=>n.push(e)),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}()),YI.component("font-awesome-icon",JI),YI.mount("#app"),"serviceWorker"in navigator?"https:"!==window.location.protocol||"localhost"===window.location.hostname?(navigator.serviceWorker.getRegistrations().then(e=>e.forEach(e=>e.unregister())),window.caches&&"function"==typeof window.caches.keys&&window.caches.keys().then(e=>{e.forEach(e=>{e&&e.startsWith("websync-")&&window.caches.delete(e)})}),console.log("[App] Service Worker disabled for dev/non-HTTPS context; caches cleared")):window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[App] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[App] New service worker available - reload to update")})})}).catch(e=>{console.log("[App] Service Worker registration failed:",e.message)})}):console.log("[App] Service Worker not supported in this context (FileMaker WebViewer mode)")</script><style crossorigin rel="stylesheet">/*! tailwindcss v4.1.6 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::backdrop,:after,:before{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:host,:root{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-teal-600:oklch(60% .118 184.704);--color-teal-700:oklch(51.1% .096 186.391);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-gray-950:oklch(13% .028 261.692);--color-black:#000;--color-white:#fff;--spacing:.25rem;--breakpoint-2xl:96rem;--container-lg:32rem;--container-3xl:48rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--animate-spin:spin 1s linear infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,::backdrop,:after,:before{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}:host,html{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,optgroup,select,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.invisible{visibility:hidden}.visible{visibility:visible}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.z-30{z-index:30}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-auto{margin-inline:auto}.my-8{margin-block:calc(var(--spacing)*8)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline-flex{display:inline-flex}.table{display:table}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-8{height:calc(var(--spacing)*8)}.max-h-\[60vh\]{max-height:60vh}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-20{width:calc(var(--spacing)*20)}.w-full{width:100%}.max-w-3xl{max-width:var(--container-3xl)}.max-w-lg{max-width:var(--container-lg)}.max-w-screen-2xl{max-width:var(--breakpoint-2xl)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\[140px\]{min-width:140px}.min-w-\[150px\]{min-width:150px}.flex-1{flex:1}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.rotate-90{rotate:90deg}.rotate-180{rotate:180deg}.rotate-270{rotate:270deg}.transform{transform:var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,)}.animate-spin{animation:var(--animate-spin)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-3>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*3)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-4>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*4)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-6>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*6)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-x-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-gray-900>:not(:last-child)){border-color:var(--color-gray-900)}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-blue-500\/40{border-color:#3080ff66}@supports (color:color-mix(in lab,red,red)){.border-blue-500\/40{border-color:color-mix(in oklab,var(--color-blue-500)40%,transparent)}}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-gray-700\/70{border-color:#364153b3}@supports (color:color-mix(in lab,red,red)){.border-gray-700\/70{border-color:color-mix(in oklab,var(--color-gray-700)70%,transparent)}}.border-gray-800{border-color:var(--color-gray-800)}.border-red-500\/40{border-color:#fb2c3666}@supports (color:color-mix(in lab,red,red)){.border-red-500\/40{border-color:color-mix(in oklab,var(--color-red-500)40%,transparent)}}.border-yellow-500\/40{border-color:#edb20066}@supports (color:color-mix(in lab,red,red)){.border-yellow-500\/40{border-color:color-mix(in oklab,var(--color-yellow-500)40%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-500\/10{background-color:#3080ff1a}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\/10{background-color:color-mix(in oklab,var(--color-blue-500)10%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-700\/30{background-color:#3641534d}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\/30{background-color:color-mix(in oklab,var(--color-gray-700)30%,transparent)}}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-gray-950{background-color:var(--color-gray-950)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-teal-600{background-color:var(--color-teal-600)}.bg-transparent{background-color:#0000}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-yellow-500\/10{background-color:#edb2001a}@supports (color:color-mix(in lab,red,red)){.bg-yellow-500\/10{background-color:color-mix(in oklab,var(--color-yellow-500)10%,transparent)}}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-500{--tw-gradient-from:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-400{--tw-gradient-to:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-400{--tw-gradient-to:var(--color-green-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-0{padding-inline:calc(var(--spacing)*0)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-10{padding-block:calc(var(--spacing)*10)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-6{padding-top:calc(var(--spacing)*6)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[10px\]{font-size:10px}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.break-words{overflow-wrap:break-word}.break-all{word-break:break-all}.whitespace-pre-wrap{white-space:pre-wrap}.text-blue-300{color:var(--color-blue-300)}.text-blue-400{color:var(--color-blue-400)}.text-gray-100{color:var(--color-gray-100)}.text-gray-200{color:var(--color-gray-200)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-indigo-400{color:var(--color-indigo-400)}.text-purple-400{color:var(--color-purple-400)}.text-red-300{color:var(--color-red-300)}.text-red-400{color:var(--color-red-400)}.text-white{color:var(--color-white)}.text-yellow-300{color:var(--color-yellow-300)}.text-yellow-400{color:var(--color-yellow-400)}.capitalize{text-transform:capitalize}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.filter{filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,visibility,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-700{--tw-duration:.7s;transition-duration:.7s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}@media (hover:hover){.hover\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\:bg-gray-600:hover{background-color:var(--color-gray-600)}.hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.hover\:bg-gray-700\/40:hover{background-color:#36415366}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-700\/40:hover{background-color:color-mix(in oklab,var(--color-gray-700)40%,transparent)}}.hover\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\:bg-indigo-500:hover{background-color:var(--color-indigo-500)}.hover\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\:text-white:hover{color:var(--color-white)}}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\:ring-2:focus-visible{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-visible\:ring-blue-500:focus-visible{--tw-ring-color:var(--color-blue-500)}.focus-visible\:ring-gray-500:focus-visible{--tw-ring-color:var(--color-gray-500)}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-40:disabled{opacity:.4}@media (min-width:40rem){.sm\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\:p-4{padding:calc(var(--spacing)*4)}.sm\:px-0{padding-inline:calc(var(--spacing)*0)}.sm\:px-4{padding-inline:calc(var(--spacing)*4)}}@media (min-width:48rem){.md\:flex{display:flex}}@media (min-width:64rem){.lg\:col-span-2{grid-column:span 2/span 2}.lg\:col-span-5{grid-column:span 5/span 5}.lg\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}}}body,html{overscroll-behavior:none;-webkit-overflow-scrolling:touch;width:100%;max-width:100%;height:100%;margin:0;padding:0;overflow-x:auto}body{position:static;overflow-y:auto}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}[data-v-bea940fa]::-webkit-scrollbar{width:6px}[data-v-bea940fa]::-webkit-scrollbar-track{background:#374151}[data-v-bea940fa]::-webkit-scrollbar-thumb{background:#6b7280;border-radius:3px}[data-v-bea940fa]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style></head><body><div id="app"></div></body></html>